(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Bl=!1,Vl=(e,t)=>e===t,Qe=Symbol("solid-proxy"),qa=typeof Proxy=="function",xi=Symbol("solid-track"),yr={equals:Vl};let Da=Va;const St=1,br=2,ja={owned:null,cleanups:null,context:null,owner:null};var te=null;let li=null,Hl=null,le=null,Se=null,ct=null,Yr=0;function tn(e,t){const n=le,r=te,i=e.length===0,s=t===void 0?r:t,a=i?ja:{owned:null,cleanups:null,context:s?s.context:null,owner:s},o=i?e:()=>e(()=>Oe(()=>Rn(a)));te=a,le=null;try{return $t(o,!0)}finally{le=n,te=r}}function j(e,t){t=t?Object.assign({},yr,t):yr;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),Ba(n,i));return[Ua.bind(n),r]}function G(e,t,n){const r=Yi(e,t,!1,St);Kn(r)}function xe(e,t,n){Da=Ql;const r=Yi(e,t,!1,St);(!n||!n.render)&&(r.user=!0),ct?ct.push(r):Kn(r)}function ae(e,t,n){n=n?Object.assign({},yr,n):yr;const r=Yi(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Kn(r),Ua.bind(r)}function Fa(e){return $t(e,!1)}function Oe(e){if(le===null)return e();const t=le;le=null;try{return e()}finally{le=t}}function Bi(e,t,n){const r=Array.isArray(e);let i,s=n&&n.defer;return a=>{let o;if(r){o=Array(e.length);for(let c=0;c<e.length;c++)o[c]=e[c]()}else o=e();if(s)return s=!1,a;const l=Oe(()=>t(o,i,a));return i=o,l}}function Wn(e){xe(()=>Oe(e))}function Te(e){return te===null||(te.cleanups===null?te.cleanups=[e]:te.cleanups.push(e)),e}function _i(){return le}function Vi(){return te}function Hi(e,t){const n=te,r=le;te=e,le=null;try{return $t(t,!0)}catch(i){Wi(i)}finally{te=n,le=r}}function zl(e){const t=le,n=te;return Promise.resolve().then(()=>{le=t,te=n;let r;return $t(e,!1),le=te=null,r?r.done:void 0})}const[sv,av]=j(!1);function Wr(e,t){const n=Symbol("context");return{id:n,Provider:Gl(n),defaultValue:e}}function Qn(e){let t;return te&&te.context&&(t=te.context[e.id])!==void 0?t:e.defaultValue}function zi(e){const t=ae(e),n=ae(()=>ki(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Ua(){if(this.sources&&this.state)if(this.state===St)Kn(this);else{const e=Se;Se=null,$t(()=>_r(this),!1),Se=e}if(le){const e=this.observers?this.observers.length:0;le.sources?(le.sources.push(this),le.sourceSlots.push(e)):(le.sources=[this],le.sourceSlots=[e]),this.observers?(this.observers.push(le),this.observerSlots.push(le.sources.length-1)):(this.observers=[le],this.observerSlots=[le.sources.length-1])}return this.value}function Ba(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&$t(()=>{for(let i=0;i<e.observers.length;i+=1){const s=e.observers[i],a=li&&li.running;a&&li.disposed.has(s),(a?!s.tState:!s.state)&&(s.pure?Se.push(s):ct.push(s),s.observers&&Ha(s)),a||(s.state=St)}if(Se.length>1e6)throw Se=[],new Error},!1)),t}function Kn(e){if(!e.fn)return;Rn(e);const t=Yr;Yl(e,e.value,t)}function Yl(e,t,n){let r;const i=te,s=le;le=te=e;try{r=e.fn(t)}catch(a){return e.pure&&(e.state=St,e.owned&&e.owned.forEach(Rn),e.owned=null),e.updatedAt=n+1,Wi(a)}finally{le=s,te=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Ba(e,r):e.value=r,e.updatedAt=n)}function Yi(e,t,n,r=St,i){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:te,context:te?te.context:null,pure:n};return te===null||te!==ja&&(te.owned?te.owned.push(s):te.owned=[s]),s}function xr(e){if(e.state===0)return;if(e.state===br)return _r(e);if(e.suspense&&Oe(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Yr);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===St)Kn(e);else if(e.state===br){const r=Se;Se=null,$t(()=>_r(e,t[0]),!1),Se=r}}function $t(e,t){if(Se)return e();let n=!1;t||(Se=[]),ct?n=!0:ct=[],Yr++;try{const r=e();return Wl(n),r}catch(r){n||(ct=null),Se=null,Wi(r)}}function Wl(e){if(Se&&(Va(Se),Se=null),e)return;const t=ct;ct=null,t.length&&$t(()=>Da(t),!1)}function Va(e){for(let t=0;t<e.length;t++)xr(e[t])}function Ql(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:xr(r)}for(t=0;t<n;t++)xr(e[t])}function _r(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const i=r.state;i===St?r!==t&&(!r.updatedAt||r.updatedAt<Yr)&&xr(r):i===br&&_r(r,t)}}}function Ha(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=br,n.pure?Se.push(n):ct.push(n),n.observers&&Ha(n))}}function Rn(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const s=i.pop(),a=n.observerSlots.pop();r<i.length&&(s.sourceSlots[a]=r,i[r]=s,n.observerSlots[r]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Rn(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Rn(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Kl(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Wi(e,t=te){throw Kl(e)}function ki(e){if(typeof e=="function"&&!e.length)return ki(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=ki(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Gl(e,t){return function(r){let i;return G(()=>i=Oe(()=>(te.context={...te.context,[e]:r.value},zi(()=>r.children))),void 0),i}}const Xl=Symbol("fallback");function Os(e){for(let t=0;t<e.length;t++)e[t]()}function Jl(e,t,n={}){let r=[],i=[],s=[],a=0,o=t.length>1?[]:null;return Te(()=>Os(s)),()=>{let l=e()||[],c=l.length,f,u;return l[xi],Oe(()=>{let p,_,x,A,O,m,v,y,k;if(c===0)a!==0&&(Os(s),s=[],r=[],i=[],a=0,o&&(o=[])),n.fallback&&(r=[Xl],i[0]=tn(C=>(s[0]=C,n.fallback())),a=1);else if(a===0){for(i=new Array(c),u=0;u<c;u++)r[u]=l[u],i[u]=tn(d);a=c}else{for(x=new Array(c),A=new Array(c),o&&(O=new Array(c)),m=0,v=Math.min(a,c);m<v&&r[m]===l[m];m++);for(v=a-1,y=c-1;v>=m&&y>=m&&r[v]===l[y];v--,y--)x[y]=i[v],A[y]=s[v],o&&(O[y]=o[v]);for(p=new Map,_=new Array(y+1),u=y;u>=m;u--)k=l[u],f=p.get(k),_[u]=f===void 0?-1:f,p.set(k,u);for(f=m;f<=v;f++)k=r[f],u=p.get(k),u!==void 0&&u!==-1?(x[u]=i[f],A[u]=s[f],o&&(O[u]=o[f]),u=_[u],p.set(k,u)):s[f]();for(u=m;u<c;u++)u in x?(i[u]=x[u],s[u]=A[u],o&&(o[u]=O[u],o[u](u))):i[u]=tn(d);i=i.slice(0,a=c),r=l.slice(0)}return i});function d(p){if(s[u]=p,o){const[_,x]=j(u);return o[u]=x,t(l[u],_)}return t(l[u])}}}function E(e,t){return Oe(()=>e(t||{}))}function er(){return!0}const Si={get(e,t,n){return t===Qe?n:e.get(t)},has(e,t){return t===Qe?!0:e.has(t)},set:er,deleteProperty:er,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:er,deleteProperty:er}},ownKeys(e){return e.keys()}};function ci(e){return(e=typeof e=="function"?e():e)?e:{}}function Zl(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function X(...e){let t=!1;for(let a=0;a<e.length;a++){const o=e[a];t=t||!!o&&Qe in o,e[a]=typeof o=="function"?(t=!0,ae(o)):o}if(qa&&t)return new Proxy({get(a){for(let o=e.length-1;o>=0;o--){const l=ci(e[o])[a];if(l!==void 0)return l}},has(a){for(let o=e.length-1;o>=0;o--)if(a in ci(e[o]))return!0;return!1},keys(){const a=[];for(let o=0;o<e.length;o++)a.push(...Object.keys(ci(e[o])));return[...new Set(a)]}},Si);const n={},r=Object.create(null);for(let a=e.length-1;a>=0;a--){const o=e[a];if(!o)continue;const l=Object.getOwnPropertyNames(o);for(let c=l.length-1;c>=0;c--){const f=l[c];if(f==="__proto__"||f==="constructor")continue;const u=Object.getOwnPropertyDescriptor(o,f);if(!r[f])r[f]=u.get?{enumerable:!0,configurable:!0,get:Zl.bind(n[f]=[u.get.bind(o)])}:u.value!==void 0?u:void 0;else{const d=n[f];d&&(u.get?d.push(u.get.bind(o)):u.value!==void 0&&d.push(()=>u.value))}}}const i={},s=Object.keys(r);for(let a=s.length-1;a>=0;a--){const o=s[a],l=r[o];l&&l.get?Object.defineProperty(i,o,l):i[o]=l?l.value:void 0}return i}function za(e,...t){if(qa&&Qe in e){const i=new Set(t.length>1?t.flat():t[0]),s=t.map(a=>new Proxy({get(o){return a.includes(o)?e[o]:void 0},has(o){return a.includes(o)&&o in e},keys(){return a.filter(o=>o in e)}},Si));return s.push(new Proxy({get(a){return i.has(a)?void 0:e[a]},has(a){return i.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!i.has(a))}},Si)),s}const n={},r=t.map(()=>({}));for(const i of Object.getOwnPropertyNames(e)){const s=Object.getOwnPropertyDescriptor(e,i),a=!s.get&&!s.set&&s.enumerable&&s.writable&&s.configurable;let o=!1,l=0;for(const c of t)c.includes(i)&&(o=!0,a?r[l][i]=s.value:Object.defineProperty(r[l],i,s)),++l;o||(a?n[i]=s.value:Object.defineProperty(n,i,s))}return[...r,n]}let ec=0;function Ya(){return`cl-${ec++}`}const tc=e=>`Stale read from <${e}>.`;function bt(e){const t="fallback"in e&&{fallback:()=>e.fallback};return ae(Jl(()=>e.each,e.children,t||void 0))}function me(e){const t=e.keyed,n=ae(()=>e.when,void 0,void 0),r=t?n:ae(n,void 0,{equals:(i,s)=>!i==!s});return ae(()=>{const i=r();if(i){const s=e.children;return typeof s=="function"&&s.length>0?Oe(()=>s(t?i:()=>{if(!Oe(r))throw tc("Show");return n()})):s}return e.fallback},void 0,void 0)}const nc=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],rc=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...nc]),ic=new Set(["innerHTML","textContent","innerText","children"]),sc=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),ac=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function oc(e,t){const n=ac[e];return typeof n=="object"?n[t]?n.$:void 0:n}const lc=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),cc={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},xt=e=>ae(()=>e());function uc(e,t,n){let r=n.length,i=t.length,s=r,a=0,o=0,l=t[i-1].nextSibling,c=null;for(;a<i||o<s;){if(t[a]===n[o]){a++,o++;continue}for(;t[i-1]===n[s-1];)i--,s--;if(i===a){const f=s<r?o?n[o-1].nextSibling:n[s-o]:l;for(;o<s;)e.insertBefore(n[o++],f)}else if(s===o)for(;a<i;)(!c||!c.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[s-1]&&n[o]===t[i-1]){const f=t[--i].nextSibling;e.insertBefore(n[o++],t[a++].nextSibling),e.insertBefore(n[--s],f),t[i]=n[s]}else{if(!c){c=new Map;let u=o;for(;u<s;)c.set(n[u],u++)}const f=c.get(t[a]);if(f!=null)if(o<f&&f<s){let u=a,d=1,p;for(;++u<i&&u<s&&!((p=c.get(t[u]))==null||p!==f+d);)d++;if(d>f-o){const _=t[a];for(;o<f;)e.insertBefore(n[o++],_)}else e.replaceChild(n[o++],t[a++])}else a++;else t[a++].remove()}}}const Ts="_$DX_DELEGATE";function fc(e,t,n,r={}){let i;return tn(s=>{i=s,t===document?e():N(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function T(e,t,n,r){let i;const s=()=>{const o=document.createElement("template");return o.innerHTML=e,o.content.firstChild},a=()=>(i||(i=s())).cloneNode(!0);return a.cloneNode=a,a}function Me(e,t=window.document){const n=t[Ts]||(t[Ts]=new Set);for(let r=0,i=e.length;r<i;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,wc))}}function ke(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function dc(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function hc(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function Ce(e,t){t==null?e.removeAttribute("class"):e.className=t}function Je(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=s=>i.call(e,n[1],s))}else e.addEventListener(t,n,typeof n!="function"&&n)}function gc(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let s,a;for(s=0,a=i.length;s<a;s++){const o=i[s];!o||o==="undefined"||t[o]||(Ms(e,o,!1),delete n[o])}for(s=0,a=r.length;s<a;s++){const o=r[s],l=!!t[o];!o||o==="undefined"||n[o]===l||!l||(Ms(e,o,!0),n[o]=l)}return n}function Qr(e,t,n){if(!t)return n?ke(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)i=t[s],i!==n[s]&&(r.setProperty(s,i),n[s]=i);return n}function Sn(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function Ae(e,t={},n,r){const i={};return r||G(()=>i.children=On(e,t.children,i.children)),G(()=>typeof t.ref=="function"&&Nn(t.ref,e)),G(()=>pc(e,t,n,!0,i,!0)),i}function Nn(e,t,n){return Oe(()=>e(t,n))}function N(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return On(e,t,r,n);G(i=>On(e,t(),i,n),r)}function pc(e,t,n,r,i={},s=!1){t||(t={});for(const a in i)if(!(a in t)){if(a==="children")continue;i[a]=Is(e,a,null,i[a],n,s,t)}for(const a in t){if(a==="children")continue;const o=t[a];i[a]=Is(e,a,o,i[a],n,s,t)}}function mc(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Ms(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,s=r.length;i<s;i++)e.classList.toggle(r[i],n)}function Is(e,t,n,r,i,s,a){let o,l,c,f,u;if(t==="style")return Qr(e,n,r);if(t==="classList")return gc(e,n,r);if(n===r)return r;if(t==="ref")s||n(e);else if(t.slice(0,3)==="on:"){const d=t.slice(3);r&&e.removeEventListener(d,r,typeof r!="function"&&r),n&&e.addEventListener(d,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const d=t.slice(10);r&&e.removeEventListener(d,r,!0),n&&e.addEventListener(d,n,!0)}else if(t.slice(0,2)==="on"){const d=t.slice(2).toLowerCase(),p=lc.has(d);if(!p&&r){const _=Array.isArray(r)?r[0]:r;e.removeEventListener(d,_)}(p||n)&&(Je(e,d,n,p),p&&Me([d]))}else if(t.slice(0,5)==="attr:")ke(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")hc(e,t.slice(5),n);else if((u=t.slice(0,5)==="prop:")||(c=ic.has(t))||!i&&((f=oc(t,e.tagName))||(l=rc.has(t)))||(o=e.nodeName.includes("-")||"is"in a))u&&(t=t.slice(5),l=!0),t==="class"||t==="className"?Ce(e,n):o&&!l&&!c?e[mc(t)]=n:e[f||t]=n;else{const d=i&&t.indexOf(":")>-1&&cc[t.split(":")[0]];d?dc(e,d,t,n):ke(e,sc[t]||t,n)}return n}function wc(e){let t=e.target;const n=`$$${e.type}`,r=e.target,i=e.currentTarget,s=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),a=()=>{const l=t[n];if(l&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&s(t.host),!0},o=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();s(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!a());c++){if(t._$host){t=t._$host,o();break}if(t.parentNode===i)break}}else o();s(r)}function On(e,t,n,r,i){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,a=r!==void 0;if(e=a&&n[0]&&n[0].parentNode||e,s==="string"||s==="number"){if(s==="number"&&(t=t.toString(),t===n))return n;if(a){let o=n[0];o&&o.nodeType===3?o.data!==t&&(o.data=t):o=document.createTextNode(t),n=Wt(e,n,r,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||s==="boolean")n=Wt(e,n,r);else{if(s==="function")return G(()=>{let o=t();for(;typeof o=="function";)o=o();n=On(e,o,n,r)}),()=>n;if(Array.isArray(t)){const o=[],l=n&&Array.isArray(n);if($i(o,t,n,i))return G(()=>n=On(e,o,n,r,!0)),()=>n;if(o.length===0){if(n=Wt(e,n,r),a)return n}else l?n.length===0?Ls(e,o,r):uc(e,n,o):(n&&Wt(e),Ls(e,o));n=o}else if(t.nodeType){if(Array.isArray(n)){if(a)return n=Wt(e,n,r,t);Wt(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function $i(e,t,n,r){let i=!1;for(let s=0,a=t.length;s<a;s++){let o=t[s],l=n&&n[e.length],c;if(!(o==null||o===!0||o===!1))if((c=typeof o)=="object"&&o.nodeType)e.push(o);else if(Array.isArray(o))i=$i(e,o,l)||i;else if(c==="function")if(r){for(;typeof o=="function";)o=o();i=$i(e,Array.isArray(o)?o:[o],Array.isArray(l)?l:[l])||i}else e.push(o),i=!0;else{const f=String(o);l&&l.nodeType===3&&l.data===f?e.push(l):e.push(document.createTextNode(f))}}return i}function Ls(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function Wt(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let s=!1;for(let a=t.length-1;a>=0;a--){const o=t[a];if(i!==o){const l=o.parentNode===e;!s&&!a?l?e.replaceChild(i,o):e.insertBefore(i,n):l&&o.remove()}else s=!0}}else e.insertBefore(i,n);return[i]}const Wa=!1,vc="http://www.w3.org/2000/svg";function yc(e,t=!1,n=void 0){return t?document.createElementNS(vc,e):document.createElement(e,{is:n})}function bc(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,i=Vi();let s;return xe(()=>{s||(s=Hi(i,()=>ae(()=>e.children)));const a=r();if(a instanceof HTMLHeadElement){const[o,l]=j(!1),c=()=>l(!0);tn(f=>N(a,()=>o()?f():s(),null)),Te(c)}else{const o=yc(e.isSVG?"g":"div",e.isSVG),l=t&&o.attachShadow?o.attachShadow({mode:"open"}):o;Object.defineProperty(o,"_$host",{get(){return n.parentNode},configurable:!0}),N(l,s),a.appendChild(o),e.ref&&e.ref(o),Te(()=>a.removeChild(o))}},void 0,{render:!0}),n}function Qa(){let e=new Set;function t(i){return e.add(i),()=>e.delete(i)}let n=!1;function r(i,s){if(n)return!(n=!1);const a={to:i,options:s,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const o of e)o.listener({...a,from:o.location,retry:l=>{l&&(n=!0),o.navigate(i,{...s,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}let Ei;function Qi(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Ei=window.history.state._depth}Qi();function xc(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function _c(e,t){let n=!1;return()=>{const r=Ei;Qi();const i=r==null?null:Ei-r;if(n){n=!1;return}i&&t(i)?(n=!0,window.history.go(-i)):e()}}const kc=/^(?:[a-z0-9]+:)?\/\//i,Sc=/^\/+|(\/)\/+$/g,Ka="http://sr";function qt(e,t=!1){const n=e.replace(Sc,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function ur(e,t,n){if(kc.test(t))return;const r=qt(e),i=n&&qt(n);let s="";return!i||t.startsWith("/")?s=r:i.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+i:s=i,(s||"/")+qt(t,!s)}function $c(e,t){if(e==null)throw new Error(t);return e}function Ec(e,t){return qt(e).replace(/\/*(\*.*)?$/g,"")+qt(t)}function Ga(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Ac(e,t,n){const[r,i]=e.split("/*",2),s=r.split("/").filter(Boolean),a=s.length;return o=>{const l=o.split("/").filter(Boolean),c=l.length-a;if(c<0||c>0&&i===void 0&&!t)return null;const f={path:a?"":"/",params:{}},u=d=>n===void 0?void 0:n[d];for(let d=0;d<a;d++){const p=s[d],_=p[0]===":",x=_?l[d]:l[d].toLowerCase(),A=_?p.slice(1):p.toLowerCase();if(_&&ui(x,u(A)))f.params[A]=x;else if(_||!ui(x,A))return null;f.path+=`/${x}`}if(i){const d=c?l.slice(-c).join("/"):"";if(ui(d,u(i)))f.params[i]=d;else return null}return f}}function ui(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Cc(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((i,s)=>i+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Xa(e){const t=new Map,n=Vi();return new Proxy({},{get(r,i){return t.has(i)||Hi(n,()=>t.set(i,ae(()=>e()[i]))),t.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Pc(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([i,s])=>{s==null||s===""||s instanceof Array&&!s.length?n.delete(i):s instanceof Array?(n.delete(i),s.forEach(a=>{n.append(i,String(a))})):n.set(i,String(s))});const r=n.toString();return r?`?${r}`:""}function Ja(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const i=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)i.push(n+=t[1]),r=r.slice(t[0].length);return Ja(r).reduce((s,a)=>[...s,...i.map(o=>o+a)],[])}const Rc=100,Za=Wr(),Ki=Wr(),Gn=()=>$c(Qn(Za),"<A> and 'use' router primitives can be only used inside a Route."),Nc=()=>Qn(Ki)||Gn().base,Oc=e=>{const t=Nc();return ae(()=>t.resolvePath(e()))},Tc=e=>{const t=Gn();return ae(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},Et=()=>Gn().navigatorFactory(),Gi=()=>Gn().location,Kr=()=>Gn().params,Mc=()=>{const e=Gi(),t=Et(),n=(r,i)=>{const s=Oe(()=>Pc(e.search,r)+e.hash);t(s,{scroll:!1,resolve:!1,...i})};return[e.query,n]};function Ic(e,t=""){const{component:n,preload:r,load:i,children:s,info:a}=e,o=!s||Array.isArray(s)&&!s.length,l={key:e,component:n,preload:r||i,info:a};return eo(e.path).reduce((c,f)=>{for(const u of Ja(f)){const d=Ec(t,u);let p=o?d:d.split("/*",1)[0];p=p.split("/").map(_=>_.startsWith(":")||_.startsWith("*")?_:encodeURIComponent(_)).join("/"),c.push({...l,originalPath:f,pattern:p,matcher:Ac(p,!o,e.matchFilters)})}return c},[])}function Lc(e,t=0){return{routes:e,score:Cc(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let i=e.length-1;i>=0;i--){const s=e[i],a=s.matcher(n);if(!a)return null;r.unshift({...a,route:s})}return r}}}function eo(e){return Array.isArray(e)?e:[e]}function to(e,t="",n=[],r=[]){const i=eo(e);for(let s=0,a=i.length;s<a;s++){const o=i[s];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const l=Ic(o,t);for(const c of l){n.push(c);const f=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!f)to(o.children,c.pattern,n,r);else{const u=Lc([...n],r.length);r.push(u)}n.pop()}}}return n.length?r:r.sort((s,a)=>a.score-s.score)}function fi(e,t){for(let n=0,r=e.length;n<r;n++){const i=e[n].matcher(t);if(i)return i}return[]}function qc(e,t,n){const r=new URL(Ka),i=ae(f=>{const u=e();try{return new URL(u,r)}catch{return console.error(`Invalid path ${u}`),f}},r,{equals:(f,u)=>f.href===u.href}),s=ae(()=>i().pathname),a=ae(()=>i().search,!0),o=ae(()=>i().hash),l=()=>"",c=Bi(a,()=>Ga(i()));return{get pathname(){return s()},get search(){return a()},get hash(){return o()},get state(){return t()},get key(){return l()},query:n?n(c):Xa(c)}}let At;function Dc(){return At}function jc(e,t,n,r={}){const{signal:[i,s],utils:a={}}=e,o=a.parsePath||(M=>M),l=a.renderPath||(M=>M),c=a.beforeLeave||Qa(),f=ur("",r.base||"");if(f===void 0)throw new Error(`${f} is not a valid base path`);f&&!i().value&&s({value:f,replace:!0,scroll:!1});const[u,d]=j(!1);let p;const _=(M,F)=>{F.value===x()&&F.state===O()||(p===void 0&&d(!0),At=M,p=F,zl(()=>{p===F&&(A(p.value),m(p.state),k[1](U=>U.filter(q=>q.pending)))}).finally(()=>{p===F&&Fa(()=>{At=void 0,M==="navigate"&&S(p),d(!1),p=void 0})}))},[x,A]=j(i().value),[O,m]=j(i().state),v=qc(x,O,a.queryWrapper),y=[],k=j([]),C=ae(()=>typeof r.transformUrl=="function"?fi(t(),r.transformUrl(v.pathname)):fi(t(),v.pathname)),$=()=>{const M=C(),F={};for(let U=0;U<M.length;U++)Object.assign(F,M[U].params);return F},h=a.paramsWrapper?a.paramsWrapper($,t):Xa($),g={pattern:f,path:()=>f,outlet:()=>null,resolvePath(M){return ur(f,M)}};return G(Bi(i,M=>_("native",M),{defer:!0})),{base:g,location:v,params:h,isRouting:u,renderPath:l,parsePath:o,navigatorFactory:b,matches:C,beforeLeave:c,preloadRoute:P,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:k};function w(M,F,U){Oe(()=>{if(typeof F=="number"){F&&(a.go?a.go(F):console.warn("Router integration does not support relative routing"));return}const q=!F||F[0]==="?",{replace:Q,resolve:L,scroll:fe,state:B}={replace:!1,resolve:!q,scroll:!0,...U},z=L?M.resolvePath(F):ur(q&&v.pathname||"",F);if(z===void 0)throw new Error(`Path '${F}' is not a routable path`);if(y.length>=Rc)throw new Error("Too many redirects");const D=x();(z!==D||B!==O())&&(Wa||c.confirm(z,U)&&(y.push({value:D,replace:Q,scroll:fe,state:O()}),_("navigate",{value:z,state:B})))})}function b(M){return M=M||Qn(Ki)||g,(F,U)=>w(M,F,U)}function S(M){const F=y[0];F&&(s({...M,replace:F.replace,scroll:F.scroll}),y.length=0)}function P(M,F){const U=fi(t(),M.pathname),q=At;At="preload";for(let Q in U){const{route:L,params:fe}=U[Q];L.component&&L.component.preload&&L.component.preload();const{preload:B}=L;F&&B&&Hi(n(),()=>B({params:fe,location:{pathname:M.pathname,search:M.search,hash:M.hash,query:Ga(M),state:null,key:""},intent:"preload"}))}At=q}}function Fc(e,t,n,r){const{base:i,location:s,params:a}=e,{pattern:o,component:l,preload:c}=r().route,f=ae(()=>r().path);l&&l.preload&&l.preload();const u=c?c({params:a,location:s,intent:At||"initial"}):void 0;return{parent:t,pattern:o,path:f,outlet:()=>l?E(l,{params:a,location:s,data:u,get children(){return n()}}):n(),resolvePath(p){return ur(i.path(),p,f())}}}const Uc=e=>t=>{const{base:n}=t,r=zi(()=>t.children),i=ae(()=>to(r(),t.base||""));let s;const a=jc(e,i,()=>s,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),E(Za.Provider,{value:a,get children(){return E(Bc,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[xt(()=>(s=Vi())&&null),E(Vc,{routerState:a,get branches(){return i()}})]}})}})};function Bc(e){const t=e.routerState.location,n=e.routerState.params,r=ae(()=>e.preload&&Oe(()=>{e.preload({params:n,location:t,intent:Dc()||"initial"})}));return E(me,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:i=>E(i,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Vc(e){const t=[];let n;const r=ae(Bi(e.routerState.matches,(i,s,a)=>{let o=s&&i.length===s.length;const l=[];for(let c=0,f=i.length;c<f;c++){const u=s&&s[c],d=i[c];a&&u&&d.route.key===u.route.key?l[c]=a[c]:(o=!1,t[c]&&t[c](),tn(p=>{t[c]=p,l[c]=Fc(e.routerState,l[c-1]||e.routerState.base,qs(()=>r()[c+1]),()=>e.routerState.matches()[c])}))}return t.splice(i.length).forEach(c=>c()),a&&o?a:(n=l[0],l)}));return qs(()=>r()&&n)()}const qs=e=>()=>E(me,{get when(){return e()},keyed:!0,children:t=>E(Ki.Provider,{value:t,get children(){return t.outlet()}})}),qe=e=>{const t=zi(()=>e.children);return X(e,{get children(){return t()}})};function Hc([e,t],n,r){return[e,r?i=>t(r(i)):t]}function zc(e){let t=!1;const n=i=>typeof i=="string"?{value:i}:i,r=Hc(j(n(e.get()),{equals:(i,s)=>i.value===s.value&&i.state===s.state}),void 0,i=>(!t&&e.set(i),i));return e.init&&Te(e.init((i=e.get())=>{t=!0,r[1](n(i)),t=!1})),Uc({signal:r,create:e.create,utils:e.utils})}function Yc(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Wc(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const Qc=new Map;function Kc(e=!0,t=!1,n="/_server",r){return i=>{const s=i.base.path(),a=i.navigatorFactory(i.base);let o,l;function c(x){return x.namespaceURI==="http://www.w3.org/2000/svg"}function f(x){if(x.defaultPrevented||x.button!==0||x.metaKey||x.altKey||x.ctrlKey||x.shiftKey)return;const A=x.composedPath().find(C=>C instanceof Node&&C.nodeName.toUpperCase()==="A");if(!A||t&&!A.hasAttribute("link"))return;const O=c(A),m=O?A.href.baseVal:A.href;if((O?A.target.baseVal:A.target)||!m&&!A.hasAttribute("state"))return;const y=(A.getAttribute("rel")||"").split(/\s+/);if(A.hasAttribute("download")||y&&y.includes("external"))return;const k=O?new URL(m,document.baseURI):new URL(m);if(!(k.origin!==window.location.origin||s&&k.pathname&&!k.pathname.toLowerCase().startsWith(s.toLowerCase())))return[A,k]}function u(x){const A=f(x);if(!A)return;const[O,m]=A,v=i.parsePath(m.pathname+m.search+m.hash),y=O.getAttribute("state");x.preventDefault(),a(v,{resolve:!1,replace:O.hasAttribute("replace"),scroll:!O.hasAttribute("noscroll"),state:y?JSON.parse(y):void 0})}function d(x){const A=f(x);if(!A)return;const[O,m]=A;r&&(m.pathname=r(m.pathname)),i.preloadRoute(m,O.getAttribute("preload")!=="false")}function p(x){clearTimeout(o);const A=f(x);if(!A)return l=null;const[O,m]=A;l!==O&&(r&&(m.pathname=r(m.pathname)),o=setTimeout(()=>{i.preloadRoute(m,O.getAttribute("preload")!=="false"),l=O},20))}function _(x){if(x.defaultPrevented)return;let A=x.submitter&&x.submitter.hasAttribute("formaction")?x.submitter.getAttribute("formaction"):x.target.getAttribute("action");if(!A)return;if(!A.startsWith("https://action/")){const m=new URL(A,Ka);if(A=i.parsePath(m.pathname+m.search),!A.startsWith(n))return}if(x.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const O=Qc.get(A);if(O){x.preventDefault();const m=new FormData(x.target,x.submitter);O.call({r:i,f:x.target},x.target.enctype==="multipart/form-data"?m:new URLSearchParams(m))}}Me(["click","submit"]),document.addEventListener("click",u),e&&(document.addEventListener("mousemove",p,{passive:!0}),document.addEventListener("focusin",d,{passive:!0}),document.addEventListener("touchstart",d,{passive:!0})),document.addEventListener("submit",_),Te(()=>{document.removeEventListener("click",u),e&&(document.removeEventListener("mousemove",p),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",_)})}}function Gc(e){const t=()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,i=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:i}},n=Qa();return zc({get:t,set({value:r,replace:i,scroll:s,state:a}){i?window.history.replaceState(xc(a),"",r):window.history.pushState(a,"",r),Wc(decodeURIComponent(window.location.hash.slice(1)),s),Qi()},init:r=>Yc(window,"popstate",_c(r,i=>{if(i&&i<0)return!n.confirm(i);{const s=t();return!n.confirm(s.value,{state:s.state})}})),create:Kc(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(e)}var Xc=T("<a>");function Jt(e){e=X({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=za(e,["href","state","class","activeClass","inactiveClass","end"]),n=Oc(()=>e.href),r=Tc(n),i=Gi(),s=ae(()=>{const a=n();if(a===void 0)return[!1,!1];const o=qt(a.split(/[?#]/,1)[0]).toLowerCase(),l=decodeURI(qt(i.pathname).toLowerCase());return[e.end?o===l:l.startsWith(o+"/")||l===o,o===l]});return(()=>{var a=Xc();return Ae(a,X(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!s()[0],[e.activeClass]:s()[0],...t.classList}},link:"",get"aria-current"(){return s()[1]?"page":void 0}}),!1,!1),a})()}const Ai=Symbol("store-raw"),nn=Symbol("store-node"),ot=Symbol("store-has"),no=Symbol("store-self");function ro(e){let t=e[Qe];if(!t&&(Object.defineProperty(e,Qe,{value:t=new Proxy(e,eu)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let i=0,s=n.length;i<s;i++){const a=n[i];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function kr(e){let t;return e!=null&&typeof e=="object"&&(e[Qe]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Tn(e,t=new Set){let n,r,i,s;if(n=e!=null&&e[Ai])return n;if(!kr(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,o=e.length;a<o;a++)i=e[a],(r=Tn(i,t))!==i&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let l=0,c=a.length;l<c;l++)s=a[l],!o[s].get&&(i=e[s],(r=Tn(i,t))!==i&&(e[s]=r))}return e}function Sr(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function Mn(e,t,n){if(e[t])return e[t];const[r,i]=j(n,{equals:!1,internal:!0});return r.$=i,e[t]=r}function Jc(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Qe||t===nn||(delete n.value,delete n.writable,n.get=()=>e[Qe][t]),n}function io(e){_i()&&Mn(Sr(e,nn),no)()}function Zc(e){return io(e),Reflect.ownKeys(e)}const eu={get(e,t,n){if(t===Ai)return e;if(t===Qe)return n;if(t===xi)return io(e),n;const r=Sr(e,nn),i=r[t];let s=i?i():e[t];if(t===nn||t===ot||t==="__proto__")return s;if(!i){const a=Object.getOwnPropertyDescriptor(e,t);_i()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(s=Mn(r,t,s)())}return kr(s)?ro(s):s},has(e,t){return t===Ai||t===Qe||t===xi||t===nn||t===ot||t==="__proto__"?!0:(_i()&&Mn(Sr(e,ot),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Zc,getOwnPropertyDescriptor:Jc};function $r(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],s=e.length;n===void 0?(delete e[t],e[ot]&&e[ot][t]&&i!==void 0&&e[ot][t].$()):(e[t]=n,e[ot]&&e[ot][t]&&i===void 0&&e[ot][t].$());let a=Sr(e,nn),o;if((o=Mn(a,t,i))&&o.$(()=>n),Array.isArray(e)&&e.length!==s){for(let l=e.length;l<s;l++)(o=a[l])&&o.$();(o=Mn(a,"length",s))&&o.$(e.length)}(o=a[no])&&o.$()}function so(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];$r(e,i,t[i])}}function tu(e,t){if(typeof t=="function"&&(t=t(e)),t=Tn(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const i=t[n];e[n]!==i&&$r(e,n,i)}$r(e,"length",r)}else so(e,t)}function wn(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const a=typeof r,o=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)wn(e,[r[l]].concat(t),n);return}else if(o&&a==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&wn(e,[l].concat(t),n);return}else if(o&&a==="object"){const{from:l=0,to:c=e.length-1,by:f=1}=r;for(let u=l;u<=c;u+=f)wn(e,[u].concat(t),n);return}else if(t.length>1){wn(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(i,n),s===i)||r===void 0&&s==null||(s=Tn(s),r===void 0||kr(i)&&kr(s)&&!Array.isArray(s)?so(i,s):$r(e,r,s))}function nu(...[e,t]){const n=Tn(e||{}),r=Array.isArray(n),i=ro(n);function s(...a){Fa(()=>{r&&a.length===1?tu(n,a[0]):wn(n,a)})}return[i,s]}var ru=T('<svg class="w-5 h-5 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6">'),iu=T('<svg class="w-5 h-5 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">'),su=T('<main class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50"><div class="flex flex-col items-center justify-center min-h-screen px-4"><div class="max-w-4xl w-full text-center"><div class=mb-8><div class="mx-auto w-20 h-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg"><svg class="w-10 h-10 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h1 class="text-6xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">CoRATES</h1><p class="text-xl md:text-2xl text-gray-600 mb-4 font-medium">Collaborative Research Appraisal Tool for Evidence Synthesis</p><p class="text-lg text-gray-500 mb-12 max-w-2xl mx-auto leading-relaxed">Streamline your systematic review process with our interactive AMSTAR 2 checklist tool. Create, score, and visualize research appraisals with confidence.</p><div class="flex flex-col sm:flex-row gap-4 justify-center mb-16"></div></div></div><div class="py-20 px-4 bg-white/50 backdrop-blur-sm"><div class="max-w-6xl mx-auto"><h2 class="text-3xl md:text-4xl font-bold text-center mb-16 text-gray-800">Why Choose CoRATES?</h2><div class="grid md:grid-cols-3 gap-8"><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-blue-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Works Offline</h3><p class="text-gray-600 leading-relaxed">Complete your assessments anywhere, anytime. No internet connection required once loaded.</p></div><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-green-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Auto-Save</h3><p class="text-gray-600 leading-relaxed">Never lose your progress. Your work is automatically saved as you go.</p></div><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-purple-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Visual Results</h3><p class="text-gray-600 leading-relaxed">Generate clear, professional charts and summaries of your AMSTAR 2 assessments.</p></div></div></div></div><div class="py-20 px-4"><div class="max-w-4xl mx-auto text-center"><h2 class="text-3xl md:text-4xl font-bold mb-8 text-gray-800">About AMSTAR 2</h2><p class="text-lg text-gray-600 leading-relaxed mb-8">AMSTAR 2 (A MeaSurement Tool to Assess systematic Reviews) is a critical appraisal tool for systematic reviews that include randomized or non-randomized studies of healthcare interventions.</p><div class="bg-blue-50 rounded-2xl p-8 border border-blue-100"><p class="text-blue-800 font-medium">Our tool makes it easy to apply the 16 AMSTAR 2 criteria to evaluate the methodological quality of systematic reviews, helping researchers make informed decisions about evidence quality.</p></div></div></div><footer class="py-12 px-4 bg-gray-50 border-t border-gray-200"><div class="max-w-4xl mx-auto text-center"><div class="flex flex-col sm:flex-row items-center justify-center gap-6 text-sm text-gray-500"><a href=https://github.com/InfinityBowman/amstar2-checklist-scoring-app target=_blank rel=noopener class="flex items-center gap-2 hover:text-blue-600 transition-colors duration-200"><svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>View on GitHub</a><span class=text-gray-300>•</span><span>Built for researchers, by researchers</span><span class=text-gray-300>•</span><span>Free & Open Source');function au(){return(()=>{var e=su(),t=e.firstChild,n=t.firstChild,r=n.firstChild,i=r.nextSibling,s=i.nextSibling,a=s.nextSibling,o=a.nextSibling;return N(o,E(Jt,{href:"/checklist/new",class:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",get children(){return[ru(),"Start New Checklist"]}}),null),N(o,E(Jt,{href:"/dashboard",class:"inline-flex items-center px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-blue-300 hover:text-blue-600 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",get children(){return[iu(),"View Saved Work"]}}),null),e})()}const $e={q1:{text:"1. Did the research questions and inclusion criteria for the review include the components of PICO?",columns:[{label:"For Yes:",options:["Population","Intervention","Comparator group","Outcome"]},{label:"Optional (recommended):",options:["Timeframe for follow-up"]},{label:"",options:["Yes","No"]}]},q2:{text:"2. Did the report of the review contain an explicit statement that the review methods were established prior to the conduct of the review and did the report justify any significant deviations from the protocol?",columns:[{label:"For Partial Yes:",description:"The authors state that they had a written protocol or guide that included ALL the following:",options:["review question(s)","a search strategy","inclusion/exclusion criteria","risk of bias assessment"]},{label:"For Yes:",description:"As for Partial Yes, plus the protocol should be registered and should also have specified:",options:["a meta-analysis/synthesis plan, if appropriate, and","a plan for investigating causes of heterogeneity","a plan for investigating causes of heterogeneity"]},{label:"",description:"",options:["Yes","Partial Yes","No"]}]},q3:{text:"3. Did the review authors explain their selection of the study designs for inclusion in the review?",columns:[{label:"For Yes, the review should satisfy ONE of the following:",options:["Explanation for including only RCTs ","OR Explanation for including only NRSI","OR Explanation for including both RCTs and NRSI"]},{label:"",options:["Yes","No"]}]},q4:{text:"4. Did the review authors use a comprehensive literature search strategy? ",columns:[{label:"For Partial Yes (all the following):",options:["searched at least 2 databases (relevant to research question)","provided key word and/or search strategy","justified publication restrictions (e.g. language)"]},{label:"For Yes, should also have (all the following):",options:["searched the reference lists / bibliographies of included studies","searched trial/study registries","included/consulted content experts in the field","where relevant, searched for grey literature","conducted search within 24 months of completion of the review"]},{label:"",options:["Yes","Partial Yes","No"]}]},q5:{text:"5. Did the review authors perform study selection in duplicate?",columns:[{label:"For Yes, either ONE of the following:",options:["at least two reviewers achieved consensus on which data to extract from included studies","OR two reviewers extracted data from a sample of eligible studies and achieved good agreement (at least 80 percent), with the remainder extracted by one reviewer."]},{label:"",options:["Yes","No"]}]},q6:{text:"6. Did the review authors perform data extraction in duplicate?",columns:[{label:"For Yes, either ONE of the following:",options:["at least two reviewers achieved consensus on which data to extract from included studies","OR two reviewers extracted data from a sample of eligible studies and achieved good agreement (at least 80 percent), with the remainder extracted by one reviewer."]},{label:"",options:["Yes","No"]}]},q7:{text:"7. Did the review authors provide a list of excluded studies and justify the exclusions?",columns:[{label:"For Partial Yes:",options:["provided a list of all potentially relevant studies that were read in full-text form but excluded from the review"]},{label:"For Yes, must also have:",options:["Justified the exclusion from the review of each potentially relevant study"]},{label:"",options:["Yes","Partial Yes","No"]}]},q8:{text:"8. Did the review authors describe the included studies in adequate detail?",columns:[{label:"For Partial Yes (ALL the following):",options:["described populations","described interventions","described comparators","described outcomes","described research designs"]},{label:"For Yes, should also have ALL the following:",options:["described population in detail","described comparator in detail (including doses where relevant)","described study’s setting in detail","timeframe for follow-up"]},{label:"",options:["Yes","Partial Yes","No"]}]},q9:{text:"9. Did the review authors use a satisfactory technique for assessing the risk of bias (RoB) in individual studies that were included in the review?",subtitle:"RCTs",columns:[{label:"For Partial Yes, must have assessed RoB from",options:["unconcealed allocation, and","lack of blinding of patients and assessors when assessing outcomes (unnecessary for objective outcomes such as all-cause mortality)"]},{label:"For Yes, must also have assessed RoB from:",options:["allocation sequence that was not truly random, and","selection of the reported result from among multiple measurements or analyses of a specified outcome"]},{label:"",description:"",options:["Yes","Partial Yes","No"," Includes only NRSI"]}],subtitle2:"NRSI",columns2:[{label:"For Partial Yes, must have assessed RoB:",options:["from confounding, and","from selection bias"]},{label:"For Yes, must also have assessed RoB:",options:["methods used to ascertain exposures and outcomes, and","selection of the reported result from among multiple measurements or analyses of a specified outcome"]},{label:"",options:["Yes","Partial Yes","No","Includes only RCTs"]}]},q10:{text:"10. Did the review authors report on the sources of funding for the studies included in the review?",columns:[{label:"For Yes:",options:["Must have reported on the sources of funding for individual studies included in the review. Note: Reporting that the reviewers looked for this information but it was not reported by study authors also qualifies"]},{label:"",options:["Yes","No"]}]},q11:{text:"11. If meta-analysis was performed did the review authors use appropriate methods for statistical combination of results?",subtitle:"RCTs",columns:[{label:"For Yes:",options:["The authors justified combining the data in a meta-analysis","AND they used an appropriate weighted technique to combine study results and adjusted for heterogeneity if present.","AND investigated the causes of any heterogeneity"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}],subtitle2:"NRSI",columns2:[{label:"For Yes:",options:["The authors justified combining the data in a meta-analysis","AND they used an appropriate weighted technique to combine study results, adjusting for heterogeneity if present","AND they statistically combined effect estimates from NRSI that were adjusted for confounding, rather than combining raw data, or justified combining raw data when adjusted effect estimates were not available","AND they reported separate summary estimates for RCTs and NRSI separately when both were included in the review"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q12:{text:"12. If meta-analysis was performed, did the review authors assess the potential impact of RoB in individual studies on the results of the meta-analysis or other evidence synthesis?",columns:[{label:"For Yes:",options:["included only low risk of bias RCTs","OR, if the pooled estimate was based on RCTs and/or NRSI at variable RoB, the authors performed analyses to investigate possible impact of RoB on summary estimates of effect."]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q13:{text:"13. Did the review authors account for RoB in individual studies when interpreting/ discussing the results of the review?",columns:[{label:"For Yes:",options:["included only low risk of bias RCTs","OR, if RCTs with moderate or high RoB, or NRSI were included the review provided a discussion of the likely impact of RoB on the results"]},{label:"",options:["Yes","No"]}]},q14:{text:"14. Did the review authors provide a satisfactory explanation for, and discussion of, any heterogeneity observed in the results of the review?",columns:[{label:"For Yes:",options:["There was no significant heterogeneity in the results","OR if heterogeneity was present the authors performed an investigation of sources of any heterogeneity in the results and discussed the impact of this on the results of the review"]},{label:"",options:["Yes","No"]}]},q15:{text:"15. If they performed quantitative synthesis did the review authors carry out an adequate investigation of publication bias (small study bias) and discuss its likely impact on the results of the review?",columns:[{label:"For Yes:",options:["performed graphical or statistical tests for publication bias and discussed the likelihood and magnitude of impact of publication bias"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q16:{text:"16. Did the review authors report any potential sources of conflict of interest, including any funding they received for conducting the review?",options:["Yes","Partial Yes","No"],columns:[{label:"For Yes:",options:["The authors reported no competing interests OR","The authors described their funding sources and how they managed potential conflicts of interest"]},{label:"",options:["Yes","No"]}]}},ou="corates-app-db",_t="checklists",nt="projects",lu=1,ao=new BroadcastChannel("corates-sync");function Gr(){ao.postMessage("initiate-sync")}function cu(e){ao.onmessage=t=>{t.data==="initiate-sync"&&e()}}function an(e){return JSON.parse(JSON.stringify(e))}function Ht(){return new Promise((e,t)=>{const n=indexedDB.open(ou,lu);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(_t)||r.createObjectStore(_t,{keyPath:"id"}),r.objectStoreNames.contains(nt)||r.createObjectStore(nt,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})}async function Ds(e){const t=await Ht();return e=an(e),new Promise((n,r)=>{const i=t.transaction(_t,"readwrite");i.objectStore(_t).put(e),i.oncomplete=()=>{n(),Gr()},i.onerror=()=>r(i.error)})}async function oo(){const e=await Ht();return new Promise((t,n)=>{const s=e.transaction(_t,"readonly").objectStore(_t).getAll();s.onsuccess=()=>t(s.result),s.onerror=()=>n(s.error)})}async function uu(e){const t=await Ht();return new Promise((n,r)=>{const i=t.transaction(_t,"readwrite");i.objectStore(_t).delete(e),i.oncomplete=()=>{n(),Gr()},i.onerror=()=>r(i.error)})}async function hn(e){const t=await Ht();return e=an(e),new Promise((n,r)=>{const i=t.transaction(nt,"readwrite");i.objectStore(nt).put(e),i.oncomplete=()=>{n(),Gr()},i.onerror=()=>r(i.error)})}async function Xr(e){const t=await Ht();return new Promise((n,r)=>{const s=t.transaction(nt,"readonly").objectStore(nt).get(e);s.onsuccess=()=>n(s.result),s.onerror=()=>r(s.error)})}async function lo(){const e=await Ht();return new Promise((t,n)=>{const s=e.transaction(nt,"readonly").objectStore(nt).getAll();s.onsuccess=()=>t(s.result),s.onerror=()=>n(s.error)})}async function js(e,t,n){try{const r=await Xr(e);if(!r)throw new Error(`Project with ID ${e} not found`);r.reviews||(r.reviews=[]);const i=r.reviews.findIndex(o=>o.id===t);if(i===-1)throw new Error(`Review with ID ${t} not found in project ${e}`);const s=r.reviews[i];s.checklists||(s.checklists=[]);const a=s.checklists.findIndex(o=>o.id===n.id);return a>=0?s.checklists[a]=an(n):s.checklists.push(an(n)),await hn(r),r}catch(r){throw console.error("Error saving checklist to review:",r),r}}async function fu(e,t,n){try{const r=await Xr(e);if(!r)throw new Error(`Project with ID ${e} not found`);r.reviews||(r.reviews=[]);const i=r.reviews.findIndex(o=>o.id===t);if(i===-1)throw new Error(`Review with ID ${t} not found in project ${e}`);const s=r.reviews[i];s.checklists||(s.checklists=[]);const a=s.checklists.length;return s.checklists=s.checklists.filter(o=>o.id!==n),s.checklists.length===a?!1:(await hn(r),!0)}catch(r){throw console.error("Error deleting checklist from review:",r),r}}async function Fs(e,t){try{const n=await Xr(e);if(!n)throw new Error(`Project with ID ${e} not found`);n.reviews||(n.reviews=[]);const r=n.reviews.findIndex(i=>i.id===t.id);return r>=0?n.reviews[r]=an(t):n.reviews.push(an(t)),await hn(n),n}catch(n){console.error("Error saving review to project:",n)}}async function du(e,t){try{const n=await Xr(e);if(!n)throw new Error(`Project with ID ${e} not found`);n.reviews||(n.reviews=[]);const r=n.reviews.length;return n.reviews=n.reviews.filter(i=>i.id!==t),n.reviews.length===r?!1:(await hn(n),!0)}catch(n){throw console.error("Error deleting review from project:",n),n}}async function hu(e){const t=await Ht();return new Promise((n,r)=>{const i=t.transaction(nt,"readwrite");i.objectStore(nt).delete(e),i.oncomplete=()=>{n(),Gr()},i.onerror=()=>r(i.error)})}async function Dt(){const[e,t]=await Promise.all([lo(),oo()]),n=new Set;for(const i of e){n.add(i.id);for(const s of i.reviews||[]){n.add(s.id);for(const a of s.checklists||[])n.add(a.id)}}for(const i of t)n.add(i.id);let r;do r=crypto.randomUUID().split("-")[0];while(n.has(r));return r}async function gu(e,t){const n=e.getReader();let r;for(;!(r=await n.read()).done;)t(r.value)}function pu(e){let t,n,r,i=!1;return function(a){t===void 0?(t=a,n=0,r=-1):t=wu(t,a);const o=t.length;let l=0;for(;n<o;){i&&(t[n]===10&&(l=++n),i=!1);let c=-1;for(;n<o&&c===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-l);break;case 13:i=!0;case 10:c=n;break}if(c===-1)break;e(t.subarray(l,c),r),l=n,r=-1}l===o?t=void 0:l!==0&&(t=t.subarray(l),n-=l)}}function mu(e,t,n){let r=Us();const i=new TextDecoder;return function(a,o){if(a.length===0)n?.(r),r=Us();else if(o>0){const l=i.decode(a.subarray(0,o)),c=o+(a[o+1]===32?2:1),f=i.decode(a.subarray(c));switch(l){case"data":r.data=r.data?r.data+`
`+f:f;break;case"event":r.event=f;break;case"id":e(r.id=f);break;case"retry":const u=parseInt(f,10);isNaN(u)||t(r.retry=u);break}}}}function wu(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Us(){return{data:"",event:"",id:"",retry:void 0}}var vu=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ci="text/event-stream",yu=1e3,Bs="last-event-id";function bu(e,t){var{signal:n,headers:r,onopen:i,onmessage:s,onclose:a,onerror:o,openWhenHidden:l,fetch:c}=t,f=vu(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((u,d)=>{const p=Object.assign({},r);p.accept||(p.accept=Ci);let _;function x(){_.abort(),document.hidden||k()}l||document.addEventListener("visibilitychange",x);let A=yu,O=0;function m(){document.removeEventListener("visibilitychange",x),window.clearTimeout(O),_.abort()}n?.addEventListener("abort",()=>{m(),u()});const v=c??window.fetch,y=i??xu;async function k(){var C;_=new AbortController;try{const $=await v(e,Object.assign(Object.assign({},f),{headers:p,signal:_.signal}));await y($),await gu($.body,pu(mu(h=>{h?p[Bs]=h:delete p[Bs]},h=>{A=h},s))),a?.(),m(),u()}catch($){if(!_.signal.aborted)try{const h=(C=o?.($))!==null&&C!==void 0?C:A;window.clearTimeout(O),O=window.setTimeout(k,h)}catch(h){m(),d(h)}}}k()})}function xu(e){const t=e.headers.get("content-type");if(!t?.startsWith(Ci))throw new Error(`Expected content-type to be ${Ci}, Actual: ${t}`)}var _u=Object.defineProperty,ku=Object.defineProperties,Su=Object.getOwnPropertyDescriptors,Er=Object.getOwnPropertySymbols,co=Object.prototype.hasOwnProperty,uo=Object.prototype.propertyIsEnumerable,fo=e=>{throw TypeError(e)},Vs=(e,t,n)=>t in e?_u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Be=(e,t)=>{for(var n in t||(t={}))co.call(t,n)&&Vs(e,n,t[n]);if(Er)for(var n of Er(t))uo.call(t,n)&&Vs(e,n,t[n]);return e},Xi=(e,t)=>ku(e,Su(t)),$u=(e,t)=>{var n={};for(var r in e)co.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Er)for(var r of Er(e))t.indexOf(r)<0&&uo.call(e,r)&&(n[r]=e[r]);return n},Ji=(e,t,n)=>t.has(e)||fo("Cannot "+n),R=(e,t,n)=>(Ji(e,t,"read from private field"),n?n.call(e):t.get(e)),Y=(e,t,n)=>t.has(e)?fo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),I=(e,t,n,r)=>(Ji(e,t,"write to private field"),t.set(e,n),n),H=(e,t,n)=>(Ji(e,t,"access private method"),n),Hs=(e,t,n,r)=>({set _(i){I(e,t,i)},get _(){return R(e,t,r)}}),ne=(e,t,n)=>new Promise((r,i)=>{var s=l=>{try{o(n.next(l))}catch(c){i(c)}},a=l=>{try{o(n.throw(l))}catch(c){i(c)}},o=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,a);o((n=n.apply(e,t)).next())}),Ut=class ho extends Error{constructor(t,n,r,i,s,a){super(a||`HTTP Error ${t} at ${s}: ${n??JSON.stringify(r)}`),this.url=s,this.name="FetchError",this.status=t,this.text=n,this.json=r,this.headers=i}static fromResponse(t,n){return ne(this,null,function*(){const r=t.status,i=Object.fromEntries([...t.headers.entries()]);let s,a;const o=t.headers.get("content-type");return t.bodyUsed||(o&&o.includes("application/json")?a=yield t.json():s=yield t.text()),new ho(r,s,a,i,n)})}},Ar=class extends Error{constructor(){super("Fetch with backoff aborted"),this.name="FetchBackoffAbortError"}},Eu=class extends Error{constructor(){super("Invalid shape options: missing required url parameter"),this.name="MissingShapeUrlError"}},Au=class extends Error{constructor(){super("Invalid signal option. It must be an instance of AbortSignal."),this.name="InvalidSignalError"}},Cu=class extends Error{constructor(){super("shapeHandle is required if this isn't an initial fetch (i.e. offset > -1)"),this.name="MissingShapeHandleError"}},Pu=class extends Error{constructor(e){super(`Cannot use reserved Electric parameter names in custom params: ${e.join(", ")}`),this.name="ReservedParamError"}},Ru=class extends Error{constructor(e){super(`Column "${e??"unknown"}" does not allow NULL values`),this.name="ParserNullValueError"}},Nu=class extends Error{constructor(e,t){let n=`The response for the shape request to ${e} didn't include the following required headers:
`;t.forEach(r=>{n+=`- ${r}
`}),n+=`
This is often due to a proxy not setting CORS correctly so that all Electric headers can be read by the client.`,n+=`
For more information visit the troubleshooting guide: /docs/guides/troubleshooting/missing-headers`,super(n)}},tr=e=>Number(e),Ou=e=>e==="true"||e==="t",Tu=e=>BigInt(e),zs=e=>JSON.parse(e),Mu=e=>e,Iu={int2:tr,int4:tr,int8:Tu,bool:Ou,float4:tr,float8:tr,json:zs,jsonb:zs};function Lu(e,t){let n=0,r=null,i="",s=!1,a=0,o;function l(f,u,d){let p=f.slice(u,d);return p=p==="NULL"?null:p,t?t(p):p}function c(f){const u=[];for(;n<f.length;n++){if(r=f[n],s)r==="\\"?i+=f[++n]:r==='"'?(u.push(t?t(i):i),i="",s=f[n+1]==='"',a=n+2):i+=r;else if(r==='"')s=!0;else if(r==="{")a=++n,u.push(c(f));else if(r==="}"){s=!1,a<n&&u.push(l(f,a,n)),a=n+1;break}else r===","&&o!=="}"&&o!=='"'&&(u.push(l(f,a,n)),a=n+1);o=r}return a<n&&u.push(u.push(l(f,a,n+1))),u}return c(e)[0]}var qu=class{constructor(e,t){this.parser=Be(Be({},Iu),e),this.transformer=t}parse(e,t){return JSON.parse(e,(n,r)=>{if((n==="value"||n==="old_value")&&typeof r=="object"&&r!==null){const i=r;Object.keys(i).forEach(s=>{i[s]=this.parseRow(s,i[s],t)}),this.transformer&&(r=this.transformer(r))}return r})}parseRow(e,t,n){var r;const i=n[e];if(!i)return t;const s=i,{type:a,dims:o}=s,l=$u(s,["type","dims"]),c=(r=this.parser[a])!=null?r:Mu,f=Ys(c,i,e);return o&&o>0?Ys((d,p)=>Lu(d,f),i,e)(t):f(t,l)}};function Ys(e,t,n){var r;const i=!((r=t.not_null)!=null&&r);return s=>{if(s===null){if(!i)throw new Ru(n??"unknown");return null}return e(s,t)}}function Zi(e){return"key"in e}function go(e){return!Zi(e)}function po(e){return go(e)&&e.headers.control==="up-to-date"}function Du(e){const t=e.headers.global_last_seen_lsn;if(t)return`${t}_0`}function ju(e,t){const n=BigInt(e),r=BigInt(t.xmin),i=BigInt(t.xmax),s=t.xip_list.map(BigInt);return n<r||n<i&&!s.includes(n)}var Fu="electric-cursor",es="electric-handle",mo="electric-offset",Uu="electric-schema",Bu="electric-up-to-date",Vu="columns",ts="cursor",wo="expired_handle",Jr="handle",jt="live",Zr="offset",Hu="table",zu="where",Yu="replica",Wu="params",Qu="experimental_live_sse",vo="force-disconnect-and-refresh",yo="pause-stream",bo="log",ns="subset__where",rs="subset__limit",is="subset__offset",ss="subset__order_by",as="subset__params",Ku=[jt,Jr,Zr,ts,wo,bo,ns,rs,is,ss,as],Gu=[429],xo={initialDelay:100,maxDelay:1e4,multiplier:1.3};function Xu(e,t=xo){const{initialDelay:n,maxDelay:r,multiplier:i,debug:s=!1,onFailedAttempt:a}=t;return(...o)=>ne(this,null,function*(){var l;const c=o[0],f=o[1];let u=n,d=0;for(;;)try{const p=yield e(...o);if(p.ok)return p;throw yield Ut.fromResponse(p,c.toString())}catch(p){if(a?.(),(l=f?.signal)!=null&&l.aborted)throw new Ar;if(p instanceof Ut&&!Gu.includes(p.status)&&p.status>=400&&p.status<500)throw p;yield new Promise(_=>setTimeout(_,u)),u=Math.min(u*i,r),s&&(d++,console.log(`Retry attempt #${d} after ${u}ms`))}})}var Ju=[201,204,205];function Zu(e){return(...t)=>ne(this,null,function*(){const n=t[0],r=yield e(...t);try{if(r.status<200||Ju.includes(r.status))return r;const i=yield r.text();return new Response(i,r)}catch(i){throw new Ut(r.status,void 0,void 0,Object.fromEntries([...r.headers.entries()]),n.toString(),i instanceof Error?i.message:typeof i=="string"?i:"failed to read body")}})}var ef={maxChunksToPrefetch:2};function tf(e,t=ef){const{maxChunksToPrefetch:n}=t;let r;return(...s)=>ne(this,null,function*(){const a=s[0].toString(),o=r?.consume(...s);if(o)return o;r?.abort();const l=yield e(...s),c=os(a,l);return c&&(r=new of({fetchClient:e,maxPrefetchedRequests:n,url:c,requestInit:s[1]})),l})}var nf=["electric-offset","electric-handle"],rf=["electric-cursor"],sf=["electric-schema"];function af(e){return(...t)=>ne(this,null,function*(){const n=yield e(...t);if(n.ok){const r=n.headers,i=[],s=f=>i.push(...f.filter(u=>!r.has(u))),o=t[0].toString(),l=new URL(o);if([ns,as,rs,is,ss].some(f=>l.searchParams.has(f)))return n;if(s(nf),l.searchParams.get(jt)==="true"&&s(rf),(!l.searchParams.has(jt)||l.searchParams.get(jt)==="false")&&s(sf),i.length>0)throw new Nu(o,i)}return n})}var Cr,Pr,pt,Gt,mt,$n,Rr,of=class{constructor(e){Y(this,$n),Y(this,Cr),Y(this,Pr),Y(this,pt,new Map),Y(this,Gt),Y(this,mt);var t;I(this,Cr,(t=e.fetchClient)!=null?t:(...n)=>fetch(...n)),I(this,Pr,e.maxPrefetchedRequests),I(this,Gt,e.url.toString()),I(this,mt,R(this,Gt)),H(this,$n,Rr).call(this,e.url,e.requestInit)}abort(){R(this,pt).forEach(([e,t])=>t.abort())}consume(...e){var t;const n=e[0].toString(),r=(t=R(this,pt).get(n))==null?void 0:t[0];if(!(!r||n!==R(this,Gt)))return R(this,pt).delete(n),r.then(i=>{const s=os(n,i);I(this,Gt,s),R(this,mt)&&!R(this,pt).has(R(this,mt))&&H(this,$n,Rr).call(this,R(this,mt),e[1])}).catch(()=>{}),r}};Cr=new WeakMap;Pr=new WeakMap;pt=new WeakMap;Gt=new WeakMap;mt=new WeakMap;$n=new WeakSet;Rr=function(...e){var t,n;const r=e[0].toString();if(R(this,pt).size>=R(this,Pr))return;const i=new AbortController;try{const{signal:s,cleanup:a}=lf(i,(t=e[1])==null?void 0:t.signal),o=R(this,Cr).call(this,r,Xi(Be({},(n=e[1])!=null?n:{}),{signal:s}));R(this,pt).set(r,[o,i]),o.then(l=>{if(!l.ok||i.signal.aborted)return;const c=os(r,l);if(!c||c===r){I(this,mt,void 0);return}return I(this,mt,c),H(this,$n,Rr).call(this,c,e[1])}).catch(()=>{}).finally(a)}catch{}};function os(e,t){const n=t.headers.get(es),r=t.headers.get(mo),i=t.headers.has(Bu);if(!n||!r||i)return;const s=new URL(e);if(!s.searchParams.has(jt))return s.searchParams.set(Jr,n),s.searchParams.set(Zr,r),s.searchParams.sort(),s.toString()}function lf(e,t){let n=cf;if(t)if(t.aborted)e.abort();else{const r=()=>e.abort();t.addEventListener("abort",r,{once:!0,signal:e.signal}),n=()=>t.removeEventListener("abort",r)}return{signal:e.signal,cleanup:n}}function cf(){}var uf=class{constructor(){this.data={},this.max=250,this.storageKey="electric_expired_shapes",this.load()}getExpiredHandle(e){const t=this.data[e];return t?(t.lastUsed=Date.now(),this.save(),t.expiredHandle):null}markExpired(e,t){this.data[e]={expiredHandle:t,lastUsed:Date.now()};const n=Object.keys(this.data);if(n.length>this.max){const r=n.reduce((i,s)=>this.data[s].lastUsed<this.data[i].lastUsed?s:i);delete this.data[r]}this.save()}save(){if(!(typeof localStorage>"u"))try{localStorage.setItem(this.storageKey,JSON.stringify(this.data))}catch{}}load(){if(!(typeof localStorage>"u"))try{const e=localStorage.getItem(this.storageKey);e&&(this.data=JSON.parse(e))}catch{this.data={}}}clear(){this.data={},this.save()}},_o=new uf,ff=class{constructor(){this.activeSnapshots=new Map,this.xmaxSnapshots=new Map,this.snapshotsByDatabaseLsn=new Map}addSnapshot(e,t){var n,r,i,s;this.activeSnapshots.set(e.snapshot_mark,{xmin:BigInt(e.xmin),xmax:BigInt(e.xmax),xip_list:e.xip_list.map(BigInt),keys:t});const a=(r=(n=this.xmaxSnapshots.get(BigInt(e.xmax)))==null?void 0:n.add(e.snapshot_mark))!=null?r:new Set([e.snapshot_mark]);this.xmaxSnapshots.set(BigInt(e.xmax),a);const o=(s=(i=this.snapshotsByDatabaseLsn.get(BigInt(e.database_lsn)))==null?void 0:i.add(e.snapshot_mark))!=null?s:new Set([e.snapshot_mark]);this.snapshotsByDatabaseLsn.set(BigInt(e.database_lsn),o)}removeSnapshot(e){this.activeSnapshots.delete(e)}shouldRejectMessage(e){const t=e.headers.txids||[];if(t.length===0)return!1;const n=Math.max(...t);for(const[r,i]of this.xmaxSnapshots.entries())if(n>=r)for(const s of i)this.removeSnapshot(s);return[...this.activeSnapshots.values()].some(r=>r.keys.has(e.key)&&ju(n,r))}lastSeenUpdate(e){for(const[t,n]of this.snapshotsByDatabaseLsn.entries())if(t<=e)for(const r of n)this.removeSnapshot(r)}},df=new Set([ts,Jr,jt,Zr]);function ko(e){return ne(this,null,function*(){return typeof e=="function"?e():e})}function hf(e){return ne(this,null,function*(){const t=Object.entries(e),n=yield Promise.all(t.map(r=>ne(this,[r],function*([i,s]){if(s===void 0)return[i,void 0];const a=yield ko(s);return[i,Array.isArray(a)?a.join(","):a]})));return Object.fromEntries(n.filter(([r,i])=>i!==void 0))})}function gf(e){return ne(this,null,function*(){if(!e)return{};const t=Object.entries(e),n=yield Promise.all(t.map(r=>ne(this,[r],function*([i,s]){return[i,yield ko(s)]})));return Object.fromEntries(n)})}function So(e){const t=new URL(e.origin+e.pathname);for(const[n,r]of e.searchParams)Ku.includes(n)||t.searchParams.set(n,r);return t.searchParams.sort(),t.toString()}var Nr,In,En,on,Ot,lt,ze,vt,ln,Tt,Xe,cn,yt,We,Ct,kt,Ln,Ze,rn,ht,qn,Dn,An,Or,Pt,gt,jn,Z,Fn,vn,ls,$o,cs,ei,Eo,Ao,Co,us,fs,Po,Ro,ds,No,Oo,hs,To,Mo=class{constructor(e){Y(this,Z),Y(this,Nr,null),Y(this,In),Y(this,En),Y(this,on),Y(this,Ot,new Map),Y(this,lt,!1),Y(this,ze,"active"),Y(this,vt),Y(this,ln),Y(this,Tt),Y(this,Xe,!1),Y(this,cn,!0),Y(this,yt,!1),Y(this,We),Y(this,Ct),Y(this,kt),Y(this,Ln),Y(this,Ze),Y(this,rn,!1),Y(this,ht),Y(this,qn),Y(this,Dn),Y(this,An,Promise.resolve([])),Y(this,Or,new ff),Y(this,Pt,0),Y(this,gt),Y(this,jn);var t,n,r,i;this.options=Be({subscribe:!0},e),pf(this.options),I(this,vt,(t=this.options.offset)!=null?t:"-1"),I(this,ln,""),I(this,We,this.options.handle),I(this,on,new qu(e.parser,e.transformer)),I(this,Ln,this.options.onError),I(this,Ct,(n=this.options.log)!=null?n:"full");const s=(r=e.fetchClient)!=null?r:(...l)=>fetch(...l),a=Xi(Be({},(i=e.backoffOptions)!=null?i:xo),{onFailedAttempt:()=>{var l,c;I(this,yt,!1),(c=(l=e.backoffOptions)==null?void 0:l.onFailedAttempt)==null||c.call(l)}}),o=Xu(s,a);I(this,En,af(tf(o))),I(this,In,Zu(R(this,En))),H(this,Z,Oo).call(this)}get shapeHandle(){return R(this,We)}get error(){return R(this,Nr)}get isUpToDate(){return R(this,Xe)}get lastOffset(){return R(this,vt)}get mode(){return R(this,Ct)}subscribe(e,t=()=>{}){const n=Math.random();return R(this,Ot).set(n,[e,t]),R(this,lt)||H(this,Z,Fn).call(this),()=>{R(this,Ot).delete(n)}}unsubscribeAll(){R(this,Ot).clear()}lastSyncedAt(){return R(this,Tt)}lastSynced(){return R(this,Tt)===void 0?1/0:Date.now()-R(this,Tt)}isConnected(){return R(this,yt)}isLoading(){return!R(this,Xe)}hasStarted(){return R(this,lt)}isPaused(){return R(this,ze)==="paused"}forceDisconnectAndRefresh(){return ne(this,null,function*(){var e,t;I(this,rn,!0),R(this,Xe)&&!((e=R(this,Ze))!=null&&e.signal.aborted)&&((t=R(this,Ze))==null||t.abort(vo)),yield H(this,Z,Po).call(this),I(this,rn,!1)})}requestSnapshot(e){return ne(this,null,function*(){if(R(this,Ct)==="full")throw new Error(`Snapshot requests are not supported in ${R(this,Ct)} mode, as the consumer is guaranteed to observe all data`);R(this,lt)||(yield H(this,Z,Fn).call(this)),yield H(this,Z,Ro).call(this),Hs(this,Pt)._++;try{R(this,Pt)===1&&H(this,Z,us).call(this);const{fetchUrl:t,requestHeaders:n}=yield H(this,Z,ls).call(this,this.options.url,!0,e),{metadata:r,data:i}=yield H(this,Z,To).call(this,t,n),s=i.concat([{headers:Be({control:"snapshot-end"},r)}]);return R(this,Or).addSnapshot(r,new Set(i.map(a=>a.key))),H(this,Z,ei).call(this,s,!1),{metadata:r,data:i}}finally{Hs(this,Pt)._--,R(this,Pt)===0&&H(this,Z,fs).call(this)}})}};Nr=new WeakMap;In=new WeakMap;En=new WeakMap;on=new WeakMap;Ot=new WeakMap;lt=new WeakMap;ze=new WeakMap;vt=new WeakMap;ln=new WeakMap;Tt=new WeakMap;Xe=new WeakMap;cn=new WeakMap;yt=new WeakMap;We=new WeakMap;Ct=new WeakMap;kt=new WeakMap;Ln=new WeakMap;Ze=new WeakMap;rn=new WeakMap;ht=new WeakMap;qn=new WeakMap;Dn=new WeakMap;An=new WeakMap;Or=new WeakMap;Pt=new WeakMap;gt=new WeakMap;jn=new WeakMap;Z=new WeakSet;Fn=function(){return ne(this,null,function*(){var e;I(this,lt,!0);try{yield H(this,Z,vn).call(this)}catch(t){if(I(this,Nr,t),R(this,Ln)){const n=yield R(this,Ln).call(this,t);typeof n=="object"&&(H(this,Z,hs).call(this),"params"in n&&(this.options.params=n.params),"headers"in n&&(this.options.headers=n.headers),I(this,lt,!1),H(this,Z,Fn).call(this));return}throw t}finally{I(this,yt,!1),(e=R(this,Dn))==null||e.call(this)}})};vn=function(){return ne(this,null,function*(){var e,t;if(R(this,ze)==="pause-requested"){I(this,ze,"paused");return}if(!this.options.subscribe&&((e=this.options.signal)!=null&&e.aborted||R(this,Xe)))return;const n=R(this,ze)==="paused";I(this,ze,"active");const{url:r,signal:i}=this.options,{fetchUrl:s,requestHeaders:a}=yield H(this,Z,ls).call(this,r,n),o=yield H(this,Z,$o).call(this,i),l=R(this,Ze);try{yield H(this,Z,Eo).call(this,{fetchUrl:s,requestAbortController:l,headers:a,resumingFromPause:n})}catch(c){if((c instanceof Ut||c instanceof Ar)&&l.signal.aborted&&l.signal.reason===vo)return H(this,Z,vn).call(this);if(c instanceof Ar){l.signal.aborted&&l.signal.reason===yo&&I(this,ze,"paused");return}if(!(c instanceof Ut))throw c;if(c.status==409){if(R(this,We)){const u=So(s);_o.markExpired(u,R(this,We))}const f=c.headers[es]||`${R(this,We)}-next`;return H(this,Z,hs).call(this,f),yield H(this,Z,ds).call(this,c.json),H(this,Z,vn).call(this)}else throw H(this,Z,No).call(this,c),c}finally{o&&i&&i.removeEventListener("abort",o),I(this,Ze,void 0)}return(t=R(this,qn))==null||t.call(this),H(this,Z,vn).call(this)})};ls=function(e,t,n){return ne(this,null,function*(){const[r,i]=yield Promise.all([gf(this.options.headers),this.options.params?hf(mf(this.options.params)):void 0]);i&&Io(i);const s=new URL(e);if(i){i.table&&Ve(s,Hu,i.table),i.where&&Ve(s,zu,i.where),i.columns&&Ve(s,Vu,i.columns),i.replica&&Ve(s,Yu,i.replica),i.params&&Ve(s,Wu,i.params);const l=Be({},i);delete l.table,delete l.where,delete l.columns,delete l.replica,delete l.params;for(const[c,f]of Object.entries(l))Ve(s,c,f)}n&&(n.where&&Ve(s,ns,n.where),n.params&&Ve(s,as,n.params),n.limit&&Ve(s,rs,n.limit),n.offset&&Ve(s,is,n.offset),n.orderBy&&Ve(s,ss,n.orderBy)),s.searchParams.set(Zr,R(this,vt)),s.searchParams.set(bo,R(this,Ct)),R(this,Xe)&&(!R(this,rn)&&!t&&s.searchParams.set(jt,"true"),s.searchParams.set(ts,R(this,ln))),R(this,We)&&s.searchParams.set(Jr,R(this,We));const a=So(s),o=_o.getExpiredHandle(a);return o&&s.searchParams.set(wo,o),s.searchParams.sort(),{fetchUrl:s,requestHeaders:r}})};$o=function(e){return ne(this,null,function*(){var t;if(I(this,Ze,new AbortController),e){const n=()=>{var r;(r=R(this,Ze))==null||r.abort(e.reason)};return e.addEventListener("abort",n,{once:!0}),e.aborted&&((t=R(this,Ze))==null||t.abort(e.reason)),n}})};cs=function(e){return ne(this,null,function*(){var t;const{headers:n,status:r}=e,i=n.get(es);i&&I(this,We,i);const s=n.get(mo);s&&I(this,vt,s);const a=n.get(Fu);a&&I(this,ln,a);const o=()=>{const l=n.get(Uu);return l?JSON.parse(l):{}};I(this,kt,(t=R(this,kt))!=null?t:o()),r===204&&I(this,Tt,Date.now())})};ei=function(e,t=!1){return ne(this,null,function*(){var n;if(e.length>0){I(this,cn,!0);const r=e[e.length-1];if(po(r)){if(t){const s=Du(r);s&&I(this,vt,s)}I(this,Tt,Date.now()),I(this,Xe,!0),I(this,cn,!1),(n=R(this,jn))==null||n.call(this)}const i=e.filter(s=>Zi(s)?!R(this,Or).shouldRejectMessage(s):!0);yield H(this,Z,ds).call(this,i)}})};Eo=function(e){return ne(this,null,function*(){return R(this,Xe)&&this.options.experimentalLiveSse&&!R(this,rn)&&!e.resumingFromPause?(e.fetchUrl.searchParams.set(Qu,"true"),H(this,Z,Co).call(this,e)):H(this,Z,Ao).call(this,e)})};Ao=function(e){return ne(this,null,function*(){const{fetchUrl:t,requestAbortController:n,headers:r}=e,i=yield R(this,In).call(this,t.toString(),{signal:n.signal,headers:r});I(this,yt,!0),yield H(this,Z,cs).call(this,i);const s=R(this,kt),o=(yield i.text())||"[]",l=R(this,on).parse(o,s);yield H(this,Z,ei).call(this,l)})};Co=function(e){return ne(this,null,function*(){const{fetchUrl:t,requestAbortController:n,headers:r}=e,i=R(this,En);try{let s=[];yield bu(t.toString(),{headers:r,fetch:i,onopen:a=>ne(this,null,function*(){I(this,yt,!0),yield H(this,Z,cs).call(this,a)}),onmessage:a=>{if(a.data){const o=R(this,kt),l=R(this,on).parse(a.data,o);s.push(l),po(l)&&(H(this,Z,ei).call(this,s,!0),s=[])}},onerror:a=>{throw a},signal:n.signal})}catch(s){throw n.signal.aborted?new Ar:s}})};us=function(){var e;R(this,lt)&&R(this,ze)==="active"&&(I(this,ze,"pause-requested"),(e=R(this,Ze))==null||e.abort(yo))};fs=function(){R(this,lt)&&R(this,ze)==="paused"&&H(this,Z,Fn).call(this)};Po=function(){return ne(this,null,function*(){return R(this,ht)?R(this,ht):(I(this,ht,new Promise((e,t)=>{I(this,qn,e),I(this,Dn,t)})),R(this,ht).finally(()=>{I(this,ht,void 0),I(this,qn,void 0),I(this,Dn,void 0)}),R(this,ht))})};Ro=function(){return ne(this,null,function*(){if(R(this,cn))return R(this,gt)?R(this,gt):(I(this,gt,new Promise(e=>{I(this,jn,e)})),R(this,gt).finally(()=>{I(this,gt,void 0),I(this,jn,void 0)}),R(this,gt))})};ds=function(e){return ne(this,null,function*(){return I(this,An,R(this,An).then(()=>Promise.all(Array.from(R(this,Ot).values()).map(t=>ne(this,[t],function*([n,r]){try{yield n(e)}catch(i){queueMicrotask(()=>{throw i})}}))))),R(this,An)})};No=function(e){R(this,Ot).forEach(([t,n])=>{n?.(e)})};Oo=function(){if(typeof document=="object"&&typeof document.hidden=="boolean"&&typeof document.addEventListener=="function"){const e=()=>{document.hidden?H(this,Z,us).call(this):H(this,Z,fs).call(this)};document.addEventListener("visibilitychange",e)}};hs=function(e){I(this,vt,"-1"),I(this,ln,""),I(this,We,e),I(this,Xe,!1),I(this,cn,!0),I(this,yt,!1),I(this,kt,void 0),I(this,Pt,0)};To=function(e,t){return ne(this,null,function*(){const n=yield R(this,In).call(this,e.toString(),{headers:t});if(!n.ok)throw new Ut(n.status,void 0,void 0,Object.fromEntries([...n.headers.entries()]),e.toString());const{metadata:r,data:i}=yield n.json(),s=R(this,on).parse(JSON.stringify(i),R(this,kt));return{metadata:r,data:s}})};Mo.Replica={FULL:"full",DEFAULT:"default"};function Io(e){if(!e)return;const t=Object.keys(e).filter(n=>df.has(n));if(t.length>0)throw new Pu(t)}function pf(e){if(!e.url)throw new Eu;if(e.signal&&!(e.signal instanceof AbortSignal))throw new Au;if(e.offset!==void 0&&e.offset!=="-1"&&e.offset!=="now"&&!e.handle)throw new Cu;Io(e.params)}function Ve(e,t,n){if(!(n===void 0||n==null))if(typeof n=="string")e.searchParams.set(t,n);else if(typeof n=="object")for(const[r,i]of Object.entries(n))e.searchParams.set(`${t}[${r}]`,i);else e.searchParams.set(t,n.toString())}function mf(e){return Array.isArray(e.params)?Xi(Be({},e),{params:Object.fromEntries(e.params.map((t,n)=>[n+1,t]))}):e}var Fe,Rt,Nt,Tr,Cn,Un,Mt,Ue,Lo,qo,gs,fr,Do,ps,wf=class{constructor(e){Y(this,Ue),Y(this,Fe,new Map),Y(this,Rt,new Map),Y(this,Nt,new Set),Y(this,Tr,new Set),Y(this,Cn,!1),Y(this,Un,"syncing"),Y(this,Mt,!1),this.stream=e,this.stream.subscribe(H(this,Ue,Lo).bind(this),H(this,Ue,Do).bind(this))}get isUpToDate(){return R(this,Un)==="up-to-date"}get lastOffset(){return this.stream.lastOffset}get handle(){return this.stream.shapeHandle}get rows(){return this.value.then(e=>Array.from(e.values()))}get currentRows(){return Array.from(this.currentValue.values())}get value(){return new Promise((e,t)=>{if(this.stream.isUpToDate)e(this.currentValue);else{const n=this.subscribe(({value:r})=>{n(),R(this,Mt)&&t(R(this,Mt)),e(r)})}})}get currentValue(){return R(this,Fe)}get error(){return R(this,Mt)}lastSyncedAt(){return this.stream.lastSyncedAt()}lastSynced(){return this.stream.lastSynced()}isLoading(){return this.stream.isLoading()}isConnected(){return this.stream.isConnected()}get mode(){return this.stream.mode}requestSnapshot(e){return ne(this,null,function*(){const t=JSON.stringify(e);R(this,Tr).add(t),yield H(this,Ue,gs).call(this),yield this.stream.requestSnapshot(e)})}subscribe(e){const t=Math.random();return R(this,Rt).set(t,e),()=>{R(this,Rt).delete(t)}}unsubscribeAll(){R(this,Rt).clear()}get numSubscribers(){return R(this,Rt).size}};Fe=new WeakMap;Rt=new WeakMap;Nt=new WeakMap;Tr=new WeakMap;Cn=new WeakMap;Un=new WeakMap;Mt=new WeakMap;Ue=new WeakSet;Lo=function(e){let t=!1;e.forEach(n=>{if(Zi(n))if(t=H(this,Ue,fr).call(this,"syncing"),this.mode==="full")switch(n.headers.operation){case"insert":R(this,Fe).set(n.key,n.value);break;case"update":R(this,Fe).set(n.key,Be(Be({},R(this,Fe).get(n.key)),n.value));break;case"delete":R(this,Fe).delete(n.key);break}else switch(n.headers.operation){case"insert":R(this,Nt).add(n.key),R(this,Fe).set(n.key,n.value);break;case"update":R(this,Nt).has(n.key)&&R(this,Fe).set(n.key,Be(Be({},R(this,Fe).get(n.key)),n.value));break;case"delete":R(this,Nt).has(n.key)&&(R(this,Fe).delete(n.key),R(this,Nt).delete(n.key));break}if(go(n))switch(n.headers.control){case"up-to-date":t=H(this,Ue,fr).call(this,"up-to-date"),R(this,Cn)&&(I(this,Cn,!1),H(this,Ue,qo).call(this));break;case"must-refetch":R(this,Fe).clear(),R(this,Nt).clear(),I(this,Mt,!1),t=H(this,Ue,fr).call(this,"syncing"),I(this,Cn,!0);break}}),t&&H(this,Ue,ps).call(this)};qo=function(){return ne(this,null,function*(){yield H(this,Ue,gs).call(this),yield Promise.all(Array.from(R(this,Tr)).map(e=>ne(this,null,function*(){try{const t=JSON.parse(e);yield this.stream.requestSnapshot(t)}catch{}})))})};gs=function(){return ne(this,null,function*(){this.stream.isUpToDate||(yield new Promise(e=>{const t=()=>{this.stream.isUpToDate&&(clearInterval(n),r(),e())},n=setInterval(t,10),r=this.stream.subscribe(()=>t(),()=>t());t()}))})};fr=function(e){const t=R(this,Un)!==e;return I(this,Un,e),t&&e==="up-to-date"};Do=function(e){e instanceof Ut&&(I(this,Mt,e),H(this,Ue,ps).call(this))};ps=function(){R(this,Rt).forEach(e=>{e({value:this.currentValue,rows:this.currentRows})})};var yn=new Map,bn=new Map;function Pi(e){return typeof e=="function"?Function.prototype.toString.call(e):typeof e!="object"||e===null?e:Array.isArray(e)?e.map(Pi):Object.keys(e).sort().reduce((t,n)=>(t[n]=Pi(e[n]),t),{})}function jo(e){return JSON.stringify(Pi(e))}function vf(e){const t=jo(e);if(yn.has(t)){const r=yn.get(t);if(!r.options.signal?.aborted)return r;yn.delete(t),bn.delete(r)}const n=new Mo(e);return yn.set(t,n),n}function yf(e){if(bn.has(e)){if(!e.options.signal?.aborted)return bn.get(e);yn.delete(jo(e.options)),bn.delete(e)}const t=new wf(e);return bn.set(e,t),t}function Ws(e){return{data:e.currentRows,isLoading:e.isLoading(),lastSyncedAt:e.lastSyncedAt(),isError:e.error!==!1,shape:e,stream:e.stream,error:e.error}}function bf(e,t){return!e||e.isLoading!==t.isLoading||e.lastSyncedAt!==t.lastSyncedAt||e.isError!==t.isError||e.error!==t.error||e.shape.lastOffset!==t.shape.lastOffset||e.shape.handle!==t.shape.handle}function xf(e){const t=vf(e),n=yf(t),[r,i]=j([]),[s,a]=j(!0),[o,l]=j(!1),[c,f]=j(null),[u,d]=j(void 0),p=Ws(n);i(p.data),a(p.isLoading),l(p.isError),f(p.error),d(p.lastSyncedAt);const _=n.subscribe(()=>{const x=Ws(n);bf(p,x)&&(i(x.data),a(x.isLoading),l(x.isError),f(x.error),d(x.lastSyncedAt))});return Te(()=>_()),{data:r,isLoading:s,isError:o,error:c,lastSyncedAt:u,shape:n,stream:t}}const _f="http://localhost:8000",dt="/api/v1";let De=_f;De.endsWith("/api/v1")&&(De=De.replace("/api/v1",""));const rt={SIGNUP:`${De}${dt}/auth/signup`,SIGNIN:`${De}${dt}/auth/signin`,SIGNOUT:`${De}${dt}/auth/signout`,REFRESH:`${De}${dt}/auth/refresh`,SEND_VERIFICATION:`${De}${dt}/auth/send-verification`,VERIFY_EMAIL:`${De}${dt}/auth/verify-email`,CURRENT_USER:`${De}${dt}/users/me`,ELECTRIC_SHAPE:`${De}${dt}/electric/shape`,HEALTH:`${De}/healthz`,HEALTH_DB:`${De}/healthz/db`};async function kf(e,t,n){const r=Intl.DateTimeFormat().resolvedOptions().timeZone,i=navigator.language,s=await fetch(rt.SIGNUP,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n,timezone:r,locale:i})});if(!s.ok){const a=await s.text();throw console.error("Signup error:",a),new Error(a||"Signup failed")}}let Bn=null;async function Sf(e,t){const n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=navigator.language,i=await fetch(rt.SIGNIN,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t,timezone:n,locale:r})});if(!i.ok){const a=await i.text();throw console.error("Sign in failed:",a),new Error(a||"Sign in failed")}Bn=(await i.json()).accessToken}async function di(){const e=await Fo(rt.CURRENT_USER);if(!e.ok){const t=await e.text();throw console.error("Failed to fetch user:",t),new Error(t||"Failed to fetch user")}return await e.json()}async function Fo(e,t={}){t.headers={...t.headers||{},Authorization:`Bearer ${Bn}`},t.credentials="include";let n=await fetch(e,t);if(n.status===401||n.status===403)try{await Ri(),t.headers.Authorization=`Bearer ${Bn}`,t.credentials="include",n=await fetch(e,t)}catch{throw await Uo(),new Error("Session expired. Please log in again.")}return n}async function Ri(){const e=await fetch(rt.REFRESH,{method:"POST",credentials:"include"});if(!e.ok){const n=await e.text();throw console.error("Refresh failed:",n),new Error(n||"Refresh failed")}Bn=(await e.json()).accessToken}async function Uo(){await fetch(rt.SIGNOUT,{method:"POST",credentials:"include"}),Bn=null}async function $f(e){const t=await fetch(rt.SEND_VERIFICATION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(console.log("Send verification response:",await t.text()),!t.ok){const n=await t.text();throw console.error("Send verification error:",n),new Error(n||"Failed to send verification email")}}async function Ef(e,t){const n=await fetch(rt.VERIFY_EMAIL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})});if(!n.ok){const r=await n.text();throw console.error("Verify email error:",r),new Error(r||"Email verification failed")}}async function Af(){const e=await fetch(rt.HEALTH,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.status===200){const t=await e.json();console.log("Health check response data:",t)}if(!e.ok){const t=await e.text();throw console.error("Reset password error:",t),new Error(t||"Failed to reset password")}}async function Cf(){const e=await fetch(rt.HEALTH_DB,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.status===200){const t=await e.json();console.log("Health DB check response data:",t)}if(!e.ok){const t=await e.text();throw console.error("Reset password error:",t),new Error(t||"Failed to reset password")}}const[Pf,Bo]=j(navigator.onLine);window.addEventListener("online",()=>{console.log("Went online"),Bo(!0)});window.addEventListener("offline",()=>{console.log("Went offline"),Bo(!1)});function Vo(){return Pf}const Ho=Wr();function Rf(e){const[t,n]=j(!1),[r,i]=j(null),[s,a]=j(!0),o=Vo();let l=o();Wn(()=>{if(!o()){a(!1);return}c()}),xe(()=>{o()&&!l&&!r()&&c(),l=o()});async function c(){a(!0);try{await Ri();const v=await di();i(v)}catch{i(null),n(!1)}finally{a(!1)}}async function f(v,y,k){await kf(v,y,k),localStorage.setItem("pendingEmail",v)}async function u(){await $f(localStorage.getItem("pendingEmail"))}async function d(v){await Ef(localStorage.getItem("pendingEmail"),v),localStorage.removeItem("pendingEmail")}async function p(v,y){localStorage.setItem("pendingEmail",v),await Sf(v,y),localStorage.removeItem("pendingEmail"),n(!0),i(await di())}async function _(){await Uo(),n(!1),i(null)}async function x(){const v=await di();return i(v),v}async function A(){await Ri()}async function O(v,y={}){return await Fo(v,y)}function m(){return localStorage.getItem("pendingEmail")}return E(Ho.Provider,{value:{isLoggedIn:t,user:r,signup:f,signin:p,signout:_,getCurrentUser:x,refreshAccessToken:A,authFetch:O,authLoading:s,sendEmailVerification:u,verifyEmail:d,getPendingEmail:m},get children(){return e.children}})}function Xn(){return Qn(Ho)}const zo=Wr();function Nf(e){const[t,n]=nu({projects:[],currentProject:null,currentChecklist:null,dataLoading:!0,checklists:[]});Wn(async()=>{try{await r(),cu(r)}catch(m){console.error("Error loading data:",m)}finally{n("dataLoading",!1)}});async function r(){try{n("loading",!0);const m=await lo();m.sort((y,k)=>(y.createdAt||0)-(k.createdAt||0)),n("projects",m);const v=await oo();n("checklists",v)}catch(m){throw console.error("Error loading IndexedDB data:",m),m}finally{n("loading",!1)}}async function i(m){try{return await hn(m),n("projects",v=>[...v,m]),m}catch(v){throw console.error("Error adding project:",v),v}}async function s(m){try{return await hu(m),n("projects",v=>v.filter(y=>y.id!==m)),t.currentProject?.id===m&&(n("currentProject",null),n("currentChecklist",null)),!0}catch(v){throw console.error("Error deleting project:",v),v}}function a(m){n("projects",m)}function o(m){let v=null;if(typeof m=="object"&&m!==null){if("project"in m&&m.project)v={...m.project};else if("id"in m)v=t.projects.find(y=>y.id===m.id);else if("name"in m){const y=t.projects.filter(k=>k.name===m.name);v=y[m.index??0]?{...y[m.index??0]}:null}}else typeof m=="string"&&(v=t.projects.find(y=>y.id===m),v||(v=t.projects.find(y=>y.name===m)),v=v?{...v}:null);n("currentProject",v)}function l(m){if(m==null)return n("currentChecklist",null),!1;const v=d(m);return n("currentChecklist",v||null),!!v}async function c(m,v,y){if(!m||!v)try{return await Ds(y),n("checklists",k=>[...k,y]),y}catch(k){throw console.error("Error adding checklist without project/review:",k),k}try{const k=await js(m,v,y),C=t.projects.findIndex($=>$.id===m);if(C!==-1){const $=(t.projects[C].reviews||[]).findIndex(h=>h.id===v);$!==-1&&n("projects",C,"reviews",$,k.reviews[$])}return y}catch(k){throw console.error("Error adding checklist:",k),k}}async function f(m){const v=_(m.id);if(!v)throw console.warn("Could not find checklist to update:",m.id),new Error(`Could not find checklist to update: ${m.id}`);try{const{projectIndex:y,reviewIndex:k,checklistIndex:C,review:$,project:h}=v;if(y>=0)await js(h.id,$.id,m),n("projects",y,"reviews",k,"checklists",C,{...m});else{const g=t.checklists.findIndex(w=>w.id===m.id);if(g>=0)await Ds(m),n("checklists",g,{...m});else throw console.warn("Could not find checklist:",m.id),new Error(`Could not find checklist: ${m.id}`)}return t.currentChecklist?.id===m.id&&n("currentChecklist",{...m}),m}catch(y){throw console.error("Error updating checklist:",y),y}}async function u(m,v,y){if(!m||!v)try{return await uu(y),n("checklists",k=>k.filter(C=>C.id!==y)),t.currentChecklist?.id===y&&n("currentChecklist",null),!0}catch(k){return console.error("Error deleting checklist without project/review:",k),!1}try{await fu(m,v,y);const k=t.projects.findIndex(C=>C.id===m);if(k!==-1){const C=(t.projects[k].reviews||[]).findIndex($=>$.id===v);C!==-1&&n("projects",k,"reviews",C,"checklists",$=>$.filter(h=>h.id!==y))}return t.currentChecklist?.id===y&&n("currentChecklist",null),!0}catch(k){return console.error("Error deleting checklist:",k),!1}}function d(m){let v=_(m);return v?.checklist?{...v.checklist}:null}function p(m,v){let y=_(m);if(y&&typeof y.checklistIndex=="number")return y.checklistIndex;let k=-1;return m?k=t.checklists.findIndex(C=>C.id===m):v&&(k=t.checklists.findIndex(C=>C.name===v)),k}function _(m){if(typeof m=="object"&&m!==null){if("checklist"in m&&m.checklist)return _({id:m.checklist.id});if("id"in m)for(let v=0;v<t.projects.length;v++){const y=t.projects[v];for(let k=0;k<(y.reviews||[]).length;k++){const C=y.reviews[k],$=(C.checklists||[]).findIndex(h=>h.id===m.id);if($!==-1)return{project:y,projectIndex:v,review:C,reviewIndex:k,checklist:C.checklists[$],checklistIndex:$}}}else if("name"in m){let v=[];for(let y=0;y<t.projects.length;y++){const k=t.projects[y];for(let C=0;C<(k.reviews||[]).length;C++){const $=k.reviews[C];($.checklists||[]).forEach((h,g)=>{h.name===m.name&&v.push({project:k,projectIndex:y,review:$,reviewIndex:C,checklist:h,checklistIndex:g})})}}return v[m.index??0]||null}}else if(typeof m=="string"){for(let y=0;y<t.projects.length;y++){const k=t.projects[y];for(let C=0;C<(k.reviews||[]).length;C++){const $=k.reviews[C],h=($.checklists||[]).findIndex(g=>g.id===m);if(h!==-1)return{project:k,projectIndex:y,review:$,reviewIndex:C,checklist:$.checklists[h],checklistIndex:h}}}let v=[];for(let y=0;y<t.projects.length;y++){const k=t.projects[y];for(let C=0;C<(k.reviews||[]).length;C++){const $=k.reviews[C];($.checklists||[]).forEach((h,g)=>{h.name===m&&v.push({project:k,projectIndex:y,review:$,reviewIndex:C,checklist:h,checklistIndex:g})})}}return v[0]||null}return null}async function x(m,v){try{const y=t.projects.findIndex(C=>C.id===m);if(y===-1)throw new Error("Project not found");const k=await Fs(m,v);return n("projects",y,k),v}catch(y){throw console.error("Error adding review:",y),y}}async function A(m,v){try{const y=t.projects.findIndex(C=>C.id===m);if(y===-1)throw new Error("Project not found");const k=await Fs(m,v);return n("projects",y,k),v}catch(y){throw console.error("Error updating review:",y),y}}async function O(m,v){try{const y=t.projects.findIndex(C=>C.id===m);if(y===-1)throw new Error("Project not found");if(!await du(m,v))throw new Error("Review not found or could not be deleted");return n("projects",y,C=>({...C,reviews:(C.reviews||[]).filter($=>$.id!==v)})),!0}catch(y){throw console.error("Error deleting review:",y),y}}return E(zo.Provider,{value:{projects:()=>t.projects,currentProject:()=>t.currentProject,currentChecklist:()=>t.currentChecklist,dataLoading:()=>t.dataLoading,checklists:()=>t.checklists,loadData:r,setProjects:a,addProject:i,deleteProject:s,setCurrentProject:o,setCurrentChecklist:l,addChecklist:c,updateChecklist:f,deleteChecklist:u,getChecklist:d,getChecklistIndex:p,addReview:x,updateReview:A,deleteReview:O},get children(){return e.children}})}function zt(){return Qn(zo)}var dr={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Of=dr.exports,Qs;function Tf(){return Qs||(Qs=1,(function(e,t){((n,r)=>{e.exports=r()})(Of,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,s=!r.document&&!!r.postMessage,a=r.IS_PAPA_WORKER||!1,o={},l=0,c={};function f(h){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(g){var w=k(g);w.chunkSize=parseInt(w.chunkSize),g.step||g.chunk||(w.chunkSize=null),this._handle=new x(w),(this._handle.streamer=this)._config=w}.call(this,h),this.parseChunk=function(g,w){var b=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<b){let P=this._config.newline;P||(S=this._config.quoteChar||'"',P=this._handle.guessLineEndings(g,S)),g=[...g.split(P).slice(b)].join(P)}this.isFirstChunk&&$(this._config.beforeFirstChunk)&&(S=this._config.beforeFirstChunk(g))!==void 0&&(g=S),this.isFirstChunk=!1,this._halted=!1;var b=this._partialLine+g,S=(this._partialLine="",this._handle.parse(b,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(g=S.meta.cursor,b=(this._finished||(this._partialLine=b.substring(g-this._baseIndex),this._baseIndex=g),S&&S.data&&(this._rowCount+=S.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)r.postMessage({results:S,workerId:c.WORKER_ID,finished:b});else if($(this._config.chunk)&&!w){if(this._config.chunk(S,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=S=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(S.data),this._completeResults.errors=this._completeResults.errors.concat(S.errors),this._completeResults.meta=S.meta),this._completed||!b||!$(this._config.complete)||S&&S.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),b||S&&S.meta.paused||this._nextChunk(),S}this._halted=!0},this._sendError=function(g){$(this._config.error)?this._config.error(g):a&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:g,finished:!1})}}function u(h){var g;(h=h||{}).chunkSize||(h.chunkSize=c.RemoteChunkSize),f.call(this,h),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(w){this._input=w,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(g=new XMLHttpRequest,this._config.withCredentials&&(g.withCredentials=this._config.withCredentials),s||(g.onload=C(this._chunkLoaded,this),g.onerror=C(this._chunkError,this)),g.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var w,b=this._config.downloadRequestHeaders;for(w in b)g.setRequestHeader(w,b[w])}var S;this._config.chunkSize&&(S=this._start+this._config.chunkSize-1,g.setRequestHeader("Range","bytes="+this._start+"-"+S));try{g.send(this._config.downloadRequestBody)}catch(P){this._chunkError(P.message)}s&&g.status===0&&this._chunkError()}},this._chunkLoaded=function(){g.readyState===4&&(g.status<200||400<=g.status?this._chunkError():(this._start+=this._config.chunkSize||g.responseText.length,this._finished=!this._config.chunkSize||this._start>=(w=>(w=w.getResponseHeader("Content-Range"))!==null?parseInt(w.substring(w.lastIndexOf("/")+1)):-1)(g),this.parseChunk(g.responseText)))},this._chunkError=function(w){w=g.statusText||w,this._sendError(new Error(w))}}function d(h){(h=h||{}).chunkSize||(h.chunkSize=c.LocalChunkSize),f.call(this,h);var g,w,b=typeof FileReader<"u";this.stream=function(S){this._input=S,w=S.slice||S.webkitSlice||S.mozSlice,b?((g=new FileReader).onload=C(this._chunkLoaded,this),g.onerror=C(this._chunkError,this)):g=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input,P=(this._config.chunkSize&&(P=Math.min(this._start+this._config.chunkSize,this._input.size),S=w.call(S,this._start,P)),g.readAsText(S,this._config.encoding));b||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(g.error)}}function p(h){var g;f.call(this,h=h||{}),this.stream=function(w){return g=w,this._nextChunk()},this._nextChunk=function(){var w,b;if(!this._finished)return w=this._config.chunkSize,g=w?(b=g.substring(0,w),g.substring(w)):(b=g,""),this._finished=!g,this.parseChunk(b)}}function _(h){f.call(this,h=h||{});var g=[],w=!0,b=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){b&&g.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),g.length?this.parseChunk(g.shift()):w=!0},this._streamData=C(function(S){try{g.push(typeof S=="string"?S:S.toString(this._config.encoding)),w&&(w=!1,this._checkIsFinished(),this.parseChunk(g.shift()))}catch(P){this._streamError(P)}},this),this._streamError=C(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=C(function(){this._streamCleanUp(),b=!0,this._streamData("")},this),this._streamCleanUp=C(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function x(h){var g,w,b,S,P=Math.pow(2,53),M=-P,F=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,U=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,q=this,Q=0,L=0,fe=!1,B=!1,z=[],D={data:[],errors:[],meta:{}};function de(V){return h.skipEmptyLines==="greedy"?V.join("").trim()==="":V.length===1&&V[0].length===0}function he(){if(D&&b&&(Pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),b=!1),h.skipEmptyLines&&(D.data=D.data.filter(function(oe){return!de(oe)})),we()){let oe=function(pe,ce){$(h.transformHeader)&&(pe=h.transformHeader(pe,ce)),z.push(pe)};var W=oe;if(D)if(Array.isArray(D.data[0])){for(var V=0;we()&&V<D.data.length;V++)D.data[V].forEach(oe);D.data.splice(0,1)}else D.data.forEach(oe)}function J(oe,pe){for(var ce=h.header?{}:[],re=0;re<oe.length;re++){var K=re,ve=oe[re],ve=((ee,se)=>(ge=>(h.dynamicTypingFunction&&h.dynamicTyping[ge]===void 0&&(h.dynamicTyping[ge]=h.dynamicTypingFunction(ge)),(h.dynamicTyping[ge]||h.dynamicTyping)===!0))(ee)?se==="true"||se==="TRUE"||se!=="false"&&se!=="FALSE"&&((ge=>{if(F.test(ge)&&(ge=parseFloat(ge),M<ge&&ge<P))return 1})(se)?parseFloat(se):U.test(se)?new Date(se):se===""?null:se):se)(K=h.header?re>=z.length?"__parsed_extra":z[re]:K,ve=h.transform?h.transform(ve,K):ve);K==="__parsed_extra"?(ce[K]=ce[K]||[],ce[K].push(ve)):ce[K]=ve}return h.header&&(re>z.length?Pe("FieldMismatch","TooManyFields","Too many fields: expected "+z.length+" fields but parsed "+re,L+pe):re<z.length&&Pe("FieldMismatch","TooFewFields","Too few fields: expected "+z.length+" fields but parsed "+re,L+pe)),ce}var ue;D&&(h.header||h.dynamicTyping||h.transform)&&(ue=1,!D.data.length||Array.isArray(D.data[0])?(D.data=D.data.map(J),ue=D.data.length):D.data=J(D.data,0),h.header&&D.meta&&(D.meta.fields=z),L+=ue)}function we(){return h.header&&z.length===0}function Pe(V,J,ue,W){V={type:V,code:J,message:ue},W!==void 0&&(V.row=W),D.errors.push(V)}$(h.step)&&(S=h.step,h.step=function(V){D=V,we()?he():(he(),D.data.length!==0&&(Q+=V.data.length,h.preview&&Q>h.preview?w.abort():(D.data=D.data[0],S(D,q))))}),this.parse=function(V,J,ue){var W=h.quoteChar||'"',W=(h.newline||(h.newline=this.guessLineEndings(V,W)),b=!1,h.delimiter?$(h.delimiter)&&(h.delimiter=h.delimiter(V),D.meta.delimiter=h.delimiter):((W=((oe,pe,ce,re,K)=>{var ve,ee,se,ge;K=K||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ee=0;Ee<K.length;Ee++){for(var Re,ft=K[Ee],be=0,Le=0,ye=0,_e=(se=void 0,new O({comments:re,delimiter:ft,newline:pe,preview:10}).parse(oe)),st=0;st<_e.data.length;st++)ce&&de(_e.data[st])?ye++:(Re=_e.data[st].length,Le+=Re,se===void 0?se=Re:0<Re&&(be+=Math.abs(Re-se),se=Re));0<_e.data.length&&(Le/=_e.data.length-ye),(ee===void 0||be<=ee)&&(ge===void 0||ge<Le)&&1.99<Le&&(ee=be,ve=ft,ge=Le)}return{successful:!!(h.delimiter=ve),bestDelimiter:ve}})(V,h.newline,h.skipEmptyLines,h.comments,h.delimitersToGuess)).successful?h.delimiter=W.bestDelimiter:(b=!0,h.delimiter=c.DefaultDelimiter),D.meta.delimiter=h.delimiter),k(h));return h.preview&&h.header&&W.preview++,g=V,w=new O(W),D=w.parse(g,J,ue),he(),fe?{meta:{paused:!0}}:D||{meta:{paused:!1}}},this.paused=function(){return fe},this.pause=function(){fe=!0,w.abort(),g=$(h.chunk)?"":g.substring(w.getCharIndex())},this.resume=function(){q.streamer._halted?(fe=!1,q.streamer.parseChunk(g,!0)):setTimeout(q.resume,3)},this.aborted=function(){return B},this.abort=function(){B=!0,w.abort(),D.meta.aborted=!0,$(h.complete)&&h.complete(D),g=""},this.guessLineEndings=function(oe,W){oe=oe.substring(0,1048576);var W=new RegExp(A(W)+"([^]*?)"+A(W),"gm"),ue=(oe=oe.replace(W,"")).split("\r"),W=oe.split(`
`),oe=1<W.length&&W[0].length<ue[0].length;if(ue.length===1||oe)return`
`;for(var pe=0,ce=0;ce<ue.length;ce++)ue[ce][0]===`
`&&pe++;return pe>=ue.length/2?`\r
`:"\r"}}function A(h){return h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(h){var g=(h=h||{}).delimiter,w=h.newline,b=h.comments,S=h.step,P=h.preview,M=h.fastMode,F=null,U=!1,q=h.quoteChar==null?'"':h.quoteChar,Q=q;if(h.escapeChar!==void 0&&(Q=h.escapeChar),(typeof g!="string"||-1<c.BAD_DELIMITERS.indexOf(g))&&(g=","),b===g)throw new Error("Comment character same as delimiter");b===!0?b="#":(typeof b!="string"||-1<c.BAD_DELIMITERS.indexOf(b))&&(b=!1),w!==`
`&&w!=="\r"&&w!==`\r
`&&(w=`
`);var L=0,fe=!1;this.parse=function(B,z,D){if(typeof B!="string")throw new Error("Input must be a string");var de=B.length,he=g.length,we=w.length,Pe=b.length,V=$(S),J=[],ue=[],W=[],oe=L=0;if(!B)return be();if(M||M!==!1&&B.indexOf(q)===-1){for(var pe=B.split(w),ce=0;ce<pe.length;ce++){if(W=pe[ce],L+=W.length,ce!==pe.length-1)L+=w.length;else if(D)return be();if(!b||W.substring(0,Pe)!==b){if(V){if(J=[],ge(W.split(g)),Le(),fe)return be()}else ge(W.split(g));if(P&&P<=ce)return J=J.slice(0,P),be(!0)}}return be()}for(var re=B.indexOf(g,L),K=B.indexOf(w,L),ve=new RegExp(A(Q)+A(q),"g"),ee=B.indexOf(q,L);;)if(B[L]===q)for(ee=L,L++;;){if((ee=B.indexOf(q,ee+1))===-1)return D||ue.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:J.length,index:L}),Re();if(ee===de-1)return Re(B.substring(L,ee).replace(ve,q));if(q===Q&&B[ee+1]===Q)ee++;else if(q===Q||ee===0||B[ee-1]!==Q){re!==-1&&re<ee+1&&(re=B.indexOf(g,ee+1));var se=Ee((K=K!==-1&&K<ee+1?B.indexOf(w,ee+1):K)===-1?re:Math.min(re,K));if(B.substr(ee+1+se,he)===g){W.push(B.substring(L,ee).replace(ve,q)),B[L=ee+1+se+he]!==q&&(ee=B.indexOf(q,L)),re=B.indexOf(g,L),K=B.indexOf(w,L);break}if(se=Ee(K),B.substring(ee+1+se,ee+1+se+we)===w){if(W.push(B.substring(L,ee).replace(ve,q)),ft(ee+1+se+we),re=B.indexOf(g,L),ee=B.indexOf(q,L),V&&(Le(),fe))return be();if(P&&J.length>=P)return be(!0);break}ue.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:J.length,index:L}),ee++}}else if(b&&W.length===0&&B.substring(L,L+Pe)===b){if(K===-1)return be();L=K+we,K=B.indexOf(w,L),re=B.indexOf(g,L)}else if(re!==-1&&(re<K||K===-1))W.push(B.substring(L,re)),L=re+he,re=B.indexOf(g,L);else{if(K===-1)break;if(W.push(B.substring(L,K)),ft(K+we),V&&(Le(),fe))return be();if(P&&J.length>=P)return be(!0)}return Re();function ge(ye){J.push(ye),oe=L}function Ee(ye){var _e=0;return _e=ye!==-1&&(ye=B.substring(ee+1,ye))&&ye.trim()===""?ye.length:_e}function Re(ye){return D||(ye===void 0&&(ye=B.substring(L)),W.push(ye),L=de,ge(W),V&&Le()),be()}function ft(ye){L=ye,ge(W),W=[],K=B.indexOf(w,L)}function be(ye){if(h.header&&!z&&J.length&&!U){var _e=J[0],st=Object.create(null),oi=new Set(_e);let Rs=!1;for(let Yt=0;Yt<_e.length;Yt++){let Ge=_e[Yt];if(st[Ge=$(h.transformHeader)?h.transformHeader(Ge,Yt):Ge]){let gn,Ns=st[Ge];for(;gn=Ge+"_"+Ns,Ns++,oi.has(gn););oi.add(gn),_e[Yt]=gn,st[Ge]++,Rs=!0,(F=F===null?{}:F)[gn]=Ge}else st[Ge]=1,_e[Yt]=Ge;oi.add(Ge)}Rs&&console.warn("Duplicate headers found and renamed."),U=!0}return{data:J,errors:ue,meta:{delimiter:g,linebreak:w,aborted:fe,truncated:!!ye,cursor:oe+(z||0),renamedHeaders:F}}}function Le(){S(be()),J=[],ue=[]}},this.abort=function(){fe=!0},this.getCharIndex=function(){return L}}function m(h){var g=h.data,w=o[g.workerId],b=!1;if(g.error)w.userError(g.error,g.file);else if(g.results&&g.results.data){var S={abort:function(){b=!0,v(g.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if($(w.userStep)){for(var P=0;P<g.results.data.length&&(w.userStep({data:g.results.data[P],errors:g.results.errors,meta:g.results.meta},S),!b);P++);delete g.results}else $(w.userChunk)&&(w.userChunk(g.results,S,g.file),delete g.results)}g.finished&&!b&&v(g.workerId,g.results)}function v(h,g){var w=o[h];$(w.userComplete)&&w.userComplete(g),w.terminate(),delete o[h]}function y(){throw new Error("Not implemented.")}function k(h){if(typeof h!="object"||h===null)return h;var g,w=Array.isArray(h)?[]:{};for(g in h)w[g]=k(h[g]);return w}function C(h,g){return function(){h.apply(g,arguments)}}function $(h){return typeof h=="function"}return c.parse=function(h,g){var w=(g=g||{}).dynamicTyping||!1;if($(w)&&(g.dynamicTypingFunction=w,w={}),g.dynamicTyping=w,g.transform=!!$(g.transform)&&g.transform,!g.worker||!c.WORKERS_SUPPORTED)return w=null,c.NODE_STREAM_INPUT,typeof h=="string"?(h=(b=>b.charCodeAt(0)!==65279?b:b.slice(1))(h),w=new(g.download?u:p)(g)):h.readable===!0&&$(h.read)&&$(h.on)?w=new _(g):(r.File&&h instanceof File||h instanceof Object)&&(w=new d(g)),w.stream(h);(w=(()=>{var b;return!!c.WORKERS_SUPPORTED&&(b=(()=>{var S=r.URL||r.webkitURL||null,P=n.toString();return c.BLOB_URL||(c.BLOB_URL=S.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",P,")();"],{type:"text/javascript"})))})(),(b=new r.Worker(b)).onmessage=m,b.id=l++,o[b.id]=b)})()).userStep=g.step,w.userChunk=g.chunk,w.userComplete=g.complete,w.userError=g.error,g.step=$(g.step),g.chunk=$(g.chunk),g.complete=$(g.complete),g.error=$(g.error),delete g.worker,w.postMessage({input:h,config:g,workerId:w.id})},c.unparse=function(h,g){var w=!1,b=!0,S=",",P=`\r
`,M='"',F=M+M,U=!1,q=null,Q=!1,L=((()=>{if(typeof g=="object"){if(typeof g.delimiter!="string"||c.BAD_DELIMITERS.filter(function(z){return g.delimiter.indexOf(z)!==-1}).length||(S=g.delimiter),typeof g.quotes!="boolean"&&typeof g.quotes!="function"&&!Array.isArray(g.quotes)||(w=g.quotes),typeof g.skipEmptyLines!="boolean"&&typeof g.skipEmptyLines!="string"||(U=g.skipEmptyLines),typeof g.newline=="string"&&(P=g.newline),typeof g.quoteChar=="string"&&(M=g.quoteChar),typeof g.header=="boolean"&&(b=g.header),Array.isArray(g.columns)){if(g.columns.length===0)throw new Error("Option columns is empty");q=g.columns}g.escapeChar!==void 0&&(F=g.escapeChar+M),g.escapeFormulae instanceof RegExp?Q=g.escapeFormulae:typeof g.escapeFormulae=="boolean"&&g.escapeFormulae&&(Q=/^[=+\-@\t\r].*$/)}})(),new RegExp(A(M),"g"));if(typeof h=="string"&&(h=JSON.parse(h)),Array.isArray(h)){if(!h.length||Array.isArray(h[0]))return fe(null,h,U);if(typeof h[0]=="object")return fe(q||Object.keys(h[0]),h,U)}else if(typeof h=="object")return typeof h.data=="string"&&(h.data=JSON.parse(h.data)),Array.isArray(h.data)&&(h.fields||(h.fields=h.meta&&h.meta.fields||q),h.fields||(h.fields=Array.isArray(h.data[0])?h.fields:typeof h.data[0]=="object"?Object.keys(h.data[0]):[]),Array.isArray(h.data[0])||typeof h.data[0]=="object"||(h.data=[h.data])),fe(h.fields||[],h.data||[],U);throw new Error("Unable to serialize unrecognized input");function fe(z,D,de){var he="",we=(typeof z=="string"&&(z=JSON.parse(z)),typeof D=="string"&&(D=JSON.parse(D)),Array.isArray(z)&&0<z.length),Pe=!Array.isArray(D[0]);if(we&&b){for(var V=0;V<z.length;V++)0<V&&(he+=S),he+=B(z[V],V);0<D.length&&(he+=P)}for(var J=0;J<D.length;J++){var ue=(we?z:D[J]).length,W=!1,oe=we?Object.keys(D[J]).length===0:D[J].length===0;if(de&&!we&&(W=de==="greedy"?D[J].join("").trim()==="":D[J].length===1&&D[J][0].length===0),de==="greedy"&&we){for(var pe=[],ce=0;ce<ue;ce++){var re=Pe?z[ce]:ce;pe.push(D[J][re])}W=pe.join("").trim()===""}if(!W){for(var K=0;K<ue;K++){0<K&&!oe&&(he+=S);var ve=we&&Pe?z[K]:K;he+=B(D[J][ve],K)}J<D.length-1&&(!de||0<ue&&!oe)&&(he+=P)}}return he}function B(z,D){var de,he;return z==null?"":z.constructor===Date?JSON.stringify(z).slice(1,25):(he=!1,Q&&typeof z=="string"&&Q.test(z)&&(z="'"+z,he=!0),de=z.toString().replace(L,F),(he=he||w===!0||typeof w=="function"&&w(z,D)||Array.isArray(w)&&w[D]||((we,Pe)=>{for(var V=0;V<Pe.length;V++)if(-1<we.indexOf(Pe[V]))return!0;return!1})(de,c.BAD_DELIMITERS)||-1<de.indexOf(S)||de.charAt(0)===" "||de.charAt(de.length-1)===" ")?M+de+M:de)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=O,c.ParserHandle=x,c.NetworkStreamer=u,c.FileStreamer=d,c.StringStreamer=p,c.ReadableStreamStreamer=_,r.jQuery&&((i=r.jQuery).fn.parse=function(h){var g=h.config||{},w=[];return this.each(function(P){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var M=0;M<this.files.length;M++)w.push({file:this.files[M],inputElem:this,instanceConfig:i.extend({},g)})}),b(),this;function b(){if(w.length===0)$(h.complete)&&h.complete();else{var P,M,F,U,q=w[0];if($(h.before)){var Q=h.before(q.file,q.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return P="AbortError",M=q.file,F=q.inputElem,U=Q.reason,void($(h.error)&&h.error({name:P},M,F,U));if(Q.action==="skip")return void S();typeof Q.config=="object"&&(q.instanceConfig=i.extend(q.instanceConfig,Q.config))}else if(Q==="skip")return void S()}var L=q.instanceConfig.complete;q.instanceConfig.complete=function(fe){$(L)&&L(fe,q.file,q.inputElem),S()},c.parse(q.file,q.instanceConfig)}}function S(){w.splice(0,1),b()}}),a&&(r.onmessage=function(h){h=h.data,c.WORKER_ID===void 0&&h&&(c.WORKER_ID=h.workerId),typeof h.input=="string"?r.postMessage({workerId:c.WORKER_ID,results:c.parse(h.input,h.config),finished:!0}):(r.File&&h.input instanceof File||h.input instanceof Object)&&(h=c.parse(h.input,h.config))&&r.postMessage({workerId:c.WORKER_ID,results:h,finished:!0})}),(u.prototype=Object.create(f.prototype)).constructor=u,(d.prototype=Object.create(f.prototype)).constructor=d,(p.prototype=Object.create(p.prototype)).constructor=p,(_.prototype=Object.create(f.prototype)).constructor=_,c})})(dr)),dr.exports}Tf();function ms({name:e=null,id:t=null,createdAt:n=Date.now(),reviewerName:r=""}){if(!t||typeof t!="string"||!t.trim())throw new Error("AMSTAR2Checklist requires a non-empty string id.");if(!e||typeof e!="string"||!e.trim())throw new Error("AMSTAR2Checklist requires a non-empty string name.");return{name:e,reviewerName:r||"",createdAt:n,id:t,q1:{answers:[[!1,!1,!1,!1],[!1],[!1,!0]],critical:!1},q2:{answers:[[!1,!1,!1,!1],[!1,!1,!1],[!1,!1,!0]],critical:!0},q3:{answers:[[!1,!1,!1],[!1,!0]],critical:!1},q4:{answers:[[!1,!1,!1],[!1,!1,!1,!1,!1],[!1,!1,!0]],critical:!0},q5:{answers:[[!1,!1],[!1,!0]],critical:!1},q6:{answers:[[!1,!1],[!1,!0]],critical:!1},q7:{answers:[[!1],[!1],[!1,!1,!0]],critical:!0},q8:{answers:[[!1,!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!0]],critical:!1},q9a:{answers:[[!1,!1],[!1,!1],[!1,!1,!0,!1]],critical:!0},q9b:{answers:[[!1,!1],[!1,!1],[!1,!1,!0,!1]],critical:!0},q10:{answers:[[!1],[!1,!0]],critical:!1},q11a:{answers:[[!1,!1,!1],[!1,!0,!1]],critical:!0},q11b:{answers:[[!1,!1,!1,!1],[!1,!0,!1]],critical:!0},q12:{answers:[[!1,!1],[!1,!0,!1]],critical:!1},q13:{answers:[[!1,!1],[!1,!0]],critical:!0},q14:{answers:[[!1,!1],[!1,!0]],critical:!1},q15:{answers:[[!1],[!1,!0,!1]],critical:!0},q16:{answers:[[!1,!1],[!1,!0]],critical:!1}}}function Ks(e){if(!e||typeof e!="object")return"Error";let t=0,n=0;return Object.entries(e).forEach(([r,i])=>{if(!/^q\d+[a-z]*$/i.test(r)||!i||!Array.isArray(i.answers))return;const s=Yo(i.answers,r);(!s||s==="No")&&(i.critical?t++:n++)}),t>1?"Critically Low":t===1?"Low":n>1?"Moderate":"High"}function Yo(e,t){const n=["q11a","q11b","q12","q15"],r=["Yes","No","No MA"],i=["Yes","Partial Yes","No","No MA"];if(!Array.isArray(e)||e.length===0)return null;const s=e[e.length-1];if(!Array.isArray(s))return null;const a=s.findIndex(o=>o===!0);return a===-1?null:n.includes(t)?r[a]||null:s.length===2?a===0?"Yes":"No":s.length>=3&&i[a]||null}function Mf(e){if(!e||typeof e!="object")return null;const t={};return Object.entries(e).forEach(([n,r])=>{if(!/^q\d+[a-z]*$/i.test(n)||!r||!Array.isArray(r.answers))return;const i=Yo(r.answers,n);t[n]=i}),"q9a"in t&&"q9b"in t&&(t.q9a==="No"||t.q9b==="No"?t.q9="No":t.q9a==="No MA"&&t.q9b==="No MA"?t.q9="No MA":t.q9="Yes"),delete t.q9a,delete t.q9b,"q11a"in t&&"q11b"in t&&(t.q11a==="No"||t.q11b==="No"?t.q11="No":t.q11a==="No MA"&&t.q11b==="No MA"?t.q11="No MA":t.q11="Yes"),delete t.q11a,delete t.q11b,t}var If=T('<div class="bg-white rounded-lg shadow-md p-8 text-sm"><div class=flex><h3 class="font-semibold text-gray-900"></h3></div><div class="font-semibold text-gray-900 h-4 mt-2 mb-1"></div><div class="font-semibold text-gray-900 h-4 mt-2">'),Lf=T('<div class="bg-white rounded-lg shadow-md p-8 text-sm"><div class=flex><h3 class="font-semibold text-gray-900"></h3></div><div class="font-semibold text-gray-900 h-4 mt-2"></div><div class="font-semibold text-gray-900 h-4 mt-4">'),qf=T('<div class="bg-white rounded-lg shadow-md p-7"><div class=flex><h3 class="font-semibold text-sm text-gray-900 mb-1">'),Df=T("<div class=ml-auto><button>"),jf=T('<div class="flex flex-col gap-4 sm:flex-row sm:gap-6">'),Ff=T('<div><div class="font-semibold text-gray-800 text-xs break-words whitespace-normal min-w-0 w-full min-h-[2rem] flex items-center">'),Uf=T('<div class="flex flex-col gap-2 mt-1">'),Bf=T('<label class="flex items-center space-x-2 text-xs"><input type=radio class="w-3.5 h-3.5 text-blue-600 border-gray-300 focus:ring-blue-500 cursor-pointer"><span class="text-gray-700 break-words">'),Vf=T('<div class="flex flex-col gap-2">'),Hf=T('<label class="flex items-center space-x-2 text-xs"><input type=checkbox class="w-3 h-3 shrink-0 text-blue-600 border-gray-300 focus:ring-blue-500"><span class="text-gray-700 break-words">'),zf=T("<div class=space-y-6>"),Yf=T('<div class="min-h-screen bg-linear-to-br from-blue-50 to-indigo-100"><div class="container mx-auto px-4 py-6 max-w-5xl"><div class="bg-white rounded-lg shadow-lg p-6 mb-8"><h1 class="text-2xl font-bold text-gray-900 mb-4">AMSTAR 2 Checklist</h1><div class="grid md:grid-cols-3 gap-4 text-xs"><div><label class="block font-medium text-gray-700 mb-2">Review Title</label><input type=text class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"placeholder="Enter review title"></div><div><label class="block font-medium text-gray-700 mb-2">Reviewer Name</label><input type=text class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"placeholder="Enter your name"></div><div><label class="block font-medium text-gray-700 mb-2">Review Date</label><input type=date class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs">'),Wf=T("<div>Loading...");function Qf(e){const t=()=>e.checklistState().q1,n=$e.q1;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0){const l=a[0].every(Boolean);a[2][0]=l,a[2][1]=!l}i===2&&(s===0&&a[2][0]&&(a[2][1]=!1),s===1&&a[2][1]&&(a[2][0]=!1));const o={...e.checklistState().q1,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function Kf(e){const t=()=>e.checklistState().q2,n=$e.q2;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0||i===1){const l=a[0].every(Boolean),c=l&&a[1].every(Boolean);a[2][0]=c,a[2][1]=!c&&l,a[2][2]=!c&&!l}i===2&&(a[2]=a[2].map((l,c)=>c===s?!t().answers[2][s]:!1));const o={...e.checklistState().q2,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function Gf(e){const t=()=>e.checklistState().q3,n=$e.q3;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0){const l=a[0].some(Boolean);a[1][0]=l,a[1][1]=!l}i===1&&(s===0&&a[1][0]&&(a[1][1]=!1),s===1&&a[1][1]&&(a[1][0]=!1));const o={...e.checklistState().q3,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function Xf(e){const t=()=>e.checklistState().q4,n=$e.q4;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0||i===1){const l=a[0].every(Boolean),c=l&&a[1].every(Boolean);a[2][0]=c,a[2][1]=!c&&l,a[2][2]=!c&&!l}i===2&&(a[2]=a[2].map((l,c)=>c===s?!t().answers[2][s]:!1));const o={...e.checklistState().q4,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function Jf(e){const t=()=>e.checklistState().q5,n=$e.q5;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0){const l=a[0].some(Boolean);a[1][0]=l,a[1][1]=!l}i===1&&(s===0&&a[1][0]&&(a[1][1]=!1),s===1&&a[1][1]&&(a[1][0]=!1));const o={...e.checklistState().q5,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function Zf(e){const t=()=>e.checklistState().q6,n=$e.q6;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0){const l=a[0].some(Boolean);a[1][0]=l,a[1][1]=!l}i===1&&(s===0&&a[1][0]&&(a[1][1]=!1),s===1&&a[1][1]&&(a[1][0]=!1));const o={...e.checklistState().q6,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function ed(e){const t=()=>e.checklistState().q7,n=$e.q7;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0||i===1){const l=a[0].every(Boolean),c=l&&a[1].every(Boolean);a[2][0]=c,a[2][1]=!c&&l,a[2][2]=!c&&!l}i===2&&(a[2]=a[2].map((l,c)=>c===s?!t().answers[2][s]:!1));const o={...e.checklistState().q7,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function td(e){const t=()=>e.checklistState().q8,n=$e.q8;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0||i===1){const l=a[0].every(Boolean),c=l&&a[1].every(Boolean);a[2][0]=c,a[2][1]=!c&&l,a[2][2]=!c&&!l}i===2&&(a[2]=a[2].map((l,c)=>c===s?!t().answers[2][s]:!1));const o={...e.checklistState().q8,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function nd(e){const t=()=>e.checklistState().q9a,n=()=>e.checklistState().q9b,r=$e.q9;function i(o,l){const c=t().answers.map(u=>[...u]);if(c[o][l]=!t().answers[o][l],o===0||o===1){const u=c[0].every(Boolean),d=u&&c[1].every(Boolean);c[2][0]=d,c[2][1]=!d&&u,c[2][2]=!d&&!u,c[2][3]=!1}o===2&&(c[2]=c[2].map((u,d)=>d===l?!t().answers[2][l]:!1));const f={...e.checklistState().q9a,answers:c};e.onUpdatea(f)}function s(o,l){const c=n().answers.map(u=>[...u]);if(c[o][l]=!n().answers[o][l],o===0||o===1){const u=c[0].every(Boolean),d=u&&c[1].every(Boolean);c[2][0]=d,c[2][1]=!d&&u,c[2][2]=!d&&!u,c[2][3]=!1}o===2&&(c[2]=c[2].map((u,d)=>d===l?!n().answers[2][l]:!1));const f={...e.checklistState().q9b,answers:c};console.log("Updating q9b to",f),e.onUpdateb(f)}function a(o){const l=o.critical,c={...t(),critical:l},f={...n(),critical:l};e.onUpdatea(c),setTimeout(()=>{e.onUpdateb(f)},10)}return(()=>{var o=If(),l=o.firstChild,c=l.firstChild,f=l.nextSibling,u=f.nextSibling;return N(c,()=>r.text),N(l,E(ws,{state:t,onUpdate:a}),null),N(f,()=>r.subtitle),N(o,E(Vn,{state:t,question:{text:"q9a"},get columns(){return r.columns},handleChange:i}),u),N(u,()=>r.subtitle2),N(o,E(Vn,{state:n,question:{text:"q9b"},get columns(){return r.columns2},handleChange:s}),null),o})()}function rd(e){const t=()=>e.checklistState().q10,n=$e.q10;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0){const l=a[0].some(Boolean);a[1][0]=l,a[1][1]=!l}i===1&&(s===0&&a[1][0]&&(a[1][1]=!1),s===1&&a[1][1]&&(a[1][0]=!1));const o={...e.checklistState().q10,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function id(e){const t=()=>e.checklistState().q11a,n=()=>e.checklistState().q11b,r=$e.q11;function i(o,l){const c=t().answers.map(u=>[...u]);if(c[o][l]=!t().answers[o][l],o===0){const u=c[0].every(Boolean);c[1][0]=u,c[1][1]=!u,c[1][2]=!1}o===1&&(c[1]=c[1].map((u,d)=>d===l?!t().answers[1][l]:!1));const f={...e.checklistState().q11a,answers:c};e.onUpdatea(f)}function s(o,l){const c=n().answers.map(u=>[...u]);if(c[o][l]=!n().answers[o][l],o===0){const u=c[0].every(Boolean);c[1][0]=u,c[1][1]=!u,c[1][2]=!1}o===1&&(c[1]=c[1].map((u,d)=>d===l?!n().answers[1][l]:!1));const f={...e.checklistState().q11b,answers:c};e.onUpdateb(f)}function a(o){const l=o.critical,c={...t(),critical:l},f={...n(),critical:l};e.onUpdatea(c),setTimeout(()=>{e.onUpdateb(f)},10)}return(()=>{var o=Lf(),l=o.firstChild,c=l.firstChild,f=l.nextSibling,u=f.nextSibling;return N(c,()=>r.text),N(l,E(ws,{state:t,onUpdate:a}),null),N(f,()=>r.subtitle),N(o,E(Vn,{state:t,question:{text:"q11a"},get columns(){return r.columns},handleChange:i,width:"w-48"}),u),N(u,()=>r.subtitle2),N(o,E(Vn,{state:n,question:{text:"q11b"},get columns(){return r.columns2},handleChange:s,width:"w-48"}),null),o})()}function sd(e){const t=()=>e.checklistState().q12,n=$e.q12;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0){const l=a[0].some(Boolean);a[1][0]=l,a[1][1]=!l,a[1][2]=!1}i===1&&(a[1]=a[1].map((l,c)=>c===s?!t().answers[1][s]:!1));const o={...e.checklistState().q12,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e,{width:"w-48"}))}function ad(e){const t=()=>e.checklistState().q13,n=$e.q13;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0){const l=a[0].some(Boolean);a[1][0]=l,a[1][1]=!l}i===1&&(s===0&&a[1][0]&&(a[1][1]=!1),s===1&&a[1][1]&&(a[1][0]=!1));const o={...e.checklistState().q13,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function od(e){const t=()=>e.checklistState().q14,n=$e.q14;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0){const l=a[0].some(Boolean);a[1][0]=l,a[1][1]=!l}i===1&&(s===0&&a[1][0]&&(a[1][1]=!1),s===1&&a[1][1]&&(a[1][0]=!1));const o={...e.checklistState().q14,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function ld(e){const t=()=>e.checklistState().q15,n=$e.q15;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0){const l=a[0].some(Boolean);a[1][0]=l,a[1][1]=!l,a[1][2]=!1}i===1&&(a[1]=a[1].map((l,c)=>c===s?!t().answers[1][s]:!1));const o={...e.checklistState().q15,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e,{width:"w-48"}))}function cd(e){const t=()=>e.checklistState().q16,n=$e.q16;function r(i,s){const a=t().answers.map(l=>[...l]);if(a[i][s]=!t().answers[i][s],i===0){const l=a[0].some(Boolean);a[1][0]=l,a[1][1]=!l}i===1&&(s===0&&a[1][0]&&(a[1][1]=!1),s===1&&a[1][1]&&(a[1][0]=!1));const o={...e.checklistState().q16,answers:a};e.onUpdate(o)}return E(Ie,X({state:t,question:n,handleChange:r},e))}function Ie(e){return(()=>{var t=qf(),n=t.firstChild,r=n.firstChild;return N(r,()=>e.question.text),N(n,E(ws,{get state(){return e.state},get onUpdate(){return e.onUpdate}}),null),N(t,E(Vn,X({get columns(){return e.question.columns}},e)),null),t})()}function ws(e){function t(n){const r={...e.state(),critical:n};e.onUpdate(r)}return(()=>{var n=Df(),r=n.firstChild;return r.$$click=()=>t(!e.state().critical),N(r,()=>e.state().critical?"Critical":"Not Critical"),G(i=>{var s=`ml-2 px-3 h-6 rounded-full text-xs font-medium transition-colors text-nowrap
        ${e.state().critical?"bg-red-100 text-red-700 border border-red-300 hover:bg-red-200":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,a=e.state().critical;return s!==i.e&&Ce(r,i.e=s),a!==i.t&&ke(r,"aria-pressed",i.t=a),i},{e:void 0,t:void 0}),n})()}function Vn(e){return(()=>{var t=jf();return N(t,()=>e.columns.map((n,r)=>(()=>{var i=Ff(),s=i.firstChild;return ke(i,"key",r),N(s,()=>n.label),N(i,(()=>{var a=xt(()=>r===e.columns.length-1);return()=>a()?(()=>{var o=Uf();return N(o,()=>n.options.map((l,c)=>(()=>{var f=Bf(),u=f.firstChild,d=u.nextSibling;return ke(f,"key",c),u.addEventListener("change",()=>e.handleChange(r,c)),N(d,l),G(()=>ke(u,"name",`col-${r}-${e.question?.text??""}`)),G(()=>u.checked=e.state().answers[r][c]),f})())),o})():(()=>{var o=Vf();return N(o,()=>n.options.map((l,c)=>(()=>{var f=Hf(),u=f.firstChild,d=u.nextSibling;return ke(f,"key",c),u.addEventListener("change",()=>e.handleChange(r,c)),N(d,l),G(()=>u.checked=e.state().answers[r][c]),f})())),o})()})(),null),G(()=>Ce(i,r===e.columns.length-1?`${e.width??"w-32"} flex flex-col min-w-0`:"flex-1 flex flex-col min-w-0")),i})())),t})()}function Gs(){const[e,t]=j(""),[n,r]=j(""),[i,s]=j(""),{currentChecklist:a,setCurrentChecklist:o,updateChecklist:l,dataLoading:c,createChecklist:f}=zt(),u=Kr(),d=Et();xe(async()=>{if(u.checklistSlug==="new"){const _=ms({name:"New AMSTAR 2 Checklist",id:await Dt(),createdAt:Date.now(),reviewerName:""});if(o(_),u.projectSlug&&u.reviewSlug){const x=tt(_.name)+"-"+_.id;d(`/projects/${u.projectSlug}/reviews/${u.reviewSlug}/checklists/${x}`,{replace:!0})}}else if(u.checklistSlug!==void 0){const _=u.checklistSlug.lastIndexOf("-");let x=_!==-1?u.checklistSlug.slice(_+1):u.checklistSlug;o({id:x})}else c()||(console.warn("AMSTAR2Checklist: No current checklist found for",u.checklistSlug),d("/dashboard"))}),xe(()=>{a()&&(t(a().name||""),r(a().reviewerName||""),s(a().reviewDate||""))});const p=_=>{const x={...a(),..._};l(x)};return(()=>{var _=Yf(),x=_.firstChild,A=x.firstChild,O=A.firstChild,m=O.nextSibling,v=m.firstChild,y=v.firstChild,k=y.nextSibling,C=v.nextSibling,$=C.firstChild,h=$.nextSibling,g=C.nextSibling,w=g.firstChild,b=w.nextSibling;return k.addEventListener("change",S=>{if(t(S.target.value),p({name:S.target.value}),console.log("Review name changed to",S.target.value),u.projectSlug&&u.reviewSlug&&u.checklistSlug&&a()){const P=u.checklistSlug.lastIndexOf("-"),M=P!==-1?u.checklistSlug.slice(P+1):u.checklistSlug,F=tt(S.target.value)+"-"+M;d(`/projects/${u.projectSlug}/reviews/${u.reviewSlug}/checklists/${F}`,{replace:!0})}}),h.addEventListener("change",S=>{r(S.target.value),p({reviewerName:S.target.value})}),b.addEventListener("change",S=>{s(S.target.value),p({reviewDate:S.target.value})}),N(x,E(me,{get when(){return xt(()=>!c())()&&a()},get fallback(){return Wf()},get children(){var S=zf();return N(S,E(Qf,{onUpdate:P=>p({q1:P}),checklistState:a}),null),N(S,E(Kf,{onUpdate:P=>p({q2:P}),checklistState:a}),null),N(S,E(Gf,{onUpdate:P=>p({q3:P}),checklistState:a}),null),N(S,E(Xf,{onUpdate:P=>p({q4:P}),checklistState:a}),null),N(S,E(Jf,{onUpdate:P=>p({q5:P}),checklistState:a}),null),N(S,E(Zf,{onUpdate:P=>p({q6:P}),checklistState:a}),null),N(S,E(ed,{onUpdate:P=>p({q7:P}),checklistState:a}),null),N(S,E(td,{onUpdate:P=>p({q8:P}),checklistState:a}),null),N(S,E(nd,{onUpdatea:P=>p({q9a:P}),onUpdateb:P=>p({q9b:P}),checklistState:a}),null),N(S,E(rd,{onUpdate:P=>p({q10:P}),checklistState:a}),null),N(S,E(id,{onUpdatea:P=>p({q11a:P}),onUpdateb:P=>p({q11b:P}),checklistState:a}),null),N(S,E(sd,{onUpdate:P=>p({q12:P}),checklistState:a}),null),N(S,E(ad,{onUpdate:P=>p({q13:P}),checklistState:a}),null),N(S,E(od,{onUpdate:P=>p({q14:P}),checklistState:a}),null),N(S,E(ld,{onUpdate:P=>p({q15:P}),checklistState:a}),null),N(S,E(cd,{onUpdate:P=>p({q16:P}),checklistState:a}),null),S}}),null),G(()=>k.value=e()),G(()=>h.value=n()),G(()=>b.value=i()),_})()}Me(["click"]);function hr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ud(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wo(e){let t,n,r;e.length!==2?(t=hr,n=(o,l)=>hr(e(o),l),r=(o,l)=>e(o)-l):(t=e===hr||e===ud?e:fd,n=e,r=e);function i(o,l,c=0,f=o.length){if(c<f){if(t(l,l)!==0)return f;do{const u=c+f>>>1;n(o[u],l)<0?c=u+1:f=u}while(c<f)}return c}function s(o,l,c=0,f=o.length){if(c<f){if(t(l,l)!==0)return f;do{const u=c+f>>>1;n(o[u],l)<=0?c=u+1:f=u}while(c<f)}return c}function a(o,l,c=0,f=o.length){const u=i(o,l,c,f-1);return u>c&&r(o[u-1],l)>-r(o[u],l)?u-1:u}return{left:i,center:a,right:s}}function fd(){return 0}function dd(e){return e===null?NaN:+e}const hd=Wo(hr),gd=hd.right;Wo(dd).center;class Xs extends Map{constructor(t,n=wd){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Js(this,t))}has(t){return super.has(Js(this,t))}set(t,n){return super.set(pd(this,t),n)}delete(t){return super.delete(md(this,t))}}function Js({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function pd({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function md({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function wd(e){return e!==null&&typeof e=="object"?e.valueOf():e}const vd=Math.sqrt(50),yd=Math.sqrt(10),bd=Math.sqrt(2);function Mr(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=vd?10:s>=yd?5:s>=bd?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?Mr(e,t,n*2):[o,l,c]}function xd(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,a]=r?Mr(t,e,n):Mr(e,t,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function Ni(e,t,n){return t=+t,e=+e,n=+n,Mr(e,t,n)[2]}function _d(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Ni(t,e,n):Ni(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Qo(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function kd(e){return e}var Sd=3,Zs=1e-6;function $d(e){return"translate("+e+",0)"}function Ed(e){return t=>+e(t)}function Ad(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Cd(){return!this.__axis}function Pd(e,t){var n=[],r=null,i=null,s=6,a=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1,f="y",u=$d;function d(p){var _=r??(t.ticks?t.ticks.apply(t,n):t.domain()),x=i??(t.tickFormat?t.tickFormat.apply(t,n):kd),A=Math.max(s,0)+o,O=t.range(),m=+O[0]+l,v=+O[O.length-1]+l,y=(t.bandwidth?Ad:Ed)(t.copy(),l),k=p.selection?p.selection():p,C=k.selectAll(".domain").data([null]),$=k.selectAll(".tick").data(_,t).order(),h=$.exit(),g=$.enter().append("g").attr("class","tick"),w=$.select("line"),b=$.select("text");C=C.merge(C.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),$=$.merge(g),w=w.merge(g.append("line").attr("stroke","currentColor").attr(f+"2",c*s)),b=b.merge(g.append("text").attr("fill","currentColor").attr(f,c*A).attr("dy","0.71em")),p!==k&&(C=C.transition(p),$=$.transition(p),w=w.transition(p),b=b.transition(p),h=h.transition(p).attr("opacity",Zs).attr("transform",function(S){return isFinite(S=y(S))?u(S+l):this.getAttribute("transform")}),g.attr("opacity",Zs).attr("transform",function(S){var P=this.parentNode.__axis;return u((P&&isFinite(P=P(S))?P:y(S))+l)})),h.remove(),C.attr("d",a?"M"+m+","+c*a+"V"+l+"H"+v+"V"+c*a:"M"+m+","+l+"H"+v),$.attr("opacity",1).attr("transform",function(S){return u(y(S)+l)}),w.attr(f+"2",c*s),b.attr(f,c*A).text(x),k.filter(Cd).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),k.each(function(){this.__axis=y})}return d.scale=function(p){return arguments.length?(t=p,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),d):n.slice()},d.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),d):r&&r.slice()},d.tickFormat=function(p){return arguments.length?(i=p,d):i},d.tickSize=function(p){return arguments.length?(s=a=+p,d):s},d.tickSizeInner=function(p){return arguments.length?(s=+p,d):s},d.tickSizeOuter=function(p){return arguments.length?(a=+p,d):a},d.tickPadding=function(p){return arguments.length?(o=+p,d):o},d.offset=function(p){return arguments.length?(l=+p,d):l},d}function Rd(e){return Pd(Sd,e)}var Nd={value:()=>{}};function Ko(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new gr(n)}function gr(e){this._=e}function Od(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}gr.prototype=Ko.prototype={constructor:gr,on:function(e,t){var n=this._,r=Od(e+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(e=r[s]).type)&&(i=Td(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(i=(e=r[s]).type)n[i]=ea(n[i],e.name,t);else if(t==null)for(i in n)n[i]=ea(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new gr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Td(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function ea(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Nd,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Oi="http://www.w3.org/1999/xhtml";const ta={svg:"http://www.w3.org/2000/svg",xhtml:Oi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ti(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ta.hasOwnProperty(t)?{space:ta[t],local:e}:e}function Md(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Oi&&t.documentElement.namespaceURI===Oi?t.createElement(e):t.createElementNS(n,e)}}function Id(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Go(e){var t=ti(e);return(t.local?Id:Md)(t)}function Ld(){}function vs(e){return e==null?Ld:function(){return this.querySelector(e)}}function qd(e){typeof e!="function"&&(e=vs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=new Array(a),l,c,f=0;f<a;++f)(l=s[f])&&(c=e.call(l,l.__data__,f,s))&&("__data__"in l&&(c.__data__=l.__data__),o[f]=c);return new je(r,this._parents)}function Dd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function jd(){return[]}function Xo(e){return e==null?jd:function(){return this.querySelectorAll(e)}}function Fd(e){return function(){return Dd(e.apply(this,arguments))}}function Ud(e){typeof e=="function"?e=Fd(e):e=Xo(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var a=t[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(e.call(l,l.__data__,c,a)),i.push(l));return new je(r,i)}function Jo(e){return function(){return this.matches(e)}}function Zo(e){return function(t){return t.matches(e)}}var Bd=Array.prototype.find;function Vd(e){return function(){return Bd.call(this.children,e)}}function Hd(){return this.firstElementChild}function zd(e){return this.select(e==null?Hd:Vd(typeof e=="function"?e:Zo(e)))}var Yd=Array.prototype.filter;function Wd(){return Array.from(this.children)}function Qd(e){return function(){return Yd.call(this.children,e)}}function Kd(e){return this.selectAll(e==null?Wd:Qd(typeof e=="function"?e:Zo(e)))}function Gd(e){typeof e!="function"&&(e=Jo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new je(r,this._parents)}function el(e){return new Array(e.length)}function Xd(){return new je(this._enter||this._groups.map(el),this._parents)}function Ir(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ir.prototype={constructor:Ir,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Jd(e){return function(){return e}}function Zd(e,t,n,r,i,s){for(var a=0,o,l=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],r[a]=o):n[a]=new Ir(e,s[a]);for(;a<l;++a)(o=t[a])&&(i[a]=o)}function eh(e,t,n,r,i,s,a){var o,l,c=new Map,f=t.length,u=s.length,d=new Array(f),p;for(o=0;o<f;++o)(l=t[o])&&(d[o]=p=a.call(l,l.__data__,o,t)+"",c.has(p)?i[o]=l:c.set(p,l));for(o=0;o<u;++o)p=a.call(e,s[o],o,s)+"",(l=c.get(p))?(r[o]=l,l.__data__=s[o],c.delete(p)):n[o]=new Ir(e,s[o]);for(o=0;o<f;++o)(l=t[o])&&c.get(d[o])===l&&(i[o]=l)}function th(e){return e.__data__}function nh(e,t){if(!arguments.length)return Array.from(this,th);var n=t?eh:Zd,r=this._parents,i=this._groups;typeof e!="function"&&(e=Jd(e));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var f=r[c],u=i[c],d=u.length,p=rh(e.call(f,f&&f.__data__,c,r)),_=p.length,x=o[c]=new Array(_),A=a[c]=new Array(_),O=l[c]=new Array(d);n(f,u,x,A,O,p,t);for(var m=0,v=0,y,k;m<_;++m)if(y=x[m]){for(m>=v&&(v=m+1);!(k=A[v])&&++v<_;);y._next=k||null}}return a=new je(a,r),a._enter=o,a._exit=l,a}function rh(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ih(){return new je(this._exit||this._groups.map(el),this._parents)}function sh(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function ah(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],f=r[l],u=c.length,d=o[l]=new Array(u),p,_=0;_<u;++_)(p=c[_]||f[_])&&(d[_]=p);for(;l<i;++l)o[l]=n[l];return new je(o,this._parents)}function oh(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function lh(e){e||(e=ch);function t(u,d){return u&&d?e(u.__data__,d.__data__):!u-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,f=0;f<o;++f)(c=a[f])&&(l[f]=c);l.sort(t)}return new je(i,this._parents).order()}function ch(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uh(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function fh(){return Array.from(this)}function dh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function hh(){let e=0;for(const t of this)++e;return e}function gh(){return!this.node()}function ph(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&e.call(o,o.__data__,s,i);return this}function mh(e){return function(){this.removeAttribute(e)}}function wh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vh(e,t){return function(){this.setAttribute(e,t)}}function yh(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function bh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function xh(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _h(e,t){var n=ti(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?wh:mh:typeof t=="function"?n.local?xh:bh:n.local?yh:vh)(n,t))}function tl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kh(e){return function(){this.style.removeProperty(e)}}function Sh(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $h(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Eh(e,t,n){return arguments.length>1?this.each((t==null?kh:typeof t=="function"?$h:Sh)(e,t,n??"")):un(this.node(),e)}function un(e,t){return e.style.getPropertyValue(t)||tl(e).getComputedStyle(e,null).getPropertyValue(t)}function Ah(e){return function(){delete this[e]}}function Ch(e,t){return function(){this[e]=t}}function Ph(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Rh(e,t){return arguments.length>1?this.each((t==null?Ah:typeof t=="function"?Ph:Ch)(e,t)):this.node()[e]}function nl(e){return e.trim().split(/^|\s+/)}function ys(e){return e.classList||new rl(e)}function rl(e){this._node=e,this._names=nl(e.getAttribute("class")||"")}rl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function il(e,t){for(var n=ys(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function sl(e,t){for(var n=ys(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Nh(e){return function(){il(this,e)}}function Oh(e){return function(){sl(this,e)}}function Th(e,t){return function(){(t.apply(this,arguments)?il:sl)(this,e)}}function Mh(e,t){var n=nl(e+"");if(arguments.length<2){for(var r=ys(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Th:t?Nh:Oh)(n,t))}function Ih(){this.textContent=""}function Lh(e){return function(){this.textContent=e}}function qh(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Dh(e){return arguments.length?this.each(e==null?Ih:(typeof e=="function"?qh:Lh)(e)):this.node().textContent}function jh(){this.innerHTML=""}function Fh(e){return function(){this.innerHTML=e}}function Uh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Bh(e){return arguments.length?this.each(e==null?jh:(typeof e=="function"?Uh:Fh)(e)):this.node().innerHTML}function Vh(){this.nextSibling&&this.parentNode.appendChild(this)}function Hh(){return this.each(Vh)}function zh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Yh(){return this.each(zh)}function Wh(e){var t=typeof e=="function"?e:Go(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Qh(){return null}function Kh(e,t){var n=typeof e=="function"?e:Go(e),r=t==null?Qh:typeof t=="function"?t:vs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Gh(){var e=this.parentNode;e&&e.removeChild(this)}function Xh(){return this.each(Gh)}function Jh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eg(e){return this.select(e?Zh:Jh)}function tg(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ng(e){return function(t){e.call(this,t,this.__data__)}}function rg(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ig(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function sg(e,t,n){return function(){var r=this.__on,i,s=ng(t);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function ag(e,t,n){var r=rg(e+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,f;l<c;++l)for(i=0,f=o[l];i<s;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(o=t?sg:ig,i=0;i<s;++i)this.each(o(r[i],t,n));return this}function al(e,t,n){var r=tl(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function og(e,t){return function(){return al(this,e,t)}}function lg(e,t){return function(){return al(this,e,t.apply(this,arguments))}}function cg(e,t){return this.each((typeof t=="function"?lg:og)(e,t))}function*ug(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var ol=[null];function je(e,t){this._groups=e,this._parents=t}function Jn(){return new je([[document.documentElement]],ol)}function fg(){return this}je.prototype=Jn.prototype={constructor:je,select:qd,selectAll:Ud,selectChild:zd,selectChildren:Kd,filter:Gd,data:nh,enter:Xd,exit:ih,join:sh,merge:ah,selection:fg,order:oh,sort:lh,call:uh,nodes:fh,node:dh,size:hh,empty:gh,each:ph,attr:_h,style:Eh,property:Rh,classed:Mh,text:Dh,html:Bh,raise:Hh,lower:Yh,append:Wh,insert:Kh,remove:Xh,clone:eg,datum:tg,on:ag,dispatch:cg,[Symbol.iterator]:ug};function ll(e){return typeof e=="string"?new je([[document.querySelector(e)]],[document.documentElement]):new je([[e]],ol)}function bs(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function cl(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zn(){}var Hn=.7,Lr=1/Hn,sn="\\s*([+-]?\\d+)\\s*",zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dg=/^#([0-9a-f]{3,8})$/,hg=new RegExp(`^rgb\\(${sn},${sn},${sn}\\)$`),gg=new RegExp(`^rgb\\(${et},${et},${et}\\)$`),pg=new RegExp(`^rgba\\(${sn},${sn},${sn},${zn}\\)$`),mg=new RegExp(`^rgba\\(${et},${et},${et},${zn}\\)$`),wg=new RegExp(`^hsl\\(${zn},${et},${et}\\)$`),vg=new RegExp(`^hsla\\(${zn},${et},${et},${zn}\\)$`),na={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bs(Zn,Bt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ra,formatHex:ra,formatHex8:yg,formatHsl:bg,formatRgb:ia,toString:ia});function ra(){return this.rgb().formatHex()}function yg(){return this.rgb().formatHex8()}function bg(){return ul(this).formatHsl()}function ia(){return this.rgb().formatRgb()}function Bt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dg.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?sa(t):n===3?new Ne(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?nr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?nr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hg.exec(e))?new Ne(t[1],t[2],t[3],1):(t=gg.exec(e))?new Ne(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pg.exec(e))?nr(t[1],t[2],t[3],t[4]):(t=mg.exec(e))?nr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wg.exec(e))?la(t[1],t[2]/100,t[3]/100,1):(t=vg.exec(e))?la(t[1],t[2]/100,t[3]/100,t[4]):na.hasOwnProperty(e)?sa(na[e]):e==="transparent"?new Ne(NaN,NaN,NaN,0):null}function sa(e){return new Ne(e>>16&255,e>>8&255,e&255,1)}function nr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ne(e,t,n,r)}function xg(e){return e instanceof Zn||(e=Bt(e)),e?(e=e.rgb(),new Ne(e.r,e.g,e.b,e.opacity)):new Ne}function Ti(e,t,n,r){return arguments.length===1?xg(e):new Ne(e,t,n,r??1)}function Ne(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}bs(Ne,Ti,cl(Zn,{brighter(e){return e=e==null?Lr:Math.pow(Lr,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hn:Math.pow(Hn,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ne(Ft(this.r),Ft(this.g),Ft(this.b),qr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aa,formatHex:aa,formatHex8:_g,formatRgb:oa,toString:oa}));function aa(){return`#${It(this.r)}${It(this.g)}${It(this.b)}`}function _g(){return`#${It(this.r)}${It(this.g)}${It(this.b)}${It((isNaN(this.opacity)?1:this.opacity)*255)}`}function oa(){const e=qr(this.opacity);return`${e===1?"rgb(":"rgba("}${Ft(this.r)}, ${Ft(this.g)}, ${Ft(this.b)}${e===1?")":`, ${e})`}`}function qr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ft(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function It(e){return e=Ft(e),(e<16?"0":"")+e.toString(16)}function la(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ye(e,t,n,r)}function ul(e){if(e instanceof Ye)return new Ye(e.h,e.s,e.l,e.opacity);if(e instanceof Zn||(e=Bt(e)),!e)return new Ye;if(e instanceof Ye)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(t===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-t)/o+2:a=(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Ye(a,o,l,e.opacity)}function kg(e,t,n,r){return arguments.length===1?ul(e):new Ye(e,t,n,r??1)}function Ye(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}bs(Ye,kg,cl(Zn,{brighter(e){return e=e==null?Lr:Math.pow(Lr,e),new Ye(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hn:Math.pow(Hn,e),new Ye(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ne(hi(e>=240?e-240:e+120,i,r),hi(e,i,r),hi(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ye(ca(this.h),rr(this.s),rr(this.l),qr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qr(this.opacity);return`${e===1?"hsl(":"hsla("}${ca(this.h)}, ${rr(this.s)*100}%, ${rr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ca(e){return e=(e||0)%360,e<0?e+360:e}function rr(e){return Math.max(0,Math.min(1,e||0))}function hi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xs=e=>()=>e;function Sg(e,t){return function(n){return e+n*t}}function $g(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Eg(e){return(e=+e)==1?fl:function(t,n){return n-t?$g(t,n,e):xs(isNaN(t)?n:t)}}function fl(e,t){var n=t-e;return n?Sg(e,n):xs(isNaN(e)?t:e)}const Dr=(function e(t){var n=Eg(t);function r(i,s){var a=n((i=Ti(i)).r,(s=Ti(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=fl(i.opacity,s.opacity);return function(f){return i.r=a(f),i.g=o(f),i.b=l(f),i.opacity=c(f),i+""}}return r.gamma=e,r})(1);function Ag(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Cg(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Pg(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=_s(e[a],t[a]);for(;a<n;++a)s[a]=t[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Rg(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function He(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ng(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=_s(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Mi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gi=new RegExp(Mi.source,"g");function Og(e){return function(){return e}}function Tg(e){return function(t){return e(t)+""}}function dl(e,t){var n=Mi.lastIndex=gi.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(r=Mi.exec(e))&&(i=gi.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:He(r,i)})),n=gi.lastIndex;return n<t.length&&(s=t.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Tg(l[0].x):Og(t):(t=l.length,function(c){for(var f=0,u;f<t;++f)o[(u=l[f]).i]=u.x(c);return o.join("")})}function _s(e,t){var n=typeof t,r;return t==null||n==="boolean"?xs(t):(n==="number"?He:n==="string"?(r=Bt(t))?(t=r,Dr):dl:t instanceof Bt?Dr:t instanceof Date?Rg:Cg(t)?Ag:Array.isArray(t)?Pg:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ng:He)(e,t)}function Mg(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ua=180/Math.PI,Ii={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hl(e,t,n,r,i,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ua,skewX:Math.atan(l)*ua,scaleX:a,scaleY:o}}var ir;function Ig(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ii:hl(t.a,t.b,t.c,t.d,t.e,t.f)}function Lg(e){return e==null||(ir||(ir=document.createElementNS("http://www.w3.org/2000/svg","g")),ir.setAttribute("transform",e),!(e=ir.transform.baseVal.consolidate()))?Ii:(e=e.matrix,hl(e.a,e.b,e.c,e.d,e.e,e.f))}function gl(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,f,u,d,p,_){if(c!==u||f!==d){var x=p.push("translate(",null,t,null,n);_.push({i:x-4,x:He(c,u)},{i:x-2,x:He(f,d)})}else(u||d)&&p.push("translate("+u+t+d+n)}function a(c,f,u,d){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),d.push({i:u.push(i(u)+"rotate(",null,r)-2,x:He(c,f)})):f&&u.push(i(u)+"rotate("+f+r)}function o(c,f,u,d){c!==f?d.push({i:u.push(i(u)+"skewX(",null,r)-2,x:He(c,f)}):f&&u.push(i(u)+"skewX("+f+r)}function l(c,f,u,d,p,_){if(c!==u||f!==d){var x=p.push(i(p)+"scale(",null,",",null,")");_.push({i:x-4,x:He(c,u)},{i:x-2,x:He(f,d)})}else(u!==1||d!==1)&&p.push(i(p)+"scale("+u+","+d+")")}return function(c,f){var u=[],d=[];return c=e(c),f=e(f),s(c.translateX,c.translateY,f.translateX,f.translateY,u,d),a(c.rotate,f.rotate,u,d),o(c.skewX,f.skewX,u,d),l(c.scaleX,c.scaleY,f.scaleX,f.scaleY,u,d),c=f=null,function(p){for(var _=-1,x=d.length,A;++_<x;)u[(A=d[_]).i]=A.x(p);return u.join("")}}}var qg=gl(Ig,"px, ","px)","deg)"),Dg=gl(Lg,", ",")",")"),fn=0,xn=0,pn=0,pl=1e3,jr,_n,Fr=0,Vt=0,ni=0,Yn=typeof performance=="object"&&performance.now?performance:Date,ml=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ks(){return Vt||(ml(jg),Vt=Yn.now()+ni)}function jg(){Vt=0}function Ur(){this._call=this._time=this._next=null}Ur.prototype=wl.prototype={constructor:Ur,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ks():+n)+(t==null?0:+t),!this._next&&_n!==this&&(_n?_n._next=this:jr=this,_n=this),this._call=e,this._time=n,Li()},stop:function(){this._call&&(this._call=null,this._time=1/0,Li())}};function wl(e,t,n){var r=new Ur;return r.restart(e,t,n),r}function Fg(){ks(),++fn;for(var e=jr,t;e;)(t=Vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fn}function fa(){Vt=(Fr=Yn.now())+ni,fn=xn=0;try{Fg()}finally{fn=0,Bg(),Vt=0}}function Ug(){var e=Yn.now(),t=e-Fr;t>pl&&(ni-=t,Fr=e)}function Bg(){for(var e,t=jr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:jr=n);_n=e,Li(r)}function Li(e){if(!fn){xn&&(xn=clearTimeout(xn));var t=e-Vt;t>24?(e<1/0&&(xn=setTimeout(fa,e-Yn.now()-ni)),pn&&(pn=clearInterval(pn))):(pn||(Fr=Yn.now(),pn=setInterval(Ug,pl)),fn=1,ml(fa))}}function da(e,t,n){var r=new Ur;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Vg=Ko("start","end","cancel","interrupt"),Hg=[],vl=0,ha=1,qi=2,pr=3,ga=4,Di=5,mr=6;function ri(e,t,n,r,i,s){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;zg(e,n,{name:t,index:r,group:i,on:Vg,tween:Hg,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:vl})}function Ss(e,t){var n=Ke(e,t);if(n.state>vl)throw new Error("too late; already scheduled");return n}function it(e,t){var n=Ke(e,t);if(n.state>pr)throw new Error("too late; already running");return n}function Ke(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function zg(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=wl(s,0,n.time);function s(c){n.state=ha,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var f,u,d,p;if(n.state!==ha)return l();for(f in r)if(p=r[f],p.name===n.name){if(p.state===pr)return da(a);p.state===ga?(p.state=mr,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[f]):+f<t&&(p.state=mr,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[f])}if(da(function(){n.state===pr&&(n.state=ga,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=qi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===qi){for(n.state=pr,i=new Array(d=n.tween.length),f=0,u=-1;f<d;++f)(p=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=p);i.length=u+1}}function o(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Di,1),u=-1,d=i.length;++u<d;)i[u].call(e,f);n.state===Di&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=mr,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Yg(e,t){var n=e.__transition,r,i,s=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){s=!1;continue}i=r.state>qi&&r.state<Di,r.state=mr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}s&&delete e.__transition}}function Wg(e){return this.each(function(){Yg(this,e)})}function Qg(e,t){var n,r;return function(){var i=it(this,e),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Kg(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=it(this,e),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function Gg(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ke(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?Qg:Kg)(n,e,t))}function $s(e,t,n){var r=e._id;return e.each(function(){var i=it(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ke(i,r).value[t]}}function yl(e,t){var n;return(typeof t=="number"?He:t instanceof Bt?Dr:(n=Bt(t))?(t=n,Dr):dl)(e,t)}function Xg(e){return function(){this.removeAttribute(e)}}function Jg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zg(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttribute(e);return a===i?null:a===r?s:s=t(r=a,n)}}function ep(e,t,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?s:s=t(r=a,n)}}function tp(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function np(e,t,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o)))}}function rp(e,t){var n=ti(e),r=n==="transform"?Dg:yl;return this.attrTween(e,typeof t=="function"?(n.local?np:tp)(n,r,$s(this,"attr."+e,t)):t==null?(n.local?Jg:Xg)(n):(n.local?ep:Zg)(n,r,t))}function ip(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function sp(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function ap(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&sp(e,s)),n}return i._value=t,i}function op(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ip(e,s)),n}return i._value=t,i}function lp(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ti(e);return this.tween(n,(r.local?ap:op)(r,t))}function cp(e,t){return function(){Ss(this,e).delay=+t.apply(this,arguments)}}function up(e,t){return t=+t,function(){Ss(this,e).delay=t}}function fp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cp:up)(t,e)):Ke(this.node(),t).delay}function dp(e,t){return function(){it(this,e).duration=+t.apply(this,arguments)}}function hp(e,t){return t=+t,function(){it(this,e).duration=t}}function gp(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?dp:hp)(t,e)):Ke(this.node(),t).duration}function pp(e,t){if(typeof t!="function")throw new Error;return function(){it(this,e).ease=t}}function mp(e){var t=this._id;return arguments.length?this.each(pp(t,e)):Ke(this.node(),t).ease}function wp(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;it(this,e).ease=n}}function vp(e){if(typeof e!="function")throw new Error;return this.each(wp(this._id,e))}function yp(e){typeof e!="function"&&(e=Jo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new ut(r,this._parents,this._name,this._id)}function bp(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=t[o],c=n[o],f=l.length,u=a[o]=new Array(f),d,p=0;p<f;++p)(d=l[p]||c[p])&&(u[p]=d);for(;o<r;++o)a[o]=t[o];return new ut(a,this._parents,this._name,this._id)}function xp(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _p(e,t,n){var r,i,s=xp(t)?Ss:it;return function(){var a=s(this,e),o=a.on;o!==r&&(i=(r=o).copy()).on(t,n),a.on=i}}function kp(e,t){var n=this._id;return arguments.length<2?Ke(this.node(),n).on.on(e):this.each(_p(n,e,t))}function Sp(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $p(){return this.on("end.remove",Sp(this._id))}function Ep(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vs(e));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),f,u,d=0;d<l;++d)(f=o[d])&&(u=e.call(f,f.__data__,d,o))&&("__data__"in f&&(u.__data__=f.__data__),c[d]=u,ri(c[d],t,n,d,c,Ke(f,n)));return new ut(s,this._parents,t,n)}function Ap(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xo(e));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,f,u=0;u<c;++u)if(f=l[u]){for(var d=e.call(f,f.__data__,u,l),p,_=Ke(f,n),x=0,A=d.length;x<A;++x)(p=d[x])&&ri(p,t,n,x,d,_);s.push(d),a.push(f)}return new ut(s,a,t,n)}var Cp=Jn.prototype.constructor;function Pp(){return new Cp(this._groups,this._parents)}function Rp(e,t){var n,r,i;return function(){var s=un(this,e),a=(this.style.removeProperty(e),un(this,e));return s===a?null:s===n&&a===r?i:i=t(n=s,r=a)}}function bl(e){return function(){this.style.removeProperty(e)}}function Np(e,t,n){var r,i=n+"",s;return function(){var a=un(this,e);return a===i?null:a===r?s:s=t(r=a,n)}}function Op(e,t,n){var r,i,s;return function(){var a=un(this,e),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),un(this,e))),a===l?null:a===r&&l===i?s:(i=l,s=t(r=a,o))}}function Tp(e,t){var n,r,i,s="style."+t,a="end."+s,o;return function(){var l=it(this,e),c=l.on,f=l.value[s]==null?o||(o=bl(t)):void 0;(c!==n||i!==f)&&(r=(n=c).copy()).on(a,i=f),l.on=r}}function Mp(e,t,n){var r=(e+="")=="transform"?qg:yl;return t==null?this.styleTween(e,Rp(e,r)).on("end.style."+e,bl(e)):typeof t=="function"?this.styleTween(e,Op(e,r,$s(this,"style."+e,t))).each(Tp(this._id,e)):this.styleTween(e,Np(e,r,t),n).on("end.style."+e,null)}function Ip(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Lp(e,t,n){var r,i;function s(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Ip(e,a,n)),r}return s._value=t,s}function qp(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Lp(e,t,n??""))}function Dp(e){return function(){this.textContent=e}}function jp(e){return function(){var t=e(this);this.textContent=t??""}}function Fp(e){return this.tween("text",typeof e=="function"?jp($s(this,"text",e)):Dp(e==null?"":e+""))}function Up(e){return function(t){this.textContent=e.call(this,t)}}function Bp(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Up(i)),t}return r._value=e,r}function Vp(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Bp(e))}function Hp(){for(var e=this._name,t=this._id,n=xl(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var f=Ke(l,t);ri(l,e,n,c,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ut(r,this._parents,e,n)}function zp(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=it(this,r),f=c.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),c.on=t}),i===0&&s()})}var Yp=0;function ut(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xl(){return++Yp}var at=Jn.prototype;ut.prototype={constructor:ut,select:Ep,selectAll:Ap,selectChild:at.selectChild,selectChildren:at.selectChildren,filter:yp,merge:bp,selection:Pp,transition:Hp,call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:kp,attr:rp,attrTween:lp,style:Mp,styleTween:qp,text:Fp,textTween:Vp,remove:$p,tween:Gg,delay:fp,duration:gp,ease:mp,easeVarying:vp,end:zp,[Symbol.iterator]:at[Symbol.iterator]};function Wp(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Qp={time:null,delay:0,duration:250,ease:Wp};function Kp(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Gp(e){var t,n;e instanceof ut?(t=e._id,e=e._name):(t=xl(),(n=Qp).time=ks(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&ri(l,e,t,c,a,n||Kp(l,t));return new ut(r,this._parents,e,t)}Jn.prototype.interrupt=Wg;Jn.prototype.transition=Gp;function Xp(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Br(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function dn(e){return e=Br(Math.abs(e)),e?e[1]:NaN}function Jp(e,t){return function(n,r){for(var i=n.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function Zp(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var e0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vr(e){if(!(t=e0.exec(e)))throw new Error("invalid format: "+e);var t;return new Es({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Vr.prototype=Es.prototype;function Es(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Es.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function t0(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var _l;function n0(e,t){var n=Br(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(_l=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Br(e,Math.max(0,t+s-1))[0]}function pa(e,t){var n=Br(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ma={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Xp,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pa(e*100,t),r:pa,s:n0,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function wa(e){return e}var va=Array.prototype.map,ya=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function r0(e){var t=e.grouping===void 0||e.thousands===void 0?wa:Jp(va.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?wa:Zp(va.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(u){u=Vr(u);var d=u.fill,p=u.align,_=u.sign,x=u.symbol,A=u.zero,O=u.width,m=u.comma,v=u.precision,y=u.trim,k=u.type;k==="n"?(m=!0,k="g"):ma[k]||(v===void 0&&(v=12),y=!0,k="g"),(A||d==="0"&&p==="=")&&(A=!0,d="0",p="=");var C=x==="$"?n:x==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",$=x==="$"?r:/[%p]/.test(k)?a:"",h=ma[k],g=/[defgprs%]/.test(k);v=v===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function w(b){var S=C,P=$,M,F,U;if(k==="c")P=h(b)+P,b="";else{b=+b;var q=b<0||1/b<0;if(b=isNaN(b)?l:h(Math.abs(b),v),y&&(b=t0(b)),q&&+b==0&&_!=="+"&&(q=!1),S=(q?_==="("?_:o:_==="-"||_==="("?"":_)+S,P=(k==="s"?ya[8+_l/3]:"")+P+(q&&_==="("?")":""),g){for(M=-1,F=b.length;++M<F;)if(U=b.charCodeAt(M),48>U||U>57){P=(U===46?i+b.slice(M+1):b.slice(M))+P,b=b.slice(0,M);break}}}m&&!A&&(b=t(b,1/0));var Q=S.length+b.length+P.length,L=Q<O?new Array(O-Q+1).join(d):"";switch(m&&A&&(b=t(L+b,L.length?O-P.length:1/0),L=""),p){case"<":b=S+b+P+L;break;case"=":b=S+L+b+P;break;case"^":b=L.slice(0,Q=L.length>>1)+S+b+P+L.slice(Q);break;default:b=L+S+b+P;break}return s(b)}return w.toString=function(){return u+""},w}function f(u,d){var p=c((u=Vr(u),u.type="f",u)),_=Math.max(-8,Math.min(8,Math.floor(dn(d)/3)))*3,x=Math.pow(10,-_),A=ya[8+_/3];return function(O){return p(x*O)+A}}return{format:c,formatPrefix:f}}var sr,kl,Sl;i0({thousands:",",grouping:[3],currency:["$",""]});function i0(e){return sr=r0(e),kl=sr.format,Sl=sr.formatPrefix,sr}function s0(e){return Math.max(0,-dn(Math.abs(e)))}function a0(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dn(t)/3)))*3-dn(Math.abs(e)))}function o0(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,dn(t)-dn(e))+1}function As(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const ba=Symbol("implicit");function $l(){var e=new Xs,t=[],n=[],r=ba;function i(s){let a=e.get(s);if(a===void 0){if(r!==ba)return r;e.set(s,a=t.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Xs;for(const a of s)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return $l(t,n).unknown(r)},As.apply(i,arguments),i}function El(){var e=$l().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,a,o=!1,l=0,c=0,f=.5;delete e.unknown;function u(){var d=t().length,p=i<r,_=p?i:r,x=p?r:i;s=(x-_)/Math.max(1,d-l+c*2),o&&(s=Math.floor(s)),_+=(x-_-s*(d-l))*f,a=s*(1-l),o&&(_=Math.round(_),a=Math.round(a));var A=Qo(d).map(function(O){return _+s*O});return n(p?A.reverse():A)}return e.domain=function(d){return arguments.length?(t(d),u()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,u()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,o=!0,u()},e.bandwidth=function(){return a},e.step=function(){return s},e.round=function(d){return arguments.length?(o=!!d,u()):o},e.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),u()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),u()):l},e.paddingOuter=function(d){return arguments.length?(c=+d,u()):c},e.align=function(d){return arguments.length?(f=Math.max(0,Math.min(1,d)),u()):f},e.copy=function(){return El(t(),[r,i]).round(o).paddingInner(l).paddingOuter(c).align(f)},As.apply(u(),arguments)}function l0(e){return function(){return e}}function c0(e){return+e}var xa=[0,1];function Zt(e){return e}function ji(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:l0(isNaN(t)?NaN:.5)}function u0(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function f0(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=ji(i,r),s=n(a,s)):(r=ji(r,i),s=n(s,a)),function(o){return s(r(o))}}function d0(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=ji(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(o){var l=gd(e,o,1,r)-1;return s[l](i[l](o))}}function h0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function g0(){var e=xa,t=xa,n=_s,r,i,s,a=Zt,o,l,c;function f(){var d=Math.min(e.length,t.length);return a!==Zt&&(a=u0(e[0],e[d-1])),o=d>2?d0:f0,l=c=null,u}function u(d){return d==null||isNaN(d=+d)?s:(l||(l=o(e.map(r),t,n)))(r(a(d)))}return u.invert=function(d){return a(i((c||(c=o(t,e.map(r),He)))(d)))},u.domain=function(d){return arguments.length?(e=Array.from(d,c0),f()):e.slice()},u.range=function(d){return arguments.length?(t=Array.from(d),f()):t.slice()},u.rangeRound=function(d){return t=Array.from(d),n=Mg,f()},u.clamp=function(d){return arguments.length?(a=d?!0:Zt,f()):a!==Zt},u.interpolate=function(d){return arguments.length?(n=d,f()):n},u.unknown=function(d){return arguments.length?(s=d,u):s},function(d,p){return r=d,i=p,f()}}function p0(){return g0()(Zt,Zt)}function m0(e,t,n,r){var i=_d(e,t,n),s;switch(r=Vr(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=a0(i,a))&&(r.precision=s),Sl(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=o0(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=s0(i))&&(r.precision=s-(r.type==="%")*2);break}}return kl(r)}function w0(e){var t=e.domain;return e.ticks=function(n){var r=t();return xd(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return m0(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,f=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);f-- >0;){if(c=Ni(a,o,n),c===l)return r[i]=a,r[s]=o,t(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return e},e}function Al(){var e=p0();return e.copy=function(){return h0(e,Al())},As.apply(e,arguments),w0(e)}function kn(e,t,n){this.k=e,this.x=t,this.y=n}kn.prototype={constructor:kn,scale:function(e){return e===1?this:new kn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new kn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};kn.prototype;var v0=T('<div style="background:#ffffff;border-radius:8px;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);padding:16px;margin:16px 0"><svg>');function y0(e){let t;const[n,r]=j({width:800,height:500});xe(()=>{function m(){if(t&&t.parentElement){const v=t.parentElement.getBoundingClientRect();r({width:Math.max(v.width,600),height:Math.max(v.height,400)})}}m(),window.addEventListener("resize",m),Te(()=>window.removeEventListener("resize",m))});const i=()=>e.data??[],s=16,a=()=>e.width??n().width,o=()=>e.height??n().height,l=()=>e.title??"AMSTAR-2 Quality Assessment",c={top:60,right:170,bottom:60,left:120},f=()=>(a()-c.left-c.right)/s,u=()=>(o()-c.top-c.bottom)/i().length,d=()=>Math.min(f(),u()),p=()=>d()*s,_=()=>d()*i().length,x=()=>c.left+p()+c.right,A=()=>c.top+_()+c.bottom,O={yes:"#10b981","partial yes":"#facc15",no:"#ef4444","no ma":"#9ca3af"};return xe(()=>{const m=ll(t).attr("width",x()).attr("height",A()).style("background","#ffffff").style("font-family",'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif');m.selectAll("*").remove(),m.append("g").attr("class","footer").selectAll("text").data(Qo(1,s+1)).enter().append("text").attr("x",(g,w)=>c.left+w*d()+d()/2).attr("y",c.top+_()+20).attr("text-anchor","middle").attr("font-size",Math.max(10,d()*.4)).attr("font-weight","600").attr("fill","#374151").text(g=>`Q${g}`),m.append("g").attr("class","rows").selectAll("text").data(i()).enter().append("text").attr("x",c.left-15).attr("y",(g,w)=>c.top+w*d()+d()/2).attr("text-anchor","end").attr("font-size",Math.max(10,d()*.45)).attr("font-weight","500").attr("fill","#374151").attr("dominant-baseline","middle").text(g=>g.label);const k=m.append("g").attr("class","cells");i().forEach((g,w)=>{for(let b=0;b<s;b++){const S=g.questions[b]?.toLowerCase?.()??"",P=O[S]??"#e5e7eb";k.append("rect").attr("x",c.left+b*d()+2).attr("y",c.top+w*d()+2).attr("width",d()-4).attr("height",d()-4).attr("fill",P).attr("stroke","#ffffff").attr("stroke-width",1).attr("rx",Math.max(2,d()*.12)).style("filter","drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.1))")}});const C=[{key:"yes",label:"Yes"},{key:"partial yes",label:"Partial Yes"},{key:"no",label:"No"},{key:"no ma",label:"No MA"}],h=m.append("g").attr("class","legend").attr("transform",`translate(${x()-c.right+20}, ${c.top+20})`).selectAll(".legend-item").data(C).enter().append("g").attr("class","legend-item").attr("transform",(g,w)=>`translate(0, ${w*25})`);h.append("rect").attr("x",0).attr("y",-8).attr("width",16).attr("height",16).attr("rx",2).attr("fill",g=>O[g.key]).attr("stroke","#ffffff").attr("stroke-width",1),h.append("text").attr("x",24).attr("y",0).attr("dy","0.35em").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(g=>g.label),m.append("text").attr("x",x()/2).attr("y",40).attr("text-anchor","middle").attr("font-size","18px").attr("font-weight","600").attr("fill","#111827").text(l()),Te(()=>{m.selectAll("*").remove()})}),(()=>{var m=v0(),v=m.firstChild,y=t;return typeof y=="function"?Nn(y,v):t=v,G(k=>Qr(v,`width: 100%; height: ${A()}px; max-width: 100%; display: block;`,k)),m})()}var b0=T('<div style="background:#ffffff;border-radius:8px;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);padding:16px;margin:16px 0"><svg>');function x0(e){let t,n;const r=()=>e.data??[],[i,s]=j({width:900,height:600});Wn(()=>{const _=()=>{if(n){const x=n.getBoundingClientRect();s({width:Math.max(x.width,400),height:Math.max(x.height,400)})}};_(),window.addEventListener("resize",_),Te(()=>window.removeEventListener("resize",_))}),xe(()=>{if(n){const _=n.getBoundingClientRect();s({width:Math.max(_.width,400),height:Math.max(_.height,400)})}});const a=()=>e.width??i().width,o=()=>e.height??i().width/1.5,l=()=>e.title??"Distribution of AMSTAR Ratings on Each Item Across Included Reviews",c={top:50,right:150,bottom:60,left:80},f=()=>a()-c.left-c.right,u=()=>o()-c.top-c.bottom,d=()=>Math.max(Math.round(a()/50),12)+1,p={yes:"#10b981","partial yes":"#facc15",no:"#ef4444","no ma":"#9ca3af"};return xe(()=>{if(!r().length)return;const _=ll(t).attr("width",a()).attr("height",o()).style("background","#ffffff").style("font-family",'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif');_.selectAll("*").remove();const x=[],A=Math.max(...r().map(g=>g.questions?.length||0)),O=r().length;for(let g=0;g<A;g++){const w={question:g+1,label:`Q${g+1}`,counts:{yes:0,"partial yes":0,no:0,"no ma":0}};r().forEach(b=>{const S=b.questions[g]?.toLowerCase?.()??"no ma";w.counts.hasOwnProperty(S)&&w.counts[S]++}),w.percentages={},Object.keys(w.counts).forEach(b=>{w.percentages[b]=w.counts[b]/O*100}),x.push(w)}const m=El().domain(x.map(g=>g.label)).range([0,u()]).padding(.1),v=Al().domain([0,100]).range([0,f()]),y=_.append("g").attr("transform",`translate(${c.left}, ${c.top})`);_.append("text").attr("x",a()/2).attr("y",30).attr("text-anchor","middle").attr("font-size",d()+"px").attr("font-weight","600").attr("fill","#111827").text(l()),x.forEach(g=>{let w=0;const b=m.bandwidth(),S=m(g.label);["yes","partial yes","no ma","no"].forEach(P=>{const M=g.percentages[P],F=v(M);M>0&&(y.append("rect").attr("x",v(w)).attr("y",S).attr("width",F).attr("height",b).attr("fill",p[P]).attr("stroke","#ffffff").attr("stroke-width",1),M>=5&&y.append("text").attr("x",v(w)+F/2).attr("y",S+b/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").attr("font-weight","600").attr("fill",P==="partial yes"?"#000000":"#ffffff").text(`${M.toFixed(1)}`)),w+=M})}),y.selectAll(".y-label").data(x).enter().append("text").attr("class","y-label").attr("x",-10).attr("y",g=>m(g.label)+m.bandwidth()/2).attr("text-anchor","end").attr("dominant-baseline","middle").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(g=>g.label);const k=Rd(v).tickFormat(g=>`${g}`).ticks(5);y.append("g").attr("class","x-axis").attr("transform",`translate(0, ${u()})`).call(k).selectAll("text").attr("font-size","12px").attr("fill","#374151"),y.append("text").attr("x",f()/2).attr("y",u()+50).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","500").attr("fill","#374151").text(`Percentage of SRs (%), N=${O}`),_.append("text").attr("transform","rotate(-90)").attr("x",-o()/2).attr("y",20).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","500").attr("fill","#374151").text("Items of AMSTAR-2");const C=_.append("g").attr("class","legend").attr("transform",`translate(${a()-c.right+20}, ${c.top+20})`),$=[{key:"yes",label:"Yes"},{key:"partial yes",label:"Partial Yes"},{key:"no",label:"No"},{key:"no ma",label:"No MA"}],h=C.selectAll(".legend-item").data($).enter().append("g").attr("class","legend-item").attr("transform",(g,w)=>`translate(0, ${w*25})`);h.append("rect").attr("x",0).attr("y",-8).attr("width",16).attr("height",16).attr("rx",2).attr("fill",g=>p[g.key]).attr("stroke","#ffffff").attr("stroke-width",1),h.append("text").attr("x",24).attr("y",0).attr("dy","0.35em").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(g=>g.label),Te(()=>{_.selectAll("*").remove()})}),(()=>{var _=b0(),x=_.firstChild,A=n;typeof A=="function"?Nn(A,_):n=_;var O=t;return typeof O=="function"?Nn(O,x):t=x,G(m=>Qr(x,`width: 100%; height: ${o()}px; max-width: 100%; display: block;`,m)),_})()}function Cl({id:e,name:t,createdAt:n=Date.now(),checklists:r=[],pdfFileName:i=null}={}){if(!e)throw new Error("Review id is required");if(!t)throw new Error("Review name is required");return{id:e,name:t,createdAt:n,checklists:r,pdfFileName:i}}function _0(e){return new Promise((t,n)=>{const r=indexedDB.open("fileStorageDB",1);r.onupgradeneeded=i=>{const s=i.target.result;s.objectStoreNames.contains("files")||s.createObjectStore("files",{keyPath:"name"})},r.onsuccess=i=>{const a=i.target.result.transaction("files","readwrite");a.objectStore("files").put({name:e.name,blob:e}),a.oncomplete=()=>t(e.name),a.onerror=n},r.onerror=n})}function k0(e){return new Promise((t,n)=>{const r=indexedDB.open("fileStorageDB",1);r.onsuccess=i=>{const l=i.target.result.transaction("files","readonly").objectStore("files").get(e);l.onsuccess=()=>t(l.result?.blob||null),l.onerror=n},r.onerror=n})}async function S0(){let e;if(window.showOpenFilePicker){const[t]=await window.showOpenFilePicker();e=await t.getFile()}else console.warn("showOpenFilePicker not supported, falling back to manual file selection."),e=await new Promise(t=>{const n=document.createElement("input");n.type="file",n.onchange=()=>t(n.files[0]),n.click()});if(navigator.storage?.getDirectory){const r=await(await(await navigator.storage.getDirectory()).getFileHandle(e.name,{create:!0})).createWritable();return await r.write(await e.arrayBuffer()),await r.close(),e.name}else return console.warn("File System Access API getDirectory not supported, falling back to IndexedDB."),await _0(e),e.name}async function _a(e){return navigator.storage?.getDirectory?await(await(await navigator.storage.getDirectory()).getFileHandle(e)).getFile():(console.warn("File System Access API getDirectory not supported, falling back to IndexedDB."),await k0(e))}var $0=T('<div class="p-6 max-w-4xl mx-auto"><div class="flex flex-wrap items-center justify-between mb-4 gap-2"><h2 class="text-xl font-bold"> Dashboard</h2><button class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition">Delete Project</button></div><div class="mb-2 text-xs text-gray-500">Created: </div><div class=mb-4><h3 class="text-base font-semibold mb-1">Add New Review</h3><div class="flex gap-2 items-center"><input type=text class="px-2 py-1 border rounded w-48 text-sm"placeholder="Review (study/article) name"><button class="px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 transition text-sm">+ Add Review</button></div></div><div class=mb-4><h3 class="text-base font-semibold mb-1">Reviews &amp; Checklists</h3><ul class="divide-y divide-gray-100 border rounded bg-white shadow-sm"></ul></div><div class="mb-4 flex gap-2"><button class="px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 transition text-sm">Export Checklists CSV</button><button class="px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 transition text-sm">Upload file</button><button class="px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 transition text-sm">Download File</button><button class="px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 transition text-sm">Display File</button></div><div class=mb-6></div><div>'),E0=T("<div class=p-8>Project not found."),A0=T('<li class=p-3><div class="flex items-center justify-between"><div><span class=font-semibold></span><span class="ml-2 text-xs text-gray-400">Created: </span></div><button class="px-2 py-1 bg-red-400 text-white rounded hover:bg-red-500 text-xs">Delete Review</button></div><div class=mt-2><h4 class="text-sm font-medium mb-1">Checklists</h4><ul class=space-y-1></ul><div class="flex gap-2 mt-2"><input type=text class="px-2 py-1 border rounded w-40 text-xs"placeholder="Checklist name"><button class="px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs">+ Checklist'),C0=T('<li class="flex items-center justify-between border rounded px-2 py-1 bg-white hover:bg-blue-50 cursor-pointer"><span><span class=font-semibold></span><span class="ml-2 text-xs text-gray-600">Reviewer: </span></span><button class="ml-2 px-2 py-0.5 bg-red-400 text-white rounded hover:bg-red-500 text-xs">Delete'),P0=T('<span class="italic text-gray-400">Unassigned'),R0=T('<li class="px-2 py-1 text-xs text-gray-400">No checklists yet.'),N0=T('<li class="px-4 py-2 text-xs text-gray-400">No reviews yet.');function O0(){const{currentProject:e,setCurrentProject:t,deleteProject:n,addReview:r,deleteReview:i,addChecklistToReview:s,deleteChecklistFromReview:a}=zt(),o=Kr(),l=Et(),[c,f]=j(""),[u,d]=j(""),[p,_]=j([]);function x($){if(!$)return null;const h=$.lastIndexOf("-");return h!==-1?$.slice(h+1):$}xe(()=>{const $=x(o.projectSlug);$?t($):(console.warn("ProjectDashboard: No project found for",$),l("/dashboard"))});const A=async()=>{if(!c().trim())return;const $=Cl({id:await Dt(),name:c(),createdAt:Date.now(),checklists:[]});await r(e().id,$),f("")},O=async $=>{if(!u().trim())return;const h=ms({name:u(),id:await Dt(),createdAt:Date.now(),reviewerName:"Unassigned"});await s(e().id,$,h),d("")},m=$=>{const h=tt($.name),g=tt(e().name),w=(e().reviews||[]).find(S=>(S.checklists||[]).some(P=>P.id===$.id));if(!w){console.error("Review not found for checklist",$);return}const b=tt(w.name);l(`/projects/${g}-${e().id}/reviews/${b}-${w.id}/checklists/${h}-${$.id}`)},v=()=>{let $=exportChecklistsToCSV(e().checklists);console.log($)},y=["q1","q2","q3","q4","q5","q6","q7","q8","q9","q10","q11","q12","q13","q14","q15","q16"];xe(()=>{const $=(e()?.reviews||[]).flatMap(h=>(h.checklists||[]).map(g=>{const w=Mf(g);return{label:g.name||g.title||g.id,reviewer:g.reviewerName||"",reviewName:h.name,questions:y.map(b=>w[b])}}));_($)});const k=async()=>{const $=prompt("Enter the name of the file to retrieve (including extension):");if($)try{const h=await _a($);if(!h){alert(`File "${$}" not found.`);return}const g=URL.createObjectURL(h),w=document.createElement("a");w.href=g,w.download=h.name||$,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(g)}catch(h){console.error("Error retrieving file:",h),alert("Error retrieving file. See console for details.")}},C=async()=>{const $=prompt("Enter the name of the PDF file to display (including .pdf):");if($)try{const h=await _a($);if(!h){alert(`File "${$}" not found.`);return}if(h.type!=="application/pdf"&&!$.toLowerCase().endsWith(".pdf")){alert("Selected file is not a PDF.");return}const g=URL.createObjectURL(h);window.open(g,"_blank"),setTimeout(()=>URL.revokeObjectURL(g),6e4)}catch(h){console.error("Error displaying file:",h),alert("Error displaying file. See console for details.")}};return E(me,{get when(){return e()},get fallback(){return E0()},get children(){var $=$0(),h=$.firstChild,g=h.firstChild,w=g.firstChild,b=g.nextSibling,S=h.nextSibling;S.firstChild;var P=S.nextSibling,M=P.firstChild,F=M.nextSibling,U=F.firstChild,q=U.nextSibling,Q=P.nextSibling,L=Q.firstChild,fe=L.nextSibling,B=Q.nextSibling,z=B.firstChild,D=z.nextSibling,de=D.nextSibling,he=de.nextSibling,we=B.nextSibling,Pe=we.nextSibling;return N(g,()=>e().name,w),b.$$click=()=>n(e().id),N(S,()=>new Date(e().createdAt).toLocaleDateString(),null),U.$$input=V=>f(V.target.value),q.$$click=A,N(fe,E(bt,{get each(){return e().reviews||[]},children:V=>(()=>{var J=A0(),ue=J.firstChild,W=ue.firstChild,oe=W.firstChild,pe=oe.nextSibling;pe.firstChild;var ce=W.nextSibling,re=ue.nextSibling,K=re.firstChild,ve=K.nextSibling,ee=ve.nextSibling,se=ee.firstChild,ge=se.nextSibling;return N(oe,()=>V.name),N(pe,()=>new Date(V.createdAt).toLocaleDateString(),null),ce.$$click=()=>i(e().id,V.id),N(ve,E(bt,{get each(){return V.checklists||[]},children:Ee=>(()=>{var Re=C0(),ft=Re.firstChild,be=ft.firstChild,Le=be.nextSibling;Le.firstChild;var ye=ft.nextSibling;return Re.$$click=()=>m(Ee),N(be,()=>Ee.name),N(Le,()=>Ee.reviewerName||P0(),null),ye.$$click=_e=>{_e.stopPropagation(),a(e().id,V.id,Ee.id)},Re})()}),null),N(ve,(()=>{var Ee=xt(()=>!V.checklists||V.checklists.length===0);return()=>Ee()&&R0()})(),null),se.$$input=Ee=>d(Ee.target.value),ge.$$click=()=>O(V.id),G(()=>ge.disabled=!u().trim()),G(()=>se.value=u()),J})()}),null),N(fe,(()=>{var V=xt(()=>!e().reviews||e().reviews.length===0);return()=>V()&&N0()})(),null),z.$$click=v,Je(D,"click",S0,!0),de.$$click=k,he.$$click=C,N(we,E(y0,{get data(){return p()}})),N(Pe,E(x0,{get data(){return p()}})),G(()=>q.disabled=!c().trim()),G(()=>U.value=c()),$}})}Me(["click","input"]);function Pl({id:e,name:t,createdAt:n=Date.now(),reviews:r=[]}={}){if(t===null)throw new Error("Project name cannot be null");return{id:e,name:t,createdAt:n,reviews:r}}function T0(e,t){return Object.keys(e).forEach(n=>{/^q\d+[a-z]*$/i.test(n)&&e[n]?.answers&&e[n].answers.forEach((r,i)=>{r.fill(!1),t%2===0?r[0]=!0:r[r.length-1]=!0})}),e}async function M0(){const e=["Review 1","Review 2","Review 3"];let t=[];for(const[r,i]of e.entries()){const s=r%2===0?2:1;for(let a=0;a<s;a++){let o=ms({name:`Checklist ${a+1}`,id:await Dt(),createdAt:Date.now()});o=T0(o,r+a);const l=Cl({id:await Dt(),name:i,createdAt:Date.now(),checklists:[o]});t.push(l)}}const n=Pl({id:await Dt(),name:"Example Project",createdAt:Date.now(),reviews:t});await hn(n)}var I0=T("<ul class=space-y-1>"),L0=T('<div class=p-4><h2 class="text-xl font-bold mb-3">Your Projects</h2><div class="mt-4 flex items-center gap-2"><input type=text class="px-2 py-1 border rounded w-48 text-sm"placeholder="Project name"><button class="px-3 py-1.5 bg-green-500 text-white rounded hover:bg-green-600 transition text-sm">+ Add New Project</button></div><div class="mt-4 flex flex-wrap gap-2"><button class="px-3 py-1.5 bg-gray-500 text-white rounded hover:bg-gray-600 transition text-sm">Load Example Project</button><button class="px-3 py-1.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition text-sm">Check Health</button><button class="px-3 py-1.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition text-sm">Check Health DB'),q0=T('<div class="text-sm text-gray-500">No projects found.'),D0=T('<li><div><div class=font-medium></div><div class="text-xs text-gray-600"></div><div class="text-xs text-gray-400">Created: </div></div><button class="ml-0 sm:ml-4 mt-2 sm:mt-0 px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition text-xs">Delete');function j0(){const{projects:e,currentProject:t,addProject:n,deleteProject:r}=zt(),i=Et(),[s,a]=j(""),o=f=>{const u=tt(f.name);i(`/projects/${u}-${f.id}`)},l=async()=>{if(!s().trim())return;const f=await n(Pl({id:await Dt(),name:s().trim(),createdAt:Date.now()}));a(""),o(f)},c=async f=>{window.confirm("Are you sure you want to delete this project?")&&await r(f)};return(()=>{var f=L0(),u=f.firstChild,d=u.nextSibling,p=d.firstChild,_=p.nextSibling,x=d.nextSibling,A=x.firstChild,O=A.nextSibling,m=O.nextSibling;return N(f,E(me,{get when(){return e().length!==0},get fallback(){return q0()},get children(){var v=I0();return N(v,E(bt,{get each(){return e()},children:y=>(()=>{var k=D0(),C=k.firstChild,$=C.firstChild,h=$.nextSibling,g=h.nextSibling;g.firstChild;var w=C.nextSibling;return k.$$click=()=>o(y),N($,()=>y.name),N(h,()=>y.description),N(g,()=>new Date(y.createdAt).toLocaleDateString(),null),w.$$click=b=>{b.stopPropagation(),c(y.id)},G(b=>{var S=y.id,P=`p-2 border rounded cursor-pointer transition text-sm flex flex-col sm:flex-row sm:items-center sm:justify-between ${t()&&t().id===y.id?"bg-blue-50 border-blue-300":"hover:bg-gray-100"}`;return S!==b.e&&ke(k,"key",b.e=S),P!==b.t&&Ce(k,b.t=P),b},{e:void 0,t:void 0}),k})()})),v}}),d),p.$$input=v=>a(v.target.value),_.$$click=l,A.$$click=async()=>{const v=await M0();console.log("Loaded example project:",v),window.location.reload()},Je(O,"click",Af,!0),Je(m,"click",Cf,!0),G(()=>_.disabled=!s().trim()),G(()=>p.value=s()),f})()}Me(["input","click"]);var F0=T("<div>");function Lt(e){const[t,n]=j(!1),[r,i]=j(!1);let s,a;const o=()=>e.duration??300,l=()=>e.timingFunction??"ease-in-out",c=()=>e.when;return xe(()=>{c()?(clearTimeout(a),i(!0),requestAnimationFrame(()=>{n(!0)})):(n(!1),clearTimeout(a),a=setTimeout(()=>{i(!1)},o()))}),Te(()=>{clearTimeout(a)}),E(me,{get when(){return r()},get fallback(){return e.fallback},get children(){var f=F0(),u=s;return typeof u=="function"?Nn(u,f):s=f,N(f,()=>e.children),G(d=>{var p=t()?1:0,_=`opacity ${o()}ms ${l()}`,x=e.ariaLive||"polite",A=e.role||"alert",O=e.class||"";return p!==d.e&&Sn(f,"opacity",d.e=p),_!==d.t&&Sn(f,"transition",d.t=_),x!==d.a&&ke(f,"aria-live",d.a=x),A!==d.o&&ke(f,"role",d.o=A),O!==d.i&&Ce(f,d.i=O),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),f}})}var en=(e,t=[])=>({parts:(...n)=>{if(U0(t))return en(e,n);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...n)=>en(e,[...t,...n]),omit:(...n)=>en(e,t.filter(r=>!n.includes(r))),rename:n=>en(n,t),keys:()=>t,build:()=>[...new Set(t)].reduce((n,r)=>Object.assign(n,{[r]:{selector:[`&[data-scope="${Qt(e)}"][data-part="${Qt(r)}"]`,`& [data-scope="${Qt(e)}"][data-part="${Qt(r)}"]`].join(", "),attrs:{"data-scope":Qt(e),"data-part":Qt(r)}}}),{})}),Qt=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),U0=e=>e.length===0,ii=e=>typeof e=="object"&&e!==null,ie=e=>e?"":void 0,Rl=e=>e?"true":void 0,B0=1,V0=9,H0=11,Nl=e=>ii(e)&&e.nodeType===B0&&typeof e.nodeName=="string",Ol=e=>ii(e)&&e.nodeType===V0,z0=e=>ii(e)&&e===e.window,Y0=e=>ii(e)&&e.nodeType!==void 0,W0=e=>Y0(e)&&e.nodeType===H0&&"host"in e;function Q0(e){if(!e)return!1;const t=e.getRootNode();return Tl(t)===e}function K0(e){return Ol(e)?e:z0(e)?e.document:e?.ownerDocument??document}function Cs(e){return W0(e)?Cs(e.host):Ol(e)?e.defaultView??window:Nl(e)?e.ownerDocument?.defaultView??window:window}function Tl(e){let t=e.activeElement;for(;t?.shadowRoot;){const n=t.shadowRoot.activeElement;if(!n||n===t)break;t=n}return t}function G0(e){const{selectionStart:t,selectionEnd:n,value:r}=e.currentTarget,i=e.data;return r.slice(0,t)+(i??"")+r.slice(n)}function X0(e){return Ml(e).isComposing||e.keyCode===229}var J0=e=>e.button===0,Z0=e=>e.ctrlKey||e.altKey||e.metaKey,em={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},ka={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function tm(e,t={}){const{dir:n="ltr",orientation:r="horizontal"}=t;let i=e.key;return i=em[i]??i,n==="rtl"&&r==="horizontal"&&i in ka&&(i=ka[i]),i}function Ml(e){return e.nativeEvent??e}function nm(e,t){const{type:n="HTMLInputElement",property:r="value"}=t,i=Cs(e)[n].prototype;return Object.getOwnPropertyDescriptor(i,r)??{}}function rm(e){if(e.localName==="input")return"HTMLInputElement";if(e.localName==="textarea")return"HTMLTextAreaElement";if(e.localName==="select")return"HTMLSelectElement"}function im(e,t,n="value"){if(!e)return;const r=rm(e);r&&nm(e,{type:r,property:n}).set?.call(e,t),e.setAttribute(n,t)}function sm(e,t){const{value:n,bubbles:r=!0}=t;if(!e)return;const i=Cs(e);e instanceof i.HTMLInputElement&&(im(e,`${n}`),e.dispatchEvent(new i.Event("input",{bubbles:r})))}function ar(e){let t;const n=globalThis.requestAnimationFrame(()=>{t=e()});return()=>{globalThis.cancelAnimationFrame(n),t?.()}}function am(e,t){return Array.from(e?.querySelectorAll(t)??[])}var om={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"};function lm(e){return e==null?[]:Array.isArray(e)?e:[e]}var Sa=e=>e?.constructor.name==="Array",cm=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!si(e[n],t[n]))return!1;return!0},si=(e,t)=>{if(Object.is(e,t))return!0;if(e==null&&t!=null||e!=null&&t==null)return!1;if(typeof e?.isEqual=="function"&&typeof t?.isEqual=="function")return e.isEqual(t);if(typeof e=="function"&&typeof t=="function")return e.toString()===t.toString();if(Sa(e)&&Sa(t))return cm(Array.from(e),Array.from(t));if(typeof e!="object"||typeof t!="object")return!1;const n=Object.keys(t??Object.create(null)),r=n.length;for(let i=0;i<r;i++)if(!Reflect.has(e,n[i]))return!1;for(let i=0;i<r;i++){const s=n[i];if(!si(e[s],t[s]))return!1}return!0},um=e=>Array.isArray(e),Il=e=>e!=null&&typeof e=="object",fm=e=>Il(e)&&!um(e),dm=e=>typeof e=="number"&&!Number.isNaN(e),Ps=e=>typeof e=="string",wt=e=>typeof e=="function",hm=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),gm=e=>Object.prototype.toString.call(e),Ll=Function.prototype.toString,pm=Ll.call(Object),mm=e=>{if(!Il(e)||gm(e)!="[object Object]"||ym(e))return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const n=hm(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Ll.call(n)==pm},wm=e=>typeof e=="object"&&e!==null&&"$$typeof"in e&&"props"in e,vm=e=>typeof e=="object"&&e!==null&&"__v_isVNode"in e,ym=e=>wm(e)||vm(e),bm=(()=>{let e=0;return()=>(e++,e.toString(36))})(),pi=(e,t,n)=>e[t]===n?e:[...e.slice(0,t),n,...e.slice(t+1)];function ql(e){if(!mm(e)||e===void 0)return e;const t=Reflect.ownKeys(e).filter(r=>typeof r=="string"),n={};for(const r of t){const i=e[r];i!==void 0&&(n[r]=ql(i))}return n}function $a(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function xm(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function _m(e,t){if(e==null)throw new Error(t())}function km(){return{and:(...e)=>function(n){return e.every(r=>n.guard(r))},or:(...e)=>function(n){return e.some(r=>n.guard(r))},not:e=>function(n){return!n.guard(e)}}}function Sm(){return{guards:km(),createMachine:e=>e,choose:e=>function({choose:n}){return n(e)?.actions}}}var Xt=(e=>(e.NotStarted="Not Started",e.Started="Started",e.Stopped="Stopped",e))(Xt||{}),mi="__init__";function $m(e){const t=()=>e.getRootNode?.()??document,n=()=>K0(t());return{...e,getRootNode:t,getDoc:n,getWin:()=>n().defaultView??window,getActiveElement:()=>Tl(t()),isActiveElement:Q0,getById:a=>t().getElementById(a)}}function Em(e){return new Proxy({},{get(t,n){return n==="style"?r=>e({style:r}).style:e}})}var Dl=()=>e=>Array.from(new Set(e)),Am=en("password-input").parts("root","input","label","control","indicator","visibilityTrigger"),Kt=Am.build(),wr=e=>e.ids?.input??`p-input-${e.id}-input`,Fi=e=>e.getById(wr(e));function Cm(e,t){const{scope:n,prop:r,context:i}=e,s=i.get("visible"),a=!!r("disabled"),o=!!r("invalid"),l=!!r("readOnly"),c=!!r("required"),f=!(l||a),u=r("translations");return{visible:s,disabled:a,invalid:o,focus(){Fi(n)?.focus()},setVisible(d){e.send({type:"VISIBILITY.SET",value:d})},toggleVisible(){e.send({type:"VISIBILITY.SET",value:!s})},getRootProps(){return t.element({...Kt.root.attrs,dir:r("dir"),"data-disabled":ie(a),"data-invalid":ie(o),"data-readonly":ie(l)})},getLabelProps(){return t.label({...Kt.label.attrs,htmlFor:wr(n),"data-disabled":ie(a),"data-invalid":ie(o),"data-readonly":ie(l),"data-required":ie(c)})},getInputProps(){return t.input({...Kt.input.attrs,id:wr(n),autoCapitalize:"off",name:r("name"),required:r("required"),autoComplete:r("autoComplete"),spellCheck:!1,readOnly:l,disabled:a,type:s?"text":"password","data-state":s?"visible":"hidden","aria-invalid":Rl(o),"data-disabled":ie(a),"data-invalid":ie(o),"data-readonly":ie(l),...r("ignorePasswordManagers")?Pm:{}})},getVisibilityTriggerProps(){return t.button({...Kt.visibilityTrigger.attrs,type:"button",tabIndex:-1,"aria-controls":wr(n),"aria-expanded":s,"data-readonly":ie(l),disabled:a,"data-disabled":ie(a),"data-state":s?"visible":"hidden","aria-label":u?.visibilityTrigger?.(s),onPointerDown(d){J0(d)&&f&&(d.preventDefault(),e.send({type:"TRIGGER.CLICK"}))}})},getIndicatorProps(){return t.element({...Kt.indicator.attrs,"aria-hidden":!0,"data-state":s?"visible":"hidden","data-disabled":ie(a),"data-invalid":ie(o),"data-readonly":ie(l)})},getControlProps(){return t.element({...Kt.control.attrs,"data-disabled":ie(a),"data-invalid":ie(o),"data-readonly":ie(l)})}}}var Pm={"data-1p-ignore":"","data-lpignore":"true","data-bwignore":"true","data-form-type":"other","data-protonpass-ignore":"true"},Rm={props({props:e}){return{id:bm(),defaultVisible:!1,autoComplete:"current-password",ignorePasswordManagers:!1,...e,translations:{visibilityTrigger(t){return t?"Hide password":"Show password"},...e.translations}}},context({prop:e,bindable:t}){return{visible:t(()=>({value:e("visible"),defaultValue:e("defaultVisible"),onChange(n){e("onVisibilityChange")?.({visible:n})}}))}},initialState(){return"idle"},effects:["trackFormEvents"],states:{idle:{on:{"VISIBILITY.SET":{actions:["setVisibility"]},"TRIGGER.CLICK":{actions:["toggleVisibility","focusInputEl"]}}}},implementations:{actions:{setVisibility({context:e,event:t}){e.set("visible",t.value)},toggleVisibility({context:e}){e.set("visible",t=>!t)},focusInputEl({scope:e}){Fi(e)?.focus()}},effects:{trackFormEvents({scope:e,send:t}){const r=Fi(e)?.form;if(!r)return;const i=e.getWin(),s=new i.AbortController;return r.addEventListener("reset",a=>{a.defaultPrevented||t({type:"VISIBILITY.SET",value:!1})},{signal:s.signal}),r.addEventListener("submit",()=>{t({type:"VISIBILITY.SET",value:!1})},{signal:s.signal}),()=>s.abort()}}}};Dl()(["defaultVisible","dir","id","onVisibilityChange","visible","ids","getRootNode","disabled","invalid","required","readOnly","translations","ignorePasswordManagers","autoComplete","name"]);function Hr(e){const t=e().value??e().defaultValue,n=e().isEqual??Object.is,[r,i]=j(t),s=ae(()=>e().value!=null),a={current:r()},o={current:void 0};xe(()=>{const f=s()?e().value:r();o.current=f,a.current=f});const l=f=>{const u=o.current,d=wt(f)?f(a.current):f;e().debug&&console.log(`[bindable > ${e().debug}] setValue`,{next:d,prev:u}),s()||i(d),n(d,u)||e().onChange?.(d,u)};function c(){const f=s()?e().value:r;return wt(f)?f():f}return{initial:t,ref:a,get:c,set:l,invoke(f,u){e().onChange?.(f,u)},hash(f){return e().hash?.(f)??String(f)}}}Hr.cleanup=e=>{Te(()=>e())};Hr.ref=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}};function Nm(e){const t={current:e};return{get(n){return t.current[n]},set(n,r){t.current[n]=r}}}function wi(e){return wt(e)?e():e}var Om=(e,t)=>{let n=[],r=!0;xe(()=>{if(r){n=e.map(s=>wi(s)),r=!1;return}let i=!1;for(let s=0;s<e.length;s++)if(!si(n[s],wi(e[s]))){i=!0;break}i&&(n=e.map(s=>wi(s)),t())})};function jl(e,t={}){const n=ae(()=>{const{id:h,ids:g,getRootNode:w}=vi(t);return $m({id:h,ids:g,getRootNode:w})}),r=(...h)=>{e.debug&&console.log(...h)},i=ae(()=>e.props?.({props:ql(vi(t)),scope:n()})??vi(t)),s=Tm(i),a=e.context?.({prop:s,bindable:Hr,get scope(){return n()},flush:Ea,getContext(){return o},getComputed(){return y},getRefs(){return _},getEvent(){return d()}}),o={get(h){return a?.[h].get()},set(h,g){a?.[h].set(g)},initial(h){return a?.[h].initial},hash(h){const g=a?.[h].get();return a?.[h].hash(g)}},l={current:new Map},c={current:null},f={current:null},u={current:{type:""}},d=()=>X(u.current,{current(){return u.current},previous(){return f.current}}),p=()=>X(k,{matches(...h){const g=k.get();return h.includes(g)},hasTag(h){const g=k.get();return!!e.states[g]?.tags?.includes(h)}}),_=Nm(e.refs?.({prop:s,context:o})??{}),x=()=>({state:p(),context:o,event:d(),prop:s,send:$,action:A,guard:O,track:Om,refs:_,computed:y,flush:Ea,get scope(){return n()},choose:v}),A=h=>{const g=wt(h)?h(x()):h;if(!g)return;const w=g.map(b=>{const S=e.implementations?.actions?.[b];return S||$a(`[zag-js] No implementation found for action "${JSON.stringify(b)}"`),S});for(const b of w)b?.(x())},O=h=>wt(h)?h(x()):e.implementations?.guards?.[h](x()),m=h=>{const g=wt(h)?h(x()):h;if(!g)return;const w=g.map(S=>{const P=e.implementations?.effects?.[S];return P||$a(`[zag-js] No implementation found for effect "${JSON.stringify(S)}"`),P}),b=[];for(const S of w){const P=S?.(x());P&&b.push(P)}return()=>b.forEach(S=>S?.())},v=h=>lm(h).find(g=>{let w=!g.guard;return Ps(g.guard)?w=!!O(g.guard):wt(g.guard)&&(w=g.guard(x())),w}),y=h=>{_m(e.computed,()=>"[zag-js] No computed object found on machine");const g=e.computed[h];return g({context:o,event:u.current,prop:s,refs:_,scope:n(),computed:y})},k=Hr(()=>({defaultValue:e.initialState({prop:s}),onChange(h,g){g&&(l.current.get(g)?.(),l.current.delete(g)),g&&A(e.states[g]?.exit),A(c.current?.actions);const w=m(e.states[h]?.effects);if(w&&l.current.set(h,w),g===mi){A(e.entry);const b=m(e.effects);b&&l.current.set(mi,b)}A(e.states[h]?.entry)}}));let C=Xt.NotStarted;Wn(()=>{const h=C===Xt.Started;C=Xt.Started,r(h?"rehydrating...":"initializing..."),k.invoke(k.initial,mi)}),Te(()=>{r("unmounting..."),C=Xt.Stopped,l.current.forEach(g=>g?.()),l.current=new Map,c.current=null,A(e.exit)});const $=h=>{queueMicrotask(()=>{if(C!==Xt.Started)return;f.current=u.current,u.current=h;let g=Oe(()=>k.get());const w=e.states[g].on?.[h.type]??e.on?.[h.type],b=v(w);if(!b)return;c.current=b;const S=b.target??g;r("transition",h.type,b.target||g,`(${b.actions})`);const P=S!==g;P?k.set(S):b.reenter&&!P?k.invoke(g,g):A(b.actions)})};return e.watch?.(x()),{state:p(),send:$,context:o,prop:s,get scope(){return n()},refs:_,computed:y,event:d(),getStatus:()=>C}}function Ea(e){e()}function vi(e){return wt(e)?e():e}function Tm(e){return function(n){return e()[n]}}var Aa={onFocus:"onFocusIn",onBlur:"onFocusOut",onDoubleClick:"onDblClick",onChange:"onInput",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",className:"class"},Mm=e=>e.startsWith("--")?e:Fm(e);function Im(e){return e in Aa?Aa[e]:e}var Fl=Em(e=>{const t={};for(const n in e){const r=e[n];if(!(n==="readOnly"&&r===!1)){if(n==="style"&&fm(r)){t.style=Lm(r);continue}if(n==="children"){Ps(r)&&(t.textContent=r);continue}t[Im(n)]=r}}return t});function Lm(e){let t={};for(const n in e){const r=e[n];!Ps(r)&&!dm(r)||(t[Mm(n)]=r)}return t}var qm=/[A-Z]/g,Dm=/^ms-/;function jm(e){return"-"+e.toLowerCase()}var yi={};function Fm(e){if(yi.hasOwnProperty(e))return yi[e];var t=e.replace(qm,jm);return yi[e]=Dm.test(t)?"-"+t:t}var Um=T("<svg stroke-width=0>");function ai(e,t){const n=X(e.a,t),[r,i]=za(n,["src"]),[s,a]=j(""),o=ae(()=>t.title?`${e.c}<title>${t.title}</title>`:e.c);return xe(()=>a(o())),Te(()=>{a("")}),(()=>{var l=Um();return Ae(l,X({get stroke(){return e.a?.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},i,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return s()}}),!0,!0),N(l,()=>Wa),l})()}function Bm(e){return ai({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><path d="M1 1 23 23"/>'},e)}function Vm(e){return ai({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><path d="M12 9A3 3 0 1 0 12 15 3 3 0 1 0 12 9z"/>'},e)}function Hm(e){return ai({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M3 12 21 12"/><path d="M3 6 21 6"/><path d="M3 18 21 18"/>'},e)}var zm=T("<div><label>Password</label><div><input><button><span>");function Ym(e){const t=jl(Rm,{id:Ya(),autoComplete:e.autoComplete||"new-password",value:e.password||"",required:e.required||!1}),n=ae(()=>Cm(t,Fl)),r=e.inputClass||"w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition big-placeholder",i=e.iconSize||20;return(()=>{var s=zm(),a=s.firstChild,o=a.nextSibling,l=o.firstChild,c=l.nextSibling,f=c.firstChild;return Ae(s,X(()=>n().getRootProps(),{get class(){return e.class}}),!1,!0),Ae(a,X(()=>n().getLabelProps(),{class:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"}),!1,!0),Ae(o,X(()=>n().getControlProps(),{class:"relative"}),!1,!0),Ae(l,X(()=>n().getInputProps(),{class:r,onInput:u=>e.onPasswordChange?.(u.target.value),placeholder:"••••••••"}),!1,!1),Ae(c,X(()=>n().getVisibilityTriggerProps(),{class:"absolute right-3 sm:right-4 top-1/2 -translate-y-1/2 text-gray-400"}),!1,!0),Ae(f,X(()=>n().getIndicatorProps()),!1,!0),N(f,E(me,{get when(){return n().visible},get fallback(){return E(Bm,{size:i-2})},get children(){return E(Vm,{size:i})}})),s})()}function vr(e){return ai({a:{viewBox:"0 0 1024 1024"},c:'<path d="M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"/>'},e)}var Wm=T('<p class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm">'),Qm=T('<div class="flex items-center">Signing In...'),Km=T('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-8 sm:py-12"><form aria-labelledby=signin-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 space-y-4 border border-gray-100"autocomplete=off><div class="mb-2 sm:mb-4 text-center"><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=signin-heading>Welcome Back</h2><p class="text-gray-500 text-xs sm:text-sm">Sign in to your account.</p></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=email-input>Email</label><input type=email autocomplete=email autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"required id=email-input placeholder=you@example.com></div><div></div><button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"></button><div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Don&apos;t have an account? <a href=/signup class="text-indigo-600 hover:underline font-semibold">Sign Up');function Gm(){const[e,t]=j(""),[n,r]=j(""),[i,s]=j(""),[a,o]=j(!1),l=Et(),{signin:c}=Xn();async function f(u){if(u.preventDefault(),s(""),!e()||!n()){s("Please enter email and password");return}o(!0);try{await c(e(),n()),await new Promise(d=>setTimeout(d,200)),l("/dashboard",{replace:!0}),o(!1)}catch(d){JSON.parse(d.message).detail.includes("Email not verified")?l("/verify-email",{replace:!0}):(o(!1),s("Incorrect email or password"))}}return(()=>{var u=Km(),d=u.firstChild,p=d.firstChild,_=p.nextSibling,x=_.firstChild,A=x.nextSibling,O=_.nextSibling,m=O.nextSibling,v=m.nextSibling,y=v.firstChild,k=y.nextSibling;return d.addEventListener("submit",f),A.$$input=C=>t(C.target.value),N(O,E(Ym,{get password(){return n()},onPasswordChange:r,autoComplete:"current-password",required:!0}),null),N(O,E(Lt,{get when(){return!!i()},get children(){var C=Wm();return N(C,i),C}}),null),N(m,E(Lt,{get when(){return a()},fallback:"Sign In",get children(){var C=Qm(),$=C.firstChild;return N(C,E(vr,{class:"animate-spin mr-2",size:22}),$),C}})),k.$$click=C=>{C.preventDefault(),l("/signup")},G(()=>m.disabled=a()),G(()=>A.value=e()),u})()}Me(["input","click"]);var Xm=en("pinInput").parts("root","label","input","control"),or=Xm.build(),Pn=e=>e.ids?.root??`pin-input:${e.id}`,Jm=(e,t)=>e.ids?.input?.(t)??`pin-input:${e.id}:${t}`,Ui=e=>e.ids?.hiddenInput??`pin-input:${e.id}:hidden`,Zm=e=>e.ids?.label??`pin-input:${e.id}:label`,ew=e=>e.ids?.control??`pin-input:${e.id}:control`,tw=e=>e.getById(Pn(e)),zr=e=>{const n=`input[data-ownedby=${CSS.escape(Pn(e))}]`;return am(tw(e),n)},mn=(e,t)=>zr(e)[t],nw=e=>zr(e)[0],Ca=e=>e.getById(Ui(e)),bi=(e,t)=>{e.value=t,e.setAttribute("value",t)},rw={numeric:/^[0-9]+$/,alphabetic:/^[A-Za-z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/i};function iw(e,t){return e?!!rw[e]?.test(t):!0}function sw(e,t,n){return n?new RegExp(n,"g").test(e):iw(t,e)}function aw(e,t){const{send:n,context:r,computed:i,prop:s,scope:a}=e,o=i("isValueComplete"),l=!!s("disabled"),c=!!s("readOnly"),f=!!s("invalid"),u=!!s("required"),d=s("translations"),p=r.get("focusedIndex");function _(){nw(a)?.focus()}return{focus:_,count:r.get("count"),items:Array.from({length:r.get("count")}).map((x,A)=>A),value:r.get("value"),valueAsString:i("valueAsString"),complete:o,setValue(x){Array.isArray(x)||xm("[pin-input/setValue] value must be an array"),n({type:"VALUE.SET",value:x})},clearValue(){n({type:"VALUE.CLEAR"})},setValueAtIndex(x,A){n({type:"VALUE.SET",value:A,index:x})},getRootProps(){return t.element({dir:s("dir"),...or.root.attrs,id:Pn(a),"data-invalid":ie(f),"data-disabled":ie(l),"data-complete":ie(o),"data-readonly":ie(c)})},getLabelProps(){return t.label({...or.label.attrs,dir:s("dir"),htmlFor:Ui(a),id:Zm(a),"data-invalid":ie(f),"data-disabled":ie(l),"data-complete":ie(o),"data-required":ie(u),"data-readonly":ie(c),onClick(x){x.preventDefault(),_()}})},getHiddenInputProps(){return t.input({"aria-hidden":!0,type:"text",tabIndex:-1,id:Ui(a),readOnly:c,disabled:l,required:u,name:s("name"),form:s("form"),style:om,maxLength:i("valueLength"),defaultValue:i("valueAsString")})},getControlProps(){return t.element({...or.control.attrs,dir:s("dir"),id:ew(a)})},getInputProps(x){const{index:A}=x,O=s("type")==="numeric"?"tel":"text";return t.input({...or.input.attrs,dir:s("dir"),disabled:l,"data-disabled":ie(l),"data-complete":ie(o),id:Jm(a,A.toString()),"data-index":A,"data-ownedby":Pn(a),"aria-label":d?.inputLabel?.(A,i("valueLength")),inputMode:s("otp")||s("type")==="numeric"?"numeric":"text","aria-invalid":Rl(f),"data-invalid":ie(f),type:s("mask")?"password":O,defaultValue:r.get("value")[A]||"",readOnly:c,autoCapitalize:"none",autoComplete:s("otp")?"one-time-code":"off",placeholder:p===A?"":s("placeholder"),onBeforeInput(m){try{const v=G0(m);sw(v,s("type"),s("pattern"))||(n({type:"VALUE.INVALID",value:v}),m.preventDefault()),v.length>2&&m.currentTarget.setSelectionRange(0,1,"forward")}catch{}},onChange(m){const v=Ml(m),{value:y}=m.currentTarget;if(v.inputType==="insertFromPaste"||y.length>2){n({type:"INPUT.PASTE",value:y}),m.currentTarget.value=y[0],m.preventDefault();return}if(v.inputType==="deleteContentBackward"){n({type:"INPUT.BACKSPACE"});return}n({type:"INPUT.CHANGE",value:y,index:A})},onKeyDown(m){if(m.defaultPrevented||X0(m)||Z0(m))return;const y={Backspace(){n({type:"INPUT.BACKSPACE"})},Delete(){n({type:"INPUT.DELETE"})},ArrowLeft(){n({type:"INPUT.ARROW_LEFT"})},ArrowRight(){n({type:"INPUT.ARROW_RIGHT"})},Enter(){n({type:"INPUT.ENTER"})}}[tm(m,{dir:s("dir"),orientation:"horizontal"})];y&&(y(m),m.preventDefault())},onFocus(){n({type:"INPUT.FOCUS",index:A})},onBlur(m){const v=m.relatedTarget;Nl(v)&&v.dataset.ownedby===Pn(a)||n({type:"INPUT.BLUR",index:A})}})}}}var{choose:ow,createMachine:lw}=Sm(),cw=lw({props({props:e}){return{placeholder:"○",otp:!1,type:"numeric",defaultValue:e.count?lr([],e.count):[],...e,translations:{inputLabel:(t,n)=>`pin code ${t+1} of ${n}`,...e.translations}}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({value:e("value"),defaultValue:e("defaultValue"),isEqual:si,onChange(n){e("onValueChange")?.({value:n,valueAsString:n.join("")})}})),focusedIndex:t(()=>({sync:!0,defaultValue:-1})),count:t(()=>({defaultValue:e("count")}))}},computed:{_value:({context:e})=>lr(e.get("value"),e.get("count")),valueLength:({computed:e})=>e("_value").length,filledValueLength:({computed:e})=>e("_value").filter(t=>t?.trim()!=="").length,isValueComplete:({computed:e})=>e("valueLength")===e("filledValueLength"),valueAsString:({computed:e})=>e("_value").join(""),focusedValue:({computed:e,context:t})=>e("_value")[t.get("focusedIndex")]||""},entry:ow([{guard:"autoFocus",actions:["setInputCount","setFocusIndexToFirst"]},{actions:["setInputCount"]}]),watch({action:e,track:t,context:n,computed:r}){t([()=>n.get("focusedIndex")],()=>{e(["focusInput","selectInputIfNeeded"])}),t([()=>n.get("value").join(",")],()=>{e(["syncInputElements","dispatchInputEvent"])}),t([()=>r("isValueComplete")],()=>{e(["invokeOnComplete","blurFocusedInputIfNeeded"])})},on:{"VALUE.SET":[{guard:"hasIndex",actions:["setValueAtIndex"]},{actions:["setValue"]}],"VALUE.CLEAR":{actions:["clearValue","setFocusIndexToFirst"]}},states:{idle:{on:{"INPUT.FOCUS":{target:"focused",actions:["setFocusedIndex"]}}},focused:{on:{"INPUT.CHANGE":{actions:["setFocusedValue","syncInputValue","setNextFocusedIndex"]},"INPUT.PASTE":{actions:["setPastedValue","setLastValueFocusIndex"]},"INPUT.FOCUS":{actions:["setFocusedIndex"]},"INPUT.BLUR":{target:"idle",actions:["clearFocusedIndex"]},"INPUT.DELETE":{guard:"hasValue",actions:["clearFocusedValue"]},"INPUT.ARROW_LEFT":{actions:["setPrevFocusedIndex"]},"INPUT.ARROW_RIGHT":{actions:["setNextFocusedIndex"]},"INPUT.BACKSPACE":[{guard:"hasValue",actions:["clearFocusedValue"]},{actions:["setPrevFocusedIndex","clearFocusedValue"]}],"INPUT.ENTER":{guard:"isValueComplete",actions:["requestFormSubmit"]},"VALUE.INVALID":{actions:["invokeOnInvalid"]}}}},implementations:{guards:{autoFocus:({prop:e})=>!!e("autoFocus"),hasValue:({context:e})=>e.get("value")[e.get("focusedIndex")]!=="",isValueComplete:({computed:e})=>e("isValueComplete"),hasIndex:({event:e})=>e.index!==void 0},actions:{dispatchInputEvent({computed:e,scope:t}){const n=Ca(t);sm(n,{value:e("valueAsString")})},setInputCount({scope:e,context:t,prop:n}){if(n("count"))return;const r=zr(e);t.set("count",r.length)},focusInput({context:e,scope:t}){const n=e.get("focusedIndex");n!==-1&&mn(t,n)?.focus({preventScroll:!0})},selectInputIfNeeded({context:e,prop:t,scope:n}){const r=e.get("focusedIndex");!t("selectOnFocus")||r===-1||ar(()=>{mn(n,r)?.select()})},invokeOnComplete({computed:e,prop:t}){e("isValueComplete")&&t("onValueComplete")?.({value:e("_value"),valueAsString:e("valueAsString")})},invokeOnInvalid({context:e,event:t,prop:n}){n("onValueInvalid")?.({value:t.value,index:e.get("focusedIndex")})},clearFocusedIndex({context:e}){e.set("focusedIndex",-1)},setFocusedIndex({context:e,event:t}){e.set("focusedIndex",t.index)},setValue({context:e,event:t}){const n=lr(t.value,e.get("count"));e.set("value",n)},setFocusedValue({context:e,event:t,computed:n,flush:r}){const i=n("focusedValue"),s=e.get("focusedIndex"),a=Pa(i,t.value);r(()=>{e.set("value",pi(n("_value"),s,a))})},revertInputValue({context:e,computed:t,scope:n}){const r=mn(n,e.get("focusedIndex"));bi(r,t("focusedValue"))},syncInputValue({context:e,event:t,scope:n}){const r=e.get("value"),i=mn(n,t.index);bi(i,r[t.index])},syncInputElements({context:e,scope:t}){const n=zr(t),r=e.get("value");n.forEach((i,s)=>{bi(i,r[s])})},setPastedValue({context:e,event:t,computed:n,flush:r}){ar(()=>{const i=n("valueAsString"),s=e.get("focusedIndex"),a=n("valueLength"),o=n("filledValueLength"),l=Math.min(s,o),c=l>0?i.substring(0,s):"",f=t.value.substring(0,a-l),u=lr(`${c}${f}`.split(""),a);r(()=>{e.set("value",u)})})},setValueAtIndex({context:e,event:t,computed:n}){const r=Pa(n("focusedValue"),t.value);e.set("value",pi(n("_value"),t.index,r))},clearValue({context:e}){const t=Array.from({length:e.get("count")}).fill("");queueMicrotask(()=>{e.set("value",t)})},clearFocusedValue({context:e,computed:t}){const n=e.get("focusedIndex");n!==-1&&e.set("value",pi(t("_value"),n,""))},setFocusIndexToFirst({context:e}){e.set("focusedIndex",0)},setNextFocusedIndex({context:e,computed:t}){e.set("focusedIndex",Math.min(e.get("focusedIndex")+1,t("valueLength")-1))},setPrevFocusedIndex({context:e}){e.set("focusedIndex",Math.max(e.get("focusedIndex")-1,0))},setLastValueFocusIndex({context:e,computed:t}){ar(()=>{e.set("focusedIndex",Math.min(t("filledValueLength"),t("valueLength")-1))})},blurFocusedInputIfNeeded({context:e,prop:t,scope:n}){t("blurOnComplete")&&ar(()=>{mn(n,e.get("focusedIndex"))?.blur()})},requestFormSubmit({computed:e,prop:t,scope:n}){if(!t("name")||!e("isValueComplete"))return;Ca(n)?.form?.requestSubmit()}}}});function Pa(e,t){let n=t;e[0]===t[0]?n=t[1]:e[0]===t[1]&&(n=t[0]);const r=n.split("");return n=r[r.length-1],n??""}function lr(e,t){return Array.from({length:t}).fill("").map((n,r)=>e[r]||n)}Dl()(["autoFocus","blurOnComplete","count","defaultValue","dir","disabled","form","getRootNode","id","ids","invalid","mask","name","onValueChange","onValueComplete","onValueInvalid","otp","pattern","placeholder","readOnly","required","selectOnFocus","translations","type","value"]);var uw=T('<div class="flex flex-col items-center"><div><input><input><input><input><input><input>');function fw(e){const t=jl(cw,{id:Ya(),required:e.required||!0,autoComplete:e.autoComplete||"one-time-code",otp:e.otp||!0,onValueChange(i){e.onInput&&e.onInput(i.valueAsString)},onValueComplete(i){e.onComplete&&e.onComplete(i.valueAsString)}}),n=ae(()=>aw(t,Fl)),r=()=>"w-10 h-12 sm:w-14 sm:h-14 rounded-lg border-2 "+(e.isError?"border-red-500 focus:border-red-600 focus:ring-red-400":"border-gray-300 focus:border-blue-500 focus:ring-blue-400")+" bg-gray-50 text-center text-xl font-semibold outline-none";return(()=>{var i=uw(),s=i.firstChild,a=s.firstChild,o=a.nextSibling,l=o.nextSibling,c=l.nextSibling,f=c.nextSibling,u=f.nextSibling;return Ae(s,X(()=>n().getRootProps(),{class:"flex justify-center gap-1 sm:gap-3 my-6"}),!1,!0),Ae(a,X({get required(){return e.required??!0}},()=>n().getInputProps({index:0}),{get class(){return r()}}),!1,!1),Ae(o,X({get required(){return e.required??!0}},()=>n().getInputProps({index:1}),{get class(){return r()}}),!1,!1),Ae(l,X({get required(){return e.required??!0}},()=>n().getInputProps({index:2}),{get class(){return r()}}),!1,!1),Ae(c,X({get required(){return e.required??!0}},()=>n().getInputProps({index:3}),{get class(){return r()}}),!1,!1),Ae(f,X({get required(){return e.required??!0}},()=>n().getInputProps({index:4}),{get class(){return r()}}),!1,!1),Ae(u,X({get required(){return e.required??!0}},()=>n().getInputProps({index:5}),{get class(){return r()}}),!1,!1),i})()}var dw=T('<div class=text-center><p class="text-gray-500 text-sm sm:text-base">Enter the verification code sent to your email.'),hw=T('<div class="flex items-center">Verifying...'),gw=T('<button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center">'),Ra=T('<div class="flex items-center">Sending...'),pw=T(`<div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Didn't get a code? <button type=button class="text-indigo-600 hover:underline font-semibold bg-transparent border-none p-0 m-0 cursor-pointer inline-flex items-center">`),mw=T('<p class=" text-red-600 text-xs sm:text-sm">'),ww=T('<p class="pt-2 sm:pt-3 px-2 text-green-600 text-xs sm:text-sm">Email verified! Ready to sign in...'),vw=T('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-12"><form aria-labelledby=verifyemail-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-4 sm:p-12 space-y-2 border border-gray-100 relative"autocomplete=off><div class=text-center><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=verifyemail-heading>Verify Your Email'),yw=T('<div class="mb-6 sm:mb-8 text-center"><p class="text-gray-500 text-xs sm:text-sm">Send a code to verify your email.'),bw=T('<button class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"type=button>');function xw(){const[e,t]=j(""),[n,r]=j(!1),[i,s]=j(""),[a,o]=j(!1),[l,c]=j(!1),[f,u]=j(!1),d=Et(),[p,_]=Mc(),{verifyEmail:x,sendEmailVerification:A,getPendingEmail:O}=Xn();Wn(()=>{O()||d("/signin",{replace:!0})});async function m(y,k){y?.preventDefault&&y.preventDefault(),k&&t(k),s(""),o(!0);try{console.log("Verifying code:",e()),await x(e()),await new Promise(C=>setTimeout(C,200)),c(!0),d("/signin",{replace:!0}),o(!1)}catch(C){console.error("Verify email error:",C),o(!1),s("Invalid code. Please try again.")}}async function v({resend:y=!1}){s(""),y?u(!0):o(!0);try{await A(),await new Promise(k=>setTimeout(k,y?1e3:200)),o(!1),u(!1),_({codeSent:"true"}),r(!0)}catch{o(!1),u(!1),s("Error sending code. Please try again later.")}}return xe(async()=>{if(p.codeSent==="true"&&(r(!0),p.code))try{await x(p.code),c(!0),d("/signin",{replace:!0}),o(!1)}catch{o(!1),s("Invalid or expired link.")}}),xe(()=>{e()&&s("")}),(()=>{var y=vw(),k=y.firstChild;return k.firstChild,k.addEventListener("submit",m),N(k,E(me,{get when(){return n()},get fallback(){return[yw(),(()=>{var C=bw();return C.$$click=v,N(C,E(Lt,{get when(){return a()},fallback:"Send Code",get children(){var $=Ra(),h=$.firstChild;return N($,E(vr,{class:"animate-spin mr-2",size:22}),h),$}})),G(()=>C.disabled=a()),C})()]},get children(){return[dw(),E(fw,{otp:!0,required:!0,autocomplete:!0,onInput:t,get isError(){return!!i()},onComplete:C=>m(null,C)}),(()=>{var C=gw();return N(C,E(Lt,{get when(){return a()},fallback:"Verify Email",get children(){var $=hw(),h=$.firstChild;return N($,E(vr,{class:"animate-spin mr-2",size:22}),h),$}})),G(()=>C.disabled=a()),C})(),(()=>{var C=pw(),$=C.firstChild,h=$.nextSibling;return h.$$click=()=>v({resend:!0}),N(h,E(me,{get when(){return f()},fallback:"Resend",get children(){var g=Ra();return g.firstChild,N(g,E(vr,{class:"animate-spin mr-1",size:16}),null),g}})),G(g=>{var w=f(),b=f();return w!==g.e&&(h.disabled=g.e=w),b!==g.t&&ke(h,"aria-disabled",g.t=b),g},{e:void 0,t:void 0}),C})()]}}),null),N(k,E(Lt,{get when(){return!!i()},class:"absolute left-10 right-0 bottom-2 sm:bottom-6",get children(){var C=mw();return N(C,i),C}}),null),N(k,E(Lt,{get when(){return l()},class:"absolute left-10 right-0 bottom-2 sm:bottom-6",get children(){return ww()}}),null),y})()}Me(["click"]);var _w=T("<div>Reset Password Page");function kw(){return _w()}var Sw=T('<div tabindex=0 role=button><span class=truncate></span><button class="flex items-center justify-center w-6 h-6 rounded hover:bg-gray-200 transition-colors"tabindex=0 type=button><svg fill=none stroke=currentColor stroke-width=2.2 viewBox="0 0 20 20"><polyline points="6 8 10 12 14 8"fill=none stroke-linecap=round stroke-linejoin=round>'),$w=T("<div class=overflow-y-scroll>");function Ew(e){const[t,n]=j({}),{projects:r,currentProject:i}=zt(),s=()=>r().find(l=>l.id===e.projectId),a=()=>s()&&t()[s().id],o=l=>{l.stopPropagation(),n(c=>({...c,[s().id]:!c[s().id]}))};return[(()=>{var l=Sw(),c=l.firstChild,f=c.nextSibling,u=f.firstChild;return l.$$click=()=>e.onSelect?.({project:s()}),N(c,()=>s().name||s().id),f.$$click=o,G(d=>{var p=`
          flex items-center justify-between cursor-pointer select-none rounded-md transition-colors
          px-2 py-1 font-medium text-xs text-gray-800 hover:bg-gray-100 ${i()?.id===s()?.id?"bg-gray-200":"bg-white"}
        `,_=a()?"Collapse project":"Expand project",x=`transition-transform duration-200 w-5 h-5 text-gray-500 ${a()?"rotate-90":""}`;return p!==d.e&&Ce(l,d.e=p),_!==d.t&&ke(f,"aria-label",d.t=_),x!==d.a&&ke(u,"class",d.a=x),d},{e:void 0,t:void 0,a:void 0}),l})(),E(me,{get when(){return(s().reviews||[]).some(l=>(l.checklists||[]).length>0)},get children(){var l=$w();return Sn(l,"transition","max-height 0.25s ease-in-out, opacity 0.25s ease-in-out"),N(l,E(bt,{get each(){return s().reviews||[]},children:c=>E(bt,{get each(){return c.checklists||[]},children:f=>e.children(f,c)})})),G(c=>{var f=a()?"600px":"0",u=a()?1:0;return f!==c.e&&Sn(l,"max-height",c.e=f),u!==c.t&&Sn(l,"opacity",c.t=u),c},{e:void 0,t:void 0}),l}})]}Me(["click"]);var Aw=T('<ul class="list-disc space-y-1 text-xs">'),Cw=T('<div style=max-width:100vw><div><div class="flex-1 overflow-y-auto sidebar-scrollbar space-y-6"><div class="mb-2 px-2 pt-4"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Projects</h3></div><div class="p-2 pb-0 space-y-1 border-t border-gray-100"></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Checklists</h3></div><div class="border-t border-gray-100 pt-1 mx-2"></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Actions</h3></div><div class="border-t border-gray-100 pt-1 space-y-1 mx-2"><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Export CSV</button><label class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-gray-700 hover:bg-gray-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>Import CSV<input type=file accept=.csv,text/csv class=hidden></label><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-blue-700 hover:bg-blue-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-blue-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 10l4.553-2.276A2 2 0 0020 6.382V5a2 2 0 00-2-2H6a2 2 0 00-2 2v1.382a2 2 0 00.447 1.342L9 10m6 0v10m-6-10v10"></path></svg>Set PDF URL</button><label class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-blue-700 hover:bg-blue-50 flex items-center gap-2 text-xs cursor-pointer"><svg class="w-4 h-4 text-blue-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 10l4.553-2.276A2 2 0 0020 6.382V5a2 2 0 00-2-2H6a2 2 0 00-2 2v1.382a2 2 0 00.447 1.342L9 10m6 0v10m-6-10v10"></path></svg>Set PDF File<input type=file accept=application/pdf class=hidden></label></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Settings</h3></div><div class="border-t border-gray-100 pt-1 space-y-1 mx-2"><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-red-600 hover:bg-red-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-red-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>Clear all data</button><div class=mt-10>'),Pw=T('<div class="text-center py-2 px-2"><div class="w-8 h-8 bg-gray-100 rounded-lg mx-auto mb-2 flex items-center justify-center"><svg class="w-4 h-4 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-xs text-gray-500 font-medium">No projects yet'),Rw=T('<div class="text-center py-2 px-2"><div class="w-8 h-8 bg-gray-100 rounded-lg mx-auto mb-2 flex items-center justify-center"><svg class="w-4 h-4 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-xs text-gray-500 font-medium">No checklists yet'),Nw=T('<div style=flex:1><button class="flex-1 flex items-center gap-2 px-2 py-1.5 text-left focus:outline-none"tabindex=0><svg class="w-4 h-4 text-gray-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><div class="flex-1 min-w-0"><div class="flex gap-2 items-center"><div class="text-xs font-medium truncate"></div><span></span></div><div class="text-2xs text-gray-500 mt-0.5"></div></div></button><button aria-label="Delete checklist"tabindex=-1><svg class="w-4 h-4"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),Ow=T('<span class="inline-block w-2 h-2 rounded-full"style=background:currentColor>');function Tw(e){const{projects:t,checklists:n,getChecklist:r}=zt(),[i,s]=j(null),a=Et(),o=Kr();xe(()=>{if(o.name&&o.index!==void 0){const f=decodeURIComponent(o.name),u=Number(o.index);s(r({name:f,index:u}))}});function l(){const f=window.prompt("Enter PDF URL:");f&&e.setPdfUrl(f)}function c(f){const u=f.target.files[0];if(u&&u.type==="application/pdf"){const d=URL.createObjectURL(u);e.setPdfUrl(d)}else alert("Please select a valid PDF file.")}return(()=>{var f=Cw(),u=f.firstChild,d=u.firstChild,p=d.firstChild,_=p.nextSibling,x=_.nextSibling,A=x.nextSibling,O=A.nextSibling,m=O.nextSibling,v=m.firstChild,y=v.nextSibling,k=y.firstChild,C=k.nextSibling,$=C.nextSibling,h=y.nextSibling,g=h.nextSibling,w=g.firstChild,b=w.nextSibling,S=b.nextSibling,P=m.nextSibling,M=P.nextSibling,F=M.firstChild;return N(_,E(me,{get when(){return t()?.length>0},get fallback(){return Pw()},get children(){return E(bt,{get each(){return t()},children:U=>E(Ew,{get projectId(){return U.id},onSelect:()=>{a(`/projects/${tt(U.name)}-${U.id}`)},children:(q,Q)=>E(Na,{project:U,get isSelected(){return i()?.id===q.id},checklist:q,onDelete:()=>e.onDeleteChecklist(U.id,Q.id,q.id)})})})}})),N(A,E(me,{get when(){return n()?.length>0},get fallback(){return Rw()},get children(){var U=Aw();return N(U,E(bt,{get each(){return n()},children:q=>E(Na,{project:null,checklist:q,onDelete:()=>e.onDeleteChecklist(null,q.id)})})),U}})),Je(v,"click",e.onExportCSV,!0),Je($,"change",e.onImportCSV),h.$$click=l,S.addEventListener("change",c),Je(F,"click",e.onDeleteAll,!0),G(U=>{var q=`
        transition-all duration-200 ease-in-out
        bg-white border-r border-gray-200 h-screen overflow-x-hidden
        ${e.open?"w-64":"w-0"}
        md:relative
        ${e.open?"":"md:w-0"}
        fixed top-0 left-0 z-30 md:static md:z-auto
        ${e.open?"translate-x-0":"-translate-x-full md:translate-x-0"}
      `,Q=`
          flex flex-col h-full
          transition-opacity duration-100
          ${e.open?"duration-500 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}
        `;return q!==U.e&&Ce(f,U.e=q),Q!==U.t&&Ce(u,U.t=Q),U},{e:void 0,t:void 0}),f})()}function Na(e){const t=Et();function n(){const r=tt(e.checklist.name);if(!e.project){t(`/checklist/${r}-${e.checklist.id}`);return}const i=tt(e.project.name),s=(e.project.reviews||[]).find(o=>(o.checklists||[]).some(l=>l.id===e.checklist.id));if(!s){console.error("Review not found for checklist",e.checklist);return}const a=tt(s.name);t(`/projects/${i}-${e.project.id}/reviews/${a}-${s.id}/checklists/${r}-${e.checklist.id}`)}return(()=>{var r=Nw(),i=r.firstChild,s=i.firstChild,a=s.nextSibling,o=a.firstChild,l=o.firstChild,c=l.nextSibling,f=o.nextSibling,u=i.nextSibling;return i.$$click=()=>n(),N(l,()=>e.checklist.name),N(c,()=>{if(!e.checklist)return"Unknown";const d=Ks(e.checklist);return d.length+(e.checklist.name?.length||0)<30?d:Ow()}),N(f,()=>new Date(e.checklist.createdAt).toLocaleDateString()),u.$$click=d=>{d.stopPropagation(),e.onDelete(null,e.checklist.id)},G(d=>{var p=`
            flex items-center group rounded transition-colors
            ${e.isSelected?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}
          `,_=`
                    text-3xs font-medium px-1.5 py-0.5 rounded
                    ${(()=>{const A=Ks(e.checklist);return A==="High"?"bg-green-100 text-green-800":A==="Moderate"?"bg-yellow-100 text-yellow-800":A==="Low"?"bg-orange-100 text-orange-800":A==="Critically Low"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"})()}
                  `,x=`p-1.5 mr-1 rounded transition-colors text-gray-400 hover:text-red-600 hover:bg-red-50
                  ${e.isSelected?"opacity-0 group-hover:opacity-100":""}
                `;return p!==d.e&&Ce(r,d.e=p),_!==d.t&&Ce(c,d.t=_),x!==d.a&&Ce(u,d.a=x),d},{e:void 0,t:void 0,a:void 0}),r})()}Me(["click"]);var Mw=T('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"><div class="bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 mx-2 animate-fade-in"><div class=mb-4><h2 class="text-lg font-semibold text-gray-900"></h2></div><div class="flex justify-end gap-2 mt-6"><button class="px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"autofocus>Cancel</button><button class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors">'),Iw=T('<p class="mt-2 text-gray-600">');function Oa(e){return E(me,{get when(){return e.open},get children(){return E(bc,{get children(){var t=Mw(),n=t.firstChild,r=n.firstChild,i=r.firstChild,s=r.nextSibling,a=s.firstChild,o=a.nextSibling;return N(i,()=>e.title||"Are you sure?"),N(r,(()=>{var l=xt(()=>!!e.description);return()=>l()&&(()=>{var c=Iw();return N(c,()=>e.description),c})()})(),null),Je(a,"click",e.onCancel,!0),Je(o,"click",e.onConfirm,!0),N(o,()=>e.confirmText||"Delete"),t}})}})}Me(["click"]);var Lw=T('<div><div class="w-full h-full overflow-auto"></div><div role=separator tabindex=0 style=touch-action:none>');function qw(e){const t=e.direction||"horizontal",n=t==="horizontal"?"right":"bottom",r=e.position||n,i=e.min??200,s=e.max??800,a=e.initial??400,[o,l]=j(a);let c=!1,f=0,u=0,d=null;const p=O=>{c=!0,d=O.pointerId,f=t==="horizontal"?O.clientX:O.clientY,u=o(),document.body.style.userSelect="none",O.target.setPointerCapture(d),window.addEventListener("pointermove",_),window.addEventListener("pointerup",x)},_=O=>{if(!c)return;let m=t==="horizontal"?O.clientX-f:O.clientY-f;(r==="left"||r==="top")&&(m=-m);let v=u+m;v=Math.max(i,Math.min(s,v)),l(v)},x=O=>{if(c=!1,document.body.style.userSelect="",O.target.releasePointerCapture&&d!==null)try{O.target.releasePointerCapture(d)}catch{}window.removeEventListener("pointermove",_),window.removeEventListener("pointerup",x),d=null};let A="";return t==="horizontal"?A=r==="right"?"top-0 right-0 h-full w-2 cursor-col-resize":"top-0 left-0 h-full w-2 cursor-col-resize":A=r==="bottom"?"left-0 bottom-0 w-full h-2 cursor-row-resize":"left-0 top-0 w-full h-2 cursor-row-resize",(()=>{var O=Lw(),m=O.firstChild,v=m.nextSibling;return Ce(O,`relative ${t==="horizontal"?"h-full":"w-full"}`),N(m,()=>e.children),v.$$pointerdown=p,Ce(v,`absolute ${A} bg-gray-200 hover:bg-gray-300 transition-colors z-10`),ke(v,"aria-orientation",t),G(y=>Qr(O,t==="horizontal"?`width: ${o()}px; min-width:0;`:`height: ${o()}px; min-height:0;`,y)),O})()}Me(["pointerdown"]);var Dw=T('<button class="ml-[-6px] bg-white/80 text-blue-700 p-1.5 rounded-full shadow hover:bg-white transition-all duration-200 border border-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-400"aria-label="Toggle sidebar open or closed">'),Ta=T("<span class=font-medium>Hello, "),Ma=T('<button class="hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium">Sign Out'),jw=T('<nav class="flex items-center justify-between bg-gradient-to-r from-blue-700 to-blue-500 text-white px-4 py-2 shadow-lg"><div class="flex items-center space-x-3"></div><div class="flex space-x-4 items-center text-2xs sm:text-xs">'),Fw=T('<svg fill=none stroke=currentColor class="w-4 h-4"viewBox="0 0 20 20"><path d="M3.5 3C3.77614 3 4 3.22386 4 3.5V16.5L3.99023 16.6006C3.94371 16.8286 3.74171 17 3.5 17C3.25829 17 3.05629 16.8286 3.00977 16.6006L3 16.5V3.5C3 3.22386 3.22386 3 3.5 3ZM11.2471 5.06836C11.4476 4.95058 11.7104 4.98547 11.8721 5.16504C12.0338 5.34471 12.0407 5.60979 11.9023 5.79688L11.835 5.87207L7.80371 9.5H16.5C16.7761 9.5 17 9.72386 17 10C17 10.2761 16.7761 10.5 16.5 10.5H7.80371L11.835 14.1279C12.0402 14.3127 12.0568 14.6297 11.8721 14.835C11.6873 15.0402 11.3703 15.0568 11.165 14.8721L6.16504 10.3721L6.09473 10.2939C6.03333 10.2093 6 10.1063 6 10C6 9.85828 6.05972 9.72275 6.16504 9.62793L11.165 5.12793L11.2471 5.06836Z">');function Ia(e){return e.endsWith("/")?e.slice(0,-1):e}function Uw(e){const{user:t,signout:n,authLoading:r}=Xn(),i=Gi(),s=()=>Ia(i.pathname)===Ia(Ul),a=localStorage.getItem("userName"),o=!!a;return xe(()=>{t()?localStorage.setItem("userName",t().name):localStorage.removeItem("userName")}),(()=>{var l=jw(),c=l.firstChild,f=c.nextSibling;return N(c,E(me,{get when(){return!s()},get children(){var u=Dw();return Je(u,"click",e.toggleSidebar,!0),N(u,E(me,{get when(){return!e.open},get fallback(){return Fw()},get children(){return E(Hm,{})}})),u}}),null),N(c,E(Jt,{href:"/",class:"font-extrabold text-base sm:text-lg tracking-tight drop-shadow",children:"CoRATES"}),null),N(f,E(Jt,{href:"/dashboard",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Dashboard"}),null),N(f,E(me,{get when(){return t()},get fallback(){return xt(()=>!!(o&&r()))()?[(()=>{var u=Ta();return u.firstChild,N(u,a,null),u})(),Ma()]:[E(Jt,{href:"/signin",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Sign In"}),E(Jt,{href:"/signup",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Sign Up"})]},get children(){return[(()=>{var u=Ta();return u.firstChild,N(u,()=>t().name,null),u})(),(()=>{var u=Ma();return u.$$click=async()=>{await n()},u})()]}}),null),l})()}Me(["click"]);var Bw=T('<div class="flex-1 min-h-0 overflow-y-auto">'),Vw=T('<div class="sm:hidden fixed inset-0 bg-black/50 z-20 transition-opacity duration-300">'),Hw=T('<div class="h-full border-l border-gray-200 bg-white flex flex-col"><iframe class="w-full h-full"title="PDF Viewer"style=min-width:300px>'),zw=T('<div class="flex flex-col h-screen overflow-y-hidden"><div class="flex flex-1 min-h-0">');function Yw(e){const[t,n]=j(!1),[r,i]=j(!1),[s,a]=j(!1),[o,l]=j(null),[c,f]=j(null),[u,d]=j(null),{authLoading:p}=Xn(),{dataLoading:_,deleteChecklist:x,setCurrentChecklist:A,getChecklist:O}=zt(),m=async()=>{try{A(null),alert("All checklists deleted!")}catch(h){console.error("Error removing all checklists:",h),alert("Error deleting checklists!")}finally{i(!1)}},v=()=>{let h="this checklist";const g=o();let w=O(g.checklistId);return w&&(h=w.name||w.title||"Untitled Checklist"),`Are you sure you want to delete ${h}? This action cannot be undone.`},y=()=>i(!1),k=(h,g)=>{console.log("Request to delete checklist id:",g,"from project:",h),l({projectId:h,checklistId:g}),a(!0)},C=async()=>{const h=o();if(!(!h||!h.checklistId))try{console.log("Deleting checklist id:",h.checklistId,"from project:",h.projectId),await x(h.projectId,h.checklistId)}catch(g){console.error("Error deleting checklist:",g),alert("Error deleting checklist!")}finally{a(!1),l(null)}},$=()=>{a(!1),l(null)};return(()=>{var h=zw(),g=h.firstChild;return N(h,E(Uw,{toggleSidebar:()=>n(w=>!w),get open(){return t()}}),g),N(g,E(Tw,{get open(){return t()},onClose:()=>n(!1),setPdfUrl:f,onDeleteChecklist:k}),null),N(g,E(Lt,{class:"flex flex-1",get when(){return xt(()=>!_())()&&!p()},get children(){var w=Bw();return N(w,()=>e.children),w}}),null),N(g,E(me,{get when(){return t()},get children(){var w=Vw();return w.$$click=()=>n(!1),w}}),null),N(g,E(me,{get when(){return c()},get children(){return E(qw,{direction:"horizontal",min:250,max:1600,initial:500,position:"left",get children(){var w=Hw(),b=w.firstChild;return G(()=>ke(b,"src",c())),w}})}}),null),N(h,E(Oa,{get open(){return s()},title:"Delete checklist?",get description(){return v()},confirmText:"Delete",onCancel:$,onConfirm:C}),null),N(h,E(Oa,{get open(){return r()},title:"Delete all checklists?",description:"Are you sure you want to delete all saved checklists? This action cannot be undone.",confirmText:"Delete all",onCancel:y,onConfirm:m}),null),h})()}Me(["click"]);var Ww=T("<h1>404 - Not Found");function Qw(){return Ww()}var Kw=T("<h1>You are offline, you must be online to access this page.");function Gw(){return Kw()}var Xw=T('<div class="max-w-5xl mx-auto p-6"><h2 class="text-xl font-bold mb-4">Merge AMSTAR2 Checklists</h2><div class="grid grid-cols-3 gap-4 font-mono text-xs"><div class="font-bold text-center">Checklist A</div><div class="font-bold text-center">Checklist B</div><div class="font-bold text-center">Merged Result</div></div><button class="mt-6 px-4 py-2 bg-blue-600 text-white rounded">Save Merged Checklist'),La=T('<button class="mt-1 text-blue-600 underline">Use this'),Jw=T('<div class=contents><div><pre></pre></div><div><pre></pre></div><div class="p-2 border bg-green-50"><pre>');function Zw(e){const t=Kr(),{getChecklist:n}=zt();console.log("Route params:",decodeURIComponent(t.nameA),t.indexA,decodeURIComponent(t.nameB),t.indexB);const r=n(decodeURIComponent(t.nameA),t.indexA),i=n(decodeURIComponent(t.nameB),t.indexB);console.log("Merging checklists:",r,i);const[s,a]=j({...r}),o=["q1","q2","q3","q4","q5","q6","q7","q8","q9a","q9b","q10","q11a","q11b","q12","q13","q14","q15","q16"];function l(u){const d=r[u]?.answers,p=i[u]?.answers;return JSON.stringify(d)!==JSON.stringify(p)}function c(u,d){a(p=>({...p,[d]:u==="A"?{...r[d]}:{...i[d]}}))}function f(){alert("not implemented")}return(()=>{var u=Xw(),d=u.firstChild,p=d.nextSibling,_=p.firstChild,x=_.nextSibling;x.nextSibling;var A=p.nextSibling;return N(p,E(bt,{each:o,children:O=>(()=>{var m=Jw(),v=m.firstChild,y=v.firstChild,k=v.nextSibling,C=k.firstChild,$=k.nextSibling,h=$.firstChild;return N(y,()=>JSON.stringify(r[O]?.answers,null,1)),N(v,E(me,{get when(){return l(O)},get children(){var g=La();return g.$$click=()=>c("A",O),g}}),null),N(C,()=>JSON.stringify(i[O]?.answers,null,1)),N(k,E(me,{get when(){return l(O)},get children(){var g=La();return g.$$click=()=>c("B",O),g}}),null),N(h,()=>JSON.stringify(s()[O]?.answers,null,1)),G(g=>{var w=`p-2 border ${l(O)?"bg-yellow-100":""}`,b=`p-2 border ${l(O)?"bg-yellow-100":""}`;return w!==g.e&&Ce(v,g.e=w),b!==g.t&&Ce(k,g.t=b),g},{e:void 0,t:void 0}),m})()}),null),A.$$click=f,u})()}Me(["click"]);var ev=T("<div>Database access requires an authenticated user."),tv=T("<pre>");function nv(){const{authFetch:e,user:t}=Xn();if(!t())return ev();const{data:n}=xf({url:rt.ELECTRIC_SHAPE,params:{table:"users"},fetchClient:e});return(()=>{var r=tv();return N(r,()=>JSON.stringify(n(),null,2)),r})()}const Ul="/amstar2-checklist-scoring-app";function tt(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function rv(){return E(Gc,{base:Ul,get children(){return E(qe,{path:"/",component:Yw,get children(){return[E(qe,{path:"/",component:au}),E(qe,{path:"/dashboard",component:j0}),E(qe,{path:"/electric",component:nv}),E(qe,{path:"/projects/:projectSlug",component:O0}),E(qe,{path:"/projects/:projectSlug/reviews/:reviewSlug/checklists/:checklistSlug",component:Gs}),E(qe,{path:"/checklist/:checklistSlug",component:Gs}),E(qe,{path:"/merge/:checklistSlugA/:checklistSlugB",component:Zw}),E(qe,{path:"/signin",component:()=>E(cr,{get children(){return E(Gm,{})}})}),E(qe,{path:"/signup",component:()=>E(cr,{get children(){return E(xw,{})}})}),E(qe,{path:"/verify-email",component:()=>E(cr,{get children(){return E(VerifyEmail,{})}})}),E(qe,{path:"/reset-password",component:()=>E(cr,{get children(){return E(kw,{})}})}),E(qe,{path:"*",component:Qw})]}})}})}function cr(e){const t=Vo();return E(me,{get when(){return t()},get fallback(){return E(Gw,{})},get children(){return e.children}})}function iv(){return E(Nf,{get children(){return E(Rf,{get children(){return E(rv,{})}})}})}fc(()=>E(iv,{}),document.getElementById("root"));
