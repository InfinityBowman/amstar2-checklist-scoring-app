(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Yh=!1,Jh=(e,t)=>e===t,Bt=Symbol("solid-proxy"),Wu=typeof Proxy=="function",ha=Symbol("solid-track"),Ni={equals:Jh};let Yu=Xu;const Mn=1,Oi=2,Ju={owned:null,cleanups:null,context:null,owner:null};var Te=null;let Ho=null,Qh=null,Ue=null,ft=null,hn=null,bo=0;function sr(e,t){const n=Ue,r=Te,s=e.length===0,i=t===void 0?r:t,o=s?Ju:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=s?e:()=>e(()=>kt(()=>bs(o)));Te=o,Ue=null;try{return Ln(a,!0)}finally{Ue=n,Te=r}}function Q(e,t){t=t?Object.assign({},Ni,t):Ni;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=s=>(typeof s=="function"&&(s=s(n.value)),Gu(n,s));return[Ku.bind(n),r]}function pe(e,t,n){const r=tl(e,t,!1,Mn);Fs(r)}function Ie(e,t,n){Yu=Zh;const r=tl(e,t,!1,Mn);(!n||!n.render)&&(r.user=!0),hn?hn.push(r):Fs(r)}function Fe(e,t,n){n=n?Object.assign({},Ni,n):Ni;const r=tl(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Fs(r),Ku.bind(r)}function Di(e){return Ln(e,!1)}function kt(e){if(Ue===null)return e();const t=Ue;Ue=null;try{return e()}finally{Ue=t}}function Qa(e,t,n){const r=Array.isArray(e);let s,i=n&&n.defer;return o=>{let a;if(r){a=Array(e.length);for(let c=0;c<e.length;c++)a[c]=e[c]()}else a=e();if(i)return i=!1,o;const l=kt(()=>t(a,s,o));return s=a,l}}function Ka(e){Ie(()=>kt(e))}function yt(e){return Te===null||(Te.cleanups===null?Te.cleanups=[e]:Te.cleanups.push(e)),e}function ga(){return Ue}function Ga(){return Te}function Xa(e,t){const n=Te,r=Ue;Te=e,Ue=null;try{return Ln(t,!0)}catch(s){nl(s)}finally{Te=n,Ue=r}}function Kh(e){const t=Ue,n=Te;return Promise.resolve().then(()=>{Ue=t,Te=n;let r;return Ln(e,!1),Ue=Te=null,r?r.done:void 0})}const[e$,t$]=Q(!1);function Qu(e,t){const n=Symbol("context");return{id:n,Provider:tg(n),defaultValue:e}}function Za(e){let t;return Te&&Te.context&&(t=Te.context[e.id])!==void 0?t:e.defaultValue}function el(e){const t=Fe(e),n=Fe(()=>pa(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Ku(){if(this.sources&&this.state)if(this.state===Mn)Fs(this);else{const e=ft;ft=null,Ln(()=>Fi(this),!1),ft=e}if(Ue){const e=this.observers?this.observers.length:0;Ue.sources?(Ue.sources.push(this),Ue.sourceSlots.push(e)):(Ue.sources=[this],Ue.sourceSlots=[e]),this.observers?(this.observers.push(Ue),this.observerSlots.push(Ue.sources.length-1)):(this.observers=[Ue],this.observerSlots=[Ue.sources.length-1])}return this.value}function Gu(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Ln(()=>{for(let s=0;s<e.observers.length;s+=1){const i=e.observers[s],o=Ho&&Ho.running;o&&Ho.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?ft.push(i):hn.push(i),i.observers&&Zu(i)),o||(i.state=Mn)}if(ft.length>1e6)throw ft=[],new Error},!1)),t}function Fs(e){if(!e.fn)return;bs(e);const t=bo;Gh(e,e.value,t)}function Gh(e,t,n){let r;const s=Te,i=Ue;Ue=Te=e;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=Mn,e.owned&&e.owned.forEach(bs),e.owned=null),e.updatedAt=n+1,nl(o)}finally{Ue=i,Te=s}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Gu(e,r):e.value=r,e.updatedAt=n)}function tl(e,t,n,r=Mn,s){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Te,context:Te?Te.context:null,pure:n};return Te===null||Te!==Ju&&(Te.owned?Te.owned.push(i):Te.owned=[i]),i}function qi(e){if(e.state===0)return;if(e.state===Oi)return Fi(e);if(e.suspense&&kt(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<bo);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Mn)Fs(e);else if(e.state===Oi){const r=ft;ft=null,Ln(()=>Fi(e,t[0]),!1),ft=r}}function Ln(e,t){if(ft)return e();let n=!1;t||(ft=[]),hn?n=!0:hn=[],bo++;try{const r=e();return Xh(n),r}catch(r){n||(hn=null),ft=null,nl(r)}}function Xh(e){if(ft&&(Xu(ft),ft=null),e)return;const t=hn;hn=null,t.length&&Ln(()=>Yu(t),!1)}function Xu(e){for(let t=0;t<e.length;t++)qi(e[t])}function Zh(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:qi(r)}for(t=0;t<n;t++)qi(e[t])}function Fi(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const s=r.state;s===Mn?r!==t&&(!r.updatedAt||r.updatedAt<bo)&&qi(r):s===Oi&&Fi(r,t)}}}function Zu(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Oi,n.pure?ft.push(n):hn.push(n),n.observers&&Zu(n))}}function bs(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),o=n.observerSlots.pop();r<s.length&&(i.sourceSlots[o]=r,s[r]=i,n.observerSlots[r]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)bs(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)bs(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function eg(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function nl(e,t=Te){throw eg(e)}function pa(e){if(typeof e=="function"&&!e.length)return pa(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=pa(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function tg(e,t){return function(r){let s;return pe(()=>s=kt(()=>(Te.context={...Te.context,[e]:r.value},el(()=>r.children))),void 0),s}}const ng=Symbol("fallback");function Sc(e){for(let t=0;t<e.length;t++)e[t]()}function rg(e,t,n={}){let r=[],s=[],i=[],o=0,a=t.length>1?[]:null;return yt(()=>Sc(i)),()=>{let l=e()||[],c=l.length,u,d;return l[ha],kt(()=>{let m,w,v,y,A,_,E,j,U;if(c===0)o!==0&&(Sc(i),i=[],r=[],s=[],o=0,a&&(a=[])),n.fallback&&(r=[ng],s[0]=sr(F=>(i[0]=F,n.fallback())),o=1);else if(o===0){for(s=new Array(c),d=0;d<c;d++)r[d]=l[d],s[d]=sr(f);o=c}else{for(v=new Array(c),y=new Array(c),a&&(A=new Array(c)),_=0,E=Math.min(o,c);_<E&&r[_]===l[_];_++);for(E=o-1,j=c-1;E>=_&&j>=_&&r[E]===l[j];E--,j--)v[j]=s[E],y[j]=i[E],a&&(A[j]=a[E]);for(m=new Map,w=new Array(j+1),d=j;d>=_;d--)U=l[d],u=m.get(U),w[d]=u===void 0?-1:u,m.set(U,d);for(u=_;u<=E;u++)U=r[u],d=m.get(U),d!==void 0&&d!==-1?(v[d]=s[u],y[d]=i[u],a&&(A[d]=a[u]),d=w[d],m.set(U,d)):i[u]();for(d=_;d<c;d++)d in v?(s[d]=v[d],i[d]=y[d],a&&(a[d]=A[d],a[d](d))):s[d]=sr(f);s=s.slice(0,o=c),r=l.slice(0)}return s});function f(m){if(i[d]=m,a){const[w,v]=Q(d);return a[d]=v,t(l[d],w)}return t(l[d])}}}function k(e,t){return kt(()=>e(t||{}))}function si(){return!0}const ma={get(e,t,n){return t===Bt?n:e.get(t)},has(e,t){return t===Bt?!0:e.has(t)},set:si,deleteProperty:si,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:si,deleteProperty:si}},ownKeys(e){return e.keys()}};function Bo(e){return(e=typeof e=="function"?e():e)?e:{}}function sg(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Ae(...e){let t=!1;for(let o=0;o<e.length;o++){const a=e[o];t=t||!!a&&Bt in a,e[o]=typeof a=="function"?(t=!0,Fe(a)):a}if(Wu&&t)return new Proxy({get(o){for(let a=e.length-1;a>=0;a--){const l=Bo(e[a])[o];if(l!==void 0)return l}},has(o){for(let a=e.length-1;a>=0;a--)if(o in Bo(e[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<e.length;a++)o.push(...Object.keys(Bo(e[a])));return[...new Set(o)]}},ma);const n={},r=Object.create(null);for(let o=e.length-1;o>=0;o--){const a=e[o];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const d=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=d.get?{enumerable:!0,configurable:!0,get:sg.bind(n[u]=[d.get.bind(a)])}:d.value!==void 0?d:void 0;else{const f=n[u];f&&(d.get?f.push(d.get.bind(a)):d.value!==void 0&&f.push(()=>d.value))}}}const s={},i=Object.keys(r);for(let o=i.length-1;o>=0;o--){const a=i[o],l=r[a];l&&l.get?Object.defineProperty(s,a,l):s[a]=l?l.value:void 0}return s}function ed(e,...t){const n=t.length;if(Wu&&Bt in e){const s=n>1?t.flat():t[0],i=t.map(o=>new Proxy({get(a){return o.includes(a)?e[a]:void 0},has(a){return o.includes(a)&&a in e},keys(){return o.filter(a=>a in e)}},ma));return i.push(new Proxy({get(o){return s.includes(o)?void 0:e[o]},has(o){return s.includes(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!s.includes(o))}},ma)),i}const r=[];for(let s=0;s<=n;s++)r[s]={};for(const s of Object.getOwnPropertyNames(e)){let i=n;for(let l=0;l<t.length;l++)if(t[l].includes(s)){i=l;break}const o=Object.getOwnPropertyDescriptor(e,s);!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable?r[i][s]=o.value:Object.defineProperty(r[i],s,o)}return r}let ig=0;function td(){return`cl-${ig++}`}const og=e=>`Stale read from <${e}>.`;function Ee(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Fe(rg(()=>e.each,e.children,t||void 0))}function _e(e){const t=e.keyed,n=Fe(()=>e.when,void 0,void 0),r=t?n:Fe(n,void 0,{equals:(s,i)=>!s==!i});return Fe(()=>{const s=r();if(s){const i=e.children;return typeof i=="function"&&i.length>0?kt(()=>i(t?s:()=>{if(!kt(r))throw og("Show");return n()})):i}return e.fallback},void 0,void 0)}const ag=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],lg=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...ag]),cg=new Set(["innerHTML","textContent","innerText","children"]),ug=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),dg=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function fg(e,t){const n=dg[e];return typeof n=="object"?n[t]?n.$:void 0:n}const hg=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),gg={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},et=e=>Fe(()=>e());function pg(e,t,n){let r=n.length,s=t.length,i=r,o=0,a=0,l=t[s-1].nextSibling,c=null;for(;o<s||a<i;){if(t[o]===n[a]){o++,a++;continue}for(;t[s-1]===n[i-1];)s--,i--;if(s===o){const u=i<r?a?n[a-1].nextSibling:n[i-a]:l;for(;a<i;)e.insertBefore(n[a++],u)}else if(i===a)for(;o<s;)(!c||!c.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[i-1]&&n[a]===t[s-1]){const u=t[--s].nextSibling;e.insertBefore(n[a++],t[o++].nextSibling),e.insertBefore(n[--i],u),t[s]=n[i]}else{if(!c){c=new Map;let d=a;for(;d<i;)c.set(n[d],d++)}const u=c.get(t[o]);if(u!=null)if(a<u&&u<i){let d=o,f=1,m;for(;++d<s&&d<i&&!((m=c.get(t[d]))==null||m!==u+f);)f++;if(f>u-a){const w=t[o];for(;a<u;)e.insertBefore(n[a++],w)}else e.replaceChild(n[a++],t[o++])}else o++;else t[o++].remove()}}}const Cc="_$DX_DELEGATE";function mg(e,t,n,r={}){let s;return sr(i=>{s=i,t===document?e():b(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{s(),t.textContent=""}}function I(e,t,n,r){let s;const i=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},o=()=>(s||(s=i())).cloneNode(!0);return o.cloneNode=o,o}function tt(e,t=window.document){const n=t[Cc]||(t[Cc]=new Set);for(let r=0,s=e.length;r<s;r++){const i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,_g))}}function $t(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function wg(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function vg(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function ht(e,t){t==null?e.removeAttribute("class"):e.className=t}function An(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const s=n[0];e.addEventListener(t,n[0]=i=>s.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function yg(e,t,n={}){const r=Object.keys(t||{}),s=Object.keys(n);let i,o;for(i=0,o=s.length;i<o;i++){const a=s[i];!a||a==="undefined"||t[a]||(Ec(e,a,!1),delete n[a])}for(i=0,o=r.length;i<o;i++){const a=r[i],l=!!t[a];!a||a==="undefined"||n[a]===l||!l||(Ec(e,a,!0),n[a]=l)}return n}function xo(e,t,n){if(!t)return n?$t(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let s,i;for(i in n)t[i]==null&&r.removeProperty(i),delete n[i];for(i in t)s=t[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function Vi(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function vt(e,t={},n,r){const s={};return r||pe(()=>s.children=_s(e,t.children,s.children)),pe(()=>typeof t.ref=="function"&&xs(t.ref,e)),pe(()=>bg(e,t,n,!0,s,!0)),s}function xs(e,t,n){return kt(()=>e(t,n))}function b(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return _s(e,t,r,n);pe(s=>_s(e,t(),s,n),r)}function bg(e,t,n,r,s={},i=!1){t||(t={});for(const o in s)if(!(o in t)){if(o==="children")continue;s[o]=Ac(e,o,null,s[o],n,i,t)}for(const o in t){if(o==="children")continue;const a=t[o];s[o]=Ac(e,o,a,s[o],n,i,t)}}function xg(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Ec(e,t,n){const r=t.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)e.classList.toggle(r[s],n)}function Ac(e,t,n,r,s,i,o){let a,l,c,u,d;if(t==="style")return xo(e,n,r);if(t==="classList")return yg(e,n,r);if(n===r)return r;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const f=t.slice(3);r&&e.removeEventListener(f,r,typeof r!="function"&&r),n&&e.addEventListener(f,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const f=t.slice(10);r&&e.removeEventListener(f,r,!0),n&&e.addEventListener(f,n,!0)}else if(t.slice(0,2)==="on"){const f=t.slice(2).toLowerCase(),m=hg.has(f);if(!m&&r){const w=Array.isArray(r)?r[0]:r;e.removeEventListener(f,w)}(m||n)&&(An(e,f,n,m),m&&tt([f]))}else if(t.slice(0,5)==="attr:")$t(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")vg(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(c=cg.has(t))||!s&&((u=fg(t,e.tagName))||(l=lg.has(t)))||(a=e.nodeName.includes("-")||"is"in o))d&&(t=t.slice(5),l=!0),t==="class"||t==="className"?ht(e,n):a&&!l&&!c?e[xg(t)]=n:e[u||t]=n;else{const f=s&&t.indexOf(":")>-1&&gg[t.split(":")[0]];f?wg(e,f,t,n):$t(e,ug[t]||t,n)}return n}function _g(e){let t=e.target;const n=`$$${e.type}`,r=e.target,s=e.currentTarget,i=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),o=()=>{const l=t[n];if(l&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},a=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();i(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!o());c++){if(t._$host){t=t._$host,a();break}if(t.parentNode===s)break}}else a();i(r)}function _s(e,t,n,r,s){for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,o=r!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(t=t.toString(),t===n))return n;if(o){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=wr(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean")n=wr(e,n,r);else{if(i==="function")return pe(()=>{let a=t();for(;typeof a=="function";)a=a();n=_s(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],l=n&&Array.isArray(n);if(wa(a,t,n,s))return pe(()=>n=_s(e,a,n,r,!0)),()=>n;if(a.length===0){if(n=wr(e,n,r),o)return n}else l?n.length===0?Rc(e,a,r):pg(e,n,a):(n&&wr(e),Rc(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=wr(e,n,r,t);wr(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function wa(e,t,n,r){let s=!1;for(let i=0,o=t.length;i<o;i++){let a=t[i],l=n&&n[e.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))s=wa(e,a,l)||s;else if(c==="function")if(r){for(;typeof a=="function";)a=a();s=wa(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||s}else e.push(a),s=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?e.push(l):e.push(document.createTextNode(u))}}return s}function Rc(e,t,n=null){for(let r=0,s=t.length;r<s;r++)e.insertBefore(t[r],n)}function wr(e,t,n,r){if(n===void 0)return e.textContent="";const s=r||document.createTextNode("");if(t.length){let i=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(s!==a){const l=a.parentNode===e;!i&&!o?l?e.replaceChild(s,a):e.insertBefore(s,n):l&&a.remove()}else i=!0}}else e.insertBefore(s,n);return[s]}const nd=!1,kg="http://www.w3.org/2000/svg";function $g(e,t=!1,n=void 0){return t?document.createElementNS(kg,e):document.createElement(e,{is:n})}function rd(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,s=Ga();let i;return Ie(()=>{i||(i=Xa(s,()=>Fe(()=>e.children)));const o=r();if(o instanceof HTMLHeadElement){const[a,l]=Q(!1),c=()=>l(!0);sr(u=>b(o,()=>a()?u():i(),null)),yt(c)}else{const a=$g(e.isSVG?"g":"div",e.isSVG),l=t&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return n.parentNode},configurable:!0}),b(l,i),o.appendChild(a),e.ref&&e.ref(a),yt(()=>o.removeChild(a))}},void 0,{render:!0}),n}function sd(){let e=new Set;function t(s){return e.add(s),()=>e.delete(s)}let n=!1;function r(s,i){if(n)return!(n=!1);const o={to:s,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of e)a.listener({...o,from:a.location,retry:l=>{l&&(n=!0),a.navigate(s,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:t,confirm:r}}let va;function rl(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),va=window.history.state._depth}rl();function Sg(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Cg(e,t){let n=!1;return()=>{const r=va;rl();const s=r==null?null:va-r;if(n){n=!1;return}s&&t(s)?(n=!0,window.history.go(-s)):e()}}const Eg=/^(?:[a-z0-9]+:)?\/\//i,Ag=/^\/+|(\/)\/+$/g,id="http://sr";function ir(e,t=!1){const n=e.replace(Ag,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Si(e,t,n){if(Eg.test(t))return;const r=ir(e),s=n&&ir(n);let i="";return!s||t.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+ir(t,!i)}function Rg(e,t){if(e==null)throw new Error(t);return e}function Pg(e,t){return ir(e).replace(/\/*(\*.*)?$/g,"")+ir(t)}function od(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Tg(e,t,n){const[r,s]=e.split("/*",2),i=r.split("/").filter(Boolean),o=i.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-o;if(c<0||c>0&&s===void 0&&!t)return null;const u={path:o?"":"/",params:{}},d=f=>n===void 0?void 0:n[f];for(let f=0;f<o;f++){const m=i[f],w=m[0]===":",v=w?l[f]:l[f].toLowerCase(),y=w?m.slice(1):m.toLowerCase();if(w&&zo(v,d(y)))u.params[y]=v;else if(w||!zo(v,y))return null;u.path+=`/${v}`}if(s){const f=c?l.slice(-c).join("/"):"";if(zo(f,d(s)))u.params[s]=f;else return null}return u}}function zo(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function jg(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function ad(e){const t=new Map,n=Ga();return new Proxy({},{get(r,s){return t.has(s)||Xa(n,()=>t.set(s,Fe(()=>e()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,s){return s in e()}})}function Mg(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([s,i])=>{i==null||i===""||i instanceof Array&&!i.length?n.delete(s):i instanceof Array?(n.delete(s),i.forEach(o=>{n.append(s,String(o))})):n.set(s,String(i))});const r=n.toString();return r?`?${r}`:""}function ld(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=t[1]),r=r.slice(t[0].length);return ld(r).reduce((i,o)=>[...i,...s.map(a=>a+o)],[])}const Lg=100,cd=Qu(),sl=Qu(),Vs=()=>Rg(Za(cd),"<A> and 'use' router primitives can be only used inside a Route."),Ng=()=>Za(sl)||Vs().base,Og=e=>{const t=Ng();return Fe(()=>t.resolvePath(e()))},Dg=e=>{const t=Vs();return Fe(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},nn=()=>Vs().navigatorFactory(),il=()=>Vs().location,_o=()=>Vs().params,qg=()=>{const e=il(),t=nn(),n=(r,s)=>{const i=kt(()=>Mg(e.search,r)+e.hash);t(i,{scroll:!1,resolve:!1,...s})};return[e.query,n]};function Fg(e,t=""){const{component:n,preload:r,load:s,children:i,info:o}=e,a=!i||Array.isArray(i)&&!i.length,l={key:e,component:n,preload:r||s,info:o};return ud(e.path).reduce((c,u)=>{for(const d of ld(u)){const f=Pg(t,d);let m=a?f:f.split("/*",1)[0];m=m.split("/").map(w=>w.startsWith(":")||w.startsWith("*")?w:encodeURIComponent(w)).join("/"),c.push({...l,originalPath:u,pattern:m,matcher:Tg(m,!a,e.matchFilters)})}return c},[])}function Vg(e,t=0){return{routes:e,score:jg(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let s=e.length-1;s>=0;s--){const i=e[s],o=i.matcher(n);if(!o)return null;r.unshift({...o,route:i})}return r}}}function ud(e){return Array.isArray(e)?e:[e]}function dd(e,t="",n=[],r=[]){const s=ud(e);for(let i=0,o=s.length;i<o;i++){const a=s[i];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Fg(a,t);for(const c of l){n.push(c);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)dd(a.children,c.pattern,n,r);else{const d=Vg([...n],r.length);r.push(d)}n.pop()}}}return n.length?r:r.sort((i,o)=>o.score-i.score)}function Wo(e,t){for(let n=0,r=e.length;n<r;n++){const s=e[n].matcher(t);if(s)return s}return[]}function Ug(e,t,n){const r=new URL(id),s=Fe(u=>{const d=e();try{return new URL(d,r)}catch{return console.error(`Invalid path ${d}`),u}},r,{equals:(u,d)=>u.href===d.href}),i=Fe(()=>s().pathname),o=Fe(()=>s().search,!0),a=Fe(()=>s().hash),l=()=>"",c=Qa(o,()=>od(s()));return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return l()},query:n?n(c):ad(c)}}let Wn;function Ig(){return Wn}function Hg(e,t,n,r={}){const{signal:[s,i],utils:o={}}=e,a=o.parsePath||(O=>O),l=o.renderPath||(O=>O),c=o.beforeLeave||sd(),u=Si("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!s().value&&i({value:u,replace:!0,scroll:!1});const[d,f]=Q(!1);let m;const w=(O,X)=>{X.value===v()&&X.state===A()||(m===void 0&&f(!0),Wn=O,m=X,Kh(()=>{m===X&&(y(m.value),_(m.state),U[1](re=>re.filter(K=>K.pending)))}).finally(()=>{m===X&&Di(()=>{Wn=void 0,O==="navigate"&&N(m),f(!1),m=void 0})}))},[v,y]=Q(s().value),[A,_]=Q(s().state),E=Ug(v,A,o.queryWrapper),j=[],U=Q([]),F=Fe(()=>typeof r.transformUrl=="function"?Wo(t(),r.transformUrl(E.pathname)):Wo(t(),E.pathname)),P=()=>{const O=F(),X={};for(let re=0;re<O.length;re++)Object.assign(X,O[re].params);return X},g=o.paramsWrapper?o.paramsWrapper(P,t):ad(P),p={pattern:u,path:()=>u,outlet:()=>null,resolvePath(O){return Si(u,O)}};return pe(Qa(s,O=>w("native",O),{defer:!0})),{base:p,location:E,params:g,isRouting:d,renderPath:l,parsePath:a,navigatorFactory:C,matches:F,beforeLeave:c,preloadRoute:D,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:U};function x(O,X,re){kt(()=>{if(typeof X=="number"){X&&(o.go?o.go(X):console.warn("Router integration does not support relative routing"));return}const K=!X||X[0]==="?",{replace:H,resolve:M,scroll:te,state:z}={replace:!1,resolve:!K,scroll:!0,...re},B=M?O.resolvePath(X):Si(K&&E.pathname||"",X);if(B===void 0)throw new Error(`Path '${X}' is not a routable path`);if(j.length>=Lg)throw new Error("Too many redirects");const V=v();(B!==V||z!==A())&&(nd||c.confirm(B,re)&&(j.push({value:V,replace:H,scroll:te,state:A()}),w("navigate",{value:B,state:z})))})}function C(O){return O=O||Za(sl)||p,(X,re)=>x(O,X,re)}function N(O){const X=j[0];X&&(i({...O,replace:X.replace,scroll:X.scroll}),j.length=0)}function D(O,X){const re=Wo(t(),O.pathname),K=Wn;Wn="preload";for(let H in re){const{route:M,params:te}=re[H];M.component&&M.component.preload&&M.component.preload();const{preload:z}=M;X&&z&&Xa(n(),()=>z({params:te,location:{pathname:O.pathname,search:O.search,hash:O.hash,query:od(O),state:null,key:""},intent:"preload"}))}Wn=K}}function Bg(e,t,n,r){const{base:s,location:i,params:o}=e,{pattern:a,component:l,preload:c}=r().route,u=Fe(()=>r().path);l&&l.preload&&l.preload();const d=c?c({params:o,location:i,intent:Wn||"initial"}):void 0;return{parent:t,pattern:a,path:u,outlet:()=>l?k(l,{params:o,location:i,data:d,get children(){return n()}}):n(),resolvePath(m){return Si(s.path(),m,u())}}}const zg=e=>t=>{const{base:n}=t,r=el(()=>t.children),s=Fe(()=>dd(r(),t.base||""));let i;const o=Hg(e,s,()=>i,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(o),k(cd.Provider,{value:o,get children(){return k(Wg,{routerState:o,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[et(()=>(i=Ga())&&null),k(Yg,{routerState:o,get branches(){return s()}})]}})}})};function Wg(e){const t=e.routerState.location,n=e.routerState.params,r=Fe(()=>e.preload&&kt(()=>{e.preload({params:n,location:t,intent:Ig()||"initial"})}));return k(_e,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:s=>k(s,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Yg(e){const t=[];let n;const r=Fe(Qa(e.routerState.matches,(s,i,o)=>{let a=i&&s.length===i.length;const l=[];for(let c=0,u=s.length;c<u;c++){const d=i&&i[c],f=s[c];o&&d&&f.route.key===d.route.key?l[c]=o[c]:(a=!1,t[c]&&t[c](),sr(m=>{t[c]=m,l[c]=Bg(e.routerState,l[c-1]||e.routerState.base,Pc(()=>r()[c+1]),()=>{const w=e.routerState.matches();return w[c]??w[0]})}))}return t.splice(s.length).forEach(c=>c()),o&&a?o:(n=l[0],l)}));return Pc(()=>r()&&n)()}const Pc=e=>()=>k(_e,{get when(){return e()},keyed:!0,children:t=>k(sl.Provider,{value:t,get children(){return t.outlet()}})}),Et=e=>{const t=el(()=>e.children);return Ae(e,{get children(){return t()}})};function Jg([e,t],n,r){return[e,r?s=>t(r(s)):t]}function Qg(e){let t=!1;const n=s=>typeof s=="string"?{value:s}:s,r=Jg(Q(n(e.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!t&&e.set(s),s));return e.init&&yt(e.init((s=e.get())=>{t=!0,r[1](n(s)),t=!1})),zg({signal:r,create:e.create,utils:e.utils})}function Kg(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Gg(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const Xg=new Map;function Zg(e=!0,t=!1,n="/_server",r){return s=>{const i=s.base.path(),o=s.navigatorFactory(s.base);let a,l;function c(v){return v.namespaceURI==="http://www.w3.org/2000/svg"}function u(v){if(v.defaultPrevented||v.button!==0||v.metaKey||v.altKey||v.ctrlKey||v.shiftKey)return;const y=v.composedPath().find(F=>F instanceof Node&&F.nodeName.toUpperCase()==="A");if(!y||t&&!y.hasAttribute("link"))return;const A=c(y),_=A?y.href.baseVal:y.href;if((A?y.target.baseVal:y.target)||!_&&!y.hasAttribute("state"))return;const j=(y.getAttribute("rel")||"").split(/\s+/);if(y.hasAttribute("download")||j&&j.includes("external"))return;const U=A?new URL(_,document.baseURI):new URL(_);if(!(U.origin!==window.location.origin||i&&U.pathname&&!U.pathname.toLowerCase().startsWith(i.toLowerCase())))return[y,U]}function d(v){const y=u(v);if(!y)return;const[A,_]=y,E=s.parsePath(_.pathname+_.search+_.hash),j=A.getAttribute("state");v.preventDefault(),o(E,{resolve:!1,replace:A.hasAttribute("replace"),scroll:!A.hasAttribute("noscroll"),state:j?JSON.parse(j):void 0})}function f(v){const y=u(v);if(!y)return;const[A,_]=y;r&&(_.pathname=r(_.pathname)),s.preloadRoute(_,A.getAttribute("preload")!=="false")}function m(v){clearTimeout(a);const y=u(v);if(!y)return l=null;const[A,_]=y;l!==A&&(r&&(_.pathname=r(_.pathname)),a=setTimeout(()=>{s.preloadRoute(_,A.getAttribute("preload")!=="false"),l=A},20))}function w(v){if(v.defaultPrevented)return;let y=v.submitter&&v.submitter.hasAttribute("formaction")?v.submitter.getAttribute("formaction"):v.target.getAttribute("action");if(!y)return;if(!y.startsWith("https://action/")){const _=new URL(y,id);if(y=s.parsePath(_.pathname+_.search),!y.startsWith(n))return}if(v.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const A=Xg.get(y);if(A){v.preventDefault();const _=new FormData(v.target,v.submitter);A.call({r:s,f:v.target},v.target.enctype==="multipart/form-data"?_:new URLSearchParams(_))}}tt(["click","submit"]),document.addEventListener("click",d),e&&(document.addEventListener("mousemove",m,{passive:!0}),document.addEventListener("focusin",f,{passive:!0}),document.addEventListener("touchstart",f,{passive:!0})),document.addEventListener("submit",w),yt(()=>{document.removeEventListener("click",d),e&&(document.removeEventListener("mousemove",m),document.removeEventListener("focusin",f),document.removeEventListener("touchstart",f)),document.removeEventListener("submit",w)})}}function e0(e){const t=()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,s=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:s}},n=sd();return Qg({get:t,set({value:r,replace:s,scroll:i,state:o}){s?window.history.replaceState(Sg(o),"",r):window.history.pushState(o,"",r),Gg(decodeURIComponent(window.location.hash.slice(1)),i),rl()},init:r=>Kg(window,"popstate",Cg(r,s=>{if(s)return!n.confirm(s);{const i=t();return!n.confirm(i.value,{state:i.state})}})),create:Zg(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(e)}var t0=I("<a>");function Sr(e){e=Ae({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=ed(e,["href","state","class","activeClass","inactiveClass","end"]),n=Og(()=>e.href),r=Dg(n),s=il(),i=Fe(()=>{const o=n();if(o===void 0)return[!1,!1];const a=ir(o.split(/[?#]/,1)[0]).toLowerCase(),l=decodeURI(ir(s.pathname).toLowerCase());return[e.end?a===l:l.startsWith(a+"/")||l===a,a===l]});return(()=>{var o=t0();return vt(o,Ae(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!i()[0],[e.activeClass]:i()[0],...t.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),o})()}const ya=Symbol("store-raw"),Rr=Symbol("store-node"),dn=Symbol("store-has"),fd=Symbol("store-self");function hd(e){let t=e[Bt];if(!t&&(Object.defineProperty(e,Bt,{value:t=new Proxy(e,s0)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,i=n.length;s<i;s++){const o=n[s];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function Ui(e){let t;return e!=null&&typeof e=="object"&&(e[Bt]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ks(e,t=new Set){let n,r,s,i;if(n=e!=null&&e[ya])return n;if(!Ui(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,a=e.length;o<a;o++)s=e[o],(r=ks(s,t))!==s&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let l=0,c=o.length;l<c;l++)i=o[l],!a[i].get&&(s=e[i],(r=ks(s,t))!==s&&(e[i]=r))}return e}function Ii(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function $s(e,t,n){if(e[t])return e[t];const[r,s]=Q(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function n0(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Bt||t===Rr||(delete n.value,delete n.writable,n.get=()=>e[Bt][t]),n}function gd(e){ga()&&$s(Ii(e,Rr),fd)()}function r0(e){return gd(e),Reflect.ownKeys(e)}const s0={get(e,t,n){if(t===ya)return e;if(t===Bt)return n;if(t===ha)return gd(e),n;const r=Ii(e,Rr),s=r[t];let i=s?s():e[t];if(t===Rr||t===dn||t==="__proto__")return i;if(!s){const o=Object.getOwnPropertyDescriptor(e,t);ga()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(i=$s(r,t,i)())}return Ui(i)?hd(i):i},has(e,t){return t===ya||t===Bt||t===ha||t===Rr||t===dn||t==="__proto__"?!0:(ga()&&$s(Ii(e,dn),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:r0,getOwnPropertyDescriptor:n0};function Hi(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],i=e.length;n===void 0?(delete e[t],e[dn]&&e[dn][t]&&s!==void 0&&e[dn][t].$()):(e[t]=n,e[dn]&&e[dn][t]&&s===void 0&&e[dn][t].$());let o=Ii(e,Rr),a;if((a=$s(o,t,s))&&a.$(()=>n),Array.isArray(e)&&e.length!==i){for(let l=e.length;l<i;l++)(a=o[l])&&a.$();(a=$s(o,"length",i))&&a.$(e.length)}(a=o[fd])&&a.$()}function pd(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];Hi(e,s,t[s])}}function i0(e,t){if(typeof t=="function"&&(t=t(e)),t=ks(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&Hi(e,n,s)}Hi(e,"length",r)}else pd(e,t)}function es(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const o=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)es(e,[r[l]].concat(t),n);return}else if(a&&o==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&es(e,[l].concat(t),n);return}else if(a&&o==="object"){const{from:l=0,to:c=e.length-1,by:u=1}=r;for(let d=l;d<=c;d+=u)es(e,[d].concat(t),n);return}else if(t.length>1){es(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let i=t[0];typeof i=="function"&&(i=i(s,n),i===s)||r===void 0&&i==null||(i=ks(i),r===void 0||Ui(s)&&Ui(i)&&!Array.isArray(i)?pd(s,i):Hi(e,r,i))}function md(...[e,t]){const n=ks(e||{}),r=Array.isArray(n),s=hd(n);function i(...o){Di(()=>{r&&o.length===1?i0(n,o[0]):es(n,o)})}return[s,i]}var o0=I('<svg class="w-5 h-5 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6">'),a0=I('<svg class="w-5 h-5 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">'),l0=I('<main class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50"><div class="flex flex-col items-center justify-center min-h-screen px-4"><div class="max-w-4xl w-full text-center"><div class=mb-8><div class="mx-auto w-20 h-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg"><svg class="w-10 h-10 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h1 class="text-6xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">CoRATES</h1><p class="text-xl md:text-2xl text-gray-600 mb-4 font-medium">Collaborative Research Appraisal Tool for Evidence Synthesis</p><p class="text-lg text-gray-500 mb-12 max-w-2xl mx-auto leading-relaxed">Streamline your systematic review process with our interactive AMSTAR 2 checklist tool. Create, score, and visualize research appraisals with confidence.</p><div class="flex flex-col sm:flex-row gap-4 justify-center mb-16"></div></div></div><div class="py-20 px-4 bg-white/50 backdrop-blur-sm"><div class="max-w-6xl mx-auto"><h2 class="text-3xl md:text-4xl font-bold text-center mb-16 text-gray-800">Why Choose CoRATES?</h2><div class="grid md:grid-cols-3 gap-8"><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-blue-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Works Offline</h3><p class="text-gray-600 leading-relaxed">Complete your assessments anywhere, anytime. No internet connection required once loaded.</p></div><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-green-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Auto-Save</h3><p class="text-gray-600 leading-relaxed">Never lose your progress. Your work is automatically saved as you go.</p></div><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-purple-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Visual Results</h3><p class="text-gray-600 leading-relaxed">Generate clear, professional charts and summaries of your AMSTAR 2 assessments.</p></div></div></div></div><div class="py-20 px-4"><div class="max-w-4xl mx-auto text-center"><h2 class="text-3xl md:text-4xl font-bold mb-8 text-gray-800">About AMSTAR 2</h2><p class="text-lg text-gray-600 leading-relaxed mb-8">AMSTAR 2 (A MeaSurement Tool to Assess systematic Reviews) is a critical appraisal tool for systematic reviews that include randomized or non-randomized studies of healthcare interventions.</p><div class="bg-blue-50 rounded-2xl p-8 border border-blue-100"><p class="text-blue-800 font-medium">Our tool makes it easy to apply the 16 AMSTAR 2 criteria to evaluate the methodological quality of systematic reviews, helping researchers make informed decisions about evidence quality.</p></div></div></div><footer class="py-12 px-4 bg-gray-50 border-t border-gray-200"><div class="max-w-4xl mx-auto text-center"><div class="flex flex-col sm:flex-row items-center justify-center gap-6 text-sm text-gray-500"><a href=https://github.com/InfinityBowman/amstar2-checklist-scoring-app target=_blank rel=noopener class="flex items-center gap-2 hover:text-blue-600 transition-colors duration-200"><svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>View on GitHub</a><span class=text-gray-300>•</span><span>Built for researchers, by researchers</span><span class=text-gray-300>•</span><span>Free & Open Source');function c0(){return(()=>{var e=l0(),t=e.firstChild,n=t.firstChild,r=n.firstChild,s=r.nextSibling,i=s.nextSibling,o=i.nextSibling,a=o.nextSibling;return b(a,k(Sr,{href:"/checklist/new",class:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",get children(){return[o0(),"Start New Checklist"]}}),null),b(a,k(Sr,{href:"/dashboard",class:"inline-flex items-center px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-blue-300 hover:text-blue-600 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",get children(){return[a0(),"View Saved Work"]}}),null),e})()}const gt={q1:{text:"1. Did the research questions and inclusion criteria for the review include the components of PICO?",columns:[{label:"For Yes:",options:["Population","Intervention","Comparator group","Outcome"]},{label:"Optional (recommended):",options:["Timeframe for follow-up"]},{label:"",options:["Yes","No"]}]},q2:{text:"2. Did the report of the review contain an explicit statement that the review methods were established prior to the conduct of the review and did the report justify any significant deviations from the protocol?",columns:[{label:"For Partial Yes:",description:"The authors state that they had a written protocol or guide that included ALL the following:",options:["review question(s)","a search strategy","inclusion/exclusion criteria","risk of bias assessment"]},{label:"For Yes:",description:"As for Partial Yes, plus the protocol should be registered and should also have specified:",options:["a meta-analysis/synthesis plan, if appropriate, and","a plan for investigating causes of heterogeneity","a plan for investigating causes of heterogeneity"]},{label:"",description:"",options:["Yes","Partial Yes","No"]}]},q3:{text:"3. Did the review authors explain their selection of the study designs for inclusion in the review?",columns:[{label:"For Yes, the review should satisfy ONE of the following:",options:["Explanation for including only RCTs ","OR Explanation for including only NRSI","OR Explanation for including both RCTs and NRSI"]},{label:"",options:["Yes","No"]}]},q4:{text:"4. Did the review authors use a comprehensive literature search strategy? ",columns:[{label:"For Partial Yes (all the following):",options:["searched at least 2 databases (relevant to research question)","provided key word and/or search strategy","justified publication restrictions (e.g. language)"]},{label:"For Yes, should also have (all the following):",options:["searched the reference lists / bibliographies of included studies","searched trial/study registries","included/consulted content experts in the field","where relevant, searched for grey literature","conducted search within 24 months of completion of the review"]},{label:"",options:["Yes","Partial Yes","No"]}]},q5:{text:"5. Did the review authors perform study selection in duplicate?",columns:[{label:"For Yes, either ONE of the following:",options:["at least two reviewers achieved consensus on which data to extract from included studies","OR two reviewers extracted data from a sample of eligible studies and achieved good agreement (at least 80 percent), with the remainder extracted by one reviewer."]},{label:"",options:["Yes","No"]}]},q6:{text:"6. Did the review authors perform data extraction in duplicate?",columns:[{label:"For Yes, either ONE of the following:",options:["at least two reviewers achieved consensus on which data to extract from included studies","OR two reviewers extracted data from a sample of eligible studies and achieved good agreement (at least 80 percent), with the remainder extracted by one reviewer."]},{label:"",options:["Yes","No"]}]},q7:{text:"7. Did the review authors provide a list of excluded studies and justify the exclusions?",columns:[{label:"For Partial Yes:",options:["provided a list of all potentially relevant studies that were read in full-text form but excluded from the review"]},{label:"For Yes, must also have:",options:["Justified the exclusion from the review of each potentially relevant study"]},{label:"",options:["Yes","Partial Yes","No"]}]},q8:{text:"8. Did the review authors describe the included studies in adequate detail?",columns:[{label:"For Partial Yes (ALL the following):",options:["described populations","described interventions","described comparators","described outcomes","described research designs"]},{label:"For Yes, should also have ALL the following:",options:["described population in detail","described comparator in detail (including doses where relevant)","described study’s setting in detail","timeframe for follow-up"]},{label:"",options:["Yes","Partial Yes","No"]}]},q9:{text:"9. Did the review authors use a satisfactory technique for assessing the risk of bias (RoB) in individual studies that were included in the review?",subtitle:"RCTs",columns:[{label:"For Partial Yes, must have assessed RoB from",options:["unconcealed allocation, and","lack of blinding of patients and assessors when assessing outcomes (unnecessary for objective outcomes such as all-cause mortality)"]},{label:"For Yes, must also have assessed RoB from:",options:["allocation sequence that was not truly random, and","selection of the reported result from among multiple measurements or analyses of a specified outcome"]},{label:"",description:"",options:["Yes","Partial Yes","No"," Includes only NRSI"]}],subtitle2:"NRSI",columns2:[{label:"For Partial Yes, must have assessed RoB:",options:["from confounding, and","from selection bias"]},{label:"For Yes, must also have assessed RoB:",options:["methods used to ascertain exposures and outcomes, and","selection of the reported result from among multiple measurements or analyses of a specified outcome"]},{label:"",options:["Yes","Partial Yes","No","Includes only RCTs"]}]},q10:{text:"10. Did the review authors report on the sources of funding for the studies included in the review?",columns:[{label:"For Yes:",options:["Must have reported on the sources of funding for individual studies included in the review. Note: Reporting that the reviewers looked for this information but it was not reported by study authors also qualifies"]},{label:"",options:["Yes","No"]}]},q11:{text:"11. If meta-analysis was performed did the review authors use appropriate methods for statistical combination of results?",subtitle:"RCTs",columns:[{label:"For Yes:",options:["The authors justified combining the data in a meta-analysis","AND they used an appropriate weighted technique to combine study results and adjusted for heterogeneity if present.","AND investigated the causes of any heterogeneity"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}],subtitle2:"NRSI",columns2:[{label:"For Yes:",options:["The authors justified combining the data in a meta-analysis","AND they used an appropriate weighted technique to combine study results, adjusting for heterogeneity if present","AND they statistically combined effect estimates from NRSI that were adjusted for confounding, rather than combining raw data, or justified combining raw data when adjusted effect estimates were not available","AND they reported separate summary estimates for RCTs and NRSI separately when both were included in the review"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q12:{text:"12. If meta-analysis was performed, did the review authors assess the potential impact of RoB in individual studies on the results of the meta-analysis or other evidence synthesis?",columns:[{label:"For Yes:",options:["included only low risk of bias RCTs","OR, if the pooled estimate was based on RCTs and/or NRSI at variable RoB, the authors performed analyses to investigate possible impact of RoB on summary estimates of effect."]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q13:{text:"13. Did the review authors account for RoB in individual studies when interpreting/ discussing the results of the review?",columns:[{label:"For Yes:",options:["included only low risk of bias RCTs","OR, if RCTs with moderate or high RoB, or NRSI were included the review provided a discussion of the likely impact of RoB on the results"]},{label:"",options:["Yes","No"]}]},q14:{text:"14. Did the review authors provide a satisfactory explanation for, and discussion of, any heterogeneity observed in the results of the review?",columns:[{label:"For Yes:",options:["There was no significant heterogeneity in the results","OR if heterogeneity was present the authors performed an investigation of sources of any heterogeneity in the results and discussed the impact of this on the results of the review"]},{label:"",options:["Yes","No"]}]},q15:{text:"15. If they performed quantitative synthesis did the review authors carry out an adequate investigation of publication bias (small study bias) and discuss its likely impact on the results of the review?",columns:[{label:"For Yes:",options:["performed graphical or statistical tests for publication bias and discussed the likelihood and magnitude of impact of publication bias"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q16:{text:"16. Did the review authors report any potential sources of conflict of interest, including any funding they received for conducting the review?",options:["Yes","Partial Yes","No"],columns:[{label:"For Yes:",options:["The authors reported no competing interests OR","The authors described their funding sources and how they managed potential conflicts of interest"]},{label:"",options:["Yes","No"]}]}},u0="modulepreload",d0=function(e){return"/amstar2-checklist-scoring-app/"+e},Tc={},jc=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=l(n.map(c=>{if(c=d0(c),c in Tc)return;Tc[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":u0,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,w)=>{f.addEventListener("load",m),f.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},f0="corates-app-db",Tn="checklists",tn="projects",h0=1,wd=new BroadcastChannel("corates-sync");function ko(){wd.postMessage("initiate-sync")}function g0(e){wd.onmessage=t=>{t.data==="initiate-sync"&&e()}}function Mr(e){return JSON.parse(JSON.stringify(e))}function hr(){return new Promise((e,t)=>{const n=indexedDB.open(f0,h0);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Tn)||r.createObjectStore(Tn,{keyPath:"id"}),r.objectStoreNames.contains(tn)||r.createObjectStore(tn,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})}async function vd(e){const t=await hr();return e=Mr(e),new Promise((n,r)=>{const s=t.transaction(Tn,"readwrite");s.objectStore(Tn).put(e),s.oncomplete=()=>{n(),ko()},s.onerror=()=>r(s.error)})}async function yd(){const e=await hr();return new Promise((t,n)=>{const i=e.transaction(Tn,"readonly").objectStore(Tn).getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)})}async function p0(e){const t=await hr();return new Promise((n,r)=>{const s=t.transaction(Tn,"readwrite");s.objectStore(Tn).delete(e),s.oncomplete=()=>{n(),ko()},s.onerror=()=>r(s.error)})}async function Hr(e){const t=await hr();return e=Mr(e),new Promise((n,r)=>{const s=t.transaction(tn,"readwrite");s.objectStore(tn).put(e),s.oncomplete=()=>{n(),ko()},s.onerror=()=>r(s.error)})}async function $o(e){const t=await hr();return new Promise((n,r)=>{const i=t.transaction(tn,"readonly").objectStore(tn).get(e);i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async function bd(){const e=await hr();return new Promise((t,n)=>{const i=e.transaction(tn,"readonly").objectStore(tn).getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)})}async function xd(e,t,n){try{const r=await $o(e);if(!r)throw new Error(`Project with ID ${e} not found`);r.reviews||(r.reviews=[]);const s=r.reviews.findIndex(a=>a.id===t);if(s===-1)throw new Error(`Review with ID ${t} not found in project ${e}`);const i=r.reviews[s];i.checklists||(i.checklists=[]);const o=i.checklists.findIndex(a=>a.id===n.id);return o>=0?i.checklists[o]=Mr(n):i.checklists.push(Mr(n)),await Hr(r),r}catch(r){throw console.error("Error saving checklist to review:",r),r}}async function m0(e,t,n){try{const r=await $o(e);if(!r)throw new Error(`Project with ID ${e} not found`);r.reviews||(r.reviews=[]);const s=r.reviews.findIndex(a=>a.id===t);if(s===-1)throw new Error(`Review with ID ${t} not found in project ${e}`);const i=r.reviews[s];i.checklists||(i.checklists=[]);const o=i.checklists.length;return i.checklists=i.checklists.filter(a=>a.id!==n),i.checklists.length===o?!1:(await Hr(r),!0)}catch(r){throw console.error("Error deleting checklist from review:",r),r}}async function _d(e,t){try{const n=await $o(e);if(!n)throw new Error(`Project with ID ${e} not found`);n.reviews||(n.reviews=[]);const r=n.reviews.findIndex(s=>s.id===t.id);return r>=0?n.reviews[r]=Mr(t):n.reviews.push(Mr(t)),await Hr(n),n}catch(n){console.error("Error saving review to project:",n)}}async function w0(e,t){try{const n=await $o(e);if(!n)throw new Error(`Project with ID ${e} not found`);n.reviews||(n.reviews=[]);const r=n.reviews.length;return n.reviews=n.reviews.filter(s=>s.id!==t),n.reviews.length===r?!1:(await Hr(n),!0)}catch(n){throw console.error("Error deleting review from project:",n),n}}async function v0(e){const t=await hr();return new Promise((n,r)=>{const s=t.transaction(tn,"readwrite");s.objectStore(tn).delete(e),s.oncomplete=()=>{n(),ko()},s.onerror=()=>r(s.error)})}async function Ci(){const[e,t]=await Promise.all([bd(),yd()]),n=new Set;for(const s of e){n.add(s.id);for(const i of s.reviews||[]){n.add(i.id);for(const o of i.checklists||[])n.add(o.id)}}for(const s of t)n.add(s.id);let r;do r=crypto.randomUUID().split("-")[0];while(n.has(r));return r}const[je,ze]=md({projects:[],currentProject:null,currentChecklist:null,dataLoading:!0,checklists:[]});async function y0(){try{await ba(),g0(ba)}catch(e){console.error("Error loading data:",e)}finally{ze("dataLoading",!1)}}y0();async function ba(){try{ze("loading",!0);const e=await bd()||[];e.sort((n,r)=>(n.createdAt||0)-(r.createdAt||0)),ze("projects",e);const t=await yd()||[];ze("checklists",t)}catch(e){throw console.error("Error loading IndexedDB data:",e),e}finally{ze("loading",!1)}}async function b0(e){try{return await Hr(e),ze("projects",t=>[...t,e]),e}catch(t){throw console.error("Error adding project:",t),t}}async function x0(e){try{return await v0(e),ze("projects",t=>t.filter(n=>n.id!==e)),je.currentProject?.id===e&&(ze("currentProject",null),ze("currentChecklist",null)),!0}catch(t){throw console.error("Error deleting project:",t),t}}function _0(e){ze("projects",e)}function k0(e){let t=null;if(typeof e=="object"&&e!==null){if("project"in e&&e.project)t={...e.project};else if("id"in e)t=je.projects.find(n=>n.id===e.id);else if("name"in e){const n=je.projects.filter(r=>r.name===e.name);t=n[e.index??0]?{...n[e.index??0]}:null}}else typeof e=="string"&&(t=je.projects.find(n=>n.id===e),t||(t=je.projects.find(n=>n.name===e)),t=t?{...t}:null);ze("currentProject",t)}function $0(e){if(e==null)return ze("currentChecklist",null),!1;const t=kd(e);return ze("currentChecklist",t||null),!!t}async function S0(e,t,n){if(!e||!t)try{return await vd(n),ze("checklists",r=>[...r,n]),n}catch(r){throw console.error("Error adding checklist without project/review:",r),r}try{const r=await xd(e,t,n),s=je.projects.findIndex(i=>i.id===e);if(s!==-1){const i=(je.projects[s].reviews||[]).findIndex(o=>o.id===t);i!==-1&&ze("projects",s,"reviews",i,r.reviews[i])}return n}catch(r){throw console.error("Error adding checklist:",r),r}}async function C0(e){const t=So(e.id);if(!t)throw console.warn("Could not find checklist to update:",e.id),new Error(`Could not find checklist to update: ${e.id}`);try{const{projectIndex:n,reviewIndex:r,checklistIndex:s,review:i,project:o}=t;if(n>=0)await xd(o.id,i.id,e),ze("projects",n,"reviews",r,"checklists",s,{...e});else{const a=je.checklists.findIndex(l=>l.id===e.id);if(a>=0)await vd(e),ze("checklists",a,{...e});else throw console.warn("Could not find checklist:",e.id),new Error(`Could not find checklist: ${e.id}`)}return je.currentChecklist?.id===e.id&&ze("currentChecklist",{...e}),e}catch(n){throw console.error("Error updating checklist:",n),n}}async function E0(e,t,n){if(!e||!t)try{return await p0(n),ze("checklists",r=>r.filter(s=>s.id!==n)),je.currentChecklist?.id===n&&ze("currentChecklist",null),!0}catch(r){return console.error("Error deleting checklist without project/review:",r),!1}try{await m0(e,t,n);const r=je.projects.findIndex(s=>s.id===e);if(r!==-1){const s=(je.projects[r].reviews||[]).findIndex(i=>i.id===t);s!==-1&&ze("projects",r,"reviews",s,"checklists",i=>i.filter(o=>o.id!==n))}return je.currentChecklist?.id===n&&ze("currentChecklist",null),!0}catch(r){return console.error("Error deleting checklist:",r),!1}}function kd(e){let t=So(e);return t?.checklist?{...t.checklist}:null}function A0(e,t){let n=So(e);if(n&&typeof n.checklistIndex=="number")return n.checklistIndex;let r=-1;return e?r=je.checklists.findIndex(s=>s.id===e):t&&(r=je.checklists.findIndex(s=>s.name===t)),r}function So(e){if(typeof e=="object"&&e!==null){if("checklist"in e&&e.checklist)return So({id:e.checklist.id});if("id"in e)for(let t=0;t<je.projects.length;t++){const n=je.projects[t];for(let r=0;r<(n.reviews||[]).length;r++){const s=n.reviews[r],i=(s.checklists||[]).findIndex(o=>o.id===e.id);if(i!==-1)return{project:n,projectIndex:t,review:s,reviewIndex:r,checklist:s.checklists[i],checklistIndex:i}}}else if("name"in e){let t=[];for(let n=0;n<je.projects.length;n++){const r=je.projects[n];for(let s=0;s<(r.reviews||[]).length;s++){const i=r.reviews[s];(i.checklists||[]).forEach((o,a)=>{o.name===e.name&&t.push({project:r,projectIndex:n,review:i,reviewIndex:s,checklist:o,checklistIndex:a})})}}return t[e.index??0]||null}}else if(typeof e=="string"){for(let n=0;n<je.projects.length;n++){const r=je.projects[n];for(let s=0;s<(r.reviews||[]).length;s++){const i=r.reviews[s],o=(i.checklists||[]).findIndex(a=>a.id===e);if(o!==-1)return{project:r,projectIndex:n,review:i,reviewIndex:s,checklist:i.checklists[o],checklistIndex:o}}}let t=[];for(let n=0;n<je.projects.length;n++){const r=je.projects[n];for(let s=0;s<(r.reviews||[]).length;s++){const i=r.reviews[s];(i.checklists||[]).forEach((o,a)=>{o.name===e&&t.push({project:r,projectIndex:n,review:i,reviewIndex:s,checklist:o,checklistIndex:a})})}}return t[0]||null}return null}async function R0(e,t){try{const n=je.projects.findIndex(s=>s.id===e);if(n===-1)throw new Error("Project not found");const r=await _d(e,t);return ze("projects",n,r),t}catch(n){throw console.error("Error adding review:",n),n}}async function P0(e,t){try{const n=je.projects.findIndex(s=>s.id===e);if(n===-1)throw new Error("Project not found");const r=await _d(e,t);return ze("projects",n,r),t}catch(n){throw console.error("Error updating review:",n),n}}async function T0(e,t){try{const n=je.projects.findIndex(s=>s.id===e);if(n===-1)throw new Error("Project not found");if(!await w0(e,t))throw new Error("Review not found or could not be deleted");return ze("projects",n,s=>({...s,reviews:(s.reviews||[]).filter(i=>i.id!==t)})),!0}catch(n){throw console.error("Error deleting review:",n),n}}function Br(){return{projects:()=>je.projects,currentProject:()=>je.currentProject,currentChecklist:()=>je.currentChecklist,dataLoading:()=>je.dataLoading,checklists:()=>je.checklists,loadData:ba,setProjects:_0,addProject:b0,deleteProject:x0,setCurrentProject:k0,setCurrentChecklist:$0,addChecklist:S0,updateChecklist:C0,deleteChecklist:E0,getChecklist:kd,getChecklistIndex:A0,addReview:R0,updateReview:P0,deleteReview:T0,searchUsers:async(e,t=10)=>{const{searchUsers:n}=await jc(async()=>{const{searchUsers:r}=await import("./AppStore.api-DxbeyeXD.js");return{searchUsers:r}},[]);return n(e,t)},addUserToProjectByEmail:async(e,t)=>{const{addUserToProjectByEmail:n}=await jc(async()=>{const{addUserToProjectByEmail:r}=await import("./AppStore.api-DxbeyeXD.js");return{addUserToProjectByEmail:r}},[]);return n(e,t)}}}var Ei={exports:{}};var j0=Ei.exports,Mc;function M0(){return Mc||(Mc=1,(function(e,t){((n,r)=>{e.exports=r()})(j0,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,i=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,a={},l=0,c={};function u(g){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(p){var x=U(p);x.chunkSize=parseInt(x.chunkSize),p.step||p.chunk||(x.chunkSize=null),this._handle=new v(x),(this._handle.streamer=this)._config=x}.call(this,g),this.parseChunk=function(p,x){var C=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<C){let D=this._config.newline;D||(N=this._config.quoteChar||'"',D=this._handle.guessLineEndings(p,N)),p=[...p.split(D).slice(C)].join(D)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(N=this._config.beforeFirstChunk(p))!==void 0&&(p=N),this.isFirstChunk=!1,this._halted=!1;var C=this._partialLine+p,N=(this._partialLine="",this._handle.parse(C,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(p=N.meta.cursor,C=(this._finished||(this._partialLine=C.substring(p-this._baseIndex),this._baseIndex=p),N&&N.data&&(this._rowCount+=N.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:N,workerId:c.WORKER_ID,finished:C});else if(P(this._config.chunk)&&!x){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=N=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!C||!P(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),C||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(p){P(this._config.error)?this._config.error(p):o&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:p,finished:!1})}}function d(g){var p;(g=g||{}).chunkSize||(g.chunkSize=c.RemoteChunkSize),u.call(this,g),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(p=new XMLHttpRequest,this._config.withCredentials&&(p.withCredentials=this._config.withCredentials),i||(p.onload=F(this._chunkLoaded,this),p.onerror=F(this._chunkError,this)),p.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var x,C=this._config.downloadRequestHeaders;for(x in C)p.setRequestHeader(x,C[x])}var N;this._config.chunkSize&&(N=this._start+this._config.chunkSize-1,p.setRequestHeader("Range","bytes="+this._start+"-"+N));try{p.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}i&&p.status===0&&this._chunkError()}},this._chunkLoaded=function(){p.readyState===4&&(p.status<200||400<=p.status?this._chunkError():(this._start+=this._config.chunkSize||p.responseText.length,this._finished=!this._config.chunkSize||this._start>=(x=>(x=x.getResponseHeader("Content-Range"))!==null?parseInt(x.substring(x.lastIndexOf("/")+1)):-1)(p),this.parseChunk(p.responseText)))},this._chunkError=function(x){x=p.statusText||x,this._sendError(new Error(x))}}function f(g){(g=g||{}).chunkSize||(g.chunkSize=c.LocalChunkSize),u.call(this,g);var p,x,C=typeof FileReader<"u";this.stream=function(N){this._input=N,x=N.slice||N.webkitSlice||N.mozSlice,C?((p=new FileReader).onload=F(this._chunkLoaded,this),p.onerror=F(this._chunkError,this)):p=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var N=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),N=x.call(N,this._start,D)),p.readAsText(N,this._config.encoding));C||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(N){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(N.target.result)},this._chunkError=function(){this._sendError(p.error)}}function m(g){var p;u.call(this,g=g||{}),this.stream=function(x){return p=x,this._nextChunk()},this._nextChunk=function(){var x,C;if(!this._finished)return x=this._config.chunkSize,p=x?(C=p.substring(0,x),p.substring(x)):(C=p,""),this._finished=!p,this.parseChunk(C)}}function w(g){u.call(this,g=g||{});var p=[],x=!0,C=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(N){this._input=N,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&p.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),p.length?this.parseChunk(p.shift()):x=!0},this._streamData=F(function(N){try{p.push(typeof N=="string"?N:N.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(p.shift()))}catch(D){this._streamError(D)}},this),this._streamError=F(function(N){this._streamCleanUp(),this._sendError(N)},this),this._streamEnd=F(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=F(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(g){var p,x,C,N,D=Math.pow(2,53),O=-D,X=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,re=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,K=this,H=0,M=0,te=!1,z=!1,B=[],V={data:[],errors:[],meta:{}};function oe(ae){return g.skipEmptyLines==="greedy"?ae.join("").trim()==="":ae.length===1&&ae[0].length===0}function ce(){if(V&&C&&(ke("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),C=!1),g.skipEmptyLines&&(V.data=V.data.filter(function(T){return!oe(T)})),ve()){let T=function(W,ie){P(g.transformHeader)&&(W=g.transformHeader(W,ie)),B.push(W)};if(V)if(Array.isArray(V.data[0])){for(var ae=0;ve()&&ae<V.data.length;ae++)V.data[ae].forEach(T);V.data.splice(0,1)}else V.data.forEach(T)}function se(T,W){for(var ie=g.header?{}:[],G=0;G<T.length;G++){var me=G,le=T[G],le=((de,J)=>(fe=>(g.dynamicTypingFunction&&g.dynamicTyping[fe]===void 0&&(g.dynamicTyping[fe]=g.dynamicTypingFunction(fe)),(g.dynamicTyping[fe]||g.dynamicTyping)===!0))(de)?J==="true"||J==="TRUE"||J!=="false"&&J!=="FALSE"&&((fe=>{if(X.test(fe)&&(fe=parseFloat(fe),O<fe&&fe<D))return 1})(J)?parseFloat(J):re.test(J)?new Date(J):J===""?null:J):J)(me=g.header?G>=B.length?"__parsed_extra":B[G]:me,le=g.transform?g.transform(le,me):le);me==="__parsed_extra"?(ie[me]=ie[me]||[],ie[me].push(le)):ie[me]=le}return g.header&&(G>B.length?ke("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+G,M+W):G<B.length&&ke("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+G,M+W)),ie}var R;V&&(g.header||g.dynamicTyping||g.transform)&&(R=1,!V.data.length||Array.isArray(V.data[0])?(V.data=V.data.map(se),R=V.data.length):V.data=se(V.data,0),g.header&&V.meta&&(V.meta.fields=B),M+=R)}function ve(){return g.header&&B.length===0}function ke(ae,se,R,T){ae={type:ae,code:se,message:R},T!==void 0&&(ae.row=T),V.errors.push(ae)}P(g.step)&&(N=g.step,g.step=function(ae){V=ae,ve()?ce():(ce(),V.data.length!==0&&(H+=ae.data.length,g.preview&&H>g.preview?x.abort():(V.data=V.data[0],N(V,K))))}),this.parse=function(ae,se,R){var T=g.quoteChar||'"',T=(g.newline||(g.newline=this.guessLineEndings(ae,T)),C=!1,g.delimiter?P(g.delimiter)&&(g.delimiter=g.delimiter(ae),V.meta.delimiter=g.delimiter):((T=((W,ie,G,me,le)=>{var de,J,fe,rt;le=le||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var lt=0;lt<le.length;lt++){for(var Xe,it=le[lt],We=0,nt=0,He=0,Ye=(fe=void 0,new A({comments:me,delimiter:it,newline:ie,preview:10}).parse(W)),mt=0;mt<Ye.data.length;mt++)G&&oe(Ye.data[mt])?He++:(Xe=Ye.data[mt].length,nt+=Xe,fe===void 0?fe=Xe:0<Xe&&(We+=Math.abs(Xe-fe),fe=Xe));0<Ye.data.length&&(nt/=Ye.data.length-He),(J===void 0||We<=J)&&(rt===void 0||rt<nt)&&1.99<nt&&(J=We,de=it,rt=nt)}return{successful:!!(g.delimiter=de),bestDelimiter:de}})(ae,g.newline,g.skipEmptyLines,g.comments,g.delimitersToGuess)).successful?g.delimiter=T.bestDelimiter:(C=!0,g.delimiter=c.DefaultDelimiter),V.meta.delimiter=g.delimiter),U(g));return g.preview&&g.header&&T.preview++,p=ae,x=new A(T),V=x.parse(p,se,R),ce(),te?{meta:{paused:!0}}:V||{meta:{paused:!1}}},this.paused=function(){return te},this.pause=function(){te=!0,x.abort(),p=P(g.chunk)?"":p.substring(x.getCharIndex())},this.resume=function(){K.streamer._halted?(te=!1,K.streamer.parseChunk(p,!0)):setTimeout(K.resume,3)},this.aborted=function(){return z},this.abort=function(){z=!0,x.abort(),V.meta.aborted=!0,P(g.complete)&&g.complete(V),p=""},this.guessLineEndings=function(W,T){W=W.substring(0,1048576);var T=new RegExp(y(T)+"([^]*?)"+y(T),"gm"),R=(W=W.replace(T,"")).split("\r"),T=W.split(`
`),W=1<T.length&&T[0].length<R[0].length;if(R.length===1||W)return`
`;for(var ie=0,G=0;G<R.length;G++)R[G][0]===`
`&&ie++;return ie>=R.length/2?`\r
`:"\r"}}function y(g){return g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(g){var p=(g=g||{}).delimiter,x=g.newline,C=g.comments,N=g.step,D=g.preview,O=g.fastMode,X=null,re=!1,K=g.quoteChar==null?'"':g.quoteChar,H=K;if(g.escapeChar!==void 0&&(H=g.escapeChar),(typeof p!="string"||-1<c.BAD_DELIMITERS.indexOf(p))&&(p=","),C===p)throw new Error("Comment character same as delimiter");C===!0?C="#":(typeof C!="string"||-1<c.BAD_DELIMITERS.indexOf(C))&&(C=!1),x!==`
`&&x!=="\r"&&x!==`\r
`&&(x=`
`);var M=0,te=!1;this.parse=function(z,B,V){if(typeof z!="string")throw new Error("Input must be a string");var oe=z.length,ce=p.length,ve=x.length,ke=C.length,ae=P(N),se=[],R=[],T=[],W=M=0;if(!z)return We();if(O||O!==!1&&z.indexOf(K)===-1){for(var ie=z.split(x),G=0;G<ie.length;G++){if(T=ie[G],M+=T.length,G!==ie.length-1)M+=x.length;else if(V)return We();if(!C||T.substring(0,ke)!==C){if(ae){if(se=[],rt(T.split(p)),nt(),te)return We()}else rt(T.split(p));if(D&&D<=G)return se=se.slice(0,D),We(!0)}}return We()}for(var me=z.indexOf(p,M),le=z.indexOf(x,M),de=new RegExp(y(H)+y(K),"g"),J=z.indexOf(K,M);;)if(z[M]===K)for(J=M,M++;;){if((J=z.indexOf(K,J+1))===-1)return V||R.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:se.length,index:M}),Xe();if(J===oe-1)return Xe(z.substring(M,J).replace(de,K));if(K===H&&z[J+1]===H)J++;else if(K===H||J===0||z[J-1]!==H){me!==-1&&me<J+1&&(me=z.indexOf(p,J+1));var fe=lt((le=le!==-1&&le<J+1?z.indexOf(x,J+1):le)===-1?me:Math.min(me,le));if(z.substr(J+1+fe,ce)===p){T.push(z.substring(M,J).replace(de,K)),z[M=J+1+fe+ce]!==K&&(J=z.indexOf(K,M)),me=z.indexOf(p,M),le=z.indexOf(x,M);break}if(fe=lt(le),z.substring(J+1+fe,J+1+fe+ve)===x){if(T.push(z.substring(M,J).replace(de,K)),it(J+1+fe+ve),me=z.indexOf(p,M),J=z.indexOf(K,M),ae&&(nt(),te))return We();if(D&&se.length>=D)return We(!0);break}R.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:se.length,index:M}),J++}}else if(C&&T.length===0&&z.substring(M,M+ke)===C){if(le===-1)return We();M=le+ve,le=z.indexOf(x,M),me=z.indexOf(p,M)}else if(me!==-1&&(me<le||le===-1))T.push(z.substring(M,me)),M=me+ce,me=z.indexOf(p,M);else{if(le===-1)break;if(T.push(z.substring(M,le)),it(le+ve),ae&&(nt(),te))return We();if(D&&se.length>=D)return We(!0)}return Xe();function rt(He){se.push(He),W=M}function lt(He){var Ye=0;return Ye=He!==-1&&(He=z.substring(J+1,He))&&He.trim()===""?He.length:Ye}function Xe(He){return V||(He===void 0&&(He=z.substring(M)),T.push(He),M=oe,rt(T),ae&&nt()),We()}function it(He){M=He,rt(T),T=[],le=z.indexOf(x,M)}function We(He){if(g.header&&!B&&se.length&&!re){var Ye=se[0],mt=Object.create(null),mn=new Set(Ye);let wn=!1;for(let Tt=0;Tt<Ye.length;Tt++){let bt=Ye[Tt];if(mt[bt=P(g.transformHeader)?g.transformHeader(bt,Tt):bt]){let Ot,on=mt[bt];for(;Ot=bt+"_"+on,on++,mn.has(Ot););mn.add(Ot),Ye[Tt]=Ot,mt[bt]++,wn=!0,(X=X===null?{}:X)[Ot]=bt}else mt[bt]=1,Ye[Tt]=bt;mn.add(bt)}wn&&console.warn("Duplicate headers found and renamed."),re=!0}return{data:se,errors:R,meta:{delimiter:p,linebreak:x,aborted:te,truncated:!!He,cursor:W+(B||0),renamedHeaders:X}}}function nt(){N(We()),se=[],R=[]}},this.abort=function(){te=!0},this.getCharIndex=function(){return M}}function _(g){var p=g.data,x=a[p.workerId],C=!1;if(p.error)x.userError(p.error,p.file);else if(p.results&&p.results.data){var N={abort:function(){C=!0,E(p.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(P(x.userStep)){for(var D=0;D<p.results.data.length&&(x.userStep({data:p.results.data[D],errors:p.results.errors,meta:p.results.meta},N),!C);D++);delete p.results}else P(x.userChunk)&&(x.userChunk(p.results,N,p.file),delete p.results)}p.finished&&!C&&E(p.workerId,p.results)}function E(g,p){var x=a[g];P(x.userComplete)&&x.userComplete(p),x.terminate(),delete a[g]}function j(){throw new Error("Not implemented.")}function U(g){if(typeof g!="object"||g===null)return g;var p,x=Array.isArray(g)?[]:{};for(p in g)x[p]=U(g[p]);return x}function F(g,p){return function(){g.apply(p,arguments)}}function P(g){return typeof g=="function"}return c.parse=function(g,p){var x=(p=p||{}).dynamicTyping||!1;if(P(x)&&(p.dynamicTypingFunction=x,x={}),p.dynamicTyping=x,p.transform=!!P(p.transform)&&p.transform,!p.worker||!c.WORKERS_SUPPORTED)return x=null,c.NODE_STREAM_INPUT,typeof g=="string"?(g=(C=>C.charCodeAt(0)!==65279?C:C.slice(1))(g),x=new(p.download?d:m)(p)):g.readable===!0&&P(g.read)&&P(g.on)?x=new w(p):(r.File&&g instanceof File||g instanceof Object)&&(x=new f(p)),x.stream(g);(x=(()=>{var C;return!!c.WORKERS_SUPPORTED&&(C=(()=>{var N=r.URL||r.webkitURL||null,D=n.toString();return c.BLOB_URL||(c.BLOB_URL=N.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(C=new r.Worker(C)).onmessage=_,C.id=l++,a[C.id]=C)})()).userStep=p.step,x.userChunk=p.chunk,x.userComplete=p.complete,x.userError=p.error,p.step=P(p.step),p.chunk=P(p.chunk),p.complete=P(p.complete),p.error=P(p.error),delete p.worker,x.postMessage({input:g,config:p,workerId:x.id})},c.unparse=function(g,p){var x=!1,C=!0,N=",",D=`\r
`,O='"',X=O+O,re=!1,K=null,H=!1,M=((()=>{if(typeof p=="object"){if(typeof p.delimiter!="string"||c.BAD_DELIMITERS.filter(function(B){return p.delimiter.indexOf(B)!==-1}).length||(N=p.delimiter),typeof p.quotes!="boolean"&&typeof p.quotes!="function"&&!Array.isArray(p.quotes)||(x=p.quotes),typeof p.skipEmptyLines!="boolean"&&typeof p.skipEmptyLines!="string"||(re=p.skipEmptyLines),typeof p.newline=="string"&&(D=p.newline),typeof p.quoteChar=="string"&&(O=p.quoteChar),typeof p.header=="boolean"&&(C=p.header),Array.isArray(p.columns)){if(p.columns.length===0)throw new Error("Option columns is empty");K=p.columns}p.escapeChar!==void 0&&(X=p.escapeChar+O),p.escapeFormulae instanceof RegExp?H=p.escapeFormulae:typeof p.escapeFormulae=="boolean"&&p.escapeFormulae&&(H=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(O),"g"));if(typeof g=="string"&&(g=JSON.parse(g)),Array.isArray(g)){if(!g.length||Array.isArray(g[0]))return te(null,g,re);if(typeof g[0]=="object")return te(K||Object.keys(g[0]),g,re)}else if(typeof g=="object")return typeof g.data=="string"&&(g.data=JSON.parse(g.data)),Array.isArray(g.data)&&(g.fields||(g.fields=g.meta&&g.meta.fields||K),g.fields||(g.fields=Array.isArray(g.data[0])?g.fields:typeof g.data[0]=="object"?Object.keys(g.data[0]):[]),Array.isArray(g.data[0])||typeof g.data[0]=="object"||(g.data=[g.data])),te(g.fields||[],g.data||[],re);throw new Error("Unable to serialize unrecognized input");function te(B,V,oe){var ce="",ve=(typeof B=="string"&&(B=JSON.parse(B)),typeof V=="string"&&(V=JSON.parse(V)),Array.isArray(B)&&0<B.length),ke=!Array.isArray(V[0]);if(ve&&C){for(var ae=0;ae<B.length;ae++)0<ae&&(ce+=N),ce+=z(B[ae],ae);0<V.length&&(ce+=D)}for(var se=0;se<V.length;se++){var R=(ve?B:V[se]).length,T=!1,W=ve?Object.keys(V[se]).length===0:V[se].length===0;if(oe&&!ve&&(T=oe==="greedy"?V[se].join("").trim()==="":V[se].length===1&&V[se][0].length===0),oe==="greedy"&&ve){for(var ie=[],G=0;G<R;G++){var me=ke?B[G]:G;ie.push(V[se][me])}T=ie.join("").trim()===""}if(!T){for(var le=0;le<R;le++){0<le&&!W&&(ce+=N);var de=ve&&ke?B[le]:le;ce+=z(V[se][de],le)}se<V.length-1&&(!oe||0<R&&!W)&&(ce+=D)}}return ce}function z(B,V){var oe,ce;return B==null?"":B.constructor===Date?JSON.stringify(B).slice(1,25):(ce=!1,H&&typeof B=="string"&&H.test(B)&&(B="'"+B,ce=!0),oe=B.toString().replace(M,X),(ce=ce||x===!0||typeof x=="function"&&x(B,V)||Array.isArray(x)&&x[V]||((ve,ke)=>{for(var ae=0;ae<ke.length;ae++)if(-1<ve.indexOf(ke[ae]))return!0;return!1})(oe,c.BAD_DELIMITERS)||-1<oe.indexOf(N)||oe.charAt(0)===" "||oe.charAt(oe.length-1)===" ")?O+oe+O:oe)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=A,c.ParserHandle=v,c.NetworkStreamer=d,c.FileStreamer=f,c.StringStreamer=m,c.ReadableStreamStreamer=w,r.jQuery&&((s=r.jQuery).fn.parse=function(g){var p=g.config||{},x=[];return this.each(function(D){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var O=0;O<this.files.length;O++)x.push({file:this.files[O],inputElem:this,instanceConfig:s.extend({},p)})}),C(),this;function C(){if(x.length===0)P(g.complete)&&g.complete();else{var D,O,X,re,K=x[0];if(P(g.before)){var H=g.before(K.file,K.inputElem);if(typeof H=="object"){if(H.action==="abort")return D="AbortError",O=K.file,X=K.inputElem,re=H.reason,void(P(g.error)&&g.error({name:D},O,X,re));if(H.action==="skip")return void N();typeof H.config=="object"&&(K.instanceConfig=s.extend(K.instanceConfig,H.config))}else if(H==="skip")return void N()}var M=K.instanceConfig.complete;K.instanceConfig.complete=function(te){P(M)&&M(te,K.file,K.inputElem),N()},c.parse(K.file,K.instanceConfig)}}function N(){x.splice(0,1),C()}}),o&&(r.onmessage=function(g){g=g.data,c.WORKER_ID===void 0&&g&&(c.WORKER_ID=g.workerId),typeof g.input=="string"?r.postMessage({workerId:c.WORKER_ID,results:c.parse(g.input,g.config),finished:!0}):(r.File&&g.input instanceof File||g.input instanceof Object)&&(g=c.parse(g.input,g.config))&&r.postMessage({workerId:c.WORKER_ID,results:g,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(f.prototype=Object.create(u.prototype)).constructor=f,(m.prototype=Object.create(m.prototype)).constructor=m,(w.prototype=Object.create(u.prototype)).constructor=w,c})})(Ei)),Ei.exports}M0();function Ss({name:e=null,id:t=null,createdAt:n=Date.now(),reviewerName:r=""}){if(!t||typeof t!="string"||!t.trim())throw new Error("AMSTAR2Checklist requires a non-empty string id.");if(!e||typeof e!="string"||!e.trim())throw new Error("AMSTAR2Checklist requires a non-empty string name.");let s=new Date(n);isNaN(s)&&(s=Date.now());const i=String(s.getMonth()+1).padStart(2,"0"),o=String(s.getDate()).padStart(2,"0");return n=`${s.getFullYear()}-${i}-${o}`,{name:e,reviewerName:r||"",createdAt:n,id:t,q1:{answers:[[!1,!1,!1,!1],[!1],[!1,!0]],critical:!1},q2:{answers:[[!1,!1,!1,!1],[!1,!1,!1],[!1,!1,!0]],critical:!0},q3:{answers:[[!1,!1,!1],[!1,!0]],critical:!1},q4:{answers:[[!1,!1,!1],[!1,!1,!1,!1,!1],[!1,!1,!0]],critical:!0},q5:{answers:[[!1,!1],[!1,!0]],critical:!1},q6:{answers:[[!1,!1],[!1,!0]],critical:!1},q7:{answers:[[!1],[!1],[!1,!1,!0]],critical:!0},q8:{answers:[[!1,!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!0]],critical:!1},q9a:{answers:[[!1,!1],[!1,!1],[!1,!1,!0,!1]],critical:!0},q9b:{answers:[[!1,!1],[!1,!1],[!1,!1,!0,!1]],critical:!0},q10:{answers:[[!1],[!1,!0]],critical:!1},q11a:{answers:[[!1,!1,!1],[!1,!0,!1]],critical:!0},q11b:{answers:[[!1,!1,!1,!1],[!1,!0,!1]],critical:!0},q12:{answers:[[!1,!1],[!1,!0,!1]],critical:!1},q13:{answers:[[!1,!1],[!1,!0]],critical:!0},q14:{answers:[[!1,!1],[!1,!0]],critical:!1},q15:{answers:[[!1],[!1,!0,!1]],critical:!0},q16:{answers:[[!1,!1],[!1,!0]],critical:!1}}}function Lc(e){if(!e||typeof e!="object")return"Error";let t=0,n=0;return Object.entries(e).forEach(([r,s])=>{if(!/^q\d+[a-z]*$/i.test(r)||!s||!Array.isArray(s.answers))return;const i=$d(s.answers,r);(!i||i==="No")&&(s.critical?t++:n++)}),t>1?"Critically Low":t===1?"Low":n>1?"Moderate":"High"}function $d(e,t){const n=["q11a","q11b","q12","q15"],r=["Yes","No","No MA"],s=["Yes","Partial Yes","No","No MA"];if(!Array.isArray(e)||e.length===0)return null;const i=e[e.length-1];if(!Array.isArray(i))return null;const o=i.findIndex(a=>a===!0);return o===-1?null:n.includes(t)?r[o]||null:i.length===2?o===0?"Yes":"No":i.length>=3&&s[o]||null}function L0(e){if(!e||typeof e!="object")return null;const t={};return Object.entries(e).forEach(([n,r])=>{if(!/^q\d+[a-z]*$/i.test(n)||!r||!Array.isArray(r.answers))return;const s=$d(r.answers,n);t[n]=s}),"q9a"in t&&"q9b"in t&&(t.q9a==="No"||t.q9b==="No"?t.q9="No":t.q9a==="No MA"&&t.q9b==="No MA"?t.q9="No MA":t.q9="Yes"),delete t.q9a,delete t.q9b,"q11a"in t&&"q11b"in t&&(t.q11a==="No"||t.q11b==="No"?t.q11="No":t.q11a==="No MA"&&t.q11b==="No MA"?t.q11="No MA":t.q11="Yes"),delete t.q11a,delete t.q11b,t}const gn=e=>typeof e,at="",Sd=gn(at),N0=gn(!0),ol=gn(0),O0=gn(gn),ii="type",qn="default",xa="Listener",D0="set",Cd="add",q0="del",Fn="Has",Co="Ids",Cr="Table",Nc=Cr+"s",F0=Cr+Co,Bi="Row",V0=Bi+"Count",U0=Bi+Co,Ai="Cell",Oc=Ai+Co,zi="Value",Dc=zi+"s",I0=zi+Co,H0="Transaction",De=e=>at+e,oi=(e,t)=>e.startsWith(t),qc=(e,t)=>e.endsWith(t),B0=(e,t=at,n)=>e.split(t,n),_a=globalThis,al=Math,Fc=al.max,z0=al.floor,Ed=isFinite,W0=(e,t)=>e instanceof t,Ge=e=>e==null,qe=(e,t,n)=>Ge(e)?n?.():t(e),Ad=e=>e==Sd||e==N0,Y0=e=>gn(e)==Sd,Yo=e=>gn(e)==O0,Eo=e=>Array.isArray(e),ka=(e,t,n)=>e.slice(t,n),zt=e=>e.length,J0=(e,t)=>e.test(t),Vc=()=>{},Jo=async(e,t,n)=>{try{return await e()}catch(r){t?.(r)}},Q0=(e,t)=>e.includes(t),K0=(e,t)=>e.every(t),G0=(e,t)=>zt(e)===zt(t)&&K0(e,(n,r)=>t[r]===n),X0=(e,t)=>e.sort(t),Lr=(e,t)=>e.forEach(t),Nr=(e,t)=>e.map(t),Rd=(e,t,n)=>e.reduce(t,n),Wi=(e,...t)=>e.push(...t),Z0=e=>e.shift(),_r=e=>{const t=gn(e);return Ad(t)||t==ol&&Ed(e)?t:void 0},Uc=e=>Ge(e)||!Ge(_r(e)),Ic=(e,t,n,r,s)=>Ge(s)?e.delCell(t,n,r,!0):e.setCell(t,n,r,s),Hc=(e,t,n)=>Ge(n)?e.delValue(t):e.setValue(t,n),ll=e=>t=>Rd(ep(t),(n,r)=>n+e(r),0),cl=e=>e?.size??0,ul=ll(cl),ts=ll(ul),Qo=ll(ts),wt=(e,t)=>e?.has(t)??!1,xe=e=>Ge(e)||cl(e)==0,ep=e=>[...e?.values()??[]],fs=e=>e.clear(),Ce=(e,t)=>e?.forEach(t),Yi=(e,t)=>e?.delete(t),Nn=Object,Bc=e=>Nn.getPrototypeOf(e),tp=Nn.isFrozen,Pd=Nn.entries,Ji=e=>!Ge(e)&&qe(Bc(e),t=>t==Nn.prototype||Ge(Bc(t)),()=>!0),np=Nn.keys,Td=Nn.freeze,bn=(e=[])=>Nn.fromEntries(e),Cn=(e,t)=>t in e,jd=(e,t)=>(delete e[t],e),Yt=(e,t)=>Lr(Pd(e),([n,r])=>t(r,n)),rp=(e,t)=>Nr(Pd(e),([n,r])=>t(r,n)),un=(e,t)=>bn(rp(e,(n,r)=>[r,t(n,r)])),sp=e=>zt(np(e)),Jt=e=>Ji(e)&&sp(e)==0,ln=(e,t,n)=>(Cn(e,t)||(e[t]=n()),e[t]),Mt=(e,t,n,r=0)=>Ge(e)||!Ji(e)||!r&&Jt(e)||tp(e)?(n?.(),!1):(Yt(e,(s,i)=>{t(s,i)||jd(e,i)}),r?!0:!Jt(e)),be=e=>new Map(e),Jr=e=>[...e?.keys()??[]],ne=(e,t)=>e?.get(t),Rt=(e,t)=>Ce(e,(n,r)=>t(r,n)),ip=(e,t)=>Nr([...e?.entries()??[]],([n,r])=>t(r,n)),Ve=(e,t,n)=>Ge(n)?(Yi(e,t),e):e?.set(t,n),Ze=(e,t,n,r)=>(wt(e,t)?r?.(ne(e,t)):Ve(e,t,n()),ne(e,t)),Vn=(e,t,n,r=Ve)=>(un(t,(s,i)=>n(e,i,s)),Rt(e,s=>Cn(t,s)?0:r(e,s)),e),st=(e,t,n,r)=>{const s={};return Ce(e,(i,o)=>{if(!n?.(i,o)){const a=t?t(i,o):i;r?.(a)||(s[o]=a)}}),s},$a=(e,t,n)=>st(e,r=>st(r,t,n),xe,Jt),ai=(e,t,n)=>st(e,r=>$a(r,t,n),xe,Jt),kn=(e,t)=>{const n=be();return Ce(e,(r,s)=>n.set(s,t?.(r)??r)),n},Sa=e=>kn(e,kn),Ko=e=>kn(e,Sa),Ca=(e,t,n,r,s=0)=>qe((n?Ze:ne)(e,t[s],s>zt(t)-2?n:be),i=>{if(s>zt(t)-2)return r?.(i)&&Ve(e,t[s]),i;const o=Ca(i,t,n,r,s+1);return xe(i)&&Ve(e,t[s]),o}),Gn=e=>new Set(Eo(e)||Ge(e)?e:[e]),Xn=(e,t)=>e?.add(t),op=/^\d+$/,Md=()=>{const e=[];let t=0;return[n=>(n?Z0(e):null)??at+t++,n=>{J0(op,n)&&zt(e)<1e3&&Wi(e,n)}]},ap=(e,t=[at])=>{const n=[],r=(s,i)=>i==zt(t)?Wi(n,s):t[i]===null?Ce(s,o=>r(o,i+1)):Lr([t[i],null],o=>r(ne(s,o),i+1));return r(e,0),n},lp=e=>{let t;const[n,r]=Md(),s=be();return[(c,u,d,f=[],m=()=>[])=>{t??=e();const w=n(1);return Ve(s,w,[c,u,d,f,m]),Xn(Ca(u,d??[at],Gn),w),w},(c,u,...d)=>Lr(ap(c,u),f=>Ce(f,m=>ne(s,m)[0](t,...u??[],...d))),c=>qe(ne(s,c),([,u,d])=>(Ca(u,d??[at],void 0,f=>(Yi(f,c),xe(f)?1:0)),Ve(s,c),r(c),d)),c=>qe(ne(s,c),([u,,d=[],f,m])=>{const w=(...v)=>{const y=zt(v);y==zt(d)?u(t,...v,...m(v)):Ge(d[y])?Lr(f[y]?.(...v)??[],A=>w(...v,A)):w(...v,d[y])};w()})]},cp=63,Ld=B0("-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz"),up=be(Nr(Ld,(e,t)=>[e,t])),ct=e=>Ld[e&cp],Dt=(e,t)=>ne(up,e[t])??0,dp=_a.crypto?e=>_a.crypto.getRandomValues(e):e=>Nr(e,()=>z0(al.random()*256)),fp=(e=16)=>Rd(dp(new Uint8Array(e)),(t,n)=>t+ct(n),at),hp=JSON.stringify,Go=JSON.parse,zn=e=>hp(e,(t,n)=>W0(n,Map)?Nn.fromEntries([...n]):n),gp=new _a.TextEncoder,Cs=e=>{let t=2166136261;return Lr(gp.encode(e),n=>{t^=n,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}),t>>>0},Xo=(e,t)=>(e^t)>>>0,vr=(e,t)=>Cs(e+":"+t),pp=(e,t)=>Cs(zn(e??null)+":"+t),zc=2**36,Wc=2**30,Ea=2**24,ns=2**18,rs=2**12,ss=2**6,Yc=e=>{const t=Cs(e);return ct(t/Ea)+ct(t/ns)+ct(t/rs)+ct(t/ss)+ct(t)},mp=(e,t=Date.now)=>{let n=0,r=-1;const s=qe(e,Yc,()=>fp(5)),i=()=>(o(),a(n,++r)),o=f=>{const m=n,[w,v]=Ge(f)||f==""?[0,0]:l(f);n=Fc(m,w,t()),r=n==m?n==w?Fc(r,v):r:n==w?v:-1},a=(f,m,w)=>ct(f/zc)+ct(f/Wc)+ct(f/Ea)+ct(f/ns)+ct(f/rs)+ct(f/ss)+ct(f)+ct(m/ns)+ct(m/rs)+ct(m/ss)+ct(m)+(Ge(w)?s:Yc(w)),l=f=>[Dt(f,0)*zc+Dt(f,1)*Wc+Dt(f,2)*Ea+Dt(f,3)*ns+Dt(f,4)*rs+Dt(f,5)*ss+Dt(f,6),Dt(f,7)*ns+Dt(f,8)*rs+Dt(f,9)*ss+Dt(f,10),f.slice(11)];return[i,o,a,l,()=>n,()=>r,()=>s]},wp=(e,t)=>(e??0)<(t??0)?-1:1,Nd=([e,t])=>Pr(e,t),vp=([e,t,n])=>[e,t,n],Pr=(e,t)=>t?[e,t]:[e],yp=(e,t,n)=>[e,t,n],Jc=e=>e[2],Zo=(e,t)=>t>e?(e?Cs(e):0)^Cs(t):0,li=(e,t)=>((e??"")>(t??"")?e:t)??"",ci=(e,t,n)=>{t>e[1]&&(e[1]=t),e[2]=n>>>0},Qr=(e=at)=>Pr(bn(),e),Qi=(e=at)=>[be(),e,0],ui=([e,t,n],r=vp)=>[st(e,r),t,n],ea=([e,t],n=Nd)=>Pr(st(e,n),t),yr=(e,t)=>Eo(e)&&zt(e)==3&&Y0(e[1])&&gn(e[2])==ol&&Ed(e[2])&&t(e[0]),di=e=>[e,e],Qe=(e,t=ul)=>t(e[0])+t(e[1]),Ke=()=>[be(),be()],Qc=e=>[...e],fi=([e,t])=>e===t,Kr=(e,t,n)=>Ve(e,t,ne(e,t)==-n?void 0:n),Od=()=>{let e,t,n=!1,r=!1,s=0,i=[];const o=be(),a=be(),l=be(),c=be(),u=be(),d=be(),f=be(),m=be(),w=be(),v=be(),y=be(),A=be(),_=be(),E=be(),j=Gn(),U=be(),F=be(),P=be(),g=be(),p=Ke(),x=Ke(),C=Ke(),N=Ke(),D=Ke(),O=Ke(),X=Ke(),re=Ke(),K=Ke(),H=Ke(),M=Ke(),te=Ke(),z=Ke(),B=Ke(),V=Ke(),oe=Ke(),ce=Ke(),ve=Ke(),ke=Ke(),ae=Ke(),se=Ke(),R=Ke(),T=be(),W=Ke(),[ie,G,me,le]=lp(()=>ut),de=h=>Mt(h,$=>Mt($,fe)),J=h=>Mt(h,fe),fe=h=>{if(!Mt(h,(S,q)=>Q0([ii,qn],q)))return!1;const $=h[ii];return!Ad($)&&$!=ol?!1:(_r(h[qn])!=$&&jd(h,qn),!0)},rt=Eo,lt=h=>Mt(h,Xe,vn),Xe=(h,$)=>(!e||wt(y,$)||vn($))&&Mt(h,(S,q)=>it($,q,S),()=>vn($)),it=(h,$,S,q)=>Mt(q?S:Ye(S,h,$),(Y,ee)=>qe(We(h,$,ee,Y),he=>(S[ee]=he,!0),()=>!1),()=>vn(h,$)),We=(h,$,S,q)=>e?qe(ne(ne(y,h),S),Y=>_r(q)!=Y[ii]?vn(h,$,S,q,Y[qn]):q,()=>vn(h,$,S,q)):Ge(_r(q))?vn(h,$,S,q):q,nt=(h,$)=>Mt($?h:mt(h),(S,q)=>qe(He(q,S),Y=>(h[q]=Y,!0),()=>!1),()=>zr()),He=(h,$)=>t?qe(ne(_,h),S=>_r($)!=S[ii]?zr(h,$,S[qn]):$,()=>zr(h,$)):Ge(_r($))?zr(h,$):$,Ye=(h,$,S)=>(qe(ne(A,$),([q,Y])=>{Ce(q,(ee,he)=>{Cn(h,he)||(h[he]=ee)}),Ce(Y,ee=>{Cn(h,ee)||vn($,S,ee)})}),h),mt=h=>(t&&(Ce(E,($,S)=>{Cn(h,S)||(h[S]=$)}),Ce(j,$=>{Cn(h,$)||zr($)})),h),mn=h=>Vn(y,h,($,S,q)=>{const Y=be(),ee=Gn();Vn(Ze(y,S,be),q,(he,Le,Ne)=>{Ve(he,Le,Ne),qe(Ne[qn],an=>Ve(Y,Le,an),()=>Xn(ee,Le))}),Ve(A,S,[Y,ee])},($,S)=>{Ve(y,S),Ve(A,S)}),wn=h=>Vn(_,h,($,S,q)=>{Ve(_,S,q),qe(q[qn],Y=>Ve(E,S,Y),()=>Xn(j,S))},($,S)=>{Ve(_,S),Ve(E,S),Yi(j,S)}),Tt=h=>Jt(h)?ei():Xs(h),bt=([h,$])=>{(Jt(h)?ei:Xs)(h),(Jt($)?ti:Zs)($)},Ot=h=>Vn(P,h,($,S,q)=>on(S,q),($,S)=>Yl(S)),on=(h,$)=>Vn(Ze(P,h,()=>(Gl(h,1),Ve(U,h,Md()),Ve(F,h,be()),be())),$,(S,q,Y)=>Dn(h,S,q,Y),(S,q)=>Jl(h,S,q)),Dn=(h,$,S,q,Y)=>Vn(Ze($,S,()=>(Xl(h,S,1),be())),q,(ee,he,Le)=>pr(h,S,ee,he,Le),(ee,he)=>Ql(h,$,S,ee,he,Y)),pr=(h,$,S,q,Y)=>{wt(S,q)||Zl(h,$,q,1);const ee=ne(S,q);Y!==ee&&(ec(h,$,q,ee,Y),Ve(S,q,Y))},zs=(h,$,S,q,Y)=>qe(ne($,S),ee=>pr(h,S,ee,q,Y),()=>Dn(h,$,S,Ye({[q]:Y},h,S))),$e=h=>Jt(h)?ti():Zs(h),Se=h=>Vn(g,h,($,S,q)=>Pe(S,q),($,S)=>Kl(S)),Pe=(h,$)=>{wt(g,h)||tc(h,1);const S=ne(g,h);$!==S&&(nc(h,S,$),Ve(g,h,$))},ye=(h,$)=>{const[S]=ne(U,h);let q;do q=S($);while(wt(ne(P,h),q));return q},Be=h=>ne(P,h)??on(h,{}),Yl=h=>on(h,{}),Jl=(h,$,S)=>{const[,q]=ne(U,h);q(S),Dn(h,$,S,{},!0)},Ql=(h,$,S,q,Y,ee)=>{const he=ne(ne(A,h)?.[0],Y);if(!Ge(he)&&!ee)return pr(h,S,q,Y,he);const Le=Ne=>{ec(h,S,Ne,ne(q,Ne)),Zl(h,S,Ne,-1),Ve(q,Ne)};Ge(he)?Le(Y):Rt(q,Le),xe(q)&&(Xl(h,S,-1),xe(Ve($,S))&&(Gl(h,-1),Ve(P,h),Ve(U,h),Ve(F,h)))},Kl=h=>{const $=ne(E,h);if(!Ge($))return Pe(h,$);nc(h,ne(g,h)),tc(h,-1),Ve(g,h)},Gl=(h,$)=>Kr(o,h,$),Xl=(h,$,S)=>Kr(Ze(c,h,be),$,S)&&Ve(l,h,Ze(l,h,()=>0)+S),Zl=(h,$,S,q)=>{const Y=ne(F,h),ee=ne(Y,S)??0;(ee==0&&q==1||ee==1&&q==-1)&&Kr(Ze(a,h,be),S,q),Ve(Y,S,ee!=-q?ee+q:null),Kr(Ze(Ze(u,h,be),$,be),S,q)},ec=(h,$,S,q,Y)=>{Ze(Ze(Ze(d,h,be),$,be),S,()=>[q,0])[1]=Y,i[3]?.(h,$,S,Y)},tc=(h,$)=>Kr(f,h,$),nc=(h,$,S)=>{Ze(m,h,()=>[$,0])[1]=S,i[4]?.(h,S)},vn=(h,$,S,q,Y)=>(Wi(Ze(Ze(Ze(w,h,be),$,be),S,()=>[]),q),Y),zr=(h,$,S)=>(Wi(Ze(v,h,()=>[]),$),S),Ws=(h,$,S)=>qe(ne(ne(ne(d,h),$),S),([q,Y])=>[!0,q,Y],()=>[!1,...di(Js(h,$,S))]),rc=h=>qe(ne(m,h),([$,S])=>[!0,$,S],()=>[!1,...di(Qs(h))]),sc=h=>!xe(w)&&!xe(oe[h])?Ce(h?Ko(w):w,($,S)=>Ce($,(q,Y)=>Ce(q,(ee,he)=>G(oe[h],[S,Y,he],ee)))):0,ic=h=>!xe(v)&&!xe(ce[h])?Ce(h?kn(v):v,($,S)=>G(ce[h],[S],$)):0,Wr=(h,$,S,q)=>{if(!xe(h))return G($,q,()=>st(h)),Rt(h,(Y,ee)=>G(S,[...q??[],Y],ee==1)),1},oc=h=>{const $=Ks();$!=n&&G(p[h],void 0,$);const S=xe(H[h]),q=xe(z[h])&&xe(B[h])&&xe(K[h])&&xe(M[h])&&xe(O[h])&&xe(X[h])&&xe(re[h])&&S&&xe(C[h])&&xe(N[h]),Y=xe(V[h])&&xe(te[h])&&xe(D[h])&&xe(x[h]);if(!q||!Y){const ee=h?[kn(o),Sa(a),kn(l),Sa(c),Ko(u),Ko(d)]:[o,a,l,c,u,d];if(!q){Wr(ee[0],C[h],N[h]),Ce(ee[1],(Le,Ne)=>Wr(Le,O[h],X[h],[Ne])),Ce(ee[2],(Le,Ne)=>{Le!=0&&G(re[h],[Ne],uc(Ne))});const he=Gn();Ce(ee[3],(Le,Ne)=>{Wr(Le,K[h],M[h],[Ne])&&!S&&(G(H[h],[Ne,null]),Xn(he,Ne))}),S||Ce(ee[5],(Le,Ne)=>{if(!wt(he,Ne)){const an=Gn();Ce(Le,yn=>Ce(yn,([ni,ri],Yr)=>ri!==ni?Xn(an,Yr):Yi(yn,Yr))),Ce(an,yn=>G(H[h],[Ne,yn]))}}),Ce(ee[4],(Le,Ne)=>Ce(Le,(an,yn)=>Wr(an,z[h],B[h],[Ne,yn])))}if(!Y){let he;Ce(ee[5],(Le,Ne)=>{let an;Ce(Le,(yn,ni)=>{let ri;Ce(yn,([Yr,$c],Wh)=>{$c!==Yr&&(G(V[h],[Ne,ni,Wh],$c,Yr,Ws),he=an=ri=1)}),ri&&G(te[h],[Ne,ni],Ws)}),an&&G(D[h],[Ne],Ws)}),he&&G(x[h],void 0,Ws)}}},ac=h=>{const $=Gs();$!=r&&G(ve[h],void 0,$);const S=xe(ae[h])&&xe(se[h]),q=xe(R[h])&&xe(ke[h]);if(!S||!q){const Y=h?[kn(f),kn(m)]:[f,m];if(S||Wr(Y[0],ae[h],se[h]),!q){let ee;Ce(Y[1],([he,Le],Ne)=>{Le!==he&&(G(R[h],[Ne],Le,he,rc),ee=1)}),ee&&G(ke[h],void 0,rc)}}},Je=(h,...$)=>(Io(()=>h(...Nr($,De))),ut),lc=(h,$,S,q,Y)=>{let ee=Ys(h,$,...S);return ie(()=>{const he=Ys(h,$,...S);G0(he,ee)||(ee=he,q(ut,h,$,...S,ee))},H[Y?1:0],[h,$],[Ct])},bh=()=>[Do(),Fo()],Do=()=>ai(P),Ct=()=>Jr(P),xh=h=>$a(ne(P,De(h))),cc=h=>Jr(ne(F,De(h))),uc=h=>cl(ne(P,De(h))),mr=h=>Jr(ne(P,De(h))),Ys=(h,$,S,q=0,Y)=>Ji(h)?Ys(h.tableId,h.cellId,h.descending,h.offset,h.limit):Nr(ka(X0(ip(ne(P,De(h)),(ee,he)=>[Ge($)?he:ne(ee,De($)),he]),([ee],[he])=>wp(ee,he)*(S?-1:1)),q,Ge(Y)?Y:q+Y),([,ee])=>ee),_h=(h,$)=>st(ne(ne(P,De(h)),De($))),qo=(h,$)=>Jr(ne(ne(P,De(h)),De($))),Js=(h,$,S)=>ne(ne(ne(P,De(h)),De($)),De(S)),Fo=()=>st(g),Vo=()=>Jr(g),Qs=h=>ne(g,De(h)),Ks=()=>!xe(P),dc=h=>wt(P,De(h)),fc=(h,$)=>wt(ne(F,De(h)),De($)),hc=(h,$)=>wt(ne(P,De(h)),De($)),gc=(h,$,S)=>wt(ne(ne(P,De(h)),De($)),De(S)),Gs=()=>!xe(g),pc=h=>wt(g,De(h)),kh=()=>zn(P),$h=()=>zn(g),Sh=()=>zn([P,g]),Ch=()=>zn(y),Eh=()=>zn(_),Ah=()=>zn([y,_]),Rh=h=>Je(()=>{const $=Yo(h)?h():h;rt($)&&bt($)}),Xs=h=>Je(()=>lt(h)?Ot(h):0),Ph=(h,$)=>Je(S=>Xe($,S)?on(S,$):0,h),Th=(h,$,S)=>Je((q,Y)=>it(q,Y,S)?Dn(q,Be(q),Y,S):0,h,$),jh=(h,$,S=!0)=>Io(()=>{let q;return it(h,q,$)&&(h=De(h),Dn(h,Be(h),q=ye(h,S?1:0),$)),q}),Mh=(h,$,S)=>Je((q,Y)=>{if(it(q,Y,S,1)){const ee=Be(q);un(S,(he,Le)=>zs(q,ee,Y,Le,he))}},h,$),Lh=(h,$,S,q)=>Je((Y,ee,he)=>qe(We(Y,ee,he,Yo(q)?q(Js(Y,ee,he)):q),Le=>zs(Y,Be(Y),ee,he,Le)),h,$,S),Zs=h=>Je(()=>nt(h)?Se(h):0),Nh=h=>Je(()=>nt(h,1)?un(h,($,S)=>Pe(S,$)):0),Oh=(h,$)=>Je(S=>qe(He(S,Yo($)?$(Qs(S)):$),q=>Pe(S,q)),h),Dh=h=>Je(()=>{un(h[0],($,S)=>Ge($)?yc(S):un($,(q,Y)=>Ge(q)?bc(S,Y):un(q,(ee,he)=>Ic(ut,S,Y,he,ee)))),un(h[1],($,S)=>Hc(ut,S,$))}),mc=h=>(Jo(()=>Tt(Go(h))),ut),qh=h=>(Jo(()=>$e(Go(h))),ut),Fh=h=>Je(()=>Jo(()=>{const[$,S]=Go(h);Tt($),$e(S)},()=>mc(h))),wc=h=>Je(()=>{if((e=de(h))&&(mn(h),!xe(P))){const $=Do();ei(),Xs($)}}),vc=h=>Je(()=>{if(t=J(h)){const $=Fo();Uo(),ti(),t=!0,wn(h),Zs($)}}),Vh=(h,$)=>Je(()=>{wc(h),vc($)}),ei=()=>Je(()=>Ot({})),yc=h=>Je($=>wt(P,$)?Yl($):0,h),bc=(h,$)=>Je((S,q)=>qe(ne(P,S),Y=>wt(Y,q)?Jl(S,Y,q):0),h,$),Uh=(h,$,S,q)=>Je((Y,ee,he)=>qe(ne(P,Y),Le=>qe(ne(Le,ee),Ne=>wt(Ne,he)?Ql(Y,Le,ee,Ne,he,q):0)),h,$,S),ti=()=>Je(()=>Se({})),Ih=h=>Je($=>wt(g,$)?Kl($):0,h),xc=()=>Je(()=>{mn({}),e=!1}),Uo=()=>Je(()=>{wn({}),t=!1}),Hh=()=>Je(()=>{xc(),Uo()}),Io=(h,$)=>{if(s!=-1){_c();const S=h();return kc($),S}},_c=()=>(s!=-1&&s++,s==1&&(i[0]?.(),G(T)),ut),Bh=()=>[st(d,(h,$)=>ne(o,$)===-1?void 0:st(h,(S,q)=>ne(ne(c,$),q)===-1?void 0:st(S,([,Y])=>Y,Y=>fi(Y)),xe,Jt),xe,Jt),st(m,([,h])=>h,h=>fi(h)),1],zh=()=>[!xe(d),!xe(m),ai(d,Qc,fi),ai(w),st(m,Qc,fi),st(v),st(o),$a(c),ai(u),st(f)],kc=h=>(s>0&&(s--,s==0&&(s=1,sc(1),xe(d)||oc(1),ic(1),xe(m)||ac(1),h?.(ut)&&(Ce(d,($,S)=>Ce($,(q,Y)=>Ce(q,([ee],he)=>Ic(ut,S,Y,he,ee)))),fs(d),Ce(m,([$],S)=>Hc(ut,S,$)),fs(m)),G(W[0],void 0),s=-1,sc(0),xe(d)||oc(0),ic(0),xe(m)||ac(0),i[1]?.(),G(W[1],void 0),i[2]?.(),s=0,n=Ks(),r=Gs(),Lr([o,a,l,c,u,d,w,f,m,v],fs))),ut),ut={getContent:bh,getTables:Do,getTableIds:Ct,getTable:xh,getTableCellIds:cc,getRowCount:uc,getRowIds:mr,getSortedRowIds:Ys,getRow:_h,getCellIds:qo,getCell:Js,getValues:Fo,getValueIds:Vo,getValue:Qs,hasTables:Ks,hasTable:dc,hasTableCell:fc,hasRow:hc,hasCell:gc,hasValues:Gs,hasValue:pc,getTablesJson:kh,getValuesJson:$h,getJson:Sh,getTablesSchemaJson:Ch,getValuesSchemaJson:Eh,getSchemaJson:Ah,hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:Rh,setTables:Xs,setTable:Ph,setRow:Th,addRow:jh,setPartialRow:Mh,setCell:Lh,setValues:Zs,setPartialValues:Nh,setValue:Oh,applyChanges:Dh,setTablesJson:mc,setValuesJson:qh,setJson:Fh,setTablesSchema:wc,setValuesSchema:vc,setSchema:Vh,delTables:ei,delTable:yc,delRow:bc,delCell:Uh,delValues:ti,delValue:Ih,delTablesSchema:xc,delValuesSchema:Uo,delSchema:Hh,transaction:Io,startTransaction:_c,getTransactionChanges:Bh,getTransactionLog:zh,finishTransaction:kc,forEachTable:h=>Ce(P,($,S)=>h(S,q=>Ce($,(Y,ee)=>q(ee,he=>Rt(Y,he))))),forEachTableCell:(h,$)=>Rt(ne(F,De(h)),$),forEachRow:(h,$)=>Ce(ne(P,De(h)),(S,q)=>$(q,Y=>Rt(S,Y))),forEachCell:(h,$,S)=>Rt(ne(ne(P,De(h)),De($)),S),forEachValue:h=>Rt(g,h),addSortedRowIdsListener:(h,$,S,q,Y,ee,he)=>Ji(h)?lc(h.tableId,h.cellId,[h.descending??!1,h.offset??0,h.limit],$,S):lc(h,$,[S,q,Y],ee,he),addStartTransactionListener:h=>ie(h,T),addWillFinishTransactionListener:h=>ie(h,W[0]),addDidFinishTransactionListener:h=>ie(h,W[1]),callListener:h=>(le(h),ut),delListener:h=>(me(h),ut),getListenerStats:()=>({hasTables:Qe(p),tables:Qe(x),tableIds:Qe(C),hasTable:Qe(N),table:Qe(D),tableCellIds:Qe(O),hasTableCell:Qe(X,ts),rowCount:Qe(re),rowIds:Qe(K),sortedRowIds:Qe(H),hasRow:Qe(M,ts),row:Qe(te,ts),cellIds:Qe(z,ts),hasCell:Qe(B,Qo),cell:Qe(V,Qo),invalidCell:Qe(oe,Qo),hasValues:Qe(ve),values:Qe(ke),valueIds:Qe(ae),hasValue:Qe(se),value:Qe(R),invalidValue:Qe(ce),transaction:ul(T)+Qe(W)}),isMergeable:()=>!1,createStore:Od,addListener:ie,callListeners:G,setInternalListeners:(h,$,S,q,Y)=>i=[h,$,S,q,Y]};return un({[Fn+Nc]:[0,p,[],()=>[Ks()]],[Nc]:[0,x],[F0]:[0,C],[Fn+Cr]:[1,N,[Ct],h=>[dc(...h)]],[Cr]:[1,D,[Ct]],[Cr+Oc]:[1,O,[Ct]],[Fn+Cr+Ai]:[2,X,[Ct,cc],h=>[fc(...h)]],[V0]:[1,re,[Ct]],[U0]:[1,K,[Ct]],[Fn+Bi]:[2,M,[Ct,mr],h=>[hc(...h)]],[Bi]:[2,te,[Ct,mr]],[Oc]:[2,z,[Ct,mr]],[Fn+Ai]:[3,B,[Ct,mr,qo],h=>[gc(...h)]],[Ai]:[3,V,[Ct,mr,qo],h=>di(Js(...h))],InvalidCell:[3,oe],[Fn+Dc]:[0,ve,[],()=>[Gs()]],[Dc]:[0,ke],[I0]:[0,ae],[Fn+zi]:[1,se,[Vo],h=>[pc(...h)]],[zi]:[1,R,[Vo],h=>di(Qs(h[0]))],InvalidValue:[1,ce]},([h,$,S,q],Y)=>{ut[Cd+Y+xa]=(...ee)=>ie(ee[h],$[ee[h+1]?1:0],h>0?ka(ee,0,h):void 0,S,q)}),Td(ut)},bp={HasTable:1,Table:1,TableCellIds:1,HasTableCell:2,RowCount:1,RowIds:1,SortedRowIds:5,HasRow:2,Row:2,CellIds:2,HasCell:3,Cell:3,HasValue:1,Value:1,InvalidCell:3,InvalidValue:1},Kc=(e=at)=>[Qi(e),Qi(e)],xp=e=>Eo(e)&&zt(e)==2&&yr(e[0],t=>Mt(t,n=>yr(n,r=>Mt(r,s=>yr(s,i=>Mt(i,o=>yr(o,Uc),void 0,1)),void 0,1)),void 0,1))&&yr(e[1],t=>Mt(t,n=>yr(n,Uc),void 0,1)),_p=(e,t)=>{let n=1,r=Kc(),s=0;const i=be(),o=Gn(),[a,l]=mp(e,t),c=Od(),u=H=>{const M=n;return n=0,H(),n=M,K},d=(H,M=0)=>{const te={},z={},[[B,V=at,oe=0],ce]=H,[ve,ke]=r,[ae,se,R]=ve;let T=M?oe:R,W=V;Yt(B,([G,me=at,le=0],de)=>{const J=Ze(ae,de,Qi),[fe,rt,lt]=J;let Xe=M?le:lt,it=me;Yt(G,(We,nt)=>{const[He,Ye,mt]=f(We,Ze(fe,nt,Qi),ln(ln(te,de,bn),nt,bn),M);Xe^=M?0:Xo(Ye?vr(nt,Ye):0,vr(nt,mt)),it=li(it,He)}),Xe^=M?0:Zo(rt,me),ci(J,me,Xe),T^=M?0:Xo(lt?vr(de,lt):0,vr(de,J[2])),W=li(W,it)}),T^=M?0:Zo(se,V),ci(ve,V,T);const[ie]=f(ce,ke,z,M);return l(li(W,ie)),[te,z,1]},f=(H,M,te,z)=>{const[B,V=at,oe=0]=H,[ce,ve,ke]=M;let ae=V,se=z?oe:ke;return Yt(B,([R,T=at,W=0],ie)=>{const G=Ze(ce,ie,()=>[void 0,at,0]),[,me,le]=G;(!me||T>me)&&(ci(G,T,z?W:pp(R,T)),G[0]=R,te[ie]=R,se^=z?0:Xo(vr(ie,le),vr(ie,G[2])),ae=li(ae,T))}),se^=z?0:Zo(ve,V),ci(M,V,se),[ae,ke,M[2]]},m=Vc,w=Vc,v=()=>{fs(i),fs(o)},y=(H,M,te,z)=>{Xn(Ze(Ze(i,H,be),M,Gn),te),n&&d([[{[H]:[{[M]:[{[te]:[z,s?at:a()]}]}]}],[{}],1])},A=(H,M)=>{Xn(o,H),n&&d([[{}],[{[H]:[M,s?at:a()]}],1])},_=()=>[ui(r[0],H=>ui(H,M=>ui(M))),ui(r[1])],E=()=>[r[0][2],r[1][2]],j=()=>st(r[0][0],Jc),U=H=>{const M=Qr(r[0][1]),te={};return Rt(r[0][0],(z,[B,V,oe])=>Cn(H,z)?oe!=H[z]?te[z]=oe:0:M[0][z]=ea([B,V],ce=>ea(ce))),[M,te]},F=H=>{const M={};return Yt(H,(te,z)=>qe(ne(r[0][0],z),([B,,V])=>V!=te?Rt(B,(oe,[,,ce])=>ln(M,z,bn)[oe]=ce):0)),M},P=H=>{const M=Qr(r[0][1]),te={};return Yt(H,(z,B)=>Rt(ne(r[0][0],B)?.[0],(V,[oe,ce,ve])=>Cn(z,V)?ve!==z[V]?ln(te,B,bn)[V]=ve:0:ln(M[0],B,Qr)[0][V]=ea([oe,ce]))),[M,te]},g=H=>{const M={};return Yt(H,(te,z)=>qe(ne(r[0][0],z),([B])=>Yt(te,(V,oe)=>qe(ne(B,oe),([ce,,ve])=>ve!==V?Rt(ce,(ke,[,,ae])=>ln(ln(M,z,bn),oe,bn)[ke]=ae):0)))),M},p=H=>{const[[M,te]]=r,z={};return Yt(H,(B,V)=>Yt(B,(oe,ce)=>qe(ne(M,V),([ve,ke])=>qe(ne(ve,ce),([ae,se])=>Rt(ae,(R,[T,W,ie])=>ie!==oe[R]?ln(ln(z,V,()=>Qr(ke))[0],ce,()=>Qr(se))[0][R]=[T,W]:0))))),Pr(z,te)},x=()=>st(r[1][0],Jc),C=H=>{const[,[M,te]]=r,z=st(M,Nd,([,,B],V)=>B==H?.[V]);return Pr(z,te)},N=H=>u(()=>xp(H)?c.transaction(()=>{c.delTables().delValues(),r=Kc(),c.applyChanges(d(H,1))}):0),D=H=>(c.transaction(()=>{s=1,c.setContent(H),s=0}),K),O=(H=!1)=>{const[[M,te,z],[B,V,oe]]=r,ce=H?yp:Pr,ve={};Ce(i,(ae,se)=>qe(ne(M,se),([R,T,W])=>{const ie={};Ce(ae,(G,me)=>qe(ne(R,me),([le,de,J])=>{const fe={};Ce(G,rt=>{qe(ne(le,rt),([lt,Xe,it])=>fe[rt]=ce(lt,Xe,it))}),ie[me]=ce(fe,de,J)})),ve[se]=ce(ie,T,W)}));const ke={};return Ce(o,ae=>qe(ne(B,ae),([se,R,T])=>ke[ae]=ce(se,R,T))),[ce(ve,te,z),ce(ke,V,oe),1]},X=H=>u(()=>c.applyChanges(d(H))),K={getMergeableContent:_,getMergeableContentHashes:E,getMergeableTableHashes:j,getMergeableTableDiff:U,getMergeableRowHashes:F,getMergeableRowDiff:P,getMergeableCellHashes:g,getMergeableCellDiff:p,getMergeableValueHashes:x,getMergeableValueDiff:C,setMergeableContent:N,setDefaultContent:D,getTransactionMergeableChanges:O,applyMergeableChanges:X,merge:H=>{const M=_(),te=H.getMergeableContent();return H.applyMergeableChanges(M),X(te)}};return c.setInternalListeners(m,w,v,y,A),un(c,(H,M)=>K[M]=oi(M,D0)||oi(M,q0)||oi(M,"apply")||qc(M,H0)||M=="call"+xa?(...te)=>(H(...te),K):oi(M,Cd)&&qc(M,xa)?(...te)=>{const z=bp[ka(M,3,-8)]??0,B=te[z];return te[z]=(V,...oe)=>B(K,...oe),H(...te)}:M=="isMergeable"?()=>!0:H),Td(K)},Ki="",Dd="￼",Gt=e=>e==null,Gi=(e,t,n)=>Gt(e)?n?.():t(e),Aa=e=>Array.isArray(e),cr=e=>e.length,kp=(e,t)=>e.test(t),qd=e=>{throw new Error(e)},Gr=async(e,t,n)=>{try{return await e()}catch(r){t?.(r)}},Ra=(e,t)=>e.forEach(t),$p=(e,t)=>e.splice(0,t),dl=(e,...t)=>e.push(...t),Fd=e=>e.shift(),Ao=Object,Gc=e=>Ao.getPrototypeOf(e),Sp=e=>!Gt(e)&&Gi(Gc(e),t=>t==Ao.prototype||Gt(Gc(t)),()=>!0),Cp=Ao.keys,Ep=Ao.freeze,Ap=e=>cr(Cp(e)),hi=e=>Sp(e)&&Ap(e)==0,Rp=JSON.stringify,Pp=JSON.parse,Tp=e=>Rp(e,(t,n)=>n===void 0?Dd:n),jp=e=>Pp(e,(t,n)=>n===Dd?void 0:n),Mp=e=>e?.size??0,Lp=(e,t)=>e?.has(t)??!1,Vd=e=>Gt(e)||Mp(e)==0,Ud=(e,t)=>e?.forEach(t),Id=(e,t)=>e?.delete(t),Us=e=>new Map(e),It=(e,t)=>e?.get(t),ur=(e,t,n)=>Gt(n)?(Id(e,t),e):e?.set(t,n),Pa=(e,t,n,r)=>(Lp(e,t)?r?.(It(e,t)):ur(e,t,n()),It(e,t)),Ta=(e,t,n,r,s=0)=>Gi((n?Pa:It)(e,t[s],s>cr(t)-2?n:Us),i=>{if(s>cr(t)-2)return r?.(i)&&ur(e,t[s]),i;const o=Ta(i,t,n,r,s+1);return Vd(i)&&ur(e,t[s]),o}),Np=/^\d+$/,Op=()=>{const e=[];let t=0;return[n=>(n?Fd(e):null)??Ki+t++,n=>{kp(Np,n)&&cr(e)<1e3&&dl(e,n)}]},Dp=e=>new Set(Aa(e)||Gt(e)?e:[e]),qp=(e,t)=>e?.add(t),Fp=(e,t=[Ki])=>{const n=[],r=(s,i)=>i==cr(t)?dl(n,s):t[i]===null?Ud(s,o=>r(o,i+1)):Ra([t[i],null],o=>r(It(s,o),i+1));return r(e,0),n},Vp=e=>{let t;const[n,r]=Op(),s=Us();return[(c,u,d,f=[],m=()=>[])=>{t??=e();const w=n(1);return ur(s,w,[c,u,d,f,m]),qp(Ta(u,d??[Ki],Dp),w),w},(c,u,...d)=>Ra(Fp(c,u),f=>Ud(f,m=>It(s,m)[0](t,...u??[],...d))),c=>Gi(It(s,c),([,u,d])=>(Ta(u,d??[Ki],void 0,f=>(Id(f,c),Vd(f)?1:0)),ur(s,c),r(c),d)),c=>Gi(It(s,c),([u,,d=[],f,m])=>{const w=(...v)=>{const y=cr(v);y==cr(d)?u(t,...v,...m(v)):Gt(d[y])?Ra(f[y]?.(...v)??[],A=>w(...v,A)):w(...v,d[y])};w()})]},gi=Us(),pi=Us(),Up=(e=1,t,n)=>e!=1&&t.isMergeable()?[1,t.getMergeableContent,()=>t.getTransactionMergeableChanges(!n),([[r],[s]])=>!hi(r)||!hi(s),t.setDefaultContent]:e!=2?[0,t.getContent,t.getTransactionChanges,([r,s])=>!hi(r)||!hi(s),t.setContent]:qd("Store type not supported by this Persister"),Ip=(e,t,n,r,s,i,o,a={},l=0,c=[])=>{let u=0,d=0,f=0,m,w,v;Pa(gi,c,()=>0),Pa(pi,c,()=>[]);const y=Us(),[A,_,E,j,U]=Up(o,e,l),[F,P,g]=Vp(()=>se),p=R=>{R!=u&&(u=R,P(y,void 0,u))},x=async()=>{if(!It(gi,c)){for(ur(gi,c,1);!Gt(m=Fd(It(pi,c)));)await Gr(m,i);ur(gi,c,0)}},C=R=>{(A&&Aa(R?.[0])?R?.[2]===1?e.applyMergeableChanges:e.setMergeableContent:R?.[2]===1?e.applyChanges:e.setContent)(R)},N=async R=>(u!=2&&(p(1),d++,await ce(async()=>{await Gr(async()=>{const T=await t();Aa(T)?C(T):R?U(R):qd(`Content is not an array: ${T}`)},()=>{R&&U(R)}),p(0)})),se),D=async R=>(O(),await N(R),await Gr(async()=>w=await r(async(T,W)=>{W||T?u!=2&&(p(1),d++,C(W??T),p(0)):await N()}),i),se),O=async()=>(w&&(await Gr(()=>s(w),i),w=void 0),se),X=()=>!Gt(w),re=async R=>(u!=1&&(p(2),f++,await ce(async()=>{await Gr(()=>n(_,R),i),p(0)})),se),K=async()=>(H(),await re(),v=e.addDidFinishTransactionListener(()=>{const R=E();j(R)&&re(R)}),se),H=async()=>(v&&(e.delListener(v),v=void 0),se),M=()=>!Gt(v),te=async(R,T=!1)=>{const[W,ie]=T?[K,D]:[D,K];return await W(R),await ie(R),se},z=async(R=!1)=>{const[T,W]=R?[H,O]:[O,H];return await T(),await W(),se},B=()=>u,V=R=>F(R,y),oe=R=>(g(R),e),ce=async(...R)=>(dl(It(pi,c),...R),await x(),se),se={load:N,startAutoLoad:D,stopAutoLoad:O,isAutoLoading:X,save:re,startAutoSave:K,stopAutoSave:H,isAutoSaving:M,startAutoPersisting:te,stopAutoPersisting:z,getStatus:B,addStatusListener:V,delListener:oe,schedule:ce,getStore:()=>e,destroy:()=>($p(It(pi,c)),z()),getStats:()=>({loads:d,saves:f}),...a};return Ep(se)},Hp=(e,t,n)=>Ip(e,async()=>jp(await(await t.getFile()).text()),async a=>{const l=await t.createWritable();await l.write(Tp(a())),await l.close()},async a=>{const l=new FileSystemObserver(()=>a());return await l.observe(t),l},a=>a?.disconnect(),n,3,{getHandle:()=>t}),Bp="https://localhost",At="/api/v1";let ot=Bp;ot.endsWith("/api/v1")&&(ot=ot.replace("/api/v1",""));const pt={SIGNUP:`${ot}${At}/auth/signup`,SIGNIN:`${ot}${At}/auth/signin`,SIGNOUT:`${ot}${At}/auth/signout`,REFRESH:`${ot}${At}/auth/refresh`,SEND_VERIFICATION:`${ot}${At}/auth/send-verification`,VERIFY_EMAIL:`${ot}${At}/auth/verify-email`,REQUEST_PASSWORD_RESET:`${ot}${At}/auth/request-password-reset`,RESET_PASSWORD:`${ot}${At}/auth/reset-password`,CURRENT_USER:`${ot}${At}/users/me`,SEARCH_USERS:`${ot}${At}/users/search`,PROJECTS:`${ot}${At}/projects`,REVIEWS:`${ot}${At}/reviews`,CHECKLISTS:`${ot}${At}/checklists`,ELECTRIC_SHAPE:"https://localhost/v1/shape",HEALTH:`${ot}/healthz`,HEALTH_DB:`${ot}/healthz/db`};async function zp(e,t,n){const r=Intl.DateTimeFormat().resolvedOptions().timeZone,s=navigator.language,i=await fetch(pt.SIGNUP,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n,timezone:r,locale:s})});if(!i.ok){const o=await i.text();throw console.error("Signup error:",o),new Error(o||"Signup failed")}}let Or=null;function Wp(){return Or}async function Yp(e,t){const n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=navigator.language,s=await fetch(pt.SIGNIN,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t,timezone:n,locale:r})});if(!s.ok){const o=await s.text();throw console.error("Sign in failed:",o),new Error(o||"Sign in failed")}Or=(await s.json()).accessToken}async function ta(){const e=await rn(pt.CURRENT_USER);if(!e.ok){const t=await e.text();throw console.error("Failed to fetch user:",t),new Error(t||"Failed to fetch user")}return await e.json()}async function rn(e,t={}){performance.now(),t.headers={...t.headers,Authorization:`Bearer ${Or}`},t.credentials="include";let n=await fetch(e,t);if(n.status===401||n.status===403)try{await ja(),t.headers.Authorization=`Bearer ${Or}`,t.credentials="include",n=await fetch(e,t)}catch(r){throw await Hd(),new Error("Session expired. Please log in again. Error:",r)}return n}async function ja(){const e=await fetch(pt.REFRESH,{method:"POST",credentials:"include"});if(!e.ok){const n=await e.text();throw console.error("Refresh failed:",n),new Error(n||"Refresh failed")}Or=(await e.json()).accessToken}async function Hd(){await fetch(pt.SIGNOUT,{method:"POST",credentials:"include"}),Or=null}async function Jp(e){const t=await fetch(pt.SEND_VERIFICATION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(console.log("Send verification response:",await t.text()),!t.ok){const n=await t.text();throw console.error("Send verification error:",n),new Error(n||"Failed to send verification email")}}async function Qp(e,t){const n=await fetch(pt.VERIFY_EMAIL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})});if(!n.ok){const r=await n.text();throw console.error("Verify email error:",r),new Error(r||"Email verification failed")}}async function fl(e){console.log("Creating project with name:",e);try{let t=performance.now();const n=await rn(`${pt.PROJECTS}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});let r=performance.now();if(console.log(`createProject API call took ${r-t} ms`),!n.ok){const i=await n.json();throw new Error(i.detail||"Failed to create project")}let s=await n.json();return console.log("Project created successfully:",s),s}catch(t){throw console.error("Error creating project:",t),t}}async function Kp(e,t){try{const n=await rn(`${pt.PROJECTS}/${e}/members/add-by-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(!n.ok){const r=await n.json();throw new Error(r.detail||"Failed to add user to project")}return await n.json()}catch(n){throw console.error("Error adding user to project by email:",n),n}}async function Bd(e){try{const t=await rn(`${pt.PROJECTS}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const n=await t.json();throw new Error(n.detail||"Failed to delete project")}return!0}catch(t){throw console.error("Error deleting project:",t),t}}const n$=Object.freeze(Object.defineProperty({__proto__:null,addUserToProjectByEmail:Kp,createProject:fl,deleteProject:Bd},Symbol.toStringTag,{value:"Module"}));async function Gp(e,t){try{const n=await rn(`${pt.REVIEWS}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,project_id:t})});if(!n.ok){const r=await n.json();throw new Error(r.detail||"Failed to create review")}return await n.json()}catch(n){throw console.error("Error creating review:",n),n}}async function Xp(e){try{const t=await rn(`${pt.REVIEWS}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const n=await t.json();throw new Error(n.detail||"Failed to delete review")}return!0}catch(t){throw console.error("Error deleting review:",t),t}}async function Zp(e,t=null){try{const n={review_id:e,reviewer_id:t,type:"amstar"};t&&(n.reviewer_id=t);const r=await rn(`${pt.CHECKLISTS}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.detail||"Failed to create checklist")}return await r.json()}catch(n){throw console.error("Error creating checklist:",n),n}}async function em(e){try{const t=await rn(`${pt.CHECKLISTS}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const n=await t.json();throw new Error(n.detail||"Failed to delete checklist")}return!0}catch(t){throw console.error("Error deleting checklist:",t),t}}async function zd(e,t,n,r=!1){try{const s=await rn(`${pt.CHECKLISTS}/${e}/answers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question_key:t,answers:n,critical:r})});if(!s.ok){const i=await s.json();throw new Error(i.detail||"Failed to save answer")}return await s.json()}catch(s){throw console.error("Error saving checklist answer:",s),s}}const xt=[],na={CREATE_PROJECT:"CREATE_PROJECT",UPDATE_PROJECT:"UPDATE_PROJECT",DELETE_PROJECT:"DELETE_PROJECT"};function tm(e,t,n,r=null){console.log("Enqueuing operation:",e,t,n,r);const s={id:n,type:e,data:t,status:"pending",snapshot:r};return xt.push(s),Ma(),s}async function Ma(){if(xt.length===0)return;const e=xt[0];console.log("Processing operation:",xt.length,e);try{let t;switch(e.type){case na.CREATE_PROJECT:t=await fl(e.data),console.log("Created project on server:",t),e.id&&(console.log(`Replacing tempId ${e.id} with server id ${t.id}`),nm(e.id,t.id,"project"));break;case na.UPDATE_PROJECT:break;case na.DELETE_PROJECT:break}e.status="completed",xt.shift(),xt.length>0&&Ma()}catch(t){e.status="failed",e.error=t.message,console.error("Operation failed:",t),Nt.loadStoreSnapshot(e.snapshot),console.log("Applied snapshot:",e.snapshot),xt.shift(),sm(e.id),xt.length>0&&Ma()}}function nm(e,t,n){const r=Nt.tinyStore;switch(rm(e,t,n),n){case"project":{const s=r.getRow("projects",e);s&&(r.delRow("projects",e),r.setRow("projects",t,s)),Object.entries(r.getTable("project_members")||{}).filter(([a,l])=>l.project_id===e).forEach(([a,l])=>{r.delRow("project_members",a);const c=a.replace(e,t);r.setRow("project_members",c,{...l,project_id:t})}),Object.entries(r.getTable("reviews")||{}).filter(([a,l])=>l.project_id===e).forEach(([a,l])=>{r.setRow("reviews",a,{...l,project_id:t})});break}case"review":{const s=r.getRow("reviews",e);s&&(r.delRow("reviews",e),r.setRow("reviews",t,s)),Object.entries(r.getTable("review_assignments")||{}).filter(([a,l])=>l.review_id===e).forEach(([a,l])=>{r.delRow("review_assignments",a);const c=a.replace(e,t);r.setRow("review_assignments",c,{...l,review_id:t})}),Object.entries(r.getTable("checklists")||{}).filter(([a,l])=>l.review_id===e).forEach(([a,l])=>{r.setRow("checklists",a,{...l,review_id:t})});break}case"checklist":{const s=r.getRow("checklists",e);s&&(r.delRow("checklists",e),r.setRow("checklists",t,s)),Object.entries(r.getTable("checklist_answers")||{}).filter(([o,a])=>a.checklist_id===e).forEach(([o,a])=>{r.setRow("checklist_answers",o,{...a,checklist_id:t})});break}}}function rm(e,t,n){console.log(`Updating queue IDs from ${e} to ${t} for entity type ${n}`);for(const r of xt)if(r!==xt[0])switch(r.id===e&&(r.id=t),n){case"project":{r.data.project_id===e&&(r.data.project_id=t),r.rollbackData?.project_id===e&&(r.rollbackData.project_id=t);break}case"review":{r.data.review_id===e&&(r.data.review_id=t),r.rollbackData?.review_id===e&&(r.rollbackData.review_id=t);break}case"checklist":{r.data.checklist_id===e&&(r.data.checklist_id=t),r.rollbackData?.checklist_id===e&&(r.rollbackData.checklist_id=t);break}}}function sm(e){xt.forEach((n,r)=>{Object.values(n.data).some(i=>i===e)&&(console.log("Removing dependent operation:",n),n.status="removed")});const t=xt.filter(n=>n.status!=="removed");xt.length=0,xt.push(...t)}const ue=_p(),Xc={users:{id:{type:"string"},email:{type:"string"},name:{type:"string"}},projects:{id:{type:"string"},name:{type:"string"},updated_at:{type:"string"},owner_id:{type:"number"}},project_members:{id:{type:"string"},project_id:{type:"string"},user_id:{type:"string"},role:{type:"string"}},reviews:{id:{type:"string"},project_id:{type:"string"},name:{type:"string"},created_at:{type:"string"}},review_assignments:{id:{type:"string"},review_id:{type:"string"},user_id:{type:"string"}},checklists:{id:{type:"string"},review_id:{type:"string"},reviewer_id:{type:"string"},type:{type:"string"},completed_at:{type:"string"},updated_at:{type:"string"}},checklist_answers:{id:{type:"string"},checklist_id:{type:"string"},question_key:{type:"string"},answers:{type:"string"},critical:{type:"boolean"},updated_at:{type:"string"}}};async function im(){const t=await(await navigator.storage.getDirectory()).getFileHandle("tinybase.json",{create:!0});ue.setSchema(Xc);const n=Hp(ue,t),[r,s]=Q([]),[i,o]=Q([]),[a,l]=Q([]),[c,u]=Q([]),[d,f]=Q([]),[m,w]=Q([]),[v,y]=Q([]),[A,_]=md({currentProject:null,currentReview:null,currentChecklist:null,dataLoading:!0});function E(){const R=ue.addTableListener("projects",()=>{const de=Object.entries(ue.getTable("projects")||{}).map(([J,fe])=>({...fe,id:J}));s(de)}),T=ue.addTableListener("users",()=>{const de=Object.entries(ue.getTable("users")||{}).map(([J,fe])=>({...fe,id:J}));o(de)}),W=ue.addTableListener("reviews",()=>{const de=Object.entries(ue.getTable("reviews")||{}).map(([J,fe])=>({...fe,id:J}));l(de)}),ie=ue.addTableListener("checklists",()=>{const de=Object.entries(ue.getTable("checklists")||{}).map(([J,fe])=>({...fe,id:J}));u(de)}),G=ue.addTableListener("checklist_answers",()=>{const de=Object.entries(ue.getTable("checklist_answers")||{}).map(([J,fe])=>{if(typeof fe.answers=="string")try{return{...fe,id:J,answers:JSON.parse(fe.answers)}}catch{return console.warn("Failed to parse answers JSON:",fe.answers),{...fe,id:J}}return{...fe,id:J}});f(de)}),me=ue.addTableListener("project_members",()=>{const de=Object.entries(ue.getTable("project_members")||{}).map(([J,fe])=>({...fe,id:J}));w(de)}),le=ue.addTableListener("review_assignments",()=>{const de=Object.entries(ue.getTable("review_assignments")||{}).map(([J,fe])=>({...fe,id:J}));y(de)});return()=>{ue.removeTableListener(R),ue.removeTableListener(T),ue.removeTableListener(W),ue.removeTableListener(ie),ue.removeTableListener(G),ue.removeTableListener(me),ue.removeTableListener(le)}}E(),Di(()=>{const R=Object.entries(ue.getTable("projects")||{}).map(([de,J])=>({...J,id:de}));s(R);const T=Object.entries(ue.getTable("users")||{}).map(([de,J])=>({...J,id:de}));o(T);const W=Object.entries(ue.getTable("reviews")||{}).map(([de,J])=>({...J,id:de}));l(W);const ie=Object.entries(ue.getTable("checklists")||{}).map(([de,J])=>({...J,id:de}));u(ie);const G=Object.entries(ue.getTable("checklist_answers")||{}).map(([de,J])=>{if(typeof J.answers=="string")try{return{...J,id:de,answers:JSON.parse(J.answers)}}catch{return{...J,id:de}}return{...J,id:de}});f(G);const me=Object.entries(ue.getTable("project_members")||{}).map(([de,J])=>({...J,id:de}));w(me);const le=Object.entries(ue.getTable("review_assignments")||{}).map(([de,J])=>({...J,id:de}));y(le),_("dataLoading",!1)});const j=async R=>{if(!R.id)throw new Error("Project must have an ID");let T={id:R.id,name:R.name,owner_id:1234,updated_at:new Date().toISOString()};tm("CREATE_PROJECT",R.name,R.id,ae()),ue.setRow("projects",R.id,T),console.log("Saved project:",T,ue.getTable("projects"))},U=async R=>(ue.delRow("projects",R),m().filter(ie=>ie.project_id===R).forEach(ie=>{ue.delRow("project_members",ie.id)}),a().filter(ie=>ie.project_id===R).forEach(ie=>{v().filter(le=>le.review_id===ie.id).forEach(le=>{ue.delRow("review_assignments",le.id)}),c().filter(le=>le.review_id===ie.id).forEach(le=>{d().filter(J=>J.checklist_id===le.id).forEach(J=>{ue.delRow("checklist_answers",J.id)}),ue.delRow("checklists",le.id)}),ue.delRow("reviews",ie.id)}),A.currentProject?.id===R&&_({currentProject:null,currentReview:null,currentChecklist:null}),!0),F=R=>{const T=r().find(W=>W.id===R)||null;return _("currentProject",T),_({currentReview:null,currentChecklist:null}),T},P=R=>{const T=a().find(W=>W.id===R)||null;return _("currentReview",T),_("currentChecklist",null),T},g=R=>{const T=c().find(W=>W.id===R)||null;return _("currentChecklist",T),T},p=async R=>{if(!R.id)throw new Error("Review must have an ID");if(!R.project_id)throw new Error("Review must have a project_id");return ue.setRow("reviews",R.id,R),R},x=async R=>a().find(G=>G.id===R)?(v().filter(G=>G.review_id===R).forEach(G=>{ue.delRow("review_assignments",G.id)}),c().filter(G=>G.review_id===R).forEach(G=>{d().filter(le=>le.checklist_id===G.id).forEach(le=>{ue.delRow("checklist_answers",le.id)}),ue.delRow("checklists",G.id)}),ue.delRow("reviews",R),A.currentReview?.id===R&&_({currentReview:null,currentChecklist:null}),!0):!1,C=async R=>{if(!R.id)throw new Error("Checklist must have an ID");if(!R.review_id)throw new Error("Checklist must have a review_id");return ue.setRow("checklists",R.id,R),R},N=async R=>(d().filter(W=>W.checklist_id===R).forEach(W=>{ue.delRow("checklist_answers",W.id)}),ue.delRow("checklists",R),A.currentChecklist?.id===R&&_("currentChecklist",null),!0),D=async R=>{if(!R.id)throw new Error("Answer must have an ID");if(!R.checklist_id)throw new Error("Answer must have a checklist_id");const T={...R};return typeof T.answers!="string"&&(Array.isArray(T.answers)||typeof T.answers=="object")&&(T.answers=JSON.stringify(T.answers)),ue.setRow("checklist_answers",R.id,T),R},O=async R=>(ue.delRow("checklist_answers",R),!0),X=async(R,T,W="member")=>{const ie=`${R}::${T}`,G={project_id:R,user_id:T,role:W};return ue.setRow("project_members",ie,G),G},re=async(R,T)=>{const W=`${R}::${T}`;return ue.delRow("project_members",W),!0},K=async(R,T)=>{const W=`${R}::${T}`,ie={review_id:R,user_id:T};return ue.setRow("review_assignments",W,ie),ie},H=async(R,T)=>{const W=`${R}::${T}`;return ue.delRow("review_assignments",W),!0},M=R=>a().filter(T=>T.project_id===R),te=R=>c().filter(T=>T.review_id===R),z=R=>d().filter(T=>T.checklist_id===R),B=R=>m().filter(T=>T.project_id===R),V=R=>v().filter(T=>T.review_id===R),oe=R=>{const T=m().filter(W=>W.user_id===R).map(W=>W.project_id);return r().filter(W=>T.includes(W.id))},ce=R=>{const T=c().find(W=>W.id===R);return!T||!T.reviewer_id?null:i().find(W=>W.id===T.reviewer_id)||null},ve=R=>{const T=c().find(W=>W.id===R);return T&&a().find(W=>W.id===T.review_id)||null},ke=R=>{const T=i().find(W=>W.id===R);return T?T.name:"Unknown User"},ae=()=>({projects:ue.getTable("projects")||{},project_members:ue.getTable("project_members")||{},reviews:ue.getTable("reviews")||{},review_assignments:ue.getTable("review_assignments")||{},checklists:ue.getTable("checklists")||{},checklist_answers:ue.getTable("checklist_answers")||{}});return{projects:r,users:i,reviews:a,checklists:c,checklistAnswers:d,projectMembers:m,reviewAssignments:v,state:A,setState:_,isLoaded:()=>!A.dataLoading,addProject:j,deleteProject:U,setCurrentProject:F,addReview:p,deleteReview:x,setCurrentReview:P,addChecklist:C,deleteChecklist:N,setCurrentChecklist:g,saveChecklistAnswer:D,deleteChecklistAnswer:O,addProjectMember:X,deleteProjectMember:re,addReviewAssignment:K,deleteReviewAssignment:H,getReviewsForProject:M,getChecklistsForReview:te,getAnswersForChecklist:z,getReviewForChecklist:ve,getProjectMembers:B,getReviewAssignments:V,getProjectsForUser:oe,getReviewerForChecklist:ce,getUserName:ke,tinyStore:ue,persister:n,getStoreSnapshot:ae,loadStoreSnapshot:R=>{Di(()=>{Object.keys(Xc).forEach(T=>{ue.delTable(T)}),Object.entries(R).forEach(([T,W])=>{Object.entries(W).forEach(([ie,G])=>{ue.setRow(T,ie,G)})})})}}}const Nt=await im();var om=I('<div class="bg-white rounded-lg shadow-md p-8 text-sm"><div class=flex><h3 class="font-semibold text-gray-900"></h3></div><div class="font-semibold text-gray-900 h-4 mt-2 mb-1"></div><div class="font-semibold text-gray-900 h-4 mt-2">'),am=I('<div class="bg-white rounded-lg shadow-md p-8 text-sm"><div class=flex><h3 class="font-semibold text-gray-900"></h3></div><div class="font-semibold text-gray-900 h-4 mt-2"></div><div class="font-semibold text-gray-900 h-4 mt-4">'),lm=I('<div class="bg-white rounded-lg shadow-md p-7"><div class=flex><h3 class="font-semibold text-sm text-gray-900 mb-1">'),cm=I("<div class=ml-auto><button>"),um=I('<div class="flex flex-col gap-4 sm:flex-row sm:gap-6">'),dm=I('<div><div class="font-semibold text-gray-800 text-xs break-words whitespace-normal min-w-0 w-full min-h-[2rem] flex items-center">'),fm=I('<div class="flex flex-col gap-2 mt-1">'),hm=I('<label class="flex items-center space-x-2 text-xs"><input type=radio class="w-3.5 h-3.5 text-blue-600 border-gray-300 focus:ring-blue-500 cursor-pointer"><span class="text-gray-700 break-words">'),gm=I('<div class="flex flex-col gap-2">'),pm=I('<label class="flex items-center space-x-2 text-xs"><input type=checkbox class="w-3 h-3 shrink-0 text-blue-600 border-gray-300 focus:ring-blue-500"><span class="text-gray-700 break-words">'),mm=I("<div class=space-y-6>"),wm=I('<div class="min-h-screen bg-linear-to-br from-blue-50 to-indigo-100"><div class="container mx-auto px-4 py-6 max-w-5xl"><div class="bg-white rounded-lg shadow-lg p-6 mb-8"><h1 class="text-2xl font-bold text-gray-900 mb-4">AMSTAR 2 Checklist</h1><div class="grid md:grid-cols-3 gap-4 text-xs"><div><label for=reviewName class="block font-medium text-gray-700 mb-2">Review Title</label><input type=text id=reviewName class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"placeholder="Enter review title"></div><div><label for=reviewerName class="block font-medium text-gray-700 mb-2">Reviewer Name</label><input type=text id=reviewerName class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"placeholder="Enter your name"></div><div><label for=reviewDate class="block font-medium text-gray-700 mb-2">Review Date</label><input type=date id=reviewDate class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs">'),vm=I("<div>Loading...");function ym(e){const t=()=>e.checklistState().q1,n=gt.q1;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].every(Boolean);o[2][0]=l,o[2][1]=!l}s===2&&(i===0&&o[2][0]&&(o[2][1]=!1),i===1&&o[2][1]&&(o[2][0]=!1));const a={...e.checklistState().q1,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function bm(e){const t=()=>e.checklistState().q2,n=gt.q2;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q2,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function xm(e){const t=()=>e.checklistState().q3,n=gt.q3;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q3,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function _m(e){const t=()=>e.checklistState().q4,n=gt.q4;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q4,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function km(e){const t=()=>e.checklistState().q5,n=gt.q5;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q5,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function $m(e){const t=()=>e.checklistState().q6,n=gt.q6;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q6,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function Sm(e){const t=()=>e.checklistState().q7,n=gt.q7;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q7,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function Cm(e){const t=()=>e.checklistState().q8,n=gt.q8;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q8,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function Em(e){const t=()=>e.checklistState().q9a,n=()=>e.checklistState().q9b,r=gt.q9;function s(a,l){const c=t().answers.map(d=>[...d]);if(c[a][l]=!t().answers[a][l],a===0||a===1){const d=c[0].every(Boolean),f=d&&c[1].every(Boolean);c[2][0]=f,c[2][1]=!f&&d,c[2][2]=!f&&!d,c[2][3]=!1}a===2&&(c[2]=c[2].map((d,f)=>f===l?!t().answers[2][l]:!1));const u={...e.checklistState().q9a,answers:c};e.onUpdatea(u)}function i(a,l){const c=n().answers.map(d=>[...d]);if(c[a][l]=!n().answers[a][l],a===0||a===1){const d=c[0].every(Boolean),f=d&&c[1].every(Boolean);c[2][0]=f,c[2][1]=!f&&d,c[2][2]=!f&&!d,c[2][3]=!1}a===2&&(c[2]=c[2].map((d,f)=>f===l?!n().answers[2][l]:!1));const u={...e.checklistState().q9b,answers:c};console.log("Updating q9b to",u),e.onUpdateb(u)}function o(a){const l=a.critical,c={...t(),critical:l},u={...n(),critical:l};e.onUpdatea(c),setTimeout(()=>{e.onUpdateb(u)},10)}return(()=>{var a=om(),l=a.firstChild,c=l.firstChild,u=l.nextSibling,d=u.nextSibling;return b(c,()=>r.text),b(l,k(hl,{state:t,onUpdate:o}),null),b(u,()=>r.subtitle),b(a,k(Es,{state:t,question:{text:"q9a"},get columns(){return r.columns},handleChange:s}),d),b(d,()=>r.subtitle2),b(a,k(Es,{state:n,question:{text:"q9b"},get columns(){return r.columns2},handleChange:i}),null),a})()}function Am(e){const t=()=>e.checklistState().q10,n=gt.q10;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q10,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function Rm(e){const t=()=>e.checklistState().q11a,n=()=>e.checklistState().q11b,r=gt.q11;function s(a,l){const c=t().answers.map(d=>[...d]);if(c[a][l]=!t().answers[a][l],a===0){const d=c[0].every(Boolean);c[1][0]=d,c[1][1]=!d,c[1][2]=!1}a===1&&(c[1]=c[1].map((d,f)=>f===l?!t().answers[1][l]:!1));const u={...e.checklistState().q11a,answers:c};e.onUpdatea(u)}function i(a,l){const c=n().answers.map(d=>[...d]);if(c[a][l]=!n().answers[a][l],a===0){const d=c[0].every(Boolean);c[1][0]=d,c[1][1]=!d,c[1][2]=!1}a===1&&(c[1]=c[1].map((d,f)=>f===l?!n().answers[1][l]:!1));const u={...e.checklistState().q11b,answers:c};e.onUpdateb(u)}function o(a){const l=a.critical,c={...t(),critical:l},u={...n(),critical:l};e.onUpdatea(c),setTimeout(()=>{e.onUpdateb(u)},10)}return(()=>{var a=am(),l=a.firstChild,c=l.firstChild,u=l.nextSibling,d=u.nextSibling;return b(c,()=>r.text),b(l,k(hl,{state:t,onUpdate:o}),null),b(u,()=>r.subtitle),b(a,k(Es,{state:t,question:{text:"q11a"},get columns(){return r.columns},handleChange:s,width:"w-48"}),d),b(d,()=>r.subtitle2),b(a,k(Es,{state:n,question:{text:"q11b"},get columns(){return r.columns2},handleChange:i,width:"w-48"}),null),a})()}function Pm(e){const t=()=>e.checklistState().q12,n=gt.q12;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l,o[1][2]=!1}s===1&&(o[1]=o[1].map((l,c)=>c===i?!t().answers[1][i]:!1));const a={...e.checklistState().q12,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e,{width:"w-48"}))}function Tm(e){const t=()=>e.checklistState().q13,n=gt.q13;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q13,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function jm(e){const t=()=>e.checklistState().q14,n=gt.q14;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q14,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function Mm(e){const t=()=>e.checklistState().q15,n=gt.q15;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l,o[1][2]=!1}s===1&&(o[1]=o[1].map((l,c)=>c===i?!t().answers[1][i]:!1));const a={...e.checklistState().q15,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e,{width:"w-48"}))}function Lm(e){const t=()=>e.checklistState().q16,n=gt.q16;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q16,answers:o};e.onUpdate(a)}return k(St,Ae({state:t,question:n,handleChange:r},e))}function St(e){return(()=>{var t=lm(),n=t.firstChild,r=n.firstChild;return b(r,()=>e.question.text),b(n,k(hl,{get state(){return e.state},get onUpdate(){return e.onUpdate}}),null),b(t,k(Es,Ae({get columns(){return e.question.columns}},e)),null),t})()}function hl(e){function t(n){const r={...e.state(),critical:n};e.onUpdate(r)}return(()=>{var n=cm(),r=n.firstChild;return r.$$click=()=>t(!e.state().critical),b(r,()=>e.state().critical?"Critical":"Not Critical"),pe(s=>{var i=`ml-2 px-3 h-6 rounded-full text-xs font-medium transition-colors text-nowrap
        ${e.state().critical?"bg-red-100 text-red-700 border border-red-300 hover:bg-red-200":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,o=e.state().critical;return i!==s.e&&ht(r,s.e=i),o!==s.t&&$t(r,"aria-pressed",s.t=o),s},{e:void 0,t:void 0}),n})()}function Es(e){return(()=>{var t=um();return b(t,k(Ee,{get each(){return e.columns},children:(n,r)=>(()=>{var s=dm(),i=s.firstChild;return b(i,()=>n.label),b(s,(()=>{var o=et(()=>r()===e.columns.length-1);return()=>o()?(()=>{var a=fm();return b(a,k(Ee,{get each(){return n.options},children:(l,c)=>(()=>{var u=hm(),d=u.firstChild,f=d.nextSibling;return d.addEventListener("change",()=>e.handleChange(r(),c())),b(f,l),pe(()=>$t(d,"name",`col-${r()}-${e.question?.text??""}`)),pe(()=>d.checked=e.state().answers[r()][c()]),u})()})),a})():(()=>{var a=gm();return b(a,k(Ee,{get each(){return n.options},children:(l,c)=>(()=>{var u=pm(),d=u.firstChild,f=d.nextSibling;return d.addEventListener("change",()=>e.handleChange(r(),c())),b(f,l),pe(()=>d.checked=e.state().answers[r()][c()]),u})()})),a})()})(),null),pe(()=>ht(s,r()===e.columns.length-1?`${e.width??"w-32"} flex flex-col min-w-0`:"flex-1 flex flex-col min-w-0")),s})()})),t})()}function Zc(){const[e,t]=Q(""),[n,r]=Q(""),[s,i]=Q(""),{getAnswersForChecklist:o,getReviewerForChecklist:a,getReviewForChecklist:l}=Nt,{dataLoading:c}=Br(),[u,d]=Q(null),f=_o(),m=nn();Ie(async()=>{if(f.checklistId==="new"){const v=Ss({name:"New 2 Checklist",id:await Ci(),createdAt:Date.now(),reviewerName:""});d(v),f.projectId&&f.reviewId&&m(`/projects/${f.projectId}/reviews/${f.reviewId}/checklists/${v.id}`,{replace:!0})}else if(f.checklistId!==void 0){const v=o(f.checklistId),y=l(f.checklistId);if(!y)return;const A=Ss({name:y.name,id:f.checklistId,reviewerName:a(f.checklistId)?.name,createdAt:y.created_at});v.forEach(_=>{A[_.question_key]&&(A[_.question_key].answers=_.answers,A[_.question_key].critical=_.critical)}),d(A)}else c()||(console.warn("AMSTAR2Checklist: No current checklist found for",f.checklistId),m("/dashboard"))}),Ie(()=>{u()&&(t(u().name||""),r(u().reviewerName||""),i(u().createdAt||""))});const w=v=>{const y=u(),A={...y,...v};Object.keys(v).forEach(async _=>{if(/^q\d+[a-z]*$/i.test(_)&&A[_])try{await zd(A.id,_,A[_].answers,A[_].critical)}catch(E){console.error("Failed to save answer for",_,E),d(j=>({...j,[_]:y[_]}));return}}),d(A)};return(()=>{var v=wm(),y=v.firstChild,A=y.firstChild,_=A.firstChild,E=_.nextSibling,j=E.firstChild,U=j.firstChild,F=U.nextSibling,P=j.nextSibling,g=P.firstChild,p=g.nextSibling,x=P.nextSibling,C=x.firstChild,N=C.nextSibling;return F.addEventListener("change",D=>{if(t(D.target.value),w({name:D.target.value}),console.log("Review name changed to",D.target.value),f.projectSlug&&f.reviewSlug&&f.checklistSlug&&u()){const O=f.checklistSlug.lastIndexOf("-"),X=O!==-1?f.checklistSlug.slice(O+1):f.checklistSlug,re=ys(D.target.value)+"-"+X;m(`/projects/${f.projectSlug}/reviews/${f.reviewSlug}/checklists/${re}`,{replace:!0})}}),p.addEventListener("change",D=>{r(D.target.value),w({reviewerName:D.target.value})}),N.addEventListener("change",D=>{i(D.target.value),w({reviewDate:D.target.value})}),b(y,k(_e,{get when(){return et(()=>!c())()&&u()},get fallback(){return vm()},get children(){var D=mm();return b(D,k(ym,{onUpdate:O=>w({q1:O}),checklistState:u}),null),b(D,k(bm,{onUpdate:O=>w({q2:O}),checklistState:u}),null),b(D,k(xm,{onUpdate:O=>w({q3:O}),checklistState:u}),null),b(D,k(_m,{onUpdate:O=>w({q4:O}),checklistState:u}),null),b(D,k(km,{onUpdate:O=>w({q5:O}),checklistState:u}),null),b(D,k($m,{onUpdate:O=>w({q6:O}),checklistState:u}),null),b(D,k(Sm,{onUpdate:O=>w({q7:O}),checklistState:u}),null),b(D,k(Cm,{onUpdate:O=>w({q8:O}),checklistState:u}),null),b(D,k(Em,{onUpdatea:O=>w({q9a:O}),onUpdateb:O=>w({q9b:O}),checklistState:u}),null),b(D,k(Am,{onUpdate:O=>w({q10:O}),checklistState:u}),null),b(D,k(Rm,{onUpdatea:O=>w({q11a:O}),onUpdateb:O=>w({q11b:O}),checklistState:u}),null),b(D,k(Pm,{onUpdate:O=>w({q12:O}),checklistState:u}),null),b(D,k(Tm,{onUpdate:O=>w({q13:O}),checklistState:u}),null),b(D,k(jm,{onUpdate:O=>w({q14:O}),checklistState:u}),null),b(D,k(Mm,{onUpdate:O=>w({q15:O}),checklistState:u}),null),b(D,k(Lm,{onUpdate:O=>w({q16:O}),checklistState:u}),null),D}}),null),pe(()=>F.value=e()),pe(()=>p.value=n()),pe(()=>N.value=s()),v})()}tt(["click"]);var Nm=I('<div class="absolute w-full z-50"><ul class="max-h-[240px] overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg divide-y divide-gray-100">'),Om=I('<div class="absolute w-full z-50"><div class="bg-white border border-gray-200 rounded-lg shadow-lg p-6 flex flex-col items-center justify-center text-gray-500"><svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600"xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Searching...'),Dm=I('<div class="absolute w-full z-50"><div class="bg-white border border-gray-200 rounded-lg shadow-lg p-6 flex flex-col items-center justify-center text-gray-500"><svg class="h-12 w-12 text-gray-300 mb-2"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=1 d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=text-sm>No users found'),qm=I('<div class="absolute w-full z-50"><div class="bg-white border border-gray-200 rounded-lg shadow-lg p-4 text-center"><p class="text-sm text-gray-500">Type at least 2 characters to search'),Fm=I('<div class="rounded-lg bg-red-50 border border-red-200 p-4 flex items-start"><svg class="h-5 w-5 text-red-400 mt-0.5 mr-3 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"clip-rule=evenodd></path></svg><p class="text-sm text-red-800">'),Vm=I('<div class="rounded-lg bg-green-50 border border-green-200 p-4 flex items-start"><svg class="h-5 w-5 text-green-400 mt-0.5 mr-3 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg><p class="text-sm text-green-800">'),Um=I('<div class="fixed inset-0 z-50 w-full flex items-center justify-center bg-black/40 overflow-auto py-8"tabindex=-1 aria-label="Close dialog on backdrop click or Escape"><div class="max-w-2xl w-full mx-auto p-6 md:p-8 bg-white rounded-xl shadow-lg border border-gray-100 m-4"tabindex=0 aria-modal=true role=dialog><div class="flex justify-between items-start mb-6"><div><h3 class="text-2xl font-bold text-gray-900 mb-2">Add Team Members</h3><p class="text-sm text-gray-600">Search for users or add them directly by email</p></div><button class="text-gray-400 hover:text-gray-600 focus:outline-none"aria-label="Close dialog"><svg class="h-6 w-6"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class=mb-8><div class=relative><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><input type=text placeholder="Search users by name or email"class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"autocomplete=off></div><div class="relative mt-3"></div></div><div class="relative mb-8"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-4 bg-white text-gray-500 font-medium">Or add by email</span></div></div><div class=space-y-4><div><label for=email class="block text-sm font-medium text-gray-700 mb-2">Email Address</label><input id=email type=email placeholder=colleague@example.com class="block w-full px-4 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"></div><button class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg">Add to Project</button><div class="h-[20px] mt-4"></div><div class="flex justify-end mt-8 pt-4 border-t border-gray-200"><button class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg mr-3 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Cancel</button><button class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Done'),Im=I('<li tabindex=0 role=button class="px-4 py-3 hover:bg-blue-50 cursor-pointer transition-colors duration-150 flex items-center justify-between group"><div class="flex items-center min-w-0"><div class="flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm"></div><div class="ml-3 min-w-0 flex-1"><p class="text-sm font-medium text-gray-900 truncate"></p><p class="text-sm text-gray-500 truncate"></p></div></div><svg class="h-5 w-5 text-gray-400 group-hover:text-blue-600 transition-colors"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">');function Hm(e){const{searchUsers:t,addUserToProjectByEmail:n}=Br(),[r,s]=Q(""),[i,o]=Q([]),[a,l]=Q(!1),[c,u]=Q(""),[d,f]=Q(""),[m,w]=Q("");let v;Ie(()=>{const _=r();if(!_||_.length<2){o([]);return}clearTimeout(v),_.length>=2&&(l(!0),u(""),v=setTimeout(async()=>{try{const E=await t(_);await new Promise(j=>setTimeout(j,100)),o(E)}catch(E){console.error("Search error:",E),u("Failed to search users"),o([])}finally{l(!1)}},100))});const y=async _=>{w(_.email),s(""),o([])},A=async _=>{if(_.preventDefault(),!m()){u("Please enter an email address");return}u(""),f("");try{const E=await n(e.projectId,m());f(`Added ${E.user.name} (${E.user.email}) to the project`),w("")}catch(E){u(E.message||"Failed to add user to project")}};return k(_e,{get when(){return e.open},get children(){return k(rd,{get children(){var _=Um(),E=_.firstChild,j=E.firstChild,U=j.firstChild,F=U.nextSibling,P=j.nextSibling,g=P.firstChild,p=g.firstChild,x=p.nextSibling,C=g.nextSibling,N=P.nextSibling,D=N.nextSibling,O=D.firstChild,X=O.firstChild,re=X.nextSibling,K=O.nextSibling,H=K.nextSibling,M=H.nextSibling,te=M.firstChild,z=te.nextSibling;return _.$$keydown=B=>{B.key==="Escape"&&e.onClose?.()},_.$$click=B=>{B.target===B.currentTarget&&e.onClose?.()},E.$$keydown=()=>{},E.$$click=B=>B.stopPropagation(),F.$$click=()=>e.onClose?.(),x.$$input=B=>s(B.target.value),b(C,k(_e,{get when(){return i().length>0},get children(){var B=Nm(),V=B.firstChild;return b(V,k(Ee,{get each(){return i()},children:oe=>(()=>{var ce=Im(),ve=ce.firstChild,ke=ve.firstChild,ae=ke.nextSibling,se=ae.firstChild,R=se.nextSibling;return ce.$$keydown=T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),y(oe))},ce.$$click=()=>y(oe),b(ke,()=>oe.name?.charAt(0).toUpperCase()),b(se,()=>oe.name),b(R,()=>oe.email),pe(()=>$t(ce,"aria-label",`Select user ${oe.name}`)),ce})()})),B}}),null),b(C,k(_e,{get when(){return a()},get children(){return Om()}}),null),b(C,k(_e,{get when(){return et(()=>!a()&&r().length>=2)()&&i().length===0},get children(){return Dm()}}),null),b(C,k(_e,{get when(){return et(()=>r().length<2&&!a())()&&r().length>0},get children(){return qm()}}),null),re.addEventListener("keypress",B=>B.key==="Enter"&&A(B)),re.$$input=B=>w(B.target.value),K.$$click=A,b(H,k(_e,{get when(){return c()},get children(){var B=Fm(),V=B.firstChild,oe=V.nextSibling;return b(oe,c),B}}),null),b(H,k(_e,{get when(){return d()},get children(){var B=Vm(),V=B.firstChild,oe=V.nextSibling;return b(oe,d),B}}),null),te.$$click=()=>e.onClose?.(),z.$$click=()=>e.onClose?.(),pe(()=>x.value=r()),pe(()=>re.value=m()),_}})}})}tt(["click","keydown","input"]);var Bm=I('<div class="flex flex-wrap items-center justify-between mb-4 gap-2"><h2 class="text-xl font-bold"></h2><div class="flex gap-2"><button class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition flex items-center"><svg class="w-4 h-4 mr-1"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path></svg>Manage Members</button><button class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition">Delete Project');function zm(e){return(()=>{var t=Bm(),n=t.firstChild,r=n.nextSibling,s=r.firstChild,i=s.nextSibling;return b(n,()=>e.project.name),An(s,"click",e.onManageMembers,!0),i.$$click=()=>e.onDeleteProject(e.project.id),t})()}tt(["click"]);var Wm=I("<svg stroke-width=0>");function gr(e,t){const n=Ae(e.a,t),[r,s]=ed(n,["src"]),[i,o]=Q(""),a=Fe(()=>t.title?`${e.c}<title>${t.title}</title>`:e.c);return Ie(()=>o(a())),yt(()=>{o("")}),(()=>{var l=Wm();return vt(l,Ae({get stroke(){return e.a?.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},s,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return i()}}),!0,!0),b(l,()=>nd),l})()}function Ym(e){return gr({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><path d="M1 1 23 23"/>'},e)}function Jm(e){return gr({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><path d="M12 9A3 3 0 1 0 12 15 3 3 0 1 0 12 9z"/>'},e)}function Qm(e){return gr({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M3 12 21 12"/><path d="M3 6 21 6"/><path d="M3 18 21 18"/>'},e)}function Km(e){return gr({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><path d="M12 3A4 4 0 1 0 12 11 4 4 0 1 0 12 3z"/>'},e)}function Gm(e){return gr({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><path d="M9 3A4 4 0 1 0 9 11 4 4 0 1 0 9 3z"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/>'},e)}function Xm(e){return gr({a:{viewBox:"0 0 1024 1024"},c:'<path d="M112 880c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V460H112v420zm768-696H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v176h800V216c0-17.7-14.3-32-32-32z"/>'},e)}function hs(e){return gr({a:{viewBox:"0 0 1024 1024"},c:'<path d="M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"/>'},e)}var Zm=I('<div class="mb-6 p-2 "><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"><div class="flex items-center text-sm text-gray-600">Created: <span class="font-medium ml-1"></span></div><div class="flex items-center"><span class="text-sm text-gray-600 mr-2">Members:</span><div class="flex flex-wrap gap-1">'),ew=I('<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">'),tw=I('<span class="text-xs text-gray-400 italic">No members');function nw(e){const{getUserName:t}=Nt;function n(r){const s=new Date(r),i=new Date;return s.getFullYear()===i.getFullYear()&&s.getMonth()===i.getMonth()&&s.getDate()===i.getDate()?s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s.toLocaleDateString()}return(()=>{var r=Zm(),s=r.firstChild,i=s.firstChild,o=i.firstChild,a=o.nextSibling,l=i.nextSibling,c=l.firstChild,u=c.nextSibling;return b(i,k(Xm,{class:"w-4 h-4 mr-2 text-gray-400"}),o),b(a,()=>n(e.updatedAt)),b(l,k(Gm,{class:"w-4 h-4 mr-2 text-gray-400"}),c),b(u,k(Ee,{get each(){return e.members()},children:d=>(()=>{var f=ew();return b(f,()=>t(d.user_id)),f})()}),null),b(u,(()=>{var d=et(()=>!e.members()||e.members().length===0);return()=>d()&&tw()})(),null),r})()}var rw=I('<div class="mb-6 p-4 bg-white rounded-lg shadow-sm"><h3 class="text-base font-semibold mb-3 flex items-center"><svg class="w-5 h-5 mr-2 text-green-500"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"></path></svg>Add New Review</h3><div class="flex gap-2 items-center"><input type=text class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 w-64 text-sm"placeholder="Review (study/article) name"><button class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition text-sm flex items-center"><svg class="w-4 h-4 mr-1"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path fillRule=evenodd d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"clipRule=evenodd></path></svg>Add Review');function sw(e){const[t,n]=Q(""),r=async()=>{t().trim()&&(await e.onAddReview(t()),n(""))};return(()=>{var s=rw(),i=s.firstChild,o=i.nextSibling,a=o.firstChild,l=a.nextSibling;return a.$$input=c=>n(c.target.value),l.$$click=r,pe(()=>l.disabled=!t().trim()),pe(()=>a.value=t()),s})()}tt(["input","click"]);var iw=I('<div class="group bg-white border border-gray-200 rounded hover:shadow-sm hover:border-blue-300 transition-all duration-200"><div class="flex items-center justify-between"><button class="flex-1 text-left min-w-0 p-2 cursor-pointer"><div class="flex items-center justify-between"><div class="flex items-center text-xs text-gray-500">Reviewer: <span class=ml-3>Updated: </span></div><span class="ml-2 text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity text-xs">Open →</span></div></button><button class="mx-2 p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors opacity-0 group-hover:opacity-100"title="Delete checklist"><svg class="h-3 w-3"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),ow=I('<span class="italic text-gray-400">Unassigned');function aw(e){const t=new Date(e),n=new Date;return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString()}function lw(e){const{getReviewerForChecklist:t}=Nt,n=t(e.checklist.id);return(()=>{var r=iw(),s=r.firstChild,i=s.firstChild,o=i.firstChild,a=o.firstChild,l=a.firstChild,c=l.nextSibling;c.firstChild;var u=i.nextSibling;return i.$$click=()=>e.onChecklistClick(n,e.checklist),b(a,k(Km,{class:"w-4 h-4 mr-2 text-gray-500"}),l),b(a,()=>n?.name||ow(),c),b(c,()=>aw(e.checklist.updated_at),null),u.$$click=d=>{d.stopPropagation(),e.onDeleteChecklist(e.checklist.id)},r})()}tt(["click"]);var cw=I('<div><div class=space-y-1></div><div class="mt-3 p-2 rounded "><div class="flex gap-2"><button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs font-medium">+ Add Checklist'),uw=I('<div class="text-center py-4 text-gray-500"><p class=text-xs>No checklists yet. Add one above to get started.');function dw(e){const t=async()=>{await e.onAddChecklist(e.reviewId)};return(()=>{var n=cw(),r=n.firstChild,s=r.nextSibling,i=s.firstChild,o=i.firstChild;return b(r,k(Ee,{get each(){return e.checklists()||[]},children:a=>k(lw,{checklist:a,get onChecklistClick(){return e.onChecklistClick},onDeleteChecklist:l=>e.onDeleteChecklist(l)})}),null),b(r,(()=>{var a=et(()=>!e.checklists()||e.checklists().length===0);return()=>a()&&uw()})(),null),o.$$click=t,n})()}tt(["click"]);var fw=I('<div class="bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200"><div class="px-4 py-2 border-b border-gray-100"><div class="flex items-center justify-between"><div class="flex-1 min-w-0"><h4 class="text-base font-semibold text-gray-900 truncate"></h4></div><button class="ml-3 p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors"title="Delete review"><svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div><div class=p-4>');function hw(e){const{getChecklistsForReview:t}=Nt;return(()=>{var n=fw(),r=n.firstChild,s=r.firstChild,i=s.firstChild,o=i.firstChild,a=i.nextSibling,l=r.nextSibling;return b(o,()=>e.review.name),a.$$click=()=>e.onDeleteReview(),b(l,k(dw,{checklists:()=>t(e.review.id),get reviewId(){return e.review.id},get onChecklistClick(){return e.onChecklistClick},get onDeleteChecklist(){return e.onDeleteChecklist},get onAddChecklist(){return e.onAddChecklist}})),n})()}tt(["click"]);var gw=I('<div class=mb-6><div class="flex items-center mb-3"><h3 class="text-lg font-semibold text-gray-900">Reviews</h3><div class=ml-auto><span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"> reviews</span></div></div><div class=space-y-3>'),pw=I('<div class="text-center py-8 bg-white rounded-lg border-2 border-dashed border-gray-300"><div class="text-gray-400 mb-3"><svg class="mx-auto h-10 w-10"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg></div><h4 class="text-base font-medium text-gray-900 mb-1">No reviews yet</h4><p class="text-sm text-gray-500">Add your first review to get started.');function mw(e){return(()=>{var t=gw(),n=t.firstChild,r=n.firstChild,s=r.nextSibling,i=s.firstChild,o=i.firstChild,a=n.nextSibling;return b(i,()=>e.reviews()?.length||0,o),b(a,k(Ee,{get each(){return e.reviews()||[]},children:l=>k(hw,{review:l,onDeleteReview:()=>e.onDeleteReview(l.id),get onChecklistClick(){return e.onChecklistClick},get onDeleteChecklist(){return e.onDeleteChecklist},get onAddChecklist(){return e.onAddChecklist}})}),null),b(a,(()=>{var l=et(()=>!e.reviews()||e.reviews().length===0);return()=>l()&&pw()})(),null),t})()}tt(["click"]);function Ri(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ww(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wd(e){let t,n,r;e.length!==2?(t=Ri,n=(a,l)=>Ri(e(a),l),r=(a,l)=>e(a)-l):(t=e===Ri||e===ww?e:vw,n=e,r=e);function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=s(a,l,c,u-1);return d>c&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:s,center:o,right:i}}function vw(){return 0}function yw(e){return e===null?NaN:+e}const bw=Wd(Ri),xw=bw.right;Wd(yw).center;class eu extends Map{constructor(t,n=$w){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(tu(this,t))}has(t){return super.has(tu(this,t))}set(t,n){return super.set(_w(this,t),n)}delete(t){return super.delete(kw(this,t))}}function tu({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function _w({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function kw({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function $w(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Sw=Math.sqrt(50),Cw=Math.sqrt(10),Ew=Math.sqrt(2);function Xi(e,t,n){const r=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=Sw?10:i>=Cw?5:i>=Ew?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Xi(e,t,n*2):[a,l,c]}function Aw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[s,i,o]=r?Xi(t,e,n):Xi(e,t,n);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function La(e,t,n){return t=+t,e=+e,n=+n,Xi(e,t,n)[2]}function Rw(e,t,n){t=+t,e=+e,n=+n;const r=t<e,s=r?La(t,e,n):La(e,t,n);return(r?-1:1)*(s<0?1/-s:s)}function Yd(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++r<s;)i[r]=e+r*n;return i}function Pw(e){return e}var Tw=3,nu=1e-6;function jw(e){return"translate("+e+",0)"}function Mw(e){return t=>+e(t)}function Lw(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Nw(){return!this.__axis}function Ow(e,t){var n=[],r=null,s=null,i=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1,u="y",d=jw;function f(m){var w=r??(t.ticks?t.ticks.apply(t,n):t.domain()),v=s??(t.tickFormat?t.tickFormat.apply(t,n):Pw),y=Math.max(i,0)+a,A=t.range(),_=+A[0]+l,E=+A[A.length-1]+l,j=(t.bandwidth?Lw:Mw)(t.copy(),l),U=m.selection?m.selection():m,F=U.selectAll(".domain").data([null]),P=U.selectAll(".tick").data(w,t).order(),g=P.exit(),p=P.enter().append("g").attr("class","tick"),x=P.select("line"),C=P.select("text");F=F.merge(F.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(p),x=x.merge(p.append("line").attr("stroke","currentColor").attr(u+"2",c*i)),C=C.merge(p.append("text").attr("fill","currentColor").attr(u,c*y).attr("dy","0.71em")),m!==U&&(F=F.transition(m),P=P.transition(m),x=x.transition(m),C=C.transition(m),g=g.transition(m).attr("opacity",nu).attr("transform",function(N){return isFinite(N=j(N))?d(N+l):this.getAttribute("transform")}),p.attr("opacity",nu).attr("transform",function(N){var D=this.parentNode.__axis;return d((D&&isFinite(D=D(N))?D:j(N))+l)})),g.remove(),F.attr("d",o?"M"+_+","+c*o+"V"+l+"H"+E+"V"+c*o:"M"+_+","+l+"H"+E),P.attr("opacity",1).attr("transform",function(N){return d(j(N)+l)}),x.attr(u+"2",c*i),C.attr(u,c*y).text(v),U.filter(Nw).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),U.each(function(){this.__axis=j})}return f.scale=function(m){return arguments.length?(t=m,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),f):n.slice()},f.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),f):r&&r.slice()},f.tickFormat=function(m){return arguments.length?(s=m,f):s},f.tickSize=function(m){return arguments.length?(i=o=+m,f):i},f.tickSizeInner=function(m){return arguments.length?(i=+m,f):i},f.tickSizeOuter=function(m){return arguments.length?(o=+m,f):o},f.tickPadding=function(m){return arguments.length?(a=+m,f):a},f.offset=function(m){return arguments.length?(l=+m,f):l},f}function Dw(e){return Ow(Tw,e)}var qw={value:()=>{}};function Jd(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Pi(n)}function Pi(e){this._=e}function Fw(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Pi.prototype=Jd.prototype={constructor:Pi,on:function(e,t){var n=this._,r=Fw(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=Vw(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=ru(n[s],e.name,t);else if(t==null)for(s in n)n[s]=ru(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Pi(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function Vw(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function ru(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=qw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Na="http://www.w3.org/1999/xhtml";const su={svg:"http://www.w3.org/2000/svg",xhtml:Na,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ro(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),su.hasOwnProperty(t)?{space:su[t],local:e}:e}function Uw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Na&&t.documentElement.namespaceURI===Na?t.createElement(e):t.createElementNS(n,e)}}function Iw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Qd(e){var t=Ro(e);return(t.local?Iw:Uw)(t)}function Hw(){}function gl(e){return e==null?Hw:function(){return this.querySelector(e)}}function Bw(e){typeof e!="function"&&(e=gl(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=e.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Pt(r,this._parents)}function zw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ww(){return[]}function Kd(e){return e==null?Ww:function(){return this.querySelectorAll(e)}}function Yw(e){return function(){return zw(e.apply(this,arguments))}}function Jw(e){typeof e=="function"?e=Yw(e):e=Kd(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),s.push(l));return new Pt(r,s)}function Gd(e){return function(){return this.matches(e)}}function Xd(e){return function(t){return t.matches(e)}}var Qw=Array.prototype.find;function Kw(e){return function(){return Qw.call(this.children,e)}}function Gw(){return this.firstElementChild}function Xw(e){return this.select(e==null?Gw:Kw(typeof e=="function"?e:Xd(e)))}var Zw=Array.prototype.filter;function ev(){return Array.from(this.children)}function tv(e){return function(){return Zw.call(this.children,e)}}function nv(e){return this.selectAll(e==null?ev:tv(typeof e=="function"?e:Xd(e)))}function rv(e){typeof e!="function"&&(e=Gd(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new Pt(r,this._parents)}function Zd(e){return new Array(e.length)}function sv(){return new Pt(this._enter||this._groups.map(Zd),this._parents)}function Zi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Zi.prototype={constructor:Zi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function iv(e){return function(){return e}}function ov(e,t,n,r,s,i){for(var o=0,a,l=t.length,c=i.length;o<c;++o)(a=t[o])?(a.__data__=i[o],r[o]=a):n[o]=new Zi(e,i[o]);for(;o<l;++o)(a=t[o])&&(s[o]=a)}function av(e,t,n,r,s,i,o){var a,l,c=new Map,u=t.length,d=i.length,f=new Array(u),m;for(a=0;a<u;++a)(l=t[a])&&(f[a]=m=o.call(l,l.__data__,a,t)+"",c.has(m)?s[a]=l:c.set(m,l));for(a=0;a<d;++a)m=o.call(e,i[a],a,i)+"",(l=c.get(m))?(r[a]=l,l.__data__=i[a],c.delete(m)):n[a]=new Zi(e,i[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(f[a])===l&&(s[a]=l)}function lv(e){return e.__data__}function cv(e,t){if(!arguments.length)return Array.from(this,lv);var n=t?av:ov,r=this._parents,s=this._groups;typeof e!="function"&&(e=iv(e));for(var i=s.length,o=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],d=s[c],f=d.length,m=uv(e.call(u,u&&u.__data__,c,r)),w=m.length,v=a[c]=new Array(w),y=o[c]=new Array(w),A=l[c]=new Array(f);n(u,d,v,y,A,m,t);for(var _=0,E=0,j,U;_<w;++_)if(j=v[_]){for(_>=E&&(E=_+1);!(U=y[E])&&++E<w;);j._next=U||null}}return o=new Pt(o,r),o._enter=a,o._exit=l,o}function uv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dv(){return new Pt(this._exit||this._groups.map(Zd),this._parents)}function fv(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function hv(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),a=new Array(s),l=0;l<o;++l)for(var c=n[l],u=r[l],d=c.length,f=a[l]=new Array(d),m,w=0;w<d;++w)(m=c[w]||u[w])&&(f[w]=m);for(;l<s;++l)a[l]=n[l];return new Pt(a,this._parents)}function gv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function pv(e){e||(e=mv);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],a=o.length,l=s[i]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Pt(s,this._parents).order()}function mv(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function wv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vv(){return Array.from(this)}function yv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function bv(){let e=0;for(const t of this)++e;return e}function xv(){return!this.node()}function _v(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,a;i<o;++i)(a=s[i])&&e.call(a,a.__data__,i,s);return this}function kv(e){return function(){this.removeAttribute(e)}}function $v(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Sv(e,t){return function(){this.setAttribute(e,t)}}function Cv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ev(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Av(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Rv(e,t){var n=Ro(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?$v:kv:typeof t=="function"?n.local?Av:Ev:n.local?Cv:Sv)(n,t))}function ef(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Pv(e){return function(){this.style.removeProperty(e)}}function Tv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function jv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Mv(e,t,n){return arguments.length>1?this.each((t==null?Pv:typeof t=="function"?jv:Tv)(e,t,n??"")):Dr(this.node(),e)}function Dr(e,t){return e.style.getPropertyValue(t)||ef(e).getComputedStyle(e,null).getPropertyValue(t)}function Lv(e){return function(){delete this[e]}}function Nv(e,t){return function(){this[e]=t}}function Ov(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Dv(e,t){return arguments.length>1?this.each((t==null?Lv:typeof t=="function"?Ov:Nv)(e,t)):this.node()[e]}function tf(e){return e.trim().split(/^|\s+/)}function pl(e){return e.classList||new nf(e)}function nf(e){this._node=e,this._names=tf(e.getAttribute("class")||"")}nf.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function rf(e,t){for(var n=pl(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function sf(e,t){for(var n=pl(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function qv(e){return function(){rf(this,e)}}function Fv(e){return function(){sf(this,e)}}function Vv(e,t){return function(){(t.apply(this,arguments)?rf:sf)(this,e)}}function Uv(e,t){var n=tf(e+"");if(arguments.length<2){for(var r=pl(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?Vv:t?qv:Fv)(n,t))}function Iv(){this.textContent=""}function Hv(e){return function(){this.textContent=e}}function Bv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function zv(e){return arguments.length?this.each(e==null?Iv:(typeof e=="function"?Bv:Hv)(e)):this.node().textContent}function Wv(){this.innerHTML=""}function Yv(e){return function(){this.innerHTML=e}}function Jv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Qv(e){return arguments.length?this.each(e==null?Wv:(typeof e=="function"?Jv:Yv)(e)):this.node().innerHTML}function Kv(){this.nextSibling&&this.parentNode.appendChild(this)}function Gv(){return this.each(Kv)}function Xv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zv(){return this.each(Xv)}function ey(e){var t=typeof e=="function"?e:Qd(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ty(){return null}function ny(e,t){var n=typeof e=="function"?e:Qd(e),r=t==null?ty:typeof t=="function"?t:gl(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ry(){var e=this.parentNode;e&&e.removeChild(this)}function sy(){return this.each(ry)}function iy(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oy(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ay(e){return this.select(e?oy:iy)}function ly(e){return arguments.length?this.property("__data__",e):this.node().__data__}function cy(e){return function(t){e.call(this,t,this.__data__)}}function uy(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function dy(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function fy(e,t,n){return function(){var r=this.__on,s,i=cy(t);if(r){for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function hy(e,t,n){var r=uy(e+""),s,i=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(s=0,u=a[l];s<i;++s)if((o=r[s]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?fy:dy,s=0;s<i;++s)this.each(a(r[s],t,n));return this}function of(e,t,n){var r=ef(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function gy(e,t){return function(){return of(this,e,t)}}function py(e,t){return function(){return of(this,e,t.apply(this,arguments))}}function my(e,t){return this.each((typeof t=="function"?py:gy)(e,t))}function*wy(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var af=[null];function Pt(e,t){this._groups=e,this._parents=t}function Is(){return new Pt([[document.documentElement]],af)}function vy(){return this}Pt.prototype=Is.prototype={constructor:Pt,select:Bw,selectAll:Jw,selectChild:Xw,selectChildren:nv,filter:rv,data:cv,enter:sv,exit:dv,join:fv,merge:hv,selection:vy,order:gv,sort:pv,call:wv,nodes:vv,node:yv,size:bv,empty:xv,each:_v,attr:Rv,style:Mv,property:Dv,classed:Uv,text:zv,html:Qv,raise:Gv,lower:Zv,append:ey,insert:ny,remove:sy,clone:ay,datum:ly,on:hy,dispatch:my,[Symbol.iterator]:wy};function lf(e){return typeof e=="string"?new Pt([[document.querySelector(e)]],[document.documentElement]):new Pt([[e]],af)}function ml(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function cf(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Hs(){}var As=.7,eo=1/As,Tr="\\s*([+-]?\\d+)\\s*",Rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yy=/^#([0-9a-f]{3,8})$/,by=new RegExp(`^rgb\\(${Tr},${Tr},${Tr}\\)$`),xy=new RegExp(`^rgb\\(${Xt},${Xt},${Xt}\\)$`),_y=new RegExp(`^rgba\\(${Tr},${Tr},${Tr},${Rs}\\)$`),ky=new RegExp(`^rgba\\(${Xt},${Xt},${Xt},${Rs}\\)$`),$y=new RegExp(`^hsl\\(${Rs},${Xt},${Xt}\\)$`),Sy=new RegExp(`^hsla\\(${Rs},${Xt},${Xt},${Rs}\\)$`),iu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ml(Hs,dr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ou,formatHex:ou,formatHex8:Cy,formatHsl:Ey,formatRgb:au,toString:au});function ou(){return this.rgb().formatHex()}function Cy(){return this.rgb().formatHex8()}function Ey(){return uf(this).formatHsl()}function au(){return this.rgb().formatRgb()}function dr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yy.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lu(t):n===3?new _t(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=by.exec(e))?new _t(t[1],t[2],t[3],1):(t=xy.exec(e))?new _t(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_y.exec(e))?mi(t[1],t[2],t[3],t[4]):(t=ky.exec(e))?mi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$y.exec(e))?du(t[1],t[2]/100,t[3]/100,1):(t=Sy.exec(e))?du(t[1],t[2]/100,t[3]/100,t[4]):iu.hasOwnProperty(e)?lu(iu[e]):e==="transparent"?new _t(NaN,NaN,NaN,0):null}function lu(e){return new _t(e>>16&255,e>>8&255,e&255,1)}function mi(e,t,n,r){return r<=0&&(e=t=n=NaN),new _t(e,t,n,r)}function Ay(e){return e instanceof Hs||(e=dr(e)),e?(e=e.rgb(),new _t(e.r,e.g,e.b,e.opacity)):new _t}function Oa(e,t,n,r){return arguments.length===1?Ay(e):new _t(e,t,n,r??1)}function _t(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ml(_t,Oa,cf(Hs,{brighter(e){return e=e==null?eo:Math.pow(eo,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?As:Math.pow(As,e),new _t(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _t(or(this.r),or(this.g),or(this.b),to(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cu,formatHex:cu,formatHex8:Ry,formatRgb:uu,toString:uu}));function cu(){return`#${Zn(this.r)}${Zn(this.g)}${Zn(this.b)}`}function Ry(){return`#${Zn(this.r)}${Zn(this.g)}${Zn(this.b)}${Zn((isNaN(this.opacity)?1:this.opacity)*255)}`}function uu(){const e=to(this.opacity);return`${e===1?"rgb(":"rgba("}${or(this.r)}, ${or(this.g)}, ${or(this.b)}${e===1?")":`, ${e})`}`}function to(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function or(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zn(e){return e=or(e),(e<16?"0":"")+e.toString(16)}function du(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vt(e,t,n,r)}function uf(e){if(e instanceof Vt)return new Vt(e.h,e.s,e.l,e.opacity);if(e instanceof Hs||(e=dr(e)),!e)return new Vt;if(e instanceof Vt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(t===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new Vt(o,a,l,e.opacity)}function Py(e,t,n,r){return arguments.length===1?uf(e):new Vt(e,t,n,r??1)}function Vt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ml(Vt,Py,cf(Hs,{brighter(e){return e=e==null?eo:Math.pow(eo,e),new Vt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?As:Math.pow(As,e),new Vt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new _t(ra(e>=240?e-240:e+120,s,r),ra(e,s,r),ra(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Vt(fu(this.h),wi(this.s),wi(this.l),to(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=to(this.opacity);return`${e===1?"hsl(":"hsla("}${fu(this.h)}, ${wi(this.s)*100}%, ${wi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function fu(e){return e=(e||0)%360,e<0?e+360:e}function wi(e){return Math.max(0,Math.min(1,e||0))}function ra(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const wl=e=>()=>e;function Ty(e,t){return function(n){return e+n*t}}function jy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function My(e){return(e=+e)==1?df:function(t,n){return n-t?jy(t,n,e):wl(isNaN(t)?n:t)}}function df(e,t){var n=t-e;return n?Ty(e,n):wl(isNaN(e)?t:e)}const no=(function e(t){var n=My(t);function r(s,i){var o=n((s=Oa(s)).r,(i=Oa(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),c=df(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=e,r})(1);function Ly(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=e[s]*(1-i)+t[s]*i;return r}}function Ny(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Oy(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=vl(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(a){for(o=0;o<r;++o)i[o]=s[o](a);return i}}function Dy(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ft(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function qy(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=vl(e[s],t[s]):r[s]=t[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var Da=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sa=new RegExp(Da.source,"g");function Fy(e){return function(){return e}}function Vy(e){return function(t){return e(t)+""}}function ff(e,t){var n=Da.lastIndex=sa.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Da.exec(e))&&(s=sa.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Ft(r,s)})),n=sa.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?Vy(l[0].x):Fy(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function vl(e,t){var n=typeof t,r;return t==null||n==="boolean"?wl(t):(n==="number"?Ft:n==="string"?(r=dr(t))?(t=r,no):ff:t instanceof dr?no:t instanceof Date?Dy:Ny(t)?Ly:Array.isArray(t)?Oy:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?qy:Ft)(e,t)}function Uy(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var hu=180/Math.PI,qa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hf(e,t,n,r,s,i){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*hu,skewX:Math.atan(l)*hu,scaleX:o,scaleY:a}}var vi;function Iy(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qa:hf(t.a,t.b,t.c,t.d,t.e,t.f)}function Hy(e){return e==null||(vi||(vi=document.createElementNS("http://www.w3.org/2000/svg","g")),vi.setAttribute("transform",e),!(e=vi.transform.baseVal.consolidate()))?qa:(e=e.matrix,hf(e.a,e.b,e.c,e.d,e.e,e.f))}function gf(e,t,n,r){function s(c){return c.length?c.pop()+" ":""}function i(c,u,d,f,m,w){if(c!==d||u!==f){var v=m.push("translate(",null,t,null,n);w.push({i:v-4,x:Ft(c,d)},{i:v-2,x:Ft(u,f)})}else(d||f)&&m.push("translate("+d+t+f+n)}function o(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(s(d)+"rotate(",null,r)-2,x:Ft(c,u)})):u&&d.push(s(d)+"rotate("+u+r)}function a(c,u,d,f){c!==u?f.push({i:d.push(s(d)+"skewX(",null,r)-2,x:Ft(c,u)}):u&&d.push(s(d)+"skewX("+u+r)}function l(c,u,d,f,m,w){if(c!==d||u!==f){var v=m.push(s(m)+"scale(",null,",",null,")");w.push({i:v-4,x:Ft(c,d)},{i:v-2,x:Ft(u,f)})}else(d!==1||f!==1)&&m.push(s(m)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=e(c),u=e(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,f),o(c.rotate,u.rotate,d,f),a(c.skewX,u.skewX,d,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(m){for(var w=-1,v=f.length,y;++w<v;)d[(y=f[w]).i]=y.x(m);return d.join("")}}}var By=gf(Iy,"px, ","px)","deg)"),zy=gf(Hy,", ",")",")"),qr=0,is=0,Xr=0,pf=1e3,ro,os,so=0,fr=0,Po=0,Ps=typeof performance=="object"&&performance.now?performance:Date,mf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yl(){return fr||(mf(Wy),fr=Ps.now()+Po)}function Wy(){fr=0}function io(){this._call=this._time=this._next=null}io.prototype=wf.prototype={constructor:io,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yl():+n)+(t==null?0:+t),!this._next&&os!==this&&(os?os._next=this:ro=this,os=this),this._call=e,this._time=n,Fa()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fa())}};function wf(e,t,n){var r=new io;return r.restart(e,t,n),r}function Yy(){yl(),++qr;for(var e=ro,t;e;)(t=fr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--qr}function gu(){fr=(so=Ps.now())+Po,qr=is=0;try{Yy()}finally{qr=0,Qy(),fr=0}}function Jy(){var e=Ps.now(),t=e-so;t>pf&&(Po-=t,so=e)}function Qy(){for(var e,t=ro,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ro=n);os=e,Fa(r)}function Fa(e){if(!qr){is&&(is=clearTimeout(is));var t=e-fr;t>24?(e<1/0&&(is=setTimeout(gu,e-Ps.now()-Po)),Xr&&(Xr=clearInterval(Xr))):(Xr||(so=Ps.now(),Xr=setInterval(Jy,pf)),qr=1,mf(gu))}}function pu(e,t,n){var r=new io;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var Ky=Jd("start","end","cancel","interrupt"),Gy=[],vf=0,mu=1,Va=2,Ti=3,wu=4,Ua=5,ji=6;function To(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Xy(e,n,{name:t,index:r,group:s,on:Ky,tween:Gy,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:vf})}function bl(e,t){var n=Wt(e,t);if(n.state>vf)throw new Error("too late; already scheduled");return n}function sn(e,t){var n=Wt(e,t);if(n.state>Ti)throw new Error("too late; already running");return n}function Wt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xy(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=wf(i,0,n.time);function i(c){n.state=mu,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,f,m;if(n.state!==mu)return l();for(u in r)if(m=r[u],m.name===n.name){if(m.state===Ti)return pu(o);m.state===wu?(m.state=ji,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[u]):+u<t&&(m.state=ji,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[u])}if(pu(function(){n.state===Ti&&(n.state=wu,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Va,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Va){for(n.state=Ti,s=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(m=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++d]=m);s.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ua,1),d=-1,f=s.length;++d<f;)s[d].call(e,u);n.state===Ua&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ji,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Zy(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>Va&&r.state<Ua,r.state=ji,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function e1(e){return this.each(function(){Zy(this,e)})}function t1(e,t){var n,r;return function(){var s=sn(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function n1(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=sn(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:t,value:n},l=0,c=s.length;l<c;++l)if(s[l].name===t){s[l]=a;break}l===c&&s.push(a)}i.tween=s}}function r1(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Wt(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?t1:n1)(n,e,t))}function xl(e,t,n){var r=e._id;return e.each(function(){var s=sn(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Wt(s,r).value[t]}}function yf(e,t){var n;return(typeof t=="number"?Ft:t instanceof dr?no:(n=dr(t))?(t=n,no):ff)(e,t)}function s1(e){return function(){this.removeAttribute(e)}}function i1(e){return function(){this.removeAttributeNS(e.space,e.local)}}function o1(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function a1(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function l1(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function c1(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function u1(e,t){var n=Ro(e),r=n==="transform"?zy:yf;return this.attrTween(e,typeof t=="function"?(n.local?c1:l1)(n,r,xl(this,"attr."+e,t)):t==null?(n.local?i1:s1)(n):(n.local?a1:o1)(n,r,t))}function d1(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function f1(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function h1(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&f1(e,i)),n}return s._value=t,s}function g1(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&d1(e,i)),n}return s._value=t,s}function p1(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ro(e);return this.tween(n,(r.local?h1:g1)(r,t))}function m1(e,t){return function(){bl(this,e).delay=+t.apply(this,arguments)}}function w1(e,t){return t=+t,function(){bl(this,e).delay=t}}function v1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?m1:w1)(t,e)):Wt(this.node(),t).delay}function y1(e,t){return function(){sn(this,e).duration=+t.apply(this,arguments)}}function b1(e,t){return t=+t,function(){sn(this,e).duration=t}}function x1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?y1:b1)(t,e)):Wt(this.node(),t).duration}function _1(e,t){if(typeof t!="function")throw new Error;return function(){sn(this,e).ease=t}}function k1(e){var t=this._id;return arguments.length?this.each(_1(t,e)):Wt(this.node(),t).ease}function $1(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;sn(this,e).ease=n}}function S1(e){if(typeof e!="function")throw new Error;return this.each($1(this._id,e))}function C1(e){typeof e!="function"&&(e=Gd(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new pn(r,this._parents,this._name,this._id)}function E1(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),a=0;a<i;++a)for(var l=t[a],c=n[a],u=l.length,d=o[a]=new Array(u),f,m=0;m<u;++m)(f=l[m]||c[m])&&(d[m]=f);for(;a<r;++a)o[a]=t[a];return new pn(o,this._parents,this._name,this._id)}function A1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function R1(e,t,n){var r,s,i=A1(t)?bl:sn;return function(){var o=i(this,e),a=o.on;a!==r&&(s=(r=a).copy()).on(t,n),o.on=s}}function P1(e,t){var n=this._id;return arguments.length<2?Wt(this.node(),n).on.on(e):this.each(R1(n,e,t))}function T1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function j1(){return this.on("end.remove",T1(this._id))}function M1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=gl(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a=r[o],l=a.length,c=i[o]=new Array(l),u,d,f=0;f<l;++f)(u=a[f])&&(d=e.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,To(c[f],t,n,f,c,Wt(u,n)));return new pn(i,this._parents,t,n)}function L1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Kd(e));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var l=r[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var f=e.call(u,u.__data__,d,l),m,w=Wt(u,n),v=0,y=f.length;v<y;++v)(m=f[v])&&To(m,t,n,v,f,w);i.push(f),o.push(u)}return new pn(i,o,t,n)}var N1=Is.prototype.constructor;function O1(){return new N1(this._groups,this._parents)}function D1(e,t){var n,r,s;return function(){var i=Dr(this,e),o=(this.style.removeProperty(e),Dr(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function bf(e){return function(){this.style.removeProperty(e)}}function q1(e,t,n){var r,s=n+"",i;return function(){var o=Dr(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function F1(e,t,n){var r,s,i;return function(){var o=Dr(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Dr(this,e))),o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a))}}function V1(e,t){var n,r,s,i="style."+t,o="end."+i,a;return function(){var l=sn(this,e),c=l.on,u=l.value[i]==null?a||(a=bf(t)):void 0;(c!==n||s!==u)&&(r=(n=c).copy()).on(o,s=u),l.on=r}}function U1(e,t,n){var r=(e+="")=="transform"?By:yf;return t==null?this.styleTween(e,D1(e,r)).on("end.style."+e,bf(e)):typeof t=="function"?this.styleTween(e,F1(e,r,xl(this,"style."+e,t))).each(V1(this._id,e)):this.styleTween(e,q1(e,r,t),n).on("end.style."+e,null)}function I1(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function H1(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&I1(e,o,n)),r}return i._value=t,i}function B1(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,H1(e,t,n??""))}function z1(e){return function(){this.textContent=e}}function W1(e){return function(){var t=e(this);this.textContent=t??""}}function Y1(e){return this.tween("text",typeof e=="function"?W1(xl(this,"text",e)):z1(e==null?"":e+""))}function J1(e){return function(t){this.textContent=e.call(this,t)}}function Q1(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&J1(s)),t}return r._value=e,r}function K1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Q1(e))}function G1(){for(var e=this._name,t=this._id,n=xf(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Wt(l,t);To(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new pn(r,this._parents,e,n)}function X1(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--s===0&&i()}};n.each(function(){var c=sn(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),s===0&&i()})}var Z1=0;function pn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xf(){return++Z1}var cn=Is.prototype;pn.prototype={constructor:pn,select:M1,selectAll:L1,selectChild:cn.selectChild,selectChildren:cn.selectChildren,filter:C1,merge:E1,selection:O1,transition:G1,call:cn.call,nodes:cn.nodes,node:cn.node,size:cn.size,empty:cn.empty,each:cn.each,on:P1,attr:u1,attrTween:p1,style:U1,styleTween:B1,text:Y1,textTween:K1,remove:j1,tween:r1,delay:v1,duration:x1,ease:k1,easeVarying:S1,end:X1,[Symbol.iterator]:cn[Symbol.iterator]};function eb(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var tb={time:null,delay:0,duration:250,ease:eb};function nb(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rb(e){var t,n;e instanceof pn?(t=e._id,e=e._name):(t=xf(),(n=tb).time=yl(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&To(l,e,t,c,o,n||nb(l,t));return new pn(r,this._parents,e,t)}Is.prototype.interrupt=e1;Is.prototype.transition=rb;function sb(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function oo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Fr(e){return e=oo(Math.abs(e)),e?e[1]:NaN}function ib(e,t){return function(n,r){for(var s=n.length,i=[],o=0,a=e[0],l=0;s>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(n.substring(s-=a,s+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return i.reverse().join(t)}}function ob(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ab=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ao(e){if(!(t=ab.exec(e)))throw new Error("invalid format: "+e);var t;return new _l({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ao.prototype=_l.prototype;function _l(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lb(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var _f;function cb(e,t){var n=oo(e,t);if(!n)return e+"";var r=n[0],s=n[1],i=s-(_f=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+oo(e,Math.max(0,t+i-1))[0]}function vu(e,t){var n=oo(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const yu={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:sb,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vu(e*100,t),r:vu,s:cb,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bu(e){return e}var xu=Array.prototype.map,_u=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ub(e){var t=e.grouping===void 0||e.thousands===void 0?bu:ib(xu.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?bu:ob(xu.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(d){d=ao(d);var f=d.fill,m=d.align,w=d.sign,v=d.symbol,y=d.zero,A=d.width,_=d.comma,E=d.precision,j=d.trim,U=d.type;U==="n"?(_=!0,U="g"):yu[U]||(E===void 0&&(E=12),j=!0,U="g"),(y||f==="0"&&m==="=")&&(y=!0,f="0",m="=");var F=v==="$"?n:v==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",P=v==="$"?r:/[%p]/.test(U)?o:"",g=yu[U],p=/[defgprs%]/.test(U);E=E===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function x(C){var N=F,D=P,O,X,re;if(U==="c")D=g(C)+D,C="";else{C=+C;var K=C<0||1/C<0;if(C=isNaN(C)?l:g(Math.abs(C),E),j&&(C=lb(C)),K&&+C==0&&w!=="+"&&(K=!1),N=(K?w==="("?w:a:w==="-"||w==="("?"":w)+N,D=(U==="s"?_u[8+_f/3]:"")+D+(K&&w==="("?")":""),p){for(O=-1,X=C.length;++O<X;)if(re=C.charCodeAt(O),48>re||re>57){D=(re===46?s+C.slice(O+1):C.slice(O))+D,C=C.slice(0,O);break}}}_&&!y&&(C=t(C,1/0));var H=N.length+C.length+D.length,M=H<A?new Array(A-H+1).join(f):"";switch(_&&y&&(C=t(M+C,M.length?A-D.length:1/0),M=""),m){case"<":C=N+C+D+M;break;case"=":C=N+M+C+D;break;case"^":C=M.slice(0,H=M.length>>1)+N+C+D+M.slice(H);break;default:C=M+N+C+D;break}return i(C)}return x.toString=function(){return d+""},x}function u(d,f){var m=c((d=ao(d),d.type="f",d)),w=Math.max(-8,Math.min(8,Math.floor(Fr(f)/3)))*3,v=Math.pow(10,-w),y=_u[8+w/3];return function(A){return m(v*A)+y}}return{format:c,formatPrefix:u}}var yi,kf,$f;db({thousands:",",grouping:[3],currency:["$",""]});function db(e){return yi=ub(e),kf=yi.format,$f=yi.formatPrefix,yi}function fb(e){return Math.max(0,-Fr(Math.abs(e)))}function hb(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fr(t)/3)))*3-Fr(Math.abs(e)))}function gb(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fr(t)-Fr(e))+1}function kl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const ku=Symbol("implicit");function Sf(){var e=new eu,t=[],n=[],r=ku;function s(i){let o=e.get(i);if(o===void 0){if(r!==ku)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new eu;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return Sf(t,n).unknown(r)},kl.apply(s,arguments),s}function Cf(){var e=Sf().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function d(){var f=t().length,m=s<r,w=m?s:r,v=m?r:s;i=(v-w)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),w+=(v-w-i*(f-l))*u,o=i*(1-l),a&&(w=Math.round(w),o=Math.round(o));var y=Yd(f).map(function(A){return w+i*A});return n(m?y.reverse():y)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,s]=f,r=+r,s=+s,d()):[r,s]},e.rangeRound=function(f){return[r,s]=f,r=+r,s=+s,a=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,d()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},e.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},e.copy=function(){return Cf(t(),[r,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},kl.apply(d(),arguments)}function pb(e){return function(){return e}}function mb(e){return+e}var $u=[0,1];function Er(e){return e}function Ia(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:pb(isNaN(t)?NaN:.5)}function wb(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function vb(e,t,n){var r=e[0],s=e[1],i=t[0],o=t[1];return s<r?(r=Ia(s,r),i=n(o,i)):(r=Ia(r,s),i=n(i,o)),function(a){return i(r(a))}}function yb(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)s[o]=Ia(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(a){var l=xw(e,a,1,r)-1;return i[l](s[l](a))}}function bb(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xb(){var e=$u,t=$u,n=vl,r,s,i,o=Er,a,l,c;function u(){var f=Math.min(e.length,t.length);return o!==Er&&(o=wb(e[0],e[f-1])),a=f>2?yb:vb,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?i:(l||(l=a(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(s((c||(c=a(t,e.map(r),Ft)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,mb),u()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=Uy,u()},d.clamp=function(f){return arguments.length?(o=f?!0:Er,u()):o!==Er},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,m){return r=f,s=m,u()}}function _b(){return xb()(Er,Er)}function kb(e,t,n,r){var s=Rw(e,t,n),i;switch(r=ao(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=hb(s,o))&&(r.precision=i),$f(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=gb(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=fb(s))&&(r.precision=i-(r.type==="%")*2);break}}return kf(r)}function $b(e){var t=e.domain;return e.ticks=function(n){var r=t();return Aw(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return kb(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,i=r.length-1,o=r[s],a=r[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=La(o,a,n),c===l)return r[s]=o,r[i]=a,t(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function Ef(){var e=_b();return e.copy=function(){return bb(e,Ef())},kl.apply(e,arguments),$b(e)}function as(e,t,n){this.k=e,this.x=t,this.y=n}as.prototype={constructor:as,scale:function(e){return e===1?this:new as(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new as(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};as.prototype;var Sb=I('<div style="background:#ffffff;border-radius:8px;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);padding:16px;margin:16px 0"><svg>');function Cb(e){let t=null;const[n,r]=Q({width:800,height:500});Ie(()=>{function _(){if(t&&t.parentElement){const E=t.parentElement.getBoundingClientRect();r({width:Math.max(E.width,600),height:Math.max(E.height,400)})}}_(),window.addEventListener("resize",_),yt(()=>window.removeEventListener("resize",_))});const s=()=>e.data??[],i=16,o=()=>e.width??n().width,a=()=>e.height??n().height,l=()=>e.title??"AMSTAR-2 Quality Assessment",c={top:60,right:170,bottom:60,left:120},u=()=>(o()-c.left-c.right)/i,d=()=>(a()-c.top-c.bottom)/s().length,f=()=>Math.min(u(),d()),m=()=>f()*i,w=()=>f()*s().length,v=()=>c.left+m()+c.right,y=()=>c.top+w()+c.bottom,A={yes:"#10b981","partial yes":"#facc15",no:"#ef4444","no ma":"#9ca3af"};return Ie(()=>{const _=lf(t).attr("width",v()).attr("height",y()).style("background","#ffffff").style("font-family",'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif');_.selectAll("*").remove(),_.append("g").attr("class","footer").selectAll("text").data(Yd(1,i+1)).enter().append("text").attr("x",(p,x)=>c.left+x*f()+f()/2).attr("y",c.top+w()+20).attr("text-anchor","middle").attr("font-size",Math.max(10,f()*.4)).attr("font-weight","600").attr("fill","#374151").text(p=>`Q${p}`),_.append("g").attr("class","rows").selectAll("text").data(s()).enter().append("text").attr("x",c.left-15).attr("y",(p,x)=>c.top+x*f()+f()/2).attr("text-anchor","end").attr("font-size",Math.max(10,f()*.45)).attr("font-weight","500").attr("fill","#374151").attr("dominant-baseline","middle").text(p=>p.label);const U=_.append("g").attr("class","cells");s().forEach((p,x)=>{for(let C=0;C<i;C++){const N=p.questions[C]?.toLowerCase?.()??"",D=A[N]??"#e5e7eb";U.append("rect").attr("x",c.left+C*f()+2).attr("y",c.top+x*f()+2).attr("width",f()-4).attr("height",f()-4).attr("fill",D).attr("stroke","#ffffff").attr("stroke-width",1).attr("rx",Math.max(2,f()*.12)).style("filter","drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.1))")}});const F=[{key:"yes",label:"Yes"},{key:"partial yes",label:"Partial Yes"},{key:"no",label:"No"},{key:"no ma",label:"No MA"}],g=_.append("g").attr("class","legend").attr("transform",`translate(${v()-c.right+20}, ${c.top+20})`).selectAll(".legend-item").data(F).enter().append("g").attr("class","legend-item").attr("transform",(p,x)=>`translate(0, ${x*25})`);g.append("rect").attr("x",0).attr("y",-8).attr("width",16).attr("height",16).attr("rx",2).attr("fill",p=>A[p.key]).attr("stroke","#ffffff").attr("stroke-width",1),g.append("text").attr("x",24).attr("y",0).attr("dy","0.35em").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(p=>p.label),_.append("text").attr("x",v()/2).attr("y",40).attr("text-anchor","middle").attr("font-size","18px").attr("font-weight","600").attr("fill","#111827").text(l()),yt(()=>{_.selectAll("*").remove()})}),(()=>{var _=Sb(),E=_.firstChild,j=t;return typeof j=="function"?xs(j,E):t=E,pe(U=>xo(E,`width: 100%; height: ${y()}px; max-width: 100%; display: block;`,U)),_})()}var Eb=I('<div style="background:#ffffff;border-radius:8px;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);padding:16px;margin:16px 0"><svg>');function Ab(e){let t=null,n=null;const r=()=>e.data??[],[s,i]=Q({width:900,height:600});Ka(()=>{const w=()=>{if(n){const v=n.getBoundingClientRect();i({width:Math.max(v.width,400),height:Math.max(v.height,400)})}};w(),window.addEventListener("resize",w),yt(()=>window.removeEventListener("resize",w))}),Ie(()=>{if(n){const w=n.getBoundingClientRect();i({width:Math.max(w.width,400),height:Math.max(w.height,400)})}});const o=()=>e.width??s().width,a=()=>e.height??s().width/1.5,l=()=>e.title??"Distribution of AMSTAR Ratings on Each Item Across Included Reviews",c={top:50,right:150,bottom:60,left:80},u=()=>o()-c.left-c.right,d=()=>a()-c.top-c.bottom,f=()=>Math.max(Math.round(o()/50),12)+1,m={yes:"#10b981","partial yes":"#facc15",no:"#ef4444","no ma":"#9ca3af"};return Ie(()=>{if(!r().length)return;const w=lf(t).attr("width",o()).attr("height",a()).style("background","#ffffff").style("font-family",'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif');w.selectAll("*").remove();const v=[],y=Math.max(...r().map(p=>p.questions?.length||0)),A=r().length;for(let p=0;p<y;p++){const x={question:p+1,label:`Q${p+1}`,counts:{yes:0,"partial yes":0,no:0,"no ma":0}};r().forEach(C=>{const N=C.questions[p]?.toLowerCase?.()??"no ma";x.counts.hasOwnProperty(N)&&x.counts[N]++}),x.percentages={},Object.keys(x.counts).forEach(C=>{x.percentages[C]=x.counts[C]/A*100}),v.push(x)}const _=Cf().domain(v.map(p=>p.label)).range([0,d()]).padding(.1),E=Ef().domain([0,100]).range([0,u()]),j=w.append("g").attr("transform",`translate(${c.left}, ${c.top})`);w.append("text").attr("x",o()/2).attr("y",30).attr("text-anchor","middle").attr("font-size",f()+"px").attr("font-weight","600").attr("fill","#111827").text(l()),v.forEach(p=>{let x=0;const C=_.bandwidth(),N=_(p.label);["yes","partial yes","no ma","no"].forEach(D=>{const O=p.percentages[D],X=E(O);O>0&&(j.append("rect").attr("x",E(x)).attr("y",N).attr("width",X).attr("height",C).attr("fill",m[D]).attr("stroke","#ffffff").attr("stroke-width",1),O>=5&&j.append("text").attr("x",E(x)+X/2).attr("y",N+C/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").attr("font-weight","600").attr("fill",D==="partial yes"?"#000000":"#ffffff").text(`${O.toFixed(1)}`)),x+=O})}),j.selectAll(".y-label").data(v).enter().append("text").attr("class","y-label").attr("x",-10).attr("y",p=>_(p.label)+_.bandwidth()/2).attr("text-anchor","end").attr("dominant-baseline","middle").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(p=>p.label);const U=Dw(E).tickFormat(p=>`${p}`).ticks(5);j.append("g").attr("class","x-axis").attr("transform",`translate(0, ${d()})`).call(U).selectAll("text").attr("font-size","12px").attr("fill","#374151"),j.append("text").attr("x",u()/2).attr("y",d()+50).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","500").attr("fill","#374151").text(`Percentage of SRs (%), N=${A}`),w.append("text").attr("transform","rotate(-90)").attr("x",-a()/2).attr("y",20).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","500").attr("fill","#374151").text("Items of AMSTAR-2");const F=w.append("g").attr("class","legend").attr("transform",`translate(${o()-c.right+20}, ${c.top+20})`),P=[{key:"yes",label:"Yes"},{key:"partial yes",label:"Partial Yes"},{key:"no",label:"No"},{key:"no ma",label:"No MA"}],g=F.selectAll(".legend-item").data(P).enter().append("g").attr("class","legend-item").attr("transform",(p,x)=>`translate(0, ${x*25})`);g.append("rect").attr("x",0).attr("y",-8).attr("width",16).attr("height",16).attr("rx",2).attr("fill",p=>m[p.key]).attr("stroke","#ffffff").attr("stroke-width",1),g.append("text").attr("x",24).attr("y",0).attr("dy","0.35em").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(p=>p.label),yt(()=>{w.selectAll("*").remove()})}),(()=>{var w=Eb(),v=w.firstChild,y=n;typeof y=="function"?xs(y,w):n=w;var A=t;return typeof A=="function"?xs(A,v):t=v,pe(_=>xo(v,`width: 100%; height: ${a()}px; max-width: 100%; display: block;`,_)),w})()}var Rb=I('<div class="flex flex-col gap-6">');function Pb(e){const{getReviewsForProject:t,getChecklistsForReview:n,getAnswersForChecklist:r,getReviewerForChecklist:s}=Nt,[i,o]=Q([]),a=["q1","q2","q3","q4","q5","q6","q7","q8","q9","q10","q11","q12","q13","q14","q15","q16"];return Ie(()=>{if(!e.project?.id){o([]);return}const l=t(e.project.id);if(!l||l.length===0){o([]);return}const c=l.flatMap(u=>n(u.id).map(f=>{const m=r(f.id),w=s(f.id),v=Ss({name:u.name,id:f.id,reviewerName:w?.name,createdAt:f.updated_at});m.forEach(A=>{v[A.question_key]&&(v[A.question_key].answers=A.answers,v[A.question_key].critical=A.critical)});const y=L0(v);return{label:`${u.name} - ${w?.name||"Unassigned"}`,reviewer:w?.name||"Unassigned",reviewName:u.name,questions:a.map(A=>y[A])}}));o(c)}),(()=>{var l=Rb();return b(l,k(Cb,{get data(){return i()}}),null),b(l,k(Ab,{get data(){return i()}}),null),l})()}var Tb=I("<div class=p-6>"),jb=I("<div class=p-8>Project not found.");function Mb(){const{projects:e,getReviewsForProject:t,getProjectMembers:n}=Nt,[r,s]=Q(null),i=_o(),o=nn(),[a,l]=Q(!1);Ie(()=>{const m=i.projectId;m?s(e().find(w=>w.id===m)||null):(console.warn("ProjectDashboard: No project found for",m),o("/dashboard"))});const c=async m=>{m.trim()!==""&&await Gp(m,r().id)},u=async m=>{try{const w=await Zp(m),v=Ss({name:"New Checklist",id:w.id,createdAt:Date.now(),reviewerName:""});await Promise.all(Object.keys(v).map(async y=>{if(/^q\d+[a-z]*$/i.test(y)&&v[y])try{await zd(v.id,y,v[y].answers,v[y].critical)}catch(A){console.error("Failed to save answer for",y,A)}}))}catch(w){console.error("Error creating checklist:",w)}},d=(m,w)=>{o(`/projects/${r().id}/reviews/${m.id}/checklists/${w.id}`)},f=()=>{l(!a())};return k(_e,{get when(){return r()},get fallback(){return jb()},get children(){var m=Tb();return b(m,k(zm,{get project(){return r()},onDeleteProject:Bd,onManageMembers:f}),null),b(m,k(Hm,{get open(){return a()},onClose:()=>l(!1),get projectId(){return r().id}}),null),b(m,k(nw,{get updatedAt(){return r().updated_at},members:()=>n(r().id)}),null),b(m,k(mw,{reviews:()=>t(r().id),onDeleteReview:w=>Xp(w),onChecklistClick:d,onDeleteChecklist:w=>em(w),onAddChecklist:u}),null),b(m,k(sw,{onAddReview:c}),null),b(m,k(Pb,{get project(){return r()}}),null),m}})}function Lb({id:e,name:t,createdAt:n=Date.now(),reviews:r=[]}={}){if(t===null)throw new Error("Project name cannot be null");return{id:e,name:t,createdAt:n,reviews:r}}function Nb({id:e,name:t,createdAt:n=Date.now(),checklists:r=[],pdfFileName:s=null}={}){if(!e)throw new Error("Review id is required");if(!t)throw new Error("Review name is required");return{id:e,name:t,createdAt:n,checklists:r,pdfFileName:s}}function Ob(e,t){return Object.keys(e).forEach(n=>{/^q\d+[a-z]*$/i.test(n)&&e[n]?.answers&&e[n].answers.forEach((r,s)=>{r.fill(!1),t%2===0?r[0]=!0:r[r.length-1]=!0})}),e}async function Db(){const e=["Review 1","Review 2","Review 3"];let t=[];for(const[r,s]of e.entries()){const i=r%2===0?2:1;for(let o=0;o<i;o++){let a=Ss({name:`Checklist ${o+1}`,id:await Ci(),createdAt:Date.now()});a=Ob(a,r+o);const l=Nb({id:await Ci(),name:s,createdAt:Date.now(),checklists:[a]});t.push(l)}}const n=Lb({id:await Ci(),name:"Example Project",createdAt:Date.now(),reviews:t});await Hr(n)}const[qb,Af]=Q(navigator.onLine);window.addEventListener("online",()=>{console.info("Went online"),Af(!0)});window.addEventListener("offline",()=>{console.info("Went offline"),Af(!1)});function Rf(){return qb}function Fb(){const[e,t]=Q(!1),[n,r]=Q(null),[s,i]=Q(!0),o=Rf();let a=o();async function l(){i(!0);try{await ja();const E=await ta();r(E),t(!!E)}catch{r(null),t(!1)}finally{i(!1)}}o()?l():i(!1),Ie(()=>{o()&&!a&&!n()&&l(),a=o()});async function c(E,j,U){await zp(E,j,U),localStorage.setItem("pendingEmail",E)}async function u(){await Jp(localStorage.getItem("pendingEmail"))}async function d(E){await Qp(localStorage.getItem("pendingEmail"),E),localStorage.removeItem("pendingEmail")}async function f(E,j){localStorage.setItem("pendingEmail",E),await Yp(E,j),localStorage.removeItem("pendingEmail"),t(!0),r(await ta())}async function m(){await Hd(),t(!1),r(null)}async function w(){const E=await ta();return r(E),E}async function v(){await ja()}async function y(E,j={}){return await rn(E,j)}function A(){return localStorage.getItem("pendingEmail")}function _(){return Wp()}return{isLoggedIn:e,user:n,signup:c,signin:f,signout:m,getCurrentUser:w,refreshAccessToken:v,authFetch:y,authLoading:s,sendEmailVerification:u,verifyEmail:d,getPendingEmail:A,getAccessToken:_}}const Vb=sr(Fb);function On(){return Vb}var Ub=I('<div class="grid gap-4 md:grid-cols-2">'),Ib=I('<div class="mx-auto p-6 min-h-screen"><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-center justify-between mb-6"><div><h1 class="text-3xl font-bold text-gray-900">Projects</h1><p class="text-gray-600 mt-1">Manage your projects</p></div></div><div class="mb-8 p-4 bg-blue-50 rounded-lg border border-blue-200"><h3 class="text-lg font-semibold text-blue-900 mb-3">Create New Project</h3><div class="flex flex-col sm:flex-row gap-3"><input type=text class="flex-1 px-4 py-2 border border-blue-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"placeholder="Enter project name..."><button class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"><span class=mr-2>+</span>Create Project</button><button class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium">Load Example'),Hb=I('<div class="text-center py-12"><div class="text-gray-400 mb-4"><svg class="mx-auto h-12 w-12"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No projects yet</h3><p class=text-gray-500>Get started by creating your first project above.'),Bb=I('<p class="text-sm text-gray-600 mt-1 line-clamp-2">'),zb=I('<div class="group bg-white border border-gray-200 rounded-lg p-5 hover:shadow-md hover:border-blue-300 transition-all duration-200 cursor-pointer"tabindex=0 role=button><div class="flex items-start justify-between"><div class="flex-1 min-w-0"><h3 class="text-lg font-semibold text-gray-900 truncate group-hover:text-blue-600 transition-colors"></h3></div><button class="ml-3 p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100"title="Delete project"><svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div><div class="mt-4 flex items-center justify-between text-xs text-gray-500"><span class="flex items-center"><svg class="mr-1 h-3 w-3"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Updated </span><span class="text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity">Open →');function Wb(){const{projects:e,getProjectsForUser:t,deleteProject:n}=Nt,{user:r}=On(),s=nn(),[i,o]=Q(""),[a,l]=Q([]);Ie(()=>{r()&&e().length>0&&l(t(r().id))});const c=f=>{s(`/projects/${f.id}`)},u=async()=>{if(i().trim()){try{await fl(i())}catch(f){console.error("Error creating project:",f)}o("")}},d=async f=>{window.confirm("Are you sure you want to delete this project?")&&await n(f)};return(()=>{var f=Ib(),m=f.firstChild,w=m.firstChild,v=w.nextSibling,y=v.firstChild,A=y.nextSibling,_=A.firstChild,E=_.nextSibling,j=E.nextSibling;return _.$$keydown=U=>{U.key==="Enter"&&i().trim()&&u()},_.$$input=U=>o(U.target.value),E.$$click=u,j.$$click=async()=>{const U=await Db();console.log("Loaded example project:",U),window.location.reload()},b(m,k(_e,{get when(){return et(()=>!!r())()&&a().length!==0},get fallback(){return Hb()},get children(){var U=Ub();return b(U,k(Ee,{get each(){return t(r().id)},children:F=>(()=>{var P=zb(),g=P.firstChild,p=g.firstChild,x=p.firstChild,C=p.nextSibling,N=g.nextSibling,D=N.firstChild,O=D.firstChild;return O.nextSibling,P.$$keydown=X=>{(X.key==="Enter"||X.key===" ")&&(X.preventDefault(),c(F))},P.$$click=()=>c(F),b(x,()=>F.name),b(p,k(_e,{get when(){return F.description},get children(){var X=Bb();return b(X,()=>F.description),X}}),null),C.$$click=X=>{X.stopPropagation(),d(F.id)},b(D,()=>new Date(F.updated_at).toLocaleDateString(),null),pe(()=>$t(P,"aria-label",`Open project ${F.name}`)),P})()})),U}}),null),pe(()=>E.disabled=!i().trim()),pe(()=>_.value=i()),f})()}tt(["input","keydown","click"]);var Yb=I("<div>");function Qt(e){const[t,n]=Q(!1),[r,s]=Q(!1);let i=null,o=null;const a=()=>e.duration??300,l=()=>e.timingFunction??"ease-in-out",c=()=>e.when;return Ie(()=>{c()?(clearTimeout(o),s(!0),requestAnimationFrame(()=>{n(!0)})):(n(!1),clearTimeout(o),o=setTimeout(()=>{s(!1)},a()))}),yt(()=>{clearTimeout(o)}),k(_e,{get when(){return r()},get fallback(){return e.fallback},get children(){var u=Yb(),d=i;return typeof d=="function"?xs(d,u):i=u,b(u,()=>e.children),pe(f=>{var m=t()?1:0,w=`opacity ${a()}ms ${l()}`,v=e.ariaLive||"polite",y=e.role||"alert",A=e.class||"";return m!==f.e&&Vi(u,"opacity",f.e=m),w!==f.t&&Vi(u,"transition",f.t=w),v!==f.a&&$t(u,"aria-live",f.a=v),y!==f.o&&$t(u,"role",f.o=y),A!==f.i&&ht(u,f.i=A),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),u}})}var Ar=(e,t=[])=>({parts:(...n)=>{if(Jb(t))return Ar(e,n);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...n)=>Ar(e,[...t,...n]),omit:(...n)=>Ar(e,t.filter(r=>!n.includes(r))),rename:n=>Ar(n,t),keys:()=>t,build:()=>[...new Set(t)].reduce((n,r)=>Object.assign(n,{[r]:{selector:[`&[data-scope="${br(e)}"][data-part="${br(r)}"]`,`& [data-scope="${br(e)}"][data-part="${br(r)}"]`].join(", "),attrs:{"data-scope":br(e),"data-part":br(r)}}}),{})}),br=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),Jb=e=>e.length===0,Qb=Object.defineProperty,Kb=(e,t,n)=>t in e?Qb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ia=(e,t,n)=>Kb(e,typeof t!="symbol"?t+"":t,n),jo=e=>typeof e=="object"&&e!==null,Oe=e=>e?"":void 0,Pf=e=>e?"true":void 0,Gb=1,Xb=9,Zb=11,Tf=e=>jo(e)&&e.nodeType===Gb&&typeof e.nodeName=="string",jf=e=>jo(e)&&e.nodeType===Xb,ex=e=>jo(e)&&e===e.window,tx=e=>jo(e)&&e.nodeType!==void 0,nx=e=>tx(e)&&e.nodeType===Zb&&"host"in e;function rx(e){if(!e)return!1;const t=e.getRootNode();return Mf(t)===e}function sx(e){return jf(e)?e:ex(e)?e.document:e?.ownerDocument??document}function $l(e){return nx(e)?$l(e.host):jf(e)?e.defaultView??window:Tf(e)?e.ownerDocument?.defaultView??window:window}function Mf(e){let t=e.activeElement;for(;t?.shadowRoot;){const n=t.shadowRoot.activeElement;if(!n||n===t)break;t=n}return t}function ix(e){const{selectionStart:t,selectionEnd:n,value:r}=e.currentTarget,s=e.data;return r.slice(0,t)+(s??"")+r.slice(n)}function ox(e){return Lf(e).isComposing||e.keyCode===229}var ax=e=>e.button===0,lx=e=>e.ctrlKey||e.altKey||e.metaKey,cx={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},Su={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function ux(e,t={}){const{dir:n="ltr",orientation:r="horizontal"}=t;let s=e.key;return s=cx[s]??s,n==="rtl"&&r==="horizontal"&&s in Su&&(s=Su[s]),s}function Lf(e){return e.nativeEvent??e}function dx(e,t){const{type:n="HTMLInputElement",property:r="value"}=t,s=$l(e)[n].prototype;return Object.getOwnPropertyDescriptor(s,r)??{}}function fx(e){if(e.localName==="input")return"HTMLInputElement";if(e.localName==="textarea")return"HTMLTextAreaElement";if(e.localName==="select")return"HTMLSelectElement"}function hx(e,t,n="value"){if(!e)return;const r=fx(e);r&&dx(e,{type:r,property:n}).set?.call(e,t),e.setAttribute(n,t)}function gx(e,t){const{value:n,bubbles:r=!0}=t;if(!e)return;const s=$l(e);e instanceof s.HTMLInputElement&&(hx(e,`${n}`),e.dispatchEvent(new s.Event("input",{bubbles:r})))}var px=class Nf{constructor(){ia(this,"id",null),ia(this,"fn_cleanup"),ia(this,"cleanup",()=>{this.cancel()})}static create(){return new Nf}request(t){this.cancel(),this.id=globalThis.requestAnimationFrame(()=>{this.id=null,this.fn_cleanup=t?.()})}cancel(){this.id!==null&&(globalThis.cancelAnimationFrame(this.id),this.id=null),this.fn_cleanup?.(),this.fn_cleanup=void 0}isActive(){return this.id!==null}};function bi(e){const t=px.create();return t.request(e),t.cleanup}function mx(e,t){return Array.from(e?.querySelectorAll(t)??[])}var wx={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"};function vx(e){return e==null?[]:Array.isArray(e)?e:[e]}var Cu=e=>e?.constructor.name==="Array",yx=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Mo(e[n],t[n]))return!1;return!0},Mo=(e,t)=>{if(Object.is(e,t))return!0;if(e==null&&t!=null||e!=null&&t==null)return!1;if(typeof e?.isEqual=="function"&&typeof t?.isEqual=="function")return e.isEqual(t);if(typeof e=="function"&&typeof t=="function")return e.toString()===t.toString();if(Cu(e)&&Cu(t))return yx(Array.from(e),Array.from(t));if(typeof e!="object"||typeof t!="object")return!1;const n=Object.keys(t??Object.create(null)),r=n.length;for(let s=0;s<r;s++)if(!Reflect.has(e,n[s]))return!1;for(let s=0;s<r;s++){const i=n[s];if(!Mo(e[i],t[i]))return!1}return!0},bx=e=>Array.isArray(e),Of=e=>e!=null&&typeof e=="object",xx=e=>Of(e)&&!bx(e),_x=e=>typeof e=="number"&&!Number.isNaN(e),Sl=e=>typeof e=="string",En=e=>typeof e=="function",kx=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),$x=e=>Object.prototype.toString.call(e),Df=Function.prototype.toString,Sx=Df.call(Object),Cx=e=>{if(!Of(e)||$x(e)!="[object Object]"||Rx(e))return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const n=kx(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Df.call(n)==Sx},Ex=e=>typeof e=="object"&&e!==null&&"$$typeof"in e&&"props"in e,Ax=e=>typeof e=="object"&&e!==null&&"__v_isVNode"in e,Rx=e=>Ex(e)||Ax(e),Px=(()=>{let e=0;return()=>(e++,e.toString(36))})(),oa=(e,t,n)=>e[t]===n?e:[...e.slice(0,t),n,...e.slice(t+1)];function qf(e){if(!Cx(e)||e===void 0)return e;const t=Reflect.ownKeys(e).filter(r=>typeof r=="string"),n={};for(const r of t){const s=e[r];s!==void 0&&(n[r]=qf(s))}return n}function Eu(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function Tx(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function jx(e,t){if(e==null)throw new Error(t())}function Mx(){return{and:(...e)=>function(n){return e.every(r=>n.guard(r))},or:(...e)=>function(n){return e.some(r=>n.guard(r))},not:e=>function(n){return!n.guard(e)}}}function Lx(){return{guards:Mx(),createMachine:e=>e,choose:e=>function({choose:n}){return n(e)?.actions}}}var kr=(e=>(e.NotStarted="Not Started",e.Started="Started",e.Stopped="Stopped",e))(kr||{}),aa="__init__";function Nx(e){const t=()=>e.getRootNode?.()??document,n=()=>sx(t());return{...e,getRootNode:t,getDoc:n,getWin:()=>n().defaultView??window,getActiveElement:()=>Mf(t()),isActiveElement:rx,getById:o=>t().getElementById(o)}}function Ox(e){return new Proxy({},{get(t,n){return n==="style"?r=>e({style:r}).style:e}})}var Ff=()=>e=>Array.from(new Set(e)),Dx=Ar("password-input").parts("root","input","label","control","indicator","visibilityTrigger"),xr=Dx.build(),Mi=e=>e.ids?.input??`p-input-${e.id}-input`,Ha=e=>e.getById(Mi(e));function qx(e,t){const{scope:n,prop:r,context:s}=e,i=s.get("visible"),o=!!r("disabled"),a=!!r("invalid"),l=!!r("readOnly"),c=!!r("required"),u=!(l||o),d=r("translations");return{visible:i,disabled:o,invalid:a,focus(){Ha(n)?.focus()},setVisible(f){e.send({type:"VISIBILITY.SET",value:f})},toggleVisible(){e.send({type:"VISIBILITY.SET",value:!i})},getRootProps(){return t.element({...xr.root.attrs,dir:r("dir"),"data-disabled":Oe(o),"data-invalid":Oe(a),"data-readonly":Oe(l)})},getLabelProps(){return t.label({...xr.label.attrs,htmlFor:Mi(n),"data-disabled":Oe(o),"data-invalid":Oe(a),"data-readonly":Oe(l),"data-required":Oe(c)})},getInputProps(){return t.input({...xr.input.attrs,id:Mi(n),autoCapitalize:"off",name:r("name"),required:r("required"),autoComplete:r("autoComplete"),spellCheck:!1,readOnly:l,disabled:o,type:i?"text":"password","data-state":i?"visible":"hidden","aria-invalid":Pf(a),"data-disabled":Oe(o),"data-invalid":Oe(a),"data-readonly":Oe(l),...r("ignorePasswordManagers")?Fx:{}})},getVisibilityTriggerProps(){return t.button({...xr.visibilityTrigger.attrs,type:"button",tabIndex:-1,"aria-controls":Mi(n),"aria-expanded":i,"data-readonly":Oe(l),disabled:o,"data-disabled":Oe(o),"data-state":i?"visible":"hidden","aria-label":d?.visibilityTrigger?.(i),onPointerDown(f){ax(f)&&u&&(f.preventDefault(),e.send({type:"TRIGGER.CLICK"}))}})},getIndicatorProps(){return t.element({...xr.indicator.attrs,"aria-hidden":!0,"data-state":i?"visible":"hidden","data-disabled":Oe(o),"data-invalid":Oe(a),"data-readonly":Oe(l)})},getControlProps(){return t.element({...xr.control.attrs,"data-disabled":Oe(o),"data-invalid":Oe(a),"data-readonly":Oe(l)})}}}var Fx={"data-1p-ignore":"","data-lpignore":"true","data-bwignore":"true","data-form-type":"other","data-protonpass-ignore":"true"},Vx={props({props:e}){return{id:Px(),defaultVisible:!1,autoComplete:"current-password",ignorePasswordManagers:!1,...e,translations:{visibilityTrigger(t){return t?"Hide password":"Show password"},...e.translations}}},context({prop:e,bindable:t}){return{visible:t(()=>({value:e("visible"),defaultValue:e("defaultVisible"),onChange(n){e("onVisibilityChange")?.({visible:n})}}))}},initialState(){return"idle"},effects:["trackFormEvents"],states:{idle:{on:{"VISIBILITY.SET":{actions:["setVisibility"]},"TRIGGER.CLICK":{actions:["toggleVisibility","focusInputEl"]}}}},implementations:{actions:{setVisibility({context:e,event:t}){e.set("visible",t.value)},toggleVisibility({context:e}){e.set("visible",t=>!t)},focusInputEl({scope:e}){Ha(e)?.focus()}},effects:{trackFormEvents({scope:e,send:t}){const r=Ha(e)?.form;if(!r)return;const s=e.getWin(),i=new s.AbortController;return r.addEventListener("reset",o=>{o.defaultPrevented||t({type:"VISIBILITY.SET",value:!1})},{signal:i.signal}),r.addEventListener("submit",()=>{t({type:"VISIBILITY.SET",value:!1})},{signal:i.signal}),()=>i.abort()}}}};Ff()(["defaultVisible","dir","id","onVisibilityChange","visible","ids","getRootNode","disabled","invalid","required","readOnly","translations","ignorePasswordManagers","autoComplete","name"]);function lo(e){const t=e().value??e().defaultValue,n=e().isEqual??Object.is,[r,s]=Q(t),i=Fe(()=>e().value!=null),o={current:r()},a={current:void 0};Ie(()=>{const u=i()?e().value:r();a.current=u,o.current=u});const l=u=>{const d=a.current,f=En(u)?u(o.current):u;e().debug&&console.log(`[bindable > ${e().debug}] setValue`,{next:f,prev:d}),i()||s(f),n(f,d)||e().onChange?.(f,d)};function c(){const u=i()?e().value:r;return En(u)?u():u}return{initial:t,ref:o,get:c,set:l,invoke(u,d){e().onChange?.(u,d)},hash(u){return e().hash?.(u)??String(u)}}}lo.cleanup=e=>{yt(()=>e())};lo.ref=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}};function Ux(e){const t={current:e};return{get(n){return t.current[n]},set(n,r){t.current[n]=r}}}function la(e){return En(e)?e():e}var Ix=(e,t)=>{let n=[],r=!0;Ie(()=>{if(r){n=e.map(i=>la(i)),r=!1;return}let s=!1;for(let i=0;i<e.length;i++)if(!Mo(n[i],la(e[i]))){s=!0;break}s&&(n=e.map(i=>la(i)),t())})};function Vf(e,t={}){const n=Fe(()=>{const{id:g,ids:p,getRootNode:x}=ca(t);return Nx({id:g,ids:p,getRootNode:x})}),r=(...g)=>{e.debug&&console.log(...g)},s=Fe(()=>e.props?.({props:qf(ca(t)),scope:n()})??ca(t)),i=Hx(s),o=e.context?.({prop:i,bindable:lo,get scope(){return n()},flush:Au,getContext(){return a},getComputed(){return j},getRefs(){return w},getEvent(){return f()}}),a={get(g){return o?.[g].get()},set(g,p){o?.[g].set(p)},initial(g){return o?.[g].initial},hash(g){const p=o?.[g].get();return o?.[g].hash(p)}},l={current:new Map},c={current:null},u={current:null},d={current:{type:""}},f=()=>Ae(d.current,{current(){return d.current},previous(){return u.current}}),m=()=>Ae(U,{matches(...g){const p=U.get();return g.includes(p)},hasTag(g){const p=U.get();return!!e.states[p]?.tags?.includes(g)}}),w=Ux(e.refs?.({prop:i,context:a})??{}),v=()=>({state:m(),context:a,event:f(),prop:i,send:P,action:y,guard:A,track:Ix,refs:w,computed:j,flush:Au,get scope(){return n()},choose:E}),y=g=>{const p=En(g)?g(v()):g;if(!p)return;const x=p.map(C=>{const N=e.implementations?.actions?.[C];return N||Eu(`[zag-js] No implementation found for action "${JSON.stringify(C)}"`),N});for(const C of x)C?.(v())},A=g=>En(g)?g(v()):e.implementations?.guards?.[g](v()),_=g=>{const p=En(g)?g(v()):g;if(!p)return;const x=p.map(N=>{const D=e.implementations?.effects?.[N];return D||Eu(`[zag-js] No implementation found for effect "${JSON.stringify(N)}"`),D}),C=[];for(const N of x){const D=N?.(v());D&&C.push(D)}return()=>C.forEach(N=>N?.())},E=g=>vx(g).find(p=>{let x=!p.guard;return Sl(p.guard)?x=!!A(p.guard):En(p.guard)&&(x=p.guard(v())),x}),j=g=>{jx(e.computed,()=>"[zag-js] No computed object found on machine");const p=e.computed[g];return p({context:a,event:d.current,prop:i,refs:w,scope:n(),computed:j})},U=lo(()=>({defaultValue:e.initialState({prop:i}),onChange(g,p){p&&(l.current.get(p)?.(),l.current.delete(p)),p&&y(e.states[p]?.exit),y(c.current?.actions);const x=_(e.states[g]?.effects);if(x&&l.current.set(g,x),p===aa){y(e.entry);const C=_(e.effects);C&&l.current.set(aa,C)}y(e.states[g]?.entry)}}));let F=kr.NotStarted;Ka(()=>{const g=F===kr.Started;F=kr.Started,r(g?"rehydrating...":"initializing..."),U.invoke(U.initial,aa)}),yt(()=>{r("unmounting..."),F=kr.Stopped,l.current.forEach(p=>p?.()),l.current=new Map,c.current=null,y(e.exit)});const P=g=>{queueMicrotask(()=>{if(F!==kr.Started)return;u.current=d.current,d.current=g;let p=kt(()=>U.get());const x=e.states[p].on?.[g.type]??e.on?.[g.type],C=E(x);if(!C)return;c.current=C;const N=C.target??p;r("transition",g.type,C.target||p,`(${C.actions})`);const D=N!==p;D?U.set(N):C.reenter&&!D?U.invoke(p,p):y(C.actions)})};return e.watch?.(v()),{state:m(),send:P,context:a,prop:i,get scope(){return n()},refs:w,computed:j,event:f(),getStatus:()=>F}}function Au(e){e()}function ca(e){return En(e)?e():e}function Hx(e){return function(n){return e()[n]}}var Ru={onFocus:"onFocusIn",onBlur:"onFocusOut",onDoubleClick:"onDblClick",onChange:"onInput",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",className:"class"},Bx=e=>e.startsWith("--")?e:Kx(e);function zx(e){return e in Ru?Ru[e]:e}var Uf=Ox(e=>{const t={};for(const n in e){const r=e[n];if(!(n==="readOnly"&&r===!1)){if(n==="style"&&xx(r)){t.style=Wx(r);continue}if(n==="children"){Sl(r)&&(t.textContent=r);continue}t[zx(n)]=r}}return t});function Wx(e){let t={};for(const n in e){const r=e[n];!Sl(r)&&!_x(r)||(t[Bx(n)]=r)}return t}var Yx=/[A-Z]/g,Jx=/^ms-/;function Qx(e){return"-"+e.toLowerCase()}var ua={};function Kx(e){if(ua.hasOwnProperty(e))return ua[e];var t=e.replace(Yx,Qx);return ua[e]=Jx.test(t)?"-"+t:t}var Gx=I("<div><label>Password</label><div><input><button><span>");function co(e){const t=Vf(Vx,{id:td(),autoComplete:e.autoComplete||"new-password",value:e.password||"",required:e.required||!1}),n=Fe(()=>qx(t,Uf)),r=e.inputClass||"w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition big-placeholder",s=e.iconSize||20;return(()=>{var i=Gx(),o=i.firstChild,a=o.nextSibling,l=a.firstChild,c=l.nextSibling,u=c.firstChild;return vt(i,Ae(()=>n().getRootProps(),{get class(){return e.class}}),!1,!0),vt(o,Ae(()=>n().getLabelProps(),{class:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"}),!1,!0),vt(a,Ae(()=>n().getControlProps(),{class:"relative"}),!1,!0),vt(l,Ae(()=>n().getInputProps(),{class:r,onInput:d=>e.onPasswordChange?.(d.target.value),placeholder:"••••••••"}),!1,!1),vt(c,Ae(()=>n().getVisibilityTriggerProps(),{class:"absolute right-3 sm:right-4 top-1/2 -translate-y-1/2 text-gray-400"}),!1,!0),vt(u,Ae(()=>n().getIndicatorProps()),!1,!0),b(u,k(_e,{get when(){return n().visible},get fallback(){return k(Ym,{size:s-2})},get children(){return k(Jm,{size:s})}})),i})()}var Xx=I('<p class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm">'),Zx=I('<div class="flex items-center">Signing In...'),e_=I('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-8 sm:py-12"><form aria-labelledby=signin-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 space-y-4 border border-gray-100"autocomplete=off><div class="mb-2 sm:mb-4 text-center"><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=signin-heading>Welcome Back</h2><p class="text-gray-500 text-xs sm:text-sm">Sign in to your account.</p></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=email-input>Email</label><input type=email autocomplete=email autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"required id=email-input placeholder=you@example.com></div><div></div><button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"></button><div class="text-center mt-1 sm:mt-2"><a href=/reset-password class="text-indigo-600 hover:underline text-xs sm:text-sm font-semibold">Forgot password?</a></div><div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Don&apos;t have an account? <a href=/signup class="text-indigo-600 hover:underline font-semibold">Sign Up');function t_(){const[e,t]=Q(""),[n,r]=Q(""),[s,i]=Q(""),[o,a]=Q(!1),l=nn(),{signin:c}=On();async function u(d){if(d.preventDefault(),i(""),!e()||!n()){i("Please enter email and password");return}a(!0);try{await c(e(),n()),await new Promise(f=>setTimeout(f,200)),l("/dashboard",{replace:!0}),a(!1)}catch(f){let m;try{m=JSON.parse(f.message).detail}catch{try{m=f.message}catch{m=String(f.message)}}console.log("Error detail:",m),m&&typeof m=="string"&&(m.includes("Email not verified")||m.includes("email_verified_at is null"))?l("/verify-email",{replace:!0}):i("Incorrect email or password"),a(!1)}}return(()=>{var d=e_(),f=d.firstChild,m=f.firstChild,w=m.nextSibling,v=w.firstChild,y=v.nextSibling,A=w.nextSibling,_=A.nextSibling,E=_.nextSibling,j=E.firstChild,U=E.nextSibling,F=U.firstChild,P=F.nextSibling;return f.addEventListener("submit",u),y.$$input=g=>t(g.target.value),b(A,k(co,{get password(){return n()},onPasswordChange:r,autoComplete:"current-password",required:!0}),null),b(A,k(Qt,{get when(){return!!s()},get children(){var g=Xx();return b(g,s),g}}),null),b(_,k(Qt,{get when(){return o()},fallback:"Sign In",get children(){var g=Zx(),p=g.firstChild;return b(g,k(hs,{class:"animate-spin mr-2",size:22}),p),g}})),j.$$click=g=>{g.preventDefault(),l("/reset-password")},P.$$click=g=>{g.preventDefault(),l("/signup")},pe(()=>_.disabled=o()),pe(()=>y.value=e()),d})()}tt(["input","click"]);var n_=I('<div class="w-full mt-2"><div class="text-xs text-gray-700"id=password-requirements aria-live=polite><ul class="pace-y-0.5 sm:space-y-1">'),r_=I('<li class="flex items-center gap-2"><span aria-hidden=true></span><span>'),s_=I('<svg class="w-3 h-3"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 16 16"><path stroke-linecap=round stroke-linejoin=round d="M4 8l3 3 5-5">'),i_=I('<svg class="w-3 h-3"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 16 16"><path stroke-linecap=round stroke-linejoin=round d="M5 5l6 6M11 5l-6 6">');const ls=[{label:"At least 8 characters",test:e=>e.length>=8,error:"at least 8 characters"},{label:"Uppercase letter (A-Z)",test:e=>/[A-Z]/.test(e),error:"an uppercase letter"},{label:"Lowercase letter (a-z)",test:e=>/[a-z]/.test(e),error:"a lowercase letter"},{label:"Number (0-9)",test:e=>/\d/.test(e),error:"a number"},{label:"Special character (e.g. !?<>@#$%)",test:e=>/[^A-Za-z0-9]/.test(e),error:"a special character"}];function o_(e){if(e=e(),!e)return{met:[],unmet:ls.map(s=>s.label)};const t=ls.filter(s=>s.test(e)).map(s=>s.label),n=ls.filter(s=>!s.test(e)).map(s=>s.label),r=ls.filter(s=>!s.test(e)).map(s=>s.error);return{met:t,unmet:n,errors:r}}function a_(e){const t=Fe(()=>o_(()=>e.password));return Ie(()=>{e.onUnmet?.(t().errors)}),(()=>{var n=n_(),r=n.firstChild,s=r.firstChild;return b(s,k(Ee,{each:ls,children:i=>{const o=()=>t().met.includes(i.label);return(()=>{var a=r_(),l=a.firstChild,c=l.nextSibling;return b(l,(()=>{var u=et(()=>!!o());return()=>u()?s_():i_()})()),b(c,()=>i.label),pe(u=>{var d=`w-3.5 h-3.5 ml-1 rounded-full flex items-center justify-center ${o()?"bg-white text-green-500 border-green-500 border-[1.5px]":"border-red-500 border-[1.5px] text-red-500"}`,f=o()?"text-green-500":"text-red-500";return d!==u.e&&ht(l,u.e=d),f!==u.t&&ht(c,u.t=f),u},{e:void 0,t:void 0}),a})()}})),n})()}var l_=I('<p class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm">Password must include '),c_=I('<p class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm">'),u_=I('<div class="flex items-center">Signing Up...'),d_=I('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-6 sm:py-12"><form aria-labelledby=signup-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 space-y-4 border border-gray-100"autocomplete=off><div class="mb-2 text-center"><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=signup-heading>Get Started</h2><p class="text-gray-500 text-xs sm:text-sm">Create a new account.</p></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=name-input>Name</label><div class=relative><input type=text autocomplete=name autocapitalize=words spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"required id=name-input placeholder="What should we call you?"></div></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=email-input>Email</label><div class=relative><input type=email autocomplete=email autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"required id=email-input placeholder=you@example.com></div></div><div></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=confirm-password-input>Confirm Password</label><div class=relative><input type=password autocomplete=new-password autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition big-placeholder"required id=confirm-password-input placeholder=••••••••></div></div><button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"></button><div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Already have an account? <a href=/signin class="text-indigo-600 hover:underline font-semibold">Sign In');function f_(){const[e,t]=Q(""),[n,r]=Q(""),[s,i]=Q(""),[o,a]=Q(""),[l,c]=Q(""),[u,d]=Q(!1),[f,m]=Q([]),[w,v]=Q(!1),y=nn(),{signup:A}=On();async function _(E){if(E.preventDefault(),d(!0),c(""),!e()||!n()||!s()||!o()){c("Please fill out all fields");return}if(s()!==o()){c("Passwords do not match");return}if(!(f().length>0)){v(!0);try{await A(n(),s(),e()),await new Promise(j=>setTimeout(j,200)),y("/verify-email",{replace:!0}),v(!1)}catch(j){console.error("Signup error:",j),JSON.parse(j.message).detail.includes("Email not verified")?y("/verify-email",{replace:!0}):(v(!1),c("Sign up failed"))}}}return Ie(()=>{s()===o()&&c("")}),(()=>{var E=d_(),j=E.firstChild,U=j.firstChild,F=U.nextSibling,P=F.firstChild,g=P.nextSibling,p=g.firstChild,x=F.nextSibling,C=x.firstChild,N=C.nextSibling,D=N.firstChild,O=x.nextSibling,X=O.nextSibling,re=X.firstChild,K=re.nextSibling,H=K.firstChild,M=X.nextSibling,te=M.nextSibling,z=te.firstChild,B=z.nextSibling;return j.addEventListener("submit",_),p.$$input=V=>t(V.target.value),D.$$input=V=>r(V.target.value),b(O,k(co,{get password(){return s()},onPasswordChange:i,autoComplete:"new-password",required:!0}),null),b(O,k(Qt,{get when(){return et(()=>!!u())()&&f().length>0},get children(){var V=l_();return V.firstChild,b(V,()=>f()?.[0],null),V}}),null),b(O,k(a_,{get password(){return s()},onUnmet:m}),null),H.$$input=V=>a(V.target.value),b(X,k(Qt,{get when(){return!!l()},get children(){var V=c_();return b(V,l),V}}),null),b(M,k(Qt,{get when(){return w()},fallback:"Sign Up",get children(){var V=u_(),oe=V.firstChild;return b(V,k(hs,{class:"animate-spin mr-2",size:22}),oe),V}})),B.$$click=V=>{V.preventDefault(),y("/signin")},pe(()=>M.disabled=w()),pe(()=>p.value=e()),pe(()=>D.value=n()),pe(()=>H.value=o()),E})()}tt(["input","click"]);var h_=Ar("pinInput").parts("root","label","input","control"),xi=h_.build(),gs=e=>e.ids?.root??`pin-input:${e.id}`,g_=(e,t)=>e.ids?.input?.(t)??`pin-input:${e.id}:${t}`,Ba=e=>e.ids?.hiddenInput??`pin-input:${e.id}:hidden`,p_=e=>e.ids?.label??`pin-input:${e.id}:label`,m_=e=>e.ids?.control??`pin-input:${e.id}:control`,w_=e=>e.getById(gs(e)),uo=e=>{const n=`input[data-ownedby=${CSS.escape(gs(e))}]`;return mx(w_(e),n)},Zr=(e,t)=>uo(e)[t],v_=e=>uo(e)[0],Pu=e=>e.getById(Ba(e)),da=(e,t)=>{e.value=t,e.setAttribute("value",t)},y_={numeric:/^[0-9]+$/,alphabetic:/^[A-Za-z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/i};function b_(e,t){return e?!!y_[e]?.test(t):!0}function x_(e,t,n){return n?new RegExp(n,"g").test(e):b_(t,e)}function __(e,t){const{send:n,context:r,computed:s,prop:i,scope:o}=e,a=s("isValueComplete"),l=!!i("disabled"),c=!!i("readOnly"),u=!!i("invalid"),d=!!i("required"),f=i("translations"),m=r.get("focusedIndex");function w(){v_(o)?.focus()}return{focus:w,count:r.get("count"),items:Array.from({length:r.get("count")}).map((v,y)=>y),value:r.get("value"),valueAsString:s("valueAsString"),complete:a,setValue(v){Array.isArray(v)||Tx("[pin-input/setValue] value must be an array"),n({type:"VALUE.SET",value:v})},clearValue(){n({type:"VALUE.CLEAR"})},setValueAtIndex(v,y){n({type:"VALUE.SET",value:y,index:v})},getRootProps(){return t.element({dir:i("dir"),...xi.root.attrs,id:gs(o),"data-invalid":Oe(u),"data-disabled":Oe(l),"data-complete":Oe(a),"data-readonly":Oe(c)})},getLabelProps(){return t.label({...xi.label.attrs,dir:i("dir"),htmlFor:Ba(o),id:p_(o),"data-invalid":Oe(u),"data-disabled":Oe(l),"data-complete":Oe(a),"data-required":Oe(d),"data-readonly":Oe(c),onClick(v){v.preventDefault(),w()}})},getHiddenInputProps(){return t.input({"aria-hidden":!0,type:"text",tabIndex:-1,id:Ba(o),readOnly:c,disabled:l,required:d,name:i("name"),form:i("form"),style:wx,maxLength:s("valueLength"),defaultValue:s("valueAsString")})},getControlProps(){return t.element({...xi.control.attrs,dir:i("dir"),id:m_(o)})},getInputProps(v){const{index:y}=v,A=i("type")==="numeric"?"tel":"text";return t.input({...xi.input.attrs,dir:i("dir"),disabled:l,"data-disabled":Oe(l),"data-complete":Oe(a),id:g_(o,y.toString()),"data-index":y,"data-ownedby":gs(o),"aria-label":f?.inputLabel?.(y,s("valueLength")),inputMode:i("otp")||i("type")==="numeric"?"numeric":"text","aria-invalid":Pf(u),"data-invalid":Oe(u),type:i("mask")?"password":A,defaultValue:r.get("value")[y]||"",readOnly:c,autoCapitalize:"none",autoComplete:i("otp")?"one-time-code":"off",placeholder:m===y?"":i("placeholder"),onBeforeInput(_){try{const E=ix(_);x_(E,i("type"),i("pattern"))||(n({type:"VALUE.INVALID",value:E}),_.preventDefault()),E.length>2&&_.currentTarget.setSelectionRange(0,1,"forward")}catch{}},onChange(_){const E=Lf(_),{value:j}=_.currentTarget;if(E.inputType==="insertFromPaste"||j.length>2){n({type:"INPUT.PASTE",value:j}),_.currentTarget.value=j[0],_.preventDefault();return}if(E.inputType==="deleteContentBackward"){n({type:"INPUT.BACKSPACE"});return}n({type:"INPUT.CHANGE",value:j,index:y})},onKeyDown(_){if(_.defaultPrevented||ox(_)||lx(_))return;const j={Backspace(){n({type:"INPUT.BACKSPACE"})},Delete(){n({type:"INPUT.DELETE"})},ArrowLeft(){n({type:"INPUT.ARROW_LEFT"})},ArrowRight(){n({type:"INPUT.ARROW_RIGHT"})},Enter(){n({type:"INPUT.ENTER"})}}[ux(_,{dir:i("dir"),orientation:"horizontal"})];j&&(j(_),_.preventDefault())},onFocus(){n({type:"INPUT.FOCUS",index:y})},onBlur(_){const E=_.relatedTarget;Tf(E)&&E.dataset.ownedby===gs(o)||n({type:"INPUT.BLUR",index:y})}})}}}var{choose:k_,createMachine:$_}=Lx(),S_=$_({props({props:e}){return{placeholder:"○",otp:!1,type:"numeric",defaultValue:e.count?_i([],e.count):[],...e,translations:{inputLabel:(t,n)=>`pin code ${t+1} of ${n}`,...e.translations}}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({value:e("value"),defaultValue:e("defaultValue"),isEqual:Mo,onChange(n){e("onValueChange")?.({value:n,valueAsString:n.join("")})}})),focusedIndex:t(()=>({sync:!0,defaultValue:-1})),count:t(()=>({defaultValue:e("count")}))}},computed:{_value:({context:e})=>_i(e.get("value"),e.get("count")),valueLength:({computed:e})=>e("_value").length,filledValueLength:({computed:e})=>e("_value").filter(t=>t?.trim()!=="").length,isValueComplete:({computed:e})=>e("valueLength")===e("filledValueLength"),valueAsString:({computed:e})=>e("_value").join(""),focusedValue:({computed:e,context:t})=>e("_value")[t.get("focusedIndex")]||""},entry:k_([{guard:"autoFocus",actions:["setInputCount","setFocusIndexToFirst"]},{actions:["setInputCount"]}]),watch({action:e,track:t,context:n,computed:r}){t([()=>n.get("focusedIndex")],()=>{e(["focusInput","selectInputIfNeeded"])}),t([()=>n.get("value").join(",")],()=>{e(["syncInputElements","dispatchInputEvent"])}),t([()=>r("isValueComplete")],()=>{e(["invokeOnComplete","blurFocusedInputIfNeeded"])})},on:{"VALUE.SET":[{guard:"hasIndex",actions:["setValueAtIndex"]},{actions:["setValue"]}],"VALUE.CLEAR":{actions:["clearValue","setFocusIndexToFirst"]}},states:{idle:{on:{"INPUT.FOCUS":{target:"focused",actions:["setFocusedIndex"]}}},focused:{on:{"INPUT.CHANGE":{actions:["setFocusedValue","syncInputValue","setNextFocusedIndex"]},"INPUT.PASTE":{actions:["setPastedValue","setLastValueFocusIndex"]},"INPUT.FOCUS":{actions:["setFocusedIndex"]},"INPUT.BLUR":{target:"idle",actions:["clearFocusedIndex"]},"INPUT.DELETE":{guard:"hasValue",actions:["clearFocusedValue"]},"INPUT.ARROW_LEFT":{actions:["setPrevFocusedIndex"]},"INPUT.ARROW_RIGHT":{actions:["setNextFocusedIndex"]},"INPUT.BACKSPACE":[{guard:"hasValue",actions:["clearFocusedValue"]},{actions:["setPrevFocusedIndex","clearFocusedValue"]}],"INPUT.ENTER":{guard:"isValueComplete",actions:["requestFormSubmit"]},"VALUE.INVALID":{actions:["invokeOnInvalid"]}}}},implementations:{guards:{autoFocus:({prop:e})=>!!e("autoFocus"),hasValue:({context:e})=>e.get("value")[e.get("focusedIndex")]!=="",isValueComplete:({computed:e})=>e("isValueComplete"),hasIndex:({event:e})=>e.index!==void 0},actions:{dispatchInputEvent({computed:e,scope:t}){const n=Pu(t);gx(n,{value:e("valueAsString")})},setInputCount({scope:e,context:t,prop:n}){if(n("count"))return;const r=uo(e);t.set("count",r.length)},focusInput({context:e,scope:t}){const n=e.get("focusedIndex");n!==-1&&Zr(t,n)?.focus({preventScroll:!0})},selectInputIfNeeded({context:e,prop:t,scope:n}){const r=e.get("focusedIndex");!t("selectOnFocus")||r===-1||bi(()=>{Zr(n,r)?.select()})},invokeOnComplete({computed:e,prop:t}){e("isValueComplete")&&t("onValueComplete")?.({value:e("_value"),valueAsString:e("valueAsString")})},invokeOnInvalid({context:e,event:t,prop:n}){n("onValueInvalid")?.({value:t.value,index:e.get("focusedIndex")})},clearFocusedIndex({context:e}){e.set("focusedIndex",-1)},setFocusedIndex({context:e,event:t}){e.set("focusedIndex",t.index)},setValue({context:e,event:t}){const n=_i(t.value,e.get("count"));e.set("value",n)},setFocusedValue({context:e,event:t,computed:n,flush:r}){const s=n("focusedValue"),i=e.get("focusedIndex"),o=Tu(s,t.value);r(()=>{e.set("value",oa(n("_value"),i,o))})},revertInputValue({context:e,computed:t,scope:n}){const r=Zr(n,e.get("focusedIndex"));da(r,t("focusedValue"))},syncInputValue({context:e,event:t,scope:n}){const r=e.get("value"),s=Zr(n,t.index);da(s,r[t.index])},syncInputElements({context:e,scope:t}){const n=uo(t),r=e.get("value");n.forEach((s,i)=>{da(s,r[i])})},setPastedValue({context:e,event:t,computed:n,flush:r}){bi(()=>{const s=n("valueAsString"),i=e.get("focusedIndex"),o=n("valueLength"),a=n("filledValueLength"),l=Math.min(i,a),c=l>0?s.substring(0,i):"",u=t.value.substring(0,o-l),d=_i(`${c}${u}`.split(""),o);r(()=>{e.set("value",d)})})},setValueAtIndex({context:e,event:t,computed:n}){const r=Tu(n("focusedValue"),t.value);e.set("value",oa(n("_value"),t.index,r))},clearValue({context:e}){const t=Array.from({length:e.get("count")}).fill("");queueMicrotask(()=>{e.set("value",t)})},clearFocusedValue({context:e,computed:t}){const n=e.get("focusedIndex");n!==-1&&e.set("value",oa(t("_value"),n,""))},setFocusIndexToFirst({context:e}){e.set("focusedIndex",0)},setNextFocusedIndex({context:e,computed:t}){e.set("focusedIndex",Math.min(e.get("focusedIndex")+1,t("valueLength")-1))},setPrevFocusedIndex({context:e}){e.set("focusedIndex",Math.max(e.get("focusedIndex")-1,0))},setLastValueFocusIndex({context:e,computed:t}){bi(()=>{e.set("focusedIndex",Math.min(t("filledValueLength"),t("valueLength")-1))})},blurFocusedInputIfNeeded({context:e,prop:t,scope:n}){t("blurOnComplete")&&bi(()=>{Zr(n,e.get("focusedIndex"))?.blur()})},requestFormSubmit({computed:e,prop:t,scope:n}){if(!t("name")||!e("isValueComplete"))return;Pu(n)?.form?.requestSubmit()}}}});function Tu(e,t){let n=t;e[0]===t[0]?n=t[1]:e[0]===t[1]&&(n=t[0]);const r=n.split("");return n=r[r.length-1],n??""}function _i(e,t){return Array.from({length:t}).fill("").map((n,r)=>e[r]||n)}Ff()(["autoFocus","blurOnComplete","count","defaultValue","dir","disabled","form","getRootNode","id","ids","invalid","mask","name","onValueChange","onValueComplete","onValueInvalid","otp","pattern","placeholder","readOnly","required","selectOnFocus","translations","type","value"]);var C_=I('<div class="flex flex-col items-center"><div><input><input><input><input><input><input>');function E_(e){const t=Vf(S_,{id:td(),required:e.required||!0,autoComplete:e.autoComplete||"one-time-code",otp:e.otp||!0,onValueChange(s){e.onInput&&e.onInput(s.valueAsString)},onValueComplete(s){e.onComplete&&e.onComplete(s.valueAsString)}}),n=Fe(()=>__(t,Uf)),r=()=>"w-10 h-12 sm:w-14 sm:h-14 rounded-lg border-2 "+(e.isError?"border-red-500 focus:border-red-600 focus:ring-red-400":"border-gray-300 focus:border-blue-500 focus:ring-blue-400")+" bg-gray-50 text-center text-xl font-semibold outline-none";return(()=>{var s=C_(),i=s.firstChild,o=i.firstChild,a=o.nextSibling,l=a.nextSibling,c=l.nextSibling,u=c.nextSibling,d=u.nextSibling;return vt(i,Ae(()=>n().getRootProps(),{class:"flex justify-center gap-1 sm:gap-3 my-6"}),!1,!0),vt(o,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:0}),{get class(){return r()}}),!1,!1),vt(a,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:1}),{get class(){return r()}}),!1,!1),vt(l,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:2}),{get class(){return r()}}),!1,!1),vt(c,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:3}),{get class(){return r()}}),!1,!1),vt(u,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:4}),{get class(){return r()}}),!1,!1),vt(d,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:5}),{get class(){return r()}}),!1,!1),s})()}var A_=I('<div class=text-center><p class="text-gray-500 text-sm sm:text-base">Enter the verification code sent to your email.'),R_=I('<div class="flex items-center">Verifying...'),P_=I('<button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center">'),ju=I('<div class="flex items-center">Sending...'),T_=I(`<div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Didn't get a code? <button type=button class="text-indigo-600 hover:underline font-semibold bg-transparent border-none p-0 m-0 cursor-pointer inline-flex items-center">`),j_=I('<p class=" text-red-600 text-xs sm:text-sm">'),M_=I('<p class="pt-2 sm:pt-3 px-2 text-green-600 text-xs sm:text-sm">Email verified! Ready to sign in...'),L_=I('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-12"><form aria-labelledby=verifyemail-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-4 sm:p-12 space-y-2 border border-gray-100 relative"autocomplete=off><div class=text-center><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=verifyemail-heading>Verify Your Email'),N_=I('<div class="mb-6 sm:mb-8 text-center"><p class="text-gray-500 text-xs sm:text-sm">Send a code to verify your email.'),O_=I('<button class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"type=button>');function D_(){const[e,t]=Q(""),[n,r]=Q(!1),[s,i]=Q(""),[o,a]=Q(!1),[l,c]=Q(!1),[u,d]=Q(!1),f=nn(),[m,w]=qg(),{verifyEmail:v,sendEmailVerification:y,getPendingEmail:A}=On();Ka(()=>{A()||f("/signin",{replace:!0})});async function _(j,U){j?.preventDefault&&j.preventDefault(),i(""),a(!0);try{const F=U??e();await v(F),await new Promise(P=>setTimeout(P,200)),c(!0),f("/signin",{replace:!0}),a(!1)}catch(F){console.error("Verify email error:",F),a(!1),i("Invalid code. Please try again.")}}async function E({resend:j=!1}){i(""),j?d(!0):a(!0);try{await y(),await new Promise(U=>setTimeout(U,j?1e3:200)),a(!1),d(!1),w({codeSent:"true"}),r(!0)}catch(U){console.error("Send verification code error:",U),a(!1),d(!1),i("Error sending code. Please try again later.")}}return Ie(async()=>{if(m.codeSent==="true"&&(r(!0),m.code))try{await v(m.code),c(!0),f("/signin",{replace:!0}),a(!1)}catch(j){console.error("Verify email error with URL code:",j),a(!1),i("Invalid or expired link.")}}),Ie(()=>{e(),i("")}),(()=>{var j=L_(),U=j.firstChild;return U.firstChild,U.addEventListener("submit",_),b(U,k(_e,{get when(){return n()},get fallback(){return[N_(),(()=>{var F=O_();return F.$$click=E,b(F,k(Qt,{get when(){return o()},fallback:"Send Code",get children(){var P=ju(),g=P.firstChild;return b(P,k(hs,{class:"animate-spin mr-2",size:22}),g),P}})),pe(()=>F.disabled=o()),F})()]},get children(){return[A_(),k(E_,{otp:!0,required:!0,autocomplete:!0,onInput:t,get isError(){return!!s()},onComplete:F=>_(void 0,F)}),(()=>{var F=P_();return b(F,k(Qt,{get when(){return o()},fallback:"Verify Email",get children(){var P=R_(),g=P.firstChild;return b(P,k(hs,{class:"animate-spin mr-2",size:22}),g),P}})),pe(()=>F.disabled=o()),F})(),(()=>{var F=T_(),P=F.firstChild,g=P.nextSibling;return g.$$click=()=>E({resend:!0}),b(g,k(_e,{get when(){return u()},fallback:"Resend",get children(){var p=ju();return p.firstChild,b(p,k(hs,{class:"animate-spin mr-1",size:16}),null),p}})),pe(p=>{var x=u(),C=u();return x!==p.e&&(g.disabled=p.e=x),C!==p.t&&$t(g,"aria-disabled",p.t=C),p},{e:void 0,t:void 0}),F})()]}}),null),b(U,k(Qt,{get when(){return!!s()},class:"absolute left-10 right-0 bottom-2 sm:bottom-6",get children(){var F=j_();return b(F,s),F}}),null),b(U,k(Qt,{get when(){return l()},class:"absolute left-10 right-0 bottom-2 sm:bottom-6",get children(){return M_()}}),null),j})()}tt(["click"]);var q_=I('<div class="h-full flex items-center justify-center p-4"><div class="w-full max-w-md bg-white rounded-xl p-6 sm:p-12 shadow-2xl space-y-4">'),F_=I('<h2 class="text-xl font-bold text-gray-900 mb-2">Reset Password'),V_=I('<input type=email placeholder="Enter your email"class="w-full p-2 border border-gray-300 rounded-lg">'),fa=I('<button class="w-full bg-indigo-600 text-white py-2 rounded-lg mt-2">'),U_=I('<h2 class="text-xl font-bold text-gray-900 mb-2">Enter Verification Code'),I_=I('<p class="text-gray-500 text-xs mb-2">(DEV: Use code <!> for testing)'),H_=I('<input type=text placeholder="Verification code"class="w-full p-2 border border-gray-300 rounded-lg">'),Mu=I('<p class="text-red-600 text-xs mt-2">'),B_=I('<h2 class="text-xl font-bold text-gray-900 mb-2">Set New Password');function z_(){const[e,t]=Q(""),[n,r]=Q(""),[s,i]=Q(""),[o,a]=Q(""),[l,c]=Q(1),[u,d]=Q(""),[f,m]=Q(!1),w=nn(),{requestPasswordReset:v,verifyResetCode:y,resetPassword:A}=On(),[_,E]=Q("");async function j(){if(d(""),!e())return d("Enter your email");m(!0);try{await v(e());const P=Math.floor(1e5+Math.random()*9e5).toString();E(P),console.log("DEV: Generated code:",P),c(2)}catch{const g=Math.floor(1e5+Math.random()*9e5).toString();E(g),console.log("DEV: Generated code (fallback):",g),c(2)}m(!1)}async function U(){if(d(""),!n())return d("Enter verification code");m(!0);try{if(n()===_())c(3);else throw new Error("Invalid code")}catch{d("Invalid code")}m(!1)}async function F(){if(d(""),!s()||s()!==o())return d("Passwords do not match");m(!0);try{await new Promise(P=>setTimeout(P,200)),w("/signin")}catch{d("Failed to reset password")}m(!1)}return(()=>{var P=q_(),g=P.firstChild;return b(g,(()=>{var p=et(()=>l()===1);return()=>p()&&[F_(),(()=>{var x=V_();return x.$$input=C=>t(C.target.value),pe(()=>x.value=e()),x})(),(()=>{var x=fa();return x.$$click=j,b(x,()=>f()?"Sending...":"Send Verification Code"),pe(()=>x.disabled=f()),x})()]})(),null),b(g,(()=>{var p=et(()=>l()===2);return()=>p()&&[U_(),(()=>{var x=I_(),C=x.firstChild,N=C.nextSibling;return N.nextSibling,b(x,_,N),x})(),(()=>{var x=H_();return x.$$input=C=>r(C.target.value),pe(()=>x.value=n()),x})(),(()=>{var x=fa();return x.$$click=U,b(x,()=>f()?"Verifying...":"Verify Code"),pe(()=>x.disabled=f()),x})(),et(()=>et(()=>!!u())()&&(()=>{var x=Mu();return b(x,u),x})())]})(),null),b(g,(()=>{var p=et(()=>l()===3);return()=>p()&&[B_(),k(co,{get password(){return s()},onPasswordChange:i,placeholder:"New password"}),k(co,{get password(){return o()},onPasswordChange:a,placeholder:"Confirm password"}),(()=>{var x=fa();return x.$$click=F,b(x,()=>f()?"Resetting...":"Reset Password"),pe(()=>x.disabled=f()),x})(),et(()=>et(()=>!!u())()&&(()=>{var x=Mu();return b(x,u),x})())]})(),null),P})()}tt(["input","click"]);var W_=I('<div tabindex=0 role=button><span class=truncate></span><button class="flex items-center justify-center w-6 h-6 rounded hover:bg-gray-200 transition-colors"tabindex=0 type=button><svg fill=none stroke=currentColor stroke-width=2.2 viewBox="0 0 20 20"><polyline points="6 8 10 12 14 8"fill=none stroke-linecap=round stroke-linejoin=round>'),Y_=I('<div class=overflow-y-scroll style="transition:max-height 0.25s ease-in-out, opacity 0.25s ease-in-out">');function J_(e){const[t,n]=Q({}),{projects:r,currentProject:s}=Br(),i=()=>r().find(l=>l.id===e.projectId),o=()=>i()&&t()[i().id],a=l=>{l.stopPropagation(),n(c=>({...c,[i().id]:!c[i().id]}))};return[(()=>{var l=W_(),c=l.firstChild,u=c.nextSibling,d=u.firstChild;return l.$$keydown=f=>{(f.key==="Enter"||f.key===" ")&&(e.onSelect?.({project:i()}),f.preventDefault())},l.$$click=()=>e.onSelect?.({project:i()}),b(c,()=>i().name||i().id),u.$$click=a,pe(f=>{var m=`
    flex items-center justify-between cursor-pointer select-none rounded-md transition-colors
    px-2 py-1 font-medium text-xs text-gray-800 hover:bg-gray-100 ${s()?.id===i()?.id?"bg-gray-200":"bg-white"}
  `,w=o()?"Collapse project":"Expand project",v=`transition-transform duration-200 w-5 h-5 text-gray-500 ${o()?"rotate-90":""}`;return m!==f.e&&ht(l,f.e=m),w!==f.t&&$t(u,"aria-label",f.t=w),v!==f.a&&$t(d,"class",f.a=v),f},{e:void 0,t:void 0,a:void 0}),l})(),k(_e,{get when(){return(i().reviews||[]).some(l=>(l.checklists||[]).length>0)},get children(){var l=Y_();return b(l,k(Ee,{get each(){return i().reviews||[]},children:c=>k(Ee,{get each(){return c.checklists||[]},children:u=>e.children(u,c)})})),pe(c=>{var u=o()?"600px":"0",d=o()?1:0;return u!==c.e&&Vi(l,"max-height",c.e=u),d!==c.t&&Vi(l,"opacity",c.t=d),c},{e:void 0,t:void 0}),l}})]}tt(["click","keydown"]);var Q_=I('<ul class="list-disc space-y-1 text-xs">'),K_=I('<div style=max-width:100vw><div><div class="flex-1 overflow-y-auto sidebar-scrollbar space-y-6"><div class="mb-2 px-2 pt-4"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Projects</h3></div><div class="p-2 pb-0 space-y-1 border-t border-gray-100"></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Checklists</h3></div><div class="border-t border-gray-100 pt-1 mx-2"></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Actions</h3></div><div class="border-t border-gray-100 pt-1 space-y-1 mx-2"><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Export CSV</button><label class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-gray-700 hover:bg-gray-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>Import CSV<input type=file accept=.csv,text/csv class=hidden></label><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-blue-700 hover:bg-blue-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-blue-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 10l4.553-2.276A2 2 0 0020 6.382V5a2 2 0 00-2-2H6a2 2 0 00-2 2v1.382a2 2 0 00.447 1.342L9 10m6 0v10m-6-10v10"></path></svg>Set PDF URL</button><label class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-blue-700 hover:bg-blue-50 flex items-center gap-2 text-xs cursor-pointer"><svg class="w-4 h-4 text-blue-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 10l4.553-2.276A2 2 0 0020 6.382V5a2 2 0 00-2-2H6a2 2 0 00-2 2v1.382a2 2 0 00.447 1.342L9 10m6 0v10m-6-10v10"></path></svg>Set PDF File<input type=file accept=application/pdf class=hidden></label></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Settings</h3></div><div class="border-t border-gray-100 pt-1 space-y-1 mx-2"><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-red-600 hover:bg-red-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-red-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>Clear all data</button><div class=mt-10>'),G_=I('<div class="text-center py-2 px-2"><div class="w-8 h-8 bg-gray-100 rounded-lg mx-auto mb-2 flex items-center justify-center"><svg class="w-4 h-4 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-xs text-gray-500 font-medium">No projects yet'),X_=I('<div class="text-center py-2 px-2"><div class="w-8 h-8 bg-gray-100 rounded-lg mx-auto mb-2 flex items-center justify-center"><svg class="w-4 h-4 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-xs text-gray-500 font-medium">No checklists yet'),Z_=I('<div style=flex:1><button class="flex-1 flex items-center gap-2 px-2 py-1.5 text-left focus:outline-none"tabindex=0><svg class="w-4 h-4 text-gray-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><div class="flex-1 min-w-0"><div class="flex gap-2 items-center"><div class="text-xs font-medium truncate"></div><span></span></div><div class="text-2xs text-gray-500 mt-0.5"></div></div></button><button aria-label="Delete checklist"tabindex=-1><svg class="w-4 h-4"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),e2=I('<span class="inline-block w-2 h-2 rounded-full"style=background:currentColor>');function t2(e){const{projects:t,checklists:n,getChecklist:r}=Br(),[s,i]=Q(null),o=nn(),a=_o();Ie(()=>{if(a.name&&a.index!==void 0){const u=decodeURIComponent(a.name),d=Number(a.index);i(r({name:u,index:d}))}});function l(){const u=window.prompt("Enter PDF URL:");u&&e.setPdfUrl(u)}function c(u){const d=u.target.files[0];if(d&&d.type==="application/pdf"){const f=URL.createObjectURL(d);e.setPdfUrl(f)}else alert("Please select a valid PDF file.")}return(()=>{var u=K_(),d=u.firstChild,f=d.firstChild,m=f.firstChild,w=m.nextSibling,v=w.nextSibling,y=v.nextSibling,A=y.nextSibling,_=A.nextSibling,E=_.firstChild,j=E.nextSibling,U=j.firstChild,F=U.nextSibling,P=F.nextSibling,g=j.nextSibling,p=g.nextSibling,x=p.firstChild,C=x.nextSibling,N=C.nextSibling,D=_.nextSibling,O=D.nextSibling,X=O.firstChild;return b(w,k(_e,{get when(){return t()?.length>0},get fallback(){return G_()},get children(){return k(Ee,{get each(){return t()},children:re=>k(J_,{get projectId(){return re.id},onSelect:()=>{o(`/projects/${ys(re.name)}-${re.id}`)},children:(K,H)=>k(Lu,{project:re,get isSelected(){return s()?.id===K.id},checklist:K,onDelete:()=>e.onDeleteChecklist(re.id,H.id,K.id)})})})}})),b(y,k(_e,{get when(){return n()?.length>0},get fallback(){return X_()},get children(){var re=Q_();return b(re,k(Ee,{get each(){return n()},children:K=>k(Lu,{project:null,checklist:K,onDelete:()=>e.onDeleteChecklist(null,K.id)})})),re}})),An(E,"click",e.onExportCSV,!0),An(P,"change",e.onImportCSV),g.$$click=l,N.addEventListener("change",c),An(X,"click",e.onDeleteAll,!0),pe(re=>{var K=`
        transition-all duration-200 ease-in-out
        bg-white border-r border-gray-200 h-screen overflow-x-hidden
        ${e.open?"w-64":"w-0"}
        md:relative
        ${e.open?"":"md:w-0"}
        fixed top-0 left-0 z-30 md:static md:z-auto
        ${e.open?"translate-x-0":"-translate-x-full md:translate-x-0"}
      `,H=`
          flex flex-col h-full
          transition-opacity duration-100
          ${e.open?"duration-500 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}
        `;return K!==re.e&&ht(u,re.e=K),H!==re.t&&ht(d,re.t=H),re},{e:void 0,t:void 0}),u})()}function Lu(e){const t=nn();function n(){const r=ys(e.checklist.name);if(!e.project){t(`/checklist/${r}-${e.checklist.id}`);return}const s=ys(e.project.name),i=(e.project.reviews||[]).find(a=>(a.checklists||[]).some(l=>l.id===e.checklist.id));if(!i){console.error("Review not found for checklist",e.checklist);return}const o=ys(i.name);t(`/projects/${s}-${e.project.id}/reviews/${o}-${i.id}/checklists/${r}-${e.checklist.id}`)}return(()=>{var r=Z_(),s=r.firstChild,i=s.firstChild,o=i.nextSibling,a=o.firstChild,l=a.firstChild,c=l.nextSibling,u=a.nextSibling,d=s.nextSibling;return s.$$click=()=>n(),b(l,()=>e.checklist.name),b(c,k(_e,{get when(){return e.checklist},fallback:"Unknown",children:()=>{const f=Lc(e.checklist);return f.length+(e.checklist.name?.length||0)<30?f:e2()}})),b(u,()=>new Date(e.checklist.createdAt).toLocaleDateString()),d.$$click=f=>{f.stopPropagation(),e.onDelete(null,e.checklist.id)},pe(f=>{var m=`
            flex items-center group rounded transition-colors
            ${e.isSelected?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}
          `,w=`
                    text-3xs font-medium px-1.5 py-0.5 rounded
                    ${(()=>{const y=Lc(e.checklist);return y==="High"?"bg-green-100 text-green-800":y==="Moderate"?"bg-yellow-100 text-yellow-800":y==="Low"?"bg-orange-100 text-orange-800":y==="Critically Low"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"})()}
                  `,v=`p-1.5 mr-1 rounded transition-colors text-gray-400 hover:text-red-600 hover:bg-red-50
                  ${e.isSelected?"opacity-0 group-hover:opacity-100":""}
                `;return m!==f.e&&ht(r,f.e=m),w!==f.t&&ht(c,f.t=w),v!==f.a&&ht(d,f.a=v),f},{e:void 0,t:void 0,a:void 0}),r})()}tt(["click"]);var n2=I('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"><div class="bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 mx-2 animate-fade-in"><div class=mb-4><h2 class="text-lg font-semibold text-gray-900"></h2></div><div class="flex justify-end gap-2 mt-6"><button class="px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"autofocus>Cancel</button><button class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors">'),r2=I('<p class="mt-2 text-gray-600">');function Nu(e){return k(_e,{get when(){return e.open},get children(){return k(rd,{get children(){var t=n2(),n=t.firstChild,r=n.firstChild,s=r.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling;return b(s,()=>e.title||"Are you sure?"),b(r,(()=>{var l=et(()=>!!e.description);return()=>l()&&(()=>{var c=r2();return b(c,()=>e.description),c})()})(),null),An(o,"click",e.onCancel,!0),An(a,"click",e.onConfirm,!0),b(a,()=>e.confirmText||"Delete"),t}})}})}tt(["click"]);var s2=I('<div><div class="w-full h-full overflow-auto"></div><div role=separator tabindex=0 style=touch-action:none>');function i2(e){const t=e.direction||"horizontal",n=t==="horizontal"?"right":"bottom",r=e.position||n,s=e.min??200,i=e.max??800,o=e.initial??400,[a,l]=Q(o);let c=!1,u=0,d=0,f=null;const m=A=>{c=!0,f=A.pointerId,u=t==="horizontal"?A.clientX:A.clientY,d=a(),document.body.style.userSelect="none",A.target.setPointerCapture(f),window.addEventListener("pointermove",w),window.addEventListener("pointerup",v)},w=A=>{if(!c)return;let _=t==="horizontal"?A.clientX-u:A.clientY-u;(r==="left"||r==="top")&&(_=-_);let E=d+_;E=Math.max(s,Math.min(i,E)),l(E)},v=A=>{if(c=!1,document.body.style.userSelect="",A.target.releasePointerCapture&&f!==null)try{A.target.releasePointerCapture(f)}catch{}window.removeEventListener("pointermove",w),window.removeEventListener("pointerup",v),f=null};let y="";return t==="horizontal"?y=r==="right"?"top-0 right-0 h-full w-2 cursor-col-resize":"top-0 left-0 h-full w-2 cursor-col-resize":y=r==="bottom"?"left-0 bottom-0 w-full h-2 cursor-row-resize":"left-0 top-0 w-full h-2 cursor-row-resize",(()=>{var A=s2(),_=A.firstChild,E=_.nextSibling;return ht(A,`relative ${t==="horizontal"?"h-full":"w-full"}`),b(_,()=>e.children),E.$$pointerdown=m,ht(E,`absolute ${y} bg-gray-200 hover:bg-gray-300 transition-colors z-10`),$t(E,"aria-orientation",t),pe(j=>xo(A,t==="horizontal"?`width: ${a()}px; min-width:0;`:`height: ${a()}px; min-height:0;`,j)),A})()}tt(["pointerdown"]);var o2=I('<button class="ml-[-6px] bg-white/80 text-blue-700 p-1.5 rounded-full shadow hover:bg-white transition-all duration-200 border border-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-400"aria-label="Toggle sidebar open or closed">'),Ou=I("<span class=font-medium>Hello, "),Du=I('<button class="hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium">Sign Out'),a2=I('<nav class="flex items-center justify-between bg-gradient-to-r from-blue-700 to-blue-500 text-white px-4 py-2 shadow-lg"><div class="flex items-center space-x-3"></div><div class="flex space-x-4 items-center text-2xs sm:text-xs">'),l2=I('<svg fill=none stroke=currentColor class="w-4 h-4"viewBox="0 0 20 20"><path d="M3.5 3C3.77614 3 4 3.22386 4 3.5V16.5L3.99023 16.6006C3.94371 16.8286 3.74171 17 3.5 17C3.25829 17 3.05629 16.8286 3.00977 16.6006L3 16.5V3.5C3 3.22386 3.22386 3 3.5 3ZM11.2471 5.06836C11.4476 4.95058 11.7104 4.98547 11.8721 5.16504C12.0338 5.34471 12.0407 5.60979 11.9023 5.79688L11.835 5.87207L7.80371 9.5H16.5C16.7761 9.5 17 9.72386 17 10C17 10.2761 16.7761 10.5 16.5 10.5H7.80371L11.835 14.1279C12.0402 14.3127 12.0568 14.6297 11.8721 14.835C11.6873 15.0402 11.3703 15.0568 11.165 14.8721L6.16504 10.3721L6.09473 10.2939C6.03333 10.2093 6 10.1063 6 10C6 9.85828 6.05972 9.72275 6.16504 9.62793L11.165 5.12793L11.2471 5.06836Z">');function qu(e){return e.endsWith("/")?e.slice(0,-1):e}function c2(e){const{user:t,signout:n,authLoading:r}=On(),s=il(),i=()=>qu(s.pathname)===qu(yh),o=localStorage.getItem("userName"),a=!!o;return Ie(()=>{t()?localStorage.setItem("userName",t().name):localStorage.removeItem("userName")}),(()=>{var l=a2(),c=l.firstChild,u=c.nextSibling;return b(c,k(_e,{get when(){return!i()},get children(){var d=o2();return An(d,"click",e.toggleSidebar,!0),b(d,k(_e,{get when(){return!e.open},get fallback(){return l2()},get children(){return k(Qm,{})}})),d}}),null),b(c,k(Sr,{href:"/",class:"font-extrabold text-base sm:text-lg tracking-tight drop-shadow",children:"CoRATES"}),null),b(u,k(Sr,{href:"/dashboard",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Dashboard"}),null),b(u,k(_e,{get when(){return t()},get fallback(){return et(()=>!!(a&&r()))()?[(()=>{var d=Ou();return d.firstChild,b(d,o,null),d})(),Du()]:[k(Sr,{href:"/signin",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Sign In"}),k(Sr,{href:"/signup",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Sign Up"})]},get children(){return[(()=>{var d=Ou();return d.firstChild,b(d,()=>t().name,null),d})(),(()=>{var d=Du();return d.$$click=async()=>{await n()},d})()]}}),null),l})()}tt(["click"]);async function u2(e,t){const n=e.getReader();let r;for(;!(r=await n.read()).done;)t(r.value)}function d2(e){let t,n,r,s=!1;return function(o){t===void 0?(t=o,n=0,r=-1):t=h2(t,o);const a=t.length;let l=0;for(;n<a;){s&&(t[n]===10&&(l=++n),s=!1);let c=-1;for(;n<a&&c===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-l);break;case 13:s=!0;case 10:c=n;break}if(c===-1)break;e(t.subarray(l,c),r),l=n,r=-1}l===a?t=void 0:l!==0&&(t=t.subarray(l),n-=l)}}function f2(e,t,n){let r=Fu();const s=new TextDecoder;return function(o,a){if(o.length===0)n?.(r),r=Fu();else if(a>0){const l=s.decode(o.subarray(0,a)),c=a+(o[a+1]===32?2:1),u=s.decode(o.subarray(c));switch(l){case"data":r.data=r.data?r.data+`
`+u:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":const d=parseInt(u,10);isNaN(d)||t(r.retry=d);break}}}}function h2(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Fu(){return{data:"",event:"",id:"",retry:void 0}}var g2=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const za="text/event-stream",p2=1e3,Vu="last-event-id";function m2(e,t){var{signal:n,headers:r,onopen:s,onmessage:i,onclose:o,onerror:a,openWhenHidden:l,fetch:c}=t,u=g2(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,f)=>{const m=Object.assign({},r);m.accept||(m.accept=za);let w;function v(){w.abort(),document.hidden||U()}l||document.addEventListener("visibilitychange",v);let y=p2,A=0;function _(){document.removeEventListener("visibilitychange",v),window.clearTimeout(A),w.abort()}n?.addEventListener("abort",()=>{_(),d()});const E=c??window.fetch,j=s??w2;async function U(){var F;w=new AbortController;try{const P=await E(e,Object.assign(Object.assign({},u),{headers:m,signal:w.signal}));await j(P),await u2(P.body,d2(f2(g=>{g?m[Vu]=g:delete m[Vu]},g=>{y=g},i))),o?.(),_(),d()}catch(P){if(!w.signal.aborted)try{const g=(F=a?.(P))!==null&&F!==void 0?F:y;window.clearTimeout(A),A=window.setTimeout(U,g)}catch(g){_(),f(g)}}}U()})}function w2(e){const t=e.headers.get("content-type");if(!t?.startsWith(za))throw new Error(`Expected content-type to be ${za}, Actual: ${t}`)}var v2=Object.defineProperty,y2=Object.defineProperties,b2=Object.getOwnPropertyDescriptors,fo=Object.getOwnPropertySymbols,If=Object.prototype.hasOwnProperty,Hf=Object.prototype.propertyIsEnumerable,Bf=e=>{throw TypeError(e)},Uu=(e,t,n)=>t in e?v2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dt=(e,t)=>{for(var n in t||(t={}))If.call(t,n)&&Uu(e,n,t[n]);if(fo)for(var n of fo(t))Hf.call(t,n)&&Uu(e,n,t[n]);return e},Cl=(e,t)=>y2(e,b2(t)),x2=(e,t)=>{var n={};for(var r in e)If.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fo)for(var r of fo(e))t.indexOf(r)<0&&Hf.call(e,r)&&(n[r]=e[r]);return n},El=(e,t,n)=>t.has(e)||Bf("Cannot "+n),L=(e,t,n)=>(El(e,t,"read from private field"),n?n.call(e):t.get(e)),ge=(e,t,n)=>t.has(e)?Bf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Z=(e,t,n,r)=>(El(e,t,"write to private field"),t.set(e,n),n),we=(e,t,n)=>(El(e,t,"access private method"),n),Wa=(e,t,n,r)=>({set _(s){Z(e,t,s)},get _(){return L(e,t,r)}}),Me=(e,t,n)=>new Promise((r,s)=>{var i=l=>{try{a(n.next(l))}catch(c){s(c)}},o=l=>{try{a(n.throw(l))}catch(c){s(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,o);a((n=n.apply(e,t)).next())}),Rn=class zf extends Error{constructor(t,n,r,s,i,o){super(o||`HTTP Error ${t} at ${i}: ${n??JSON.stringify(r)}`),this.url=i,this.name="FetchError",this.status=t,this.text=n,this.json=r,this.headers=s}static fromResponse(t,n){return Me(this,null,function*(){const r=t.status,s=Object.fromEntries([...t.headers.entries()]);let i,o;const a=t.headers.get("content-type");return t.bodyUsed||(a&&a.includes("application/json")?o=yield t.json():i=yield t.text()),new zf(r,i,o,s,n)})}},Ts=class extends Error{constructor(){super("Fetch with backoff aborted"),this.name="FetchBackoffAbortError"}},_2=class extends Error{constructor(){super("Invalid shape options: missing required url parameter"),this.name="MissingShapeUrlError"}},k2=class extends Error{constructor(){super("Invalid signal option. It must be an instance of AbortSignal."),this.name="InvalidSignalError"}},$2=class extends Error{constructor(){super("shapeHandle is required if this isn't an initial fetch (i.e. offset > -1)"),this.name="MissingShapeHandleError"}},S2=class extends Error{constructor(e){super(`Cannot use reserved Electric parameter names in custom params: ${e.join(", ")}`),this.name="ReservedParamError"}},C2=class extends Error{constructor(e){super(`Column "${e??"unknown"}" does not allow NULL values`),this.name="ParserNullValueError"}},E2=class extends Error{constructor(e,t){let n=`The response for the shape request to ${e} didn't include the following required headers:
`;t.forEach(r=>{n+=`- ${r}
`}),n+=`
This is often due to a proxy not setting CORS correctly so that all Electric headers can be read by the client.`,n+=`
For more information visit the troubleshooting guide: /docs/guides/troubleshooting/missing-headers`,super(n)}},ki=e=>Number(e),A2=e=>e==="true"||e==="t",R2=e=>BigInt(e),Iu=e=>JSON.parse(e),P2=e=>e,T2={int2:ki,int4:ki,int8:R2,bool:A2,float4:ki,float8:ki,json:Iu,jsonb:Iu};function j2(e,t){let n=0,r=null,s="",i=!1,o=0,a;function l(u,d,f){let m=u.slice(d,f);return m=m==="NULL"?null:m,t?t(m):m}function c(u){const d=[];for(;n<u.length;n++){if(r=u[n],i)r==="\\"?s+=u[++n]:r==='"'?(d.push(t?t(s):s),s="",i=u[n+1]==='"',o=n+2):s+=r;else if(r==='"')i=!0;else if(r==="{")o=++n,d.push(c(u));else if(r==="}"){i=!1,o<n&&d.push(l(u,o,n)),o=n+1;break}else r===","&&a!=="}"&&a!=='"'&&(d.push(l(u,o,n)),o=n+1);a=r}return o<n&&d.push(d.push(l(u,o,n+1))),d}return c(e)[0]}var M2=class{constructor(e,t){this.parser=dt(dt({},T2),e),this.transformer=t}parse(e,t){return JSON.parse(e,(n,r)=>{if((n==="value"||n==="old_value")&&typeof r=="object"&&r!==null){const s=r;Object.keys(s).forEach(i=>{s[i]=this.parseRow(i,s[i],t)}),this.transformer&&(r=this.transformer(r))}return r})}parseRow(e,t,n){var r;const s=n[e];if(!s)return t;const i=s,{type:o,dims:a}=i,l=x2(i,["type","dims"]),c=(r=this.parser[o])!=null?r:P2,u=Hu(c,s,e);return a&&a>0?Hu((f,m)=>j2(f,u),s,e)(t):u(t,l)}};function Hu(e,t,n){var r;const s=!((r=t.not_null)!=null&&r);return i=>{if(i===null){if(!s)throw new C2(n??"unknown");return null}return e(i,t)}}function Al(e){return"key"in e}function Wf(e){return!Al(e)}function Yf(e){return Wf(e)&&e.headers.control==="up-to-date"}function L2(e){const t=e.headers.global_last_seen_lsn;if(t)return`${t}_0`}function N2(e,t){const n=BigInt(e),r=BigInt(t.xmin),s=BigInt(t.xmax),i=t.xip_list.map(BigInt);return n<r||n<s&&!i.includes(n)}var O2="electric-cursor",Rl="electric-handle",Jf="electric-offset",D2="electric-schema",q2="electric-up-to-date",F2="columns",Pl="cursor",Qf="expired_handle",Lo="handle",ar="live",No="offset",V2="table",U2="where",I2="replica",H2="params",B2="experimental_live_sse",Kf="live_sse",Gf="force-disconnect-and-refresh",Xf="pause-stream",Zf="log",Tl="subset__where",jl="subset__limit",Ml="subset__offset",Ll="subset__order_by",Nl="subset__params",z2=[ar,Kf,Lo,No,Pl,Qf,Zf,Tl,jl,Ml,Ll,Nl],W2=[429],eh={initialDelay:100,maxDelay:6e4,multiplier:1.3,maxRetries:1/0};function Y2(e){if(!e)return 0;const t=Number(e);if(Number.isFinite(t)&&t>0)return t*1e3;const n=Date.parse(e);if(!isNaN(n)){const r=n-Date.now();return Math.max(0,Math.min(r,36e5))}return 0}function J2(e,t=eh){const{initialDelay:n,maxDelay:r,multiplier:s,debug:i=!1,onFailedAttempt:o,maxRetries:a=1/0}=t;return(...l)=>Me(this,null,function*(){var c;const u=l[0],d=l[1];let f=n,m=0;for(;;)try{const w=yield e(...l);if(w.ok)return w;throw yield Rn.fromResponse(w,u.toString())}catch(w){if(o?.(),(c=d?.signal)!=null&&c.aborted)throw new Ts;if(w instanceof Rn&&!W2.includes(w.status)&&w.status>=400&&w.status<500)throw w;{if(m++,m>a)throw i&&console.log(`Max retries reached (${m}/${a}), giving up`),w;const v=w instanceof Rn&&w.headers?Y2(w.headers["retry-after"]):0,y=Math.random()*f,A=Math.min(y,r),_=Math.max(v,A);if(i){const E=v>0?"server+client":"client";console.log(`Retry attempt #${m} after ${_}ms (${E}, serverMin=${v}ms, clientBackoff=${A}ms)`)}yield new Promise(E=>setTimeout(E,_)),f=Math.min(f*s,r)}}})}var Q2=[201,204,205];function K2(e){return(...t)=>Me(this,null,function*(){var n,r;const s=t[0],i=yield e(...t);try{if(i.status<200||Q2.includes(i.status))return i;const o=yield i.text();return new Response(o,i)}catch(o){throw(r=(n=t[1])==null?void 0:n.signal)!=null&&r.aborted?new Ts:new Rn(i.status,void 0,void 0,Object.fromEntries([...i.headers.entries()]),s.toString(),o instanceof Error?o.message:typeof o=="string"?o:"failed to read body")}})}var G2={maxChunksToPrefetch:2};function X2(e,t=G2){const{maxChunksToPrefetch:n}=t;let r;return(...i)=>Me(this,null,function*(){const o=i[0].toString(),a=r?.consume(...i);if(a)return a;r?.abort();const l=yield e(...i),c=Ol(o,l);return c&&(r=new rk({fetchClient:e,maxPrefetchedRequests:n,url:c,requestInit:i[1]})),l})}var Z2=["electric-offset","electric-handle"],ek=["electric-cursor"],tk=["electric-schema"];function nk(e){return(...t)=>Me(this,null,function*(){const n=yield e(...t);if(n.ok){const r=n.headers,s=[],i=u=>s.push(...u.filter(d=>!r.has(d))),a=t[0].toString(),l=new URL(a);if([Tl,Nl,jl,Ml,Ll].some(u=>l.searchParams.has(u)))return n;if(i(Z2),l.searchParams.get(ar)==="true"&&i(ek),(!l.searchParams.has(ar)||l.searchParams.get(ar)==="false")&&i(tk),s.length>0)throw new E2(a,s)}return n})}var ho,go,$n,$r,Sn,ps,po,rk=class{constructor(e){ge(this,ps),ge(this,ho),ge(this,go),ge(this,$n,new Map),ge(this,$r),ge(this,Sn);var t;Z(this,ho,(t=e.fetchClient)!=null?t:(...n)=>fetch(...n)),Z(this,go,e.maxPrefetchedRequests),Z(this,$r,e.url.toString()),Z(this,Sn,L(this,$r)),we(this,ps,po).call(this,e.url,e.requestInit)}abort(){L(this,$n).forEach(([e,t])=>t.abort())}consume(...e){var t;const n=e[0].toString(),r=(t=L(this,$n).get(n))==null?void 0:t[0];if(!(!r||n!==L(this,$r)))return L(this,$n).delete(n),r.then(s=>{const i=Ol(n,s);Z(this,$r,i),L(this,Sn)&&!L(this,$n).has(L(this,Sn))&&we(this,ps,po).call(this,L(this,Sn),e[1])}).catch(()=>{}),r}};ho=new WeakMap;go=new WeakMap;$n=new WeakMap;$r=new WeakMap;Sn=new WeakMap;ps=new WeakSet;po=function(...e){var t,n;const r=e[0].toString();if(L(this,$n).size>=L(this,go))return;const s=new AbortController;try{const{signal:i,cleanup:o}=sk(s,(t=e[1])==null?void 0:t.signal),a=L(this,ho).call(this,r,Cl(dt({},(n=e[1])!=null?n:{}),{signal:i}));L(this,$n).set(r,[a,s]),a.then(l=>{if(!l.ok||s.signal.aborted)return;const c=Ol(r,l);if(!c||c===r){Z(this,Sn,void 0);return}return Z(this,Sn,c),we(this,ps,po).call(this,c,e[1])}).catch(()=>{}).finally(o)}catch{}};function Ol(e,t){const n=t.headers.get(Rl),r=t.headers.get(Jf),s=t.headers.has(q2);if(!n||!r||s)return;const i=new URL(e);if(!i.searchParams.has(ar))return i.searchParams.set(Lo,n),i.searchParams.set(No,r),i.searchParams.sort(),i.toString()}function sk(e,t){let n=ik;if(t)if(t.aborted)e.abort();else{const r=()=>e.abort();t.addEventListener("abort",r,{once:!0,signal:e.signal}),n=()=>t.removeEventListener("abort",r)}return{signal:e.signal,cleanup:n}}function ik(){}var ok=class{constructor(){this.data={},this.max=250,this.storageKey="electric_expired_shapes",this.load()}getExpiredHandle(e){const t=this.data[e];return t?(t.lastUsed=Date.now(),this.save(),t.expiredHandle):null}markExpired(e,t){this.data[e]={expiredHandle:t,lastUsed:Date.now()};const n=Object.keys(this.data);if(n.length>this.max){const r=n.reduce((s,i)=>this.data[i].lastUsed<this.data[s].lastUsed?i:s);delete this.data[r]}this.save()}save(){if(!(typeof localStorage>"u"))try{localStorage.setItem(this.storageKey,JSON.stringify(this.data))}catch{}}load(){if(!(typeof localStorage>"u"))try{const e=localStorage.getItem(this.storageKey);e&&(this.data=JSON.parse(e))}catch{this.data={}}}clear(){this.data={},this.save()}},th=new ok,ak=class{constructor(){this.activeSnapshots=new Map,this.xmaxSnapshots=new Map,this.snapshotsByDatabaseLsn=new Map}addSnapshot(e,t){var n,r,s,i;this.activeSnapshots.set(e.snapshot_mark,{xmin:BigInt(e.xmin),xmax:BigInt(e.xmax),xip_list:e.xip_list.map(BigInt),keys:t});const o=(r=(n=this.xmaxSnapshots.get(BigInt(e.xmax)))==null?void 0:n.add(e.snapshot_mark))!=null?r:new Set([e.snapshot_mark]);this.xmaxSnapshots.set(BigInt(e.xmax),o);const a=(i=(s=this.snapshotsByDatabaseLsn.get(BigInt(e.database_lsn)))==null?void 0:s.add(e.snapshot_mark))!=null?i:new Set([e.snapshot_mark]);this.snapshotsByDatabaseLsn.set(BigInt(e.database_lsn),a)}removeSnapshot(e){this.activeSnapshots.delete(e)}shouldRejectMessage(e){const t=e.headers.txids||[];if(t.length===0)return!1;const n=Math.max(...t);for(const[r,s]of this.xmaxSnapshots.entries())if(n>=r)for(const i of s)this.removeSnapshot(i);return[...this.activeSnapshots.values()].some(r=>r.keys.has(e.key)&&N2(n,r))}lastSeenUpdate(e){for(const[t,n]of this.snapshotsByDatabaseLsn.entries())if(t<=e)for(const r of n)this.removeSnapshot(r)}},lk=new Set([Pl,Lo,ar,No]);function nh(e){return Me(this,null,function*(){return typeof e=="function"?e():e})}function ck(e){return Me(this,null,function*(){const t=Object.entries(e),n=yield Promise.all(t.map(r=>Me(this,[r],function*([s,i]){if(i===void 0)return[s,void 0];const o=yield nh(i);return[s,Array.isArray(o)?o.join(","):o]})));return Object.fromEntries(n.filter(([r,s])=>s!==void 0))})}function uk(e){return Me(this,null,function*(){if(!e)return{};const t=Object.entries(e),n=yield Promise.all(t.map(r=>Me(this,[r],function*([s,i]){return[s,yield nh(i)]})));return Object.fromEntries(n)})}function rh(e){const t=new URL(e.origin+e.pathname);for(const[n,r]of e.searchParams)z2.includes(n)||t.searchParams.set(n,r);return t.searchParams.sort(),t.toString()}var js,Ms,ms,Vr,er,fn,Ut,Pn,Ur,tr,Kt,Ir,Zt,Ht,Yn,jn,Ls,en,jr,xn,Ns,lr,ws,mo,Jn,_n,Os,wo,vo,nr,Dl,Bs,ql,Fl,Re,Ds,cs,Vl,sh,Ul,Oo,ih,oh,ah,Il,Hl,lh,ch,Bl,Ya,uh,dh,fh,hh=class{constructor(e){ge(this,Re),ge(this,js,null),ge(this,Ms),ge(this,ms),ge(this,Vr),ge(this,er,new Map),ge(this,fn,!1),ge(this,Ut,"active"),ge(this,Pn),ge(this,Ur),ge(this,tr),ge(this,Kt,!1),ge(this,Ir,!0),ge(this,Zt,!1),ge(this,Ht),ge(this,Yn),ge(this,jn),ge(this,Ls),ge(this,en),ge(this,jr,!1),ge(this,xn),ge(this,Ns),ge(this,lr),ge(this,ws,Promise.resolve([])),ge(this,mo,new ak),ge(this,Jn,0),ge(this,_n),ge(this,Os),ge(this,wo),ge(this,vo,1e3),ge(this,nr,0),ge(this,Dl,3),ge(this,Bs,!1),ge(this,ql,100),ge(this,Fl,5e3);var t,n,r,s;this.options=dt({subscribe:!0},e),dk(this.options),Z(this,Pn,(t=this.options.offset)!=null?t:"-1"),Z(this,Ur,""),Z(this,Ht,this.options.handle),Z(this,Vr,new M2(e.parser,e.transformer)),Z(this,Ls,this.options.onError),Z(this,Yn,(n=this.options.log)!=null?n:"full");const i=(r=e.fetchClient)!=null?r:(...l)=>fetch(...l),o=Cl(dt({},(s=e.backoffOptions)!=null?s:eh),{onFailedAttempt:()=>{var l,c;Z(this,Zt,!1),(c=(l=e.backoffOptions)==null?void 0:l.onFailedAttempt)==null||c.call(l)}}),a=J2(i,o);Z(this,ms,nk(X2(a))),Z(this,Ms,K2(L(this,ms))),we(this,Re,uh).call(this)}get shapeHandle(){return L(this,Ht)}get error(){return L(this,js)}get isUpToDate(){return L(this,Kt)}get lastOffset(){return L(this,Pn)}get mode(){return L(this,Yn)}subscribe(e,t=()=>{}){const n=Math.random();return L(this,er).set(n,[e,t]),L(this,fn)||we(this,Re,Ds).call(this),()=>{L(this,er).delete(n)}}unsubscribeAll(){L(this,er).clear()}lastSyncedAt(){return L(this,tr)}lastSynced(){return L(this,tr)===void 0?1/0:Date.now()-L(this,tr)}isConnected(){return L(this,Zt)}isLoading(){return!L(this,Kt)}hasStarted(){return L(this,fn)}isPaused(){return L(this,Ut)==="paused"}forceDisconnectAndRefresh(){return Me(this,null,function*(){var e,t;Z(this,jr,!0),L(this,Kt)&&!((e=L(this,en))!=null&&e.signal.aborted)&&((t=L(this,en))==null||t.abort(Gf)),yield we(this,Re,lh).call(this),Z(this,jr,!1)})}requestSnapshot(e){return Me(this,null,function*(){if(L(this,Yn)==="full")throw new Error(`Snapshot requests are not supported in ${L(this,Yn)} mode, as the consumer is guaranteed to observe all data`);L(this,fn)||(yield we(this,Re,Ds).call(this)),yield we(this,Re,ch).call(this),Wa(this,Jn)._++;try{L(this,Jn)===1&&we(this,Re,Il).call(this);const{fetchUrl:t,requestHeaders:n}=yield we(this,Re,Vl).call(this,this.options.url,!0,e),{metadata:r,data:s}=yield we(this,Re,fh).call(this,t,n),i=s.concat([{headers:dt({control:"snapshot-end"},r)}]);return L(this,mo).addSnapshot(r,new Set(s.map(o=>o.key))),we(this,Re,Oo).call(this,i,!1),{metadata:r,data:s}}finally{Wa(this,Jn)._--,L(this,Jn)===0&&we(this,Re,Hl).call(this)}})}};js=new WeakMap;Ms=new WeakMap;ms=new WeakMap;Vr=new WeakMap;er=new WeakMap;fn=new WeakMap;Ut=new WeakMap;Pn=new WeakMap;Ur=new WeakMap;tr=new WeakMap;Kt=new WeakMap;Ir=new WeakMap;Zt=new WeakMap;Ht=new WeakMap;Yn=new WeakMap;jn=new WeakMap;Ls=new WeakMap;en=new WeakMap;jr=new WeakMap;xn=new WeakMap;Ns=new WeakMap;lr=new WeakMap;ws=new WeakMap;mo=new WeakMap;Jn=new WeakMap;_n=new WeakMap;Os=new WeakMap;wo=new WeakMap;vo=new WeakMap;nr=new WeakMap;Dl=new WeakMap;Bs=new WeakMap;ql=new WeakMap;Fl=new WeakMap;Re=new WeakSet;Ds=function(){return Me(this,null,function*(){var e,t,n,r,s;Z(this,fn,!0);try{yield we(this,Re,cs).call(this)}catch(i){if(Z(this,js,i),L(this,Ls)){const o=yield L(this,Ls).call(this,i);if(o&&typeof o=="object"){o.params&&(this.options.params=dt(dt({},(e=this.options.params)!=null?e:{}),o.params)),o.headers&&(this.options.headers=dt(dt({},(t=this.options.headers)!=null?t:{}),o.headers)),Z(this,js,null),Z(this,fn,!1),yield we(this,Re,Ds).call(this);return}i instanceof Error&&we(this,Re,Ya).call(this,i),Z(this,Zt,!1),(n=L(this,lr))==null||n.call(this);return}throw i instanceof Error&&we(this,Re,Ya).call(this,i),Z(this,Zt,!1),(r=L(this,lr))==null||r.call(this),i}Z(this,Zt,!1),(s=L(this,lr))==null||s.call(this)})};cs=function(){return Me(this,null,function*(){var e,t;if(L(this,Ut)==="pause-requested"){Z(this,Ut,"paused");return}if(!this.options.subscribe&&((e=this.options.signal)!=null&&e.aborted||L(this,Kt)))return;const n=L(this,Ut)==="paused";Z(this,Ut,"active");const{url:r,signal:s}=this.options,{fetchUrl:i,requestHeaders:o}=yield we(this,Re,Vl).call(this,r,n),a=yield we(this,Re,sh).call(this,s),l=L(this,en);try{yield we(this,Re,ih).call(this,{fetchUrl:i,requestAbortController:l,headers:o,resumingFromPause:n})}catch(c){if((c instanceof Rn||c instanceof Ts)&&l.signal.aborted&&l.signal.reason===Gf)return we(this,Re,cs).call(this);if(c instanceof Ts){l.signal.aborted&&l.signal.reason===Xf&&Z(this,Ut,"paused");return}if(!(c instanceof Rn))throw c;if(c.status==409){if(L(this,Ht)){const d=rh(i);th.markExpired(d,L(this,Ht))}const u=c.headers[Rl]||`${L(this,Ht)}-next`;return we(this,Re,dh).call(this,u),yield we(this,Re,Bl).call(this,Array.isArray(c.json)?c.json:[c.json]),we(this,Re,cs).call(this)}else throw c}finally{a&&s&&s.removeEventListener("abort",a),Z(this,en,void 0)}return(t=L(this,Ns))==null||t.call(this),we(this,Re,cs).call(this)})};Vl=function(e,t,n){return Me(this,null,function*(){const[r,s]=yield Promise.all([uk(this.options.headers),this.options.params?ck(fk(this.options.params)):void 0]);s&&gh(s);const i=new URL(e);if(s){s.table&&qt(i,V2,s.table),s.where&&qt(i,U2,s.where),s.columns&&qt(i,F2,s.columns),s.replica&&qt(i,I2,s.replica),s.params&&qt(i,H2,s.params);const l=dt({},s);delete l.table,delete l.where,delete l.columns,delete l.replica,delete l.params;for(const[c,u]of Object.entries(l))qt(i,c,u)}n&&(n.where&&qt(i,Tl,n.where),n.params&&qt(i,Nl,n.params),n.limit&&qt(i,jl,n.limit),n.offset&&qt(i,Ml,n.offset),n.orderBy&&qt(i,Ll,n.orderBy)),i.searchParams.set(No,L(this,Pn)),i.searchParams.set(Zf,L(this,Yn)),L(this,Kt)&&(!L(this,jr)&&!t&&i.searchParams.set(ar,"true"),i.searchParams.set(Pl,L(this,Ur))),L(this,Ht)&&i.searchParams.set(Lo,L(this,Ht));const o=rh(i),a=th.getExpiredHandle(o);return a&&i.searchParams.set(Qf,a),i.searchParams.sort(),{fetchUrl:i,requestHeaders:r}})};sh=function(e){return Me(this,null,function*(){var t;if(Z(this,en,new AbortController),e){const n=()=>{var r;(r=L(this,en))==null||r.abort(e.reason)};return e.addEventListener("abort",n,{once:!0}),e.aborted&&((t=L(this,en))==null||t.abort(e.reason)),n}})};Ul=function(e){return Me(this,null,function*(){var t;const{headers:n,status:r}=e,s=n.get(Rl);s&&Z(this,Ht,s);const i=n.get(Jf);i&&Z(this,Pn,i);const o=n.get(O2);o&&Z(this,Ur,o);const a=()=>{const l=n.get(D2);return l?JSON.parse(l):{}};Z(this,jn,(t=L(this,jn))!=null?t:a()),r===204&&Z(this,tr,Date.now())})};Oo=function(e,t=!1){return Me(this,null,function*(){var n;if(e.length>0){Z(this,Ir,!0);const r=e[e.length-1];if(Yf(r)){if(t){const i=L2(r);i&&Z(this,Pn,i)}Z(this,tr,Date.now()),Z(this,Kt,!0),Z(this,Ir,!1),(n=L(this,Os))==null||n.call(this)}const s=e.filter(i=>Al(i)?!L(this,mo).shouldRejectMessage(i):!0);yield we(this,Re,Bl).call(this,s)}})};ih=function(e){return Me(this,null,function*(){var t;const n=(t=this.options.liveSse)!=null?t:this.options.experimentalLiveSse;return L(this,Kt)&&n&&!L(this,jr)&&!e.resumingFromPause&&!L(this,Bs)?(e.fetchUrl.searchParams.set(B2,"true"),e.fetchUrl.searchParams.set(Kf,"true"),we(this,Re,ah).call(this,e)):we(this,Re,oh).call(this,e)})};oh=function(e){return Me(this,null,function*(){const{fetchUrl:t,requestAbortController:n,headers:r}=e,s=yield L(this,Ms).call(this,t.toString(),{signal:n.signal,headers:r});Z(this,Zt,!0),yield we(this,Re,Ul).call(this,s);const i=L(this,jn),a=(yield s.text())||"[]",l=L(this,Vr).parse(a,i);yield we(this,Re,Oo).call(this,l)})};ah=function(e){return Me(this,null,function*(){const{fetchUrl:t,requestAbortController:n,headers:r}=e,s=L(this,ms);Z(this,wo,Date.now());try{let i=[];yield m2(t.toString(),{headers:r,fetch:s,onopen:o=>Me(this,null,function*(){Z(this,Zt,!0),yield we(this,Re,Ul).call(this,o)}),onmessage:o=>{if(o.data){const a=L(this,jn),l=L(this,Vr).parse(o.data,a);i.push(l),Yf(l)&&(we(this,Re,Oo).call(this,i,!0),i=[])}},onerror:o=>{throw o},signal:n.signal})}catch(i){throw n.signal.aborted?new Ts:i}finally{const i=Date.now()-L(this,wo),o=n.signal.aborted;if(i<L(this,vo)&&!o)if(Wa(this,nr)._++,L(this,nr)>=L(this,Dl))Z(this,Bs,!0),console.warn("[Electric] SSE connections are closing immediately (possibly due to proxy buffering or misconfiguration). Falling back to long polling. Your proxy must support streaming SSE responses (not buffer the complete response). Configuration: Nginx add 'X-Accel-Buffering: no', Caddy add 'flush_interval -1' to reverse_proxy. Note: Do NOT disable caching entirely - Electric uses cache headers to enable request collapsing for efficiency.");else{const a=Math.min(L(this,Fl),L(this,ql)*Math.pow(2,L(this,nr))),l=Math.floor(Math.random()*a);yield new Promise(c=>setTimeout(c,l))}else i>=L(this,vo)&&Z(this,nr,0)}})};Il=function(){var e;L(this,fn)&&L(this,Ut)==="active"&&(Z(this,Ut,"pause-requested"),(e=L(this,en))==null||e.abort(Xf))};Hl=function(){L(this,fn)&&L(this,Ut)==="paused"&&we(this,Re,Ds).call(this)};lh=function(){return Me(this,null,function*(){return L(this,xn)?L(this,xn):(Z(this,xn,new Promise((e,t)=>{Z(this,Ns,e),Z(this,lr,t)})),L(this,xn).finally(()=>{Z(this,xn,void 0),Z(this,Ns,void 0),Z(this,lr,void 0)}),L(this,xn))})};ch=function(){return Me(this,null,function*(){if(L(this,Ir))return L(this,_n)?L(this,_n):(Z(this,_n,new Promise(e=>{Z(this,Os,e)})),L(this,_n).finally(()=>{Z(this,_n,void 0),Z(this,Os,void 0)}),L(this,_n))})};Bl=function(e){return Me(this,null,function*(){return Z(this,ws,L(this,ws).then(()=>Promise.all(Array.from(L(this,er).values()).map(t=>Me(this,[t],function*([n,r]){try{yield n(e)}catch(s){queueMicrotask(()=>{throw s})}}))))),L(this,ws)})};Ya=function(e){L(this,er).forEach(([t,n])=>{n?.(e)})};uh=function(){if(typeof document=="object"&&typeof document.hidden=="boolean"&&typeof document.addEventListener=="function"){const e=()=>{document.hidden?we(this,Re,Il).call(this):we(this,Re,Hl).call(this)};document.addEventListener("visibilitychange",e)}};dh=function(e){Z(this,Pn,"-1"),Z(this,Ur,""),Z(this,Ht,e),Z(this,Kt,!1),Z(this,Ir,!0),Z(this,Zt,!1),Z(this,jn,void 0),Z(this,Jn,0),Z(this,nr,0),Z(this,Bs,!1)};fh=function(e,t){return Me(this,null,function*(){const n=yield L(this,Ms).call(this,e.toString(),{headers:t});if(!n.ok)throw new Rn(n.status,void 0,void 0,Object.fromEntries([...n.headers.entries()]),e.toString());const{metadata:r,data:s}=yield n.json(),i=L(this,Vr).parse(JSON.stringify(s),L(this,jn));return{metadata:r,data:i}})};hh.Replica={FULL:"full",DEFAULT:"default"};function gh(e){if(!e)return;const t=Object.keys(e).filter(n=>lk.has(n));if(t.length>0)throw new S2(t)}function dk(e){if(!e.url)throw new _2;if(e.signal&&!(e.signal instanceof AbortSignal))throw new k2;if(e.offset!==void 0&&e.offset!=="-1"&&e.offset!=="now"&&!e.handle)throw new $2;gh(e.params)}function qt(e,t,n){if(!(n===void 0||n==null))if(typeof n=="string")e.searchParams.set(t,n);else if(typeof n=="object")for(const[r,s]of Object.entries(n))e.searchParams.set(`${t}[${r}]`,s);else e.searchParams.set(t,n.toString())}function fk(e){return Array.isArray(e.params)?Cl(dt({},e),{params:Object.fromEntries(e.params.map((t,n)=>[n+1,t]))}):e}var jt,Qn,Kn,yo,vs,qs,rr,Lt,ph,mh,zl,Li,wh,Wl,hk=class{constructor(e){ge(this,Lt),ge(this,jt,new Map),ge(this,Qn,new Map),ge(this,Kn,new Set),ge(this,yo,new Set),ge(this,vs,!1),ge(this,qs,"syncing"),ge(this,rr,!1),this.stream=e,this.stream.subscribe(we(this,Lt,ph).bind(this),we(this,Lt,wh).bind(this))}get isUpToDate(){return L(this,qs)==="up-to-date"}get lastOffset(){return this.stream.lastOffset}get handle(){return this.stream.shapeHandle}get rows(){return this.value.then(e=>Array.from(e.values()))}get currentRows(){return Array.from(this.currentValue.values())}get value(){return new Promise((e,t)=>{if(this.stream.isUpToDate)e(this.currentValue);else{const n=this.subscribe(({value:r})=>{n(),L(this,rr)&&t(L(this,rr)),e(r)})}})}get currentValue(){return L(this,jt)}get error(){return L(this,rr)}lastSyncedAt(){return this.stream.lastSyncedAt()}lastSynced(){return this.stream.lastSynced()}isLoading(){return this.stream.isLoading()}isConnected(){return this.stream.isConnected()}get mode(){return this.stream.mode}requestSnapshot(e){return Me(this,null,function*(){const t=JSON.stringify(e);L(this,yo).add(t),yield we(this,Lt,zl).call(this),yield this.stream.requestSnapshot(e)})}subscribe(e){const t=Math.random();return L(this,Qn).set(t,e),()=>{L(this,Qn).delete(t)}}unsubscribeAll(){L(this,Qn).clear()}get numSubscribers(){return L(this,Qn).size}};jt=new WeakMap;Qn=new WeakMap;Kn=new WeakMap;yo=new WeakMap;vs=new WeakMap;qs=new WeakMap;rr=new WeakMap;Lt=new WeakSet;ph=function(e){let t=!1;e.forEach(n=>{if(Al(n))if(t=we(this,Lt,Li).call(this,"syncing"),this.mode==="full")switch(n.headers.operation){case"insert":L(this,jt).set(n.key,n.value);break;case"update":L(this,jt).set(n.key,dt(dt({},L(this,jt).get(n.key)),n.value));break;case"delete":L(this,jt).delete(n.key);break}else switch(n.headers.operation){case"insert":L(this,Kn).add(n.key),L(this,jt).set(n.key,n.value);break;case"update":L(this,Kn).has(n.key)&&L(this,jt).set(n.key,dt(dt({},L(this,jt).get(n.key)),n.value));break;case"delete":L(this,Kn).has(n.key)&&(L(this,jt).delete(n.key),L(this,Kn).delete(n.key));break}if(Wf(n))switch(n.headers.control){case"up-to-date":t=we(this,Lt,Li).call(this,"up-to-date"),L(this,vs)&&(Z(this,vs,!1),we(this,Lt,mh).call(this));break;case"must-refetch":L(this,jt).clear(),L(this,Kn).clear(),Z(this,rr,!1),t=we(this,Lt,Li).call(this,"syncing"),Z(this,vs,!0);break}}),t&&we(this,Lt,Wl).call(this)};mh=function(){return Me(this,null,function*(){yield we(this,Lt,zl).call(this),yield Promise.all(Array.from(L(this,yo)).map(e=>Me(this,null,function*(){try{const t=JSON.parse(e);yield this.stream.requestSnapshot(t)}catch{}})))})};zl=function(){return Me(this,null,function*(){this.stream.isUpToDate||(yield new Promise(e=>{const t=()=>{this.stream.isUpToDate&&(clearInterval(n),r(),e())},n=setInterval(t,10),r=this.stream.subscribe(()=>t(),()=>t());t()}))})};Li=function(e){const t=L(this,qs)!==e;return Z(this,qs,e),t&&e==="up-to-date"};wh=function(e){e instanceof Rn&&(Z(this,rr,e),we(this,Lt,Wl).call(this))};Wl=function(){L(this,Qn).forEach(e=>{e({value:this.currentValue,rows:this.currentRows})})};var us=new Map,ds=new Map;function Ja(e){return typeof e=="function"?Function.prototype.toString.call(e):typeof e!="object"||e===null?e:Array.isArray(e)?e.map(Ja):Object.keys(e).sort().reduce((t,n)=>(t[n]=Ja(e[n]),t),{})}function vh(e){return JSON.stringify(Ja(e))}function gk(e){const t=vh(e);if(us.has(t)){const r=us.get(t);if(!r.options.signal?.aborted)return r;us.delete(t),ds.delete(r)}const n=new hh(e);return us.set(t,n),n}function pk(e){if(ds.has(e)){if(!e.options.signal?.aborted)return ds.get(e);us.delete(vh(e.options)),ds.delete(e)}const t=new hk(e);return ds.set(e,t),t}function Bu(e){return{data:e.currentRows,isLoading:e.isLoading(),lastSyncedAt:e.lastSyncedAt(),isError:e.error!==!1,shape:e,stream:e.stream,error:e.error}}function mk(e,t){return!e||e.isLoading!==t.isLoading||e.lastSyncedAt!==t.lastSyncedAt||e.isError!==t.isError||e.error!==t.error||e.shape.lastOffset!==t.shape.lastOffset||e.shape.handle!==t.shape.handle}function wk(e){return e}function vk({selector:e=wk,...t}){const n=gk(t),r=pk(n),[s,i]=Q([]),[o,a]=Q(!0),[l,c]=Q(!1),[u,d]=Q(null),[f,m]=Q(void 0),w=Bu(r);i(w.data),a(w.isLoading),c(w.isError),d(w.error),m(w.lastSyncedAt);let v=w;const y=r.subscribe(()=>{const E=Bu(r);mk(v,E)&&(i(E.data),a(E.isLoading),c(E.isError),d(E.error),m(E.lastSyncedAt),v=E)});return yt(()=>y()),e({data:s,isLoading:o,isError:l,error:u,lastSyncedAt:f,shape:r,stream:n,get:()=>({data:s(),isLoading:o(),isError:l(),error:u(),lastSyncedAt:f(),shape:r,stream:n})})}var yk=I('<div class="fixed bottom-4 right-4 z-50">'),bk=I('<div class="bg-red-100 text-red-800 px-4 py-2 rounded-md shadow">Sync failed. Please try again.'),xk=I('<div class="bg-blue-100 text-blue-800 px-4 py-2 rounded-md shadow">Syncing data...');function _k(){const[e,t]=Q(!1),[n,r]=Q(null),[s,i]=Q(new AbortController),[o,a]=Q({}),{user:l,getAccessToken:c}=On();Ie(()=>{if(l()){c();const y=["users","projects","reviews","checklists","project_members","review_assignments","checklist_answers"].reduce((A,_)=>(A[_]=vk({url:`${pt.ELECTRIC_SHAPE}`,params:{table:_},signal:s().signal}),A),{});a(y)}}),Ie(()=>{const v=o();Object.values(v).forEach(y=>{y&&typeof y.data=="function"&&y.data()}),w()});async function u(){const v=Nt.tinyStore,y=o(),A=[{name:"projects",data:y.projects?.data()??[]},{name:"users",data:y.users?.data()??[]},{name:"reviews",data:y.reviews?.data()??[]},{name:"checklists",data:y.checklists?.data()??[]},{name:"checklist_answers",data:y.checklist_answers?.data()??[]},{name:"project_members",data:y.project_members?.data()??[]},{name:"review_assignments",data:y.review_assignments?.data()??[]}];for(const{name:_,data:E}of A)if(Array.isArray(E)){v.delTable(_);for(const j of E)if(_==="checklist_answers"&&Array.isArray(j.answers))v.setRow(_,j.id,{...j,answers:JSON.stringify(j.answers)});else if(_==="project_members"){const U=`${j.project_id}::${j.user_id}`;v.setRow(_,U,j)}else if(_==="review_assignments"){const U=`${j.review_id}::${j.user_id}`;v.setRow(_,U,j)}else v.setRow(_,j.id,j)}Nt.persister.save()}let d=null,f=null;function m(v,y){let A;return function(...E){const j=()=>{clearTimeout(A),v(...E)};clearTimeout(A),A=setTimeout(j,y)}}const w=m(async()=>{try{t(!0),await u(),r(null)}catch(v){console.error("Sync error:",v),r(v.message)}finally{t(!1)}},1e3);return Ie(()=>{l()&&w()}),yt(async()=>{s().abort()}),(()=>{var v=yk();return b(v,(()=>{var y=et(()=>!!n());return()=>y()&&bk()})(),null),b(v,(()=>{var y=et(()=>!!e());return()=>y()&&xk()})(),null),v})()}var kk=I('<div class="flex-1 min-h-0 overflow-y-auto">'),$k=I('<div class="h-full border-l border-gray-200 bg-white flex flex-col"><iframe class="w-full h-full"title="PDF Viewer"style=min-width:300px>'),Sk=I('<div class="flex flex-col h-screen overflow-y-hidden"><div class="flex flex-1 min-h-0">'),Ck=I('<div class="flex-1 flex items-center justify-center">Loading...');function Ek(e){const[t,n]=Q(!1),[r,s]=Q(!1),[i,o]=Q(!1),[a,l]=Q(null),[c,u]=Q(null),{user:d}=On(),{dataLoading:f,deleteChecklist:m,setCurrentChecklist:w,getChecklist:v}=Br(),y=async()=>{try{w(null),alert("All checklists deleted!")}catch(F){console.error("Error removing all checklists:",F),alert("Error deleting checklists!")}finally{s(!1)}},A=()=>{let F="this checklist";const P=a();let g=v(P.checklistId);return g&&(F=g.name||g.title||"Untitled Checklist"),`Are you sure you want to delete ${F}? This action cannot be undone.`},_=()=>s(!1),E=(F,P)=>{console.log("Request to delete checklist id:",P,"from project:",F),l({projectId:F,checklistId:P}),o(!0)},j=async()=>{const F=a();if(!(!F||!F.checklistId))try{console.log("Deleting checklist id:",F.checklistId,"from project:",F.projectId),await m(F.projectId,F.checklistId)}catch(P){console.error("Error deleting checklist:",P),alert("Error deleting checklist!")}finally{o(!1),l(null)}},U=()=>{o(!1),l(null)};return(()=>{var F=Sk(),P=F.firstChild;return b(F,k(c2,{toggleSidebar:()=>n(g=>!g),get open(){return t()}}),P),b(P,k(t2,{get open(){return t()},onClose:()=>n(!1),setPdfUrl:u,onDeleteChecklist:E}),null),b(P,k(_e,{get when(){return d()},get children(){return k(_k,{})}}),null),b(P,k(Qt,{class:"flex flex-1",get when(){return!f()},get fallback(){return Ck()},get children(){var g=kk();return b(g,()=>e.children),g}}),null),b(P,k(_e,{get when(){return c()},get children(){return k(i2,{direction:"horizontal",min:250,max:1600,initial:500,position:"left",get children(){var g=$k(),p=g.firstChild;return pe(()=>$t(p,"src",c())),g}})}}),null),b(F,k(Nu,{get open(){return i()},title:"Delete checklist?",get description(){return A()},confirmText:"Delete",onCancel:U,onConfirm:j}),null),b(F,k(Nu,{get open(){return r()},title:"Delete all checklists?",description:"Are you sure you want to delete all saved checklists? This action cannot be undone.",confirmText:"Delete all",onCancel:_,onConfirm:y}),null),F})()}var Ak=I("<h1>404 - Not Found");function Rk(){return Ak()}var Pk=I("<h1>You are offline, you must be online to access this page.");function Tk(){return Pk()}var jk=I('<div class="max-w-5xl mx-auto p-6"><h2 class="text-xl font-bold mb-4">Merge AMSTAR2 Checklists</h2><div class="grid grid-cols-3 gap-4 font-mono text-xs"><div class="font-bold text-center">Checklist A</div><div class="font-bold text-center">Checklist B</div><div class="font-bold text-center">Merged Result</div></div><button class="mt-6 px-4 py-2 bg-blue-600 text-white rounded">Save Merged Checklist'),zu=I('<button class="mt-1 text-blue-600 underline">Use this'),Mk=I('<div class=contents><div><pre></pre></div><div><pre></pre></div><div class="p-2 border bg-green-50"><pre>');function Lk(){const e=_o(),{getChecklist:t}=Br();console.log("Route params:",decodeURIComponent(e.nameA),e.indexA,decodeURIComponent(e.nameB),e.indexB);const n=t(decodeURIComponent(e.nameA),e.indexA),r=t(decodeURIComponent(e.nameB),e.indexB);console.log("Merging checklists:",n,r);const[s,i]=Q({...n}),o=["q1","q2","q3","q4","q5","q6","q7","q8","q9a","q9b","q10","q11a","q11b","q12","q13","q14","q15","q16"];function a(u){const d=n[u]?.answers,f=r[u]?.answers;return JSON.stringify(d)!==JSON.stringify(f)}function l(u,d){i(f=>({...f,[d]:u==="A"?{...n[d]}:{...r[d]}}))}function c(){alert("not implemented")}return(()=>{var u=jk(),d=u.firstChild,f=d.nextSibling,m=f.firstChild,w=m.nextSibling;w.nextSibling;var v=f.nextSibling;return b(f,k(Ee,{each:o,children:y=>(()=>{var A=Mk(),_=A.firstChild,E=_.firstChild,j=_.nextSibling,U=j.firstChild,F=j.nextSibling,P=F.firstChild;return b(E,()=>JSON.stringify(n[y]?.answers,null,1)),b(_,k(_e,{get when(){return a(y)},get children(){var g=zu();return g.$$click=()=>l("A",y),g}}),null),b(U,()=>JSON.stringify(r[y]?.answers,null,1)),b(j,k(_e,{get when(){return a(y)},get children(){var g=zu();return g.$$click=()=>l("B",y),g}}),null),b(P,()=>JSON.stringify(s()[y]?.answers,null,1)),pe(g=>{var p=`p-2 border ${a(y)?"bg-yellow-100":""}`,x=`p-2 border ${a(y)?"bg-yellow-100":""}`;return p!==g.e&&ht(_,g.e=p),x!==g.t&&ht(j,g.t=x),g},{e:void 0,t:void 0}),A})()}),null),v.$$click=c,u})()}tt(["click"]);var Un=I('<tr class="bg-gray-50 text-xs">'),Nk=I('<div class="grid grid-cols-1 gap-2"><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Projects (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Users (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Reviews (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Checklists (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Answers (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Project Members (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Review Assignments (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody>'),Ok=I('<div class="p-3 bg-gray-50 text-xs"><h1 class="text-lg font-bold mb-2">TinyBase Store Data'),Dk=I('<div class="p-2 bg-blue-100 rounded">Loading...'),In=I('<th class="p-1 text-left">'),Hn=I('<tr class="hover:bg-gray-50 border-t border-gray-100">'),Bn=I('<td class="p-1 font-mono max-w-[100px] truncate">');function qk(){const{projects:e,users:t,reviews:n,checklists:r,checklistAnswers:s,projectMembers:i,reviewAssignments:o,state:a,isLoaded:l}=Nt;return(()=>{var c=Ok();return c.firstChild,b(c,k(_e,{get when(){return l()},get fallback(){return Dk()},get children(){var u=Nk(),d=u.firstChild,f=d.firstChild,m=f.firstChild,w=m.firstChild,v=w.nextSibling;v.nextSibling;var y=f.nextSibling,A=y.firstChild,_=A.firstChild,E=_.nextSibling,j=d.nextSibling,U=j.firstChild,F=U.firstChild,P=F.firstChild,g=P.nextSibling;g.nextSibling;var p=U.nextSibling,x=p.firstChild,C=x.firstChild,N=C.nextSibling,D=j.nextSibling,O=D.firstChild,X=O.firstChild,re=X.firstChild,K=re.nextSibling;K.nextSibling;var H=O.nextSibling,M=H.firstChild,te=M.firstChild,z=te.nextSibling,B=D.nextSibling,V=B.firstChild,oe=V.firstChild,ce=oe.firstChild,ve=ce.nextSibling;ve.nextSibling;var ke=V.nextSibling,ae=ke.firstChild,se=ae.firstChild,R=se.nextSibling,T=B.nextSibling,W=T.firstChild,ie=W.firstChild,G=ie.firstChild,me=G.nextSibling;me.nextSibling;var le=W.nextSibling,de=le.firstChild,J=de.firstChild,fe=J.nextSibling,rt=T.nextSibling,lt=rt.firstChild,Xe=lt.firstChild,it=Xe.firstChild,We=it.nextSibling;We.nextSibling;var nt=lt.nextSibling,He=nt.firstChild,Ye=He.firstChild,mt=Ye.nextSibling,mn=rt.nextSibling,wn=mn.firstChild,Tt=wn.firstChild,bt=Tt.firstChild,Ot=bt.nextSibling;Ot.nextSibling;var on=wn.nextSibling,Dn=on.firstChild,pr=Dn.firstChild,zs=pr.nextSibling;return b(m,()=>e().length,v),b(_,k(_e,{get when(){return e().length>0},get children(){var $e=Un();return b($e,k(Ee,{get each(){return Object.keys(e()[0])},children:Se=>(()=>{var Pe=In();return b(Pe,Se),Pe})()})),$e}})),b(E,k(Ee,{get each(){return e()},children:$e=>(()=>{var Se=Hn();return b(Se,k(Ee,{get each(){return Object.entries($e)},children:([Pe,ye])=>(()=>{var Be=Bn();return b(Be,()=>typeof ye=="object"&&ye!==null?JSON.stringify(ye).substring(0,20)+(JSON.stringify(ye).length>20?"...":""):String(ye)),Be})()})),Se})()})),b(F,()=>t().length,g),b(C,k(_e,{get when(){return t().length>0},get children(){var $e=Un();return b($e,k(Ee,{get each(){return Object.keys(t()[0])},children:Se=>(()=>{var Pe=In();return b(Pe,Se),Pe})()})),$e}})),b(N,k(Ee,{get each(){return t()},children:$e=>(()=>{var Se=Hn();return b(Se,k(Ee,{get each(){return Object.entries($e)},children:([Pe,ye])=>(()=>{var Be=Bn();return b(Be,()=>typeof ye=="object"&&ye!==null?JSON.stringify(ye).substring(0,20)+(JSON.stringify(ye).length>20?"...":""):String(ye)),Be})()})),Se})()})),b(X,()=>n().length,K),b(te,k(_e,{get when(){return n().length>0},get children(){var $e=Un();return b($e,k(Ee,{get each(){return Object.keys(n()[0])},children:Se=>(()=>{var Pe=In();return b(Pe,Se),Pe})()})),$e}})),b(z,k(Ee,{get each(){return n()},children:$e=>(()=>{var Se=Hn();return b(Se,k(Ee,{get each(){return Object.entries($e)},children:([Pe,ye])=>(()=>{var Be=Bn();return b(Be,()=>typeof ye=="object"&&ye!==null?JSON.stringify(ye).substring(0,20)+(JSON.stringify(ye).length>20?"...":""):String(ye)),Be})()})),Se})()})),b(oe,()=>r().length,ve),b(se,k(_e,{get when(){return r().length>0},get children(){var $e=Un();return b($e,k(Ee,{get each(){return Object.keys(r()[0])},children:Se=>(()=>{var Pe=In();return b(Pe,Se),Pe})()})),$e}})),b(R,k(Ee,{get each(){return r()},children:$e=>(()=>{var Se=Hn();return b(Se,k(Ee,{get each(){return Object.entries($e)},children:([Pe,ye])=>(()=>{var Be=Bn();return b(Be,()=>typeof ye=="object"&&ye!==null?JSON.stringify(ye).substring(0,20)+(JSON.stringify(ye).length>20?"...":""):String(ye)),Be})()})),Se})()})),b(ie,()=>s().length,me),b(J,k(_e,{get when(){return s().length>0},get children(){var $e=Un();return b($e,k(Ee,{get each(){return Object.keys(s()[0])},children:Se=>(()=>{var Pe=In();return b(Pe,Se),Pe})()})),$e}})),b(fe,k(Ee,{get each(){return s()},children:$e=>(()=>{var Se=Hn();return b(Se,k(Ee,{get each(){return Object.entries($e)},children:([Pe,ye])=>(()=>{var Be=Bn();return b(Be,()=>typeof ye=="object"&&ye!==null?JSON.stringify(ye).substring(0,20)+(JSON.stringify(ye).length>20?"...":""):String(ye)),Be})()})),Se})()})),b(Xe,()=>i().length,We),b(Ye,k(_e,{get when(){return i().length>0},get children(){var $e=Un();return b($e,k(Ee,{get each(){return Object.keys(i()[0])},children:Se=>(()=>{var Pe=In();return b(Pe,Se),Pe})()})),$e}})),b(mt,k(Ee,{get each(){return i()},children:$e=>(()=>{var Se=Hn();return b(Se,k(Ee,{get each(){return Object.entries($e)},children:([Pe,ye])=>(()=>{var Be=Bn();return b(Be,()=>typeof ye=="object"&&ye!==null?JSON.stringify(ye).substring(0,20)+(JSON.stringify(ye).length>20?"...":""):String(ye)),Be})()})),Se})()})),b(Tt,()=>o().length,Ot),b(pr,k(_e,{get when(){return o().length>0},get children(){var $e=Un();return b($e,k(Ee,{get each(){return Object.keys(o()[0])},children:Se=>(()=>{var Pe=In();return b(Pe,Se),Pe})()})),$e}})),b(zs,k(Ee,{get each(){return o()},children:$e=>(()=>{var Se=Hn();return b(Se,k(Ee,{get each(){return Object.entries($e)},children:([Pe,ye])=>(()=>{var Be=Bn();return b(Be,()=>typeof ye=="object"&&ye!==null?JSON.stringify(ye).substring(0,20)+(JSON.stringify(ye).length>20?"...":""):String(ye)),Be})()})),Se})()})),u}}),null),c})()}const yh="/amstar2-checklist-scoring-app";function ys(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function Fk(){return k(e0,{base:yh,get children(){return k(Et,{path:"/",component:Ek,get children(){return[k(Et,{path:"/",component:c0}),k(Et,{path:"/dashboard",component:Wb}),k(Et,{path:"/dataviewer",component:qk}),k(Et,{path:"/projects/:projectId",component:Mb}),k(Et,{path:"/projects/:projectId/reviews/:reviewId/checklists/:checklistId",component:Zc}),k(Et,{path:"/checklist/:checklistId",component:Zc}),k(Et,{path:"/merge/:checklistIdA/:checklistIdB",component:Lk}),k(Et,{path:"/signin",component:()=>k($i,{get children(){return k(t_,{})}})}),k(Et,{path:"/signup",component:()=>k($i,{get children(){return k(f_,{})}})}),k(Et,{path:"/verify-email",component:()=>k($i,{get children(){return k(D_,{})}})}),k(Et,{path:"/reset-password",component:()=>k($i,{get children(){return k(z_,{})}})}),k(Et,{path:"*",component:Rk})]}})}})}function $i(e){const t=Rf();return k(_e,{get when(){return t()},get fallback(){return k(Tk,{})},get children(){return e.children}})}function Vk(){return k(Fk,{})}mg(()=>k(Vk,{}),document.getElementById("root"));export{pt as A,jc as _,rn as a,n$ as p,Rf as u};
