(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const rh=!1,sh=(e,t)=>e===t,Nt=Symbol("solid-proxy"),lu=typeof Proxy=="function",jo=Symbol("solid-track"),fi={equals:sh};let cu=pu;const bn=1,di=2,uu={owned:null,cleanups:null,context:null,owner:null};var Se=null;let po=null,ih=null,Ne=null,ot=null,en=null,Bi=0;function In(e,t){const n=Ne,r=Se,s=e.length===0,i=t===void 0?r:t,o=s?uu:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=s?e:()=>e(()=>ht(()=>ts(o)));Se=o,Ne=null;try{return xn(a,!0)}finally{Ne=n,Se=r}}function K(e,t){t=t?Object.assign({},fi,t):fi;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=s=>(typeof s=="function"&&(s=s(n.value)),gu(n,s));return[hu.bind(n),r]}function ce(e,t,n){const r=wa(e,t,!1,bn);ys(r)}function je(e,t,n){cu=ch;const r=wa(e,t,!1,bn);(!n||!n.render)&&(r.user=!0),en?en.push(r):ys(r)}function Me(e,t,n){n=n?Object.assign({},fi,n):fi;const r=wa(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ys(r),hu.bind(r)}function fu(e){return xn(e,!1)}function ht(e){if(Ne===null)return e();const t=Ne;Ne=null;try{return e()}finally{Ne=t}}function fa(e,t,n){const r=Array.isArray(e);let s,i=n&&n.defer;return o=>{let a;if(r){a=Array(e.length);for(let c=0;c<e.length;c++)a[c]=e[c]()}else a=e();if(i)return i=!1,o;const l=ht(()=>t(a,s,o));return s=a,l}}function da(e){je(()=>ht(e))}function gt(e){return Se===null||(Se.cleanups===null?Se.cleanups=[e]:Se.cleanups.push(e)),e}function Do(){return Ne}function ha(){return Se}function ga(e,t){const n=Se,r=Ne;Se=e,Ne=null;try{return xn(t,!0)}catch(s){va(s)}finally{Se=n,Ne=r}}function oh(e){const t=Ne,n=Se;return Promise.resolve().then(()=>{Ne=t,Se=n;let r;return xn(e,!1),Ne=Se=null,r?r.done:void 0})}const[D_,q_]=K(!1);function du(e,t){const n=Symbol("context");return{id:n,Provider:fh(n),defaultValue:e}}function pa(e){let t;return Se&&Se.context&&(t=Se.context[e.id])!==void 0?t:e.defaultValue}function ma(e){const t=Me(e),n=Me(()=>qo(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function hu(){if(this.sources&&this.state)if(this.state===bn)ys(this);else{const e=ot;ot=null,xn(()=>gi(this),!1),ot=e}if(Ne){const e=this.observers?this.observers.length:0;Ne.sources?(Ne.sources.push(this),Ne.sourceSlots.push(e)):(Ne.sources=[this],Ne.sourceSlots=[e]),this.observers?(this.observers.push(Ne),this.observerSlots.push(Ne.sources.length-1)):(this.observers=[Ne],this.observerSlots=[Ne.sources.length-1])}return this.value}function gu(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&xn(()=>{for(let s=0;s<e.observers.length;s+=1){const i=e.observers[s],o=po&&po.running;o&&po.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?ot.push(i):en.push(i),i.observers&&mu(i)),o||(i.state=bn)}if(ot.length>1e6)throw ot=[],new Error},!1)),t}function ys(e){if(!e.fn)return;ts(e);const t=Bi;ah(e,e.value,t)}function ah(e,t,n){let r;const s=Se,i=Ne;Ne=Se=e;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=bn,e.owned&&e.owned.forEach(ts),e.owned=null),e.updatedAt=n+1,va(o)}finally{Ne=i,Se=s}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?gu(e,r):e.value=r,e.updatedAt=n)}function wa(e,t,n,r=bn,s){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Se,context:Se?Se.context:null,pure:n};return Se===null||Se!==uu&&(Se.owned?Se.owned.push(i):Se.owned=[i]),i}function hi(e){if(e.state===0)return;if(e.state===di)return gi(e);if(e.suspense&&ht(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Bi);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===bn)ys(e);else if(e.state===di){const r=ot;ot=null,xn(()=>gi(e,t[0]),!1),ot=r}}function xn(e,t){if(ot)return e();let n=!1;t||(ot=[]),en?n=!0:en=[],Bi++;try{const r=e();return lh(n),r}catch(r){n||(en=null),ot=null,va(r)}}function lh(e){if(ot&&(pu(ot),ot=null),e)return;const t=en;en=null,t.length&&xn(()=>cu(t),!1)}function pu(e){for(let t=0;t<e.length;t++)hi(e[t])}function ch(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:hi(r)}for(t=0;t<n;t++)hi(e[t])}function gi(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const s=r.state;s===bn?r!==t&&(!r.updatedAt||r.updatedAt<Bi)&&hi(r):s===di&&gi(r,t)}}}function mu(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=di,n.pure?ot.push(n):en.push(n),n.observers&&mu(n))}}function ts(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),o=n.observerSlots.pop();r<s.length&&(i.sourceSlots[o]=r,s[r]=i,n.observerSlots[r]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)ts(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ts(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function uh(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function va(e,t=Se){throw uh(e)}function qo(e){if(typeof e=="function"&&!e.length)return qo(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=qo(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function fh(e,t){return function(r){let s;return ce(()=>s=ht(()=>(Se.context={...Se.context,[e]:r.value},ma(()=>r.children))),void 0),s}}const dh=Symbol("fallback");function Ul(e){for(let t=0;t<e.length;t++)e[t]()}function hh(e,t,n={}){let r=[],s=[],i=[],o=0,a=t.length>1?[]:null;return gt(()=>Ul(i)),()=>{let l=e()||[],c=l.length,u,f;return l[jo],ht(()=>{let m,w,b,$,A,_,P,L,O;if(c===0)o!==0&&(Ul(i),i=[],r=[],s=[],o=0,a&&(a=[])),n.fallback&&(r=[dh],s[0]=In(R=>(i[0]=R,n.fallback())),o=1);else if(o===0){for(s=new Array(c),f=0;f<c;f++)r[f]=l[f],s[f]=In(d);o=c}else{for(b=new Array(c),$=new Array(c),a&&(A=new Array(c)),_=0,P=Math.min(o,c);_<P&&r[_]===l[_];_++);for(P=o-1,L=c-1;P>=_&&L>=_&&r[P]===l[L];P--,L--)b[L]=s[P],$[L]=i[P],a&&(A[L]=a[P]);for(m=new Map,w=new Array(L+1),f=L;f>=_;f--)O=l[f],u=m.get(O),w[f]=u===void 0?-1:u,m.set(O,f);for(u=_;u<=P;u++)O=r[u],f=m.get(O),f!==void 0&&f!==-1?(b[f]=s[u],$[f]=i[u],a&&(A[f]=a[u]),f=w[f],m.set(O,f)):i[u]();for(f=_;f<c;f++)f in b?(s[f]=b[f],i[f]=$[f],a&&(a[f]=A[f],a[f](f))):s[f]=In(d);s=s.slice(0,o=c),r=l.slice(0)}return s});function d(m){if(i[f]=m,a){const[w,b]=K(f);return a[f]=b,t(l[f],w)}return t(l[f])}}}function S(e,t){return ht(()=>e(t||{}))}function qs(){return!0}const Fo={get(e,t,n){return t===Nt?n:e.get(t)},has(e,t){return t===Nt?!0:e.has(t)},set:qs,deleteProperty:qs,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:qs,deleteProperty:qs}},ownKeys(e){return e.keys()}};function mo(e){return(e=typeof e=="function"?e():e)?e:{}}function gh(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function be(...e){let t=!1;for(let o=0;o<e.length;o++){const a=e[o];t=t||!!a&&Nt in a,e[o]=typeof a=="function"?(t=!0,Me(a)):a}if(lu&&t)return new Proxy({get(o){for(let a=e.length-1;a>=0;a--){const l=mo(e[a])[o];if(l!==void 0)return l}},has(o){for(let a=e.length-1;a>=0;a--)if(o in mo(e[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<e.length;a++)o.push(...Object.keys(mo(e[a])));return[...new Set(o)]}},Fo);const n={},r=Object.create(null);for(let o=e.length-1;o>=0;o--){const a=e[o];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=f.get?{enumerable:!0,configurable:!0,get:gh.bind(n[u]=[f.get.bind(a)])}:f.value!==void 0?f:void 0;else{const d=n[u];d&&(f.get?d.push(f.get.bind(a)):f.value!==void 0&&d.push(()=>f.value))}}}const s={},i=Object.keys(r);for(let o=i.length-1;o>=0;o--){const a=i[o],l=r[a];l&&l.get?Object.defineProperty(s,a,l):s[a]=l?l.value:void 0}return s}function wu(e,...t){if(lu&&Nt in e){const s=new Set(t.length>1?t.flat():t[0]),i=t.map(o=>new Proxy({get(a){return o.includes(a)?e[a]:void 0},has(a){return o.includes(a)&&a in e},keys(){return o.filter(a=>a in e)}},Fo));return i.push(new Proxy({get(o){return s.has(o)?void 0:e[o]},has(o){return s.has(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!s.has(o))}},Fo)),i}const n={},r=t.map(()=>({}));for(const s of Object.getOwnPropertyNames(e)){const i=Object.getOwnPropertyDescriptor(e,s),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,l=0;for(const c of t)c.includes(s)&&(a=!0,o?r[l][s]=i.value:Object.defineProperty(r[l],s,i)),++l;a||(o?n[s]=i.value:Object.defineProperty(n,s,i))}return[...r,n]}let ph=0;function vu(){return`cl-${ph++}`}const mh=e=>`Stale read from <${e}>.`;function it(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Me(hh(()=>e.each,e.children,t||void 0))}function _e(e){const t=e.keyed,n=Me(()=>e.when,void 0,void 0),r=t?n:Me(n,void 0,{equals:(s,i)=>!s==!i});return Me(()=>{const s=r();if(s){const i=e.children;return typeof i=="function"&&i.length>0?ht(()=>i(t?s:()=>{if(!ht(r))throw mh("Show");return n()})):i}return e.fallback},void 0,void 0)}const wh=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],vh=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...wh]),yh=new Set(["innerHTML","textContent","innerText","children"]),bh=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),xh=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function _h(e,t){const n=xh[e];return typeof n=="object"?n[t]?n.$:void 0:n}const kh=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Sh={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},nt=e=>Me(()=>e());function $h(e,t,n){let r=n.length,s=t.length,i=r,o=0,a=0,l=t[s-1].nextSibling,c=null;for(;o<s||a<i;){if(t[o]===n[a]){o++,a++;continue}for(;t[s-1]===n[i-1];)s--,i--;if(s===o){const u=i<r?a?n[a-1].nextSibling:n[i-a]:l;for(;a<i;)e.insertBefore(n[a++],u)}else if(i===a)for(;o<s;)(!c||!c.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[i-1]&&n[a]===t[s-1]){const u=t[--s].nextSibling;e.insertBefore(n[a++],t[o++].nextSibling),e.insertBefore(n[--i],u),t[s]=n[i]}else{if(!c){c=new Map;let f=a;for(;f<i;)c.set(n[f],f++)}const u=c.get(t[o]);if(u!=null)if(a<u&&u<i){let f=o,d=1,m;for(;++f<s&&f<i&&!((m=c.get(t[f]))==null||m!==u+d);)d++;if(d>u-a){const w=t[o];for(;a<u;)e.insertBefore(n[a++],w)}else e.replaceChild(n[a++],t[o++])}else o++;else t[o++].remove()}}}const Hl="_$DX_DELEGATE";function Ch(e,t,n,r={}){let s;return In(i=>{s=i,t===document?e():C(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{s(),t.textContent=""}}function q(e,t,n,r){let s;const i=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},o=()=>(s||(s=i())).cloneNode(!0);return o.cloneNode=o,o}function ze(e,t=window.document){const n=t[Hl]||(t[Hl]=new Set);for(let r=0,s=e.length;r<s;r++){const i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,Mh))}}function pt(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Eh(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function Ah(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function Be(e,t){t==null?e.removeAttribute("class"):e.className=t}function Mt(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const s=n[0];e.addEventListener(t,n[0]=i=>s.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function Rh(e,t,n={}){const r=Object.keys(t||{}),s=Object.keys(n);let i,o;for(i=0,o=s.length;i<o;i++){const a=s[i];!a||a==="undefined"||t[a]||(Bl(e,a,!1),delete n[a])}for(i=0,o=r.length;i<o;i++){const a=r[i],l=!!t[a];!a||a==="undefined"||n[a]===l||!l||(Bl(e,a,!0),n[a]=l)}return n}function zi(e,t,n){if(!t)return n?pt(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let s,i;for(i in n)t[i]==null&&r.removeProperty(i),delete n[i];for(i in t)s=t[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function Yr(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function ct(e,t={},n,r){const s={};return r||ce(()=>s.children=rs(e,t.children,s.children)),ce(()=>typeof t.ref=="function"&&ns(t.ref,e)),ce(()=>Ph(e,t,n,!0,s,!0)),s}function ns(e,t,n){return ht(()=>e(t,n))}function C(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return rs(e,t,r,n);ce(s=>rs(e,t(),s,n),r)}function Ph(e,t,n,r,s={},i=!1){t||(t={});for(const o in s)if(!(o in t)){if(o==="children")continue;s[o]=zl(e,o,null,s[o],n,i,t)}for(const o in t){if(o==="children")continue;const a=t[o];s[o]=zl(e,o,a,s[o],n,i,t)}}function Th(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function Bl(e,t,n){const r=t.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)e.classList.toggle(r[s],n)}function zl(e,t,n,r,s,i,o){let a,l,c,u,f;if(t==="style")return zi(e,n,r);if(t==="classList")return Rh(e,n,r);if(n===r)return r;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const d=t.slice(3);r&&e.removeEventListener(d,r,typeof r!="function"&&r),n&&e.addEventListener(d,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const d=t.slice(10);r&&e.removeEventListener(d,r,!0),n&&e.addEventListener(d,n,!0)}else if(t.slice(0,2)==="on"){const d=t.slice(2).toLowerCase(),m=kh.has(d);if(!m&&r){const w=Array.isArray(r)?r[0]:r;e.removeEventListener(d,w)}(m||n)&&(Mt(e,d,n,m),m&&ze([d]))}else if(t.slice(0,5)==="attr:")pt(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")Ah(e,t.slice(5),n);else if((f=t.slice(0,5)==="prop:")||(c=yh.has(t))||!s&&((u=_h(t,e.tagName))||(l=vh.has(t)))||(a=e.nodeName.includes("-")||"is"in o))f&&(t=t.slice(5),l=!0),t==="class"||t==="className"?Be(e,n):a&&!l&&!c?e[Th(t)]=n:e[u||t]=n;else{const d=s&&t.indexOf(":")>-1&&Sh[t.split(":")[0]];d?Eh(e,d,t,n):pt(e,bh[t]||t,n)}return n}function Mh(e){let t=e.target;const n=`$$${e.type}`,r=e.target,s=e.currentTarget,i=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),o=()=>{const l=t[n];if(l&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},a=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();i(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!o());c++){if(t._$host){t=t._$host,a();break}if(t.parentNode===s)break}}else a();i(r)}function rs(e,t,n,r,s){for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,o=r!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(t=t.toString(),t===n))return n;if(o){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=Jn(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean")n=Jn(e,n,r);else{if(i==="function")return ce(()=>{let a=t();for(;typeof a=="function";)a=a();n=rs(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],l=n&&Array.isArray(n);if(Io(a,t,n,s))return ce(()=>n=rs(e,a,n,r,!0)),()=>n;if(a.length===0){if(n=Jn(e,n,r),o)return n}else l?n.length===0?Wl(e,a,r):$h(e,n,a):(n&&Jn(e),Wl(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=Jn(e,n,r,t);Jn(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Io(e,t,n,r){let s=!1;for(let i=0,o=t.length;i<o;i++){let a=t[i],l=n&&n[e.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))s=Io(e,a,l)||s;else if(c==="function")if(r){for(;typeof a=="function";)a=a();s=Io(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||s}else e.push(a),s=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?e.push(l):e.push(document.createTextNode(u))}}return s}function Wl(e,t,n=null){for(let r=0,s=t.length;r<s;r++)e.insertBefore(t[r],n)}function Jn(e,t,n,r){if(n===void 0)return e.textContent="";const s=r||document.createTextNode("");if(t.length){let i=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(s!==a){const l=a.parentNode===e;!i&&!o?l?e.replaceChild(s,a):e.insertBefore(s,n):l&&a.remove()}else i=!0}}else e.insertBefore(s,n);return[s]}const yu=!1,Lh="http://www.w3.org/2000/svg";function Nh(e,t=!1,n=void 0){return t?document.createElementNS(Lh,e):document.createElement(e,{is:n})}function bu(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,s=ha();let i;return je(()=>{i||(i=ga(s,()=>Me(()=>e.children)));const o=r();if(o instanceof HTMLHeadElement){const[a,l]=K(!1),c=()=>l(!0);In(u=>C(o,()=>a()?u():i(),null)),gt(c)}else{const a=Nh(e.isSVG?"g":"div",e.isSVG),l=t&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return n.parentNode},configurable:!0}),C(l,i),o.appendChild(a),e.ref&&e.ref(a),gt(()=>o.removeChild(a))}},void 0,{render:!0}),n}function xu(){let e=new Set;function t(s){return e.add(s),()=>e.delete(s)}let n=!1;function r(s,i){if(n)return!(n=!1);const o={to:s,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of e)a.listener({...o,from:a.location,retry:l=>{l&&(n=!0),a.navigate(s,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:t,confirm:r}}let Vo;function ya(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Vo=window.history.state._depth}ya();function Oh(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function jh(e,t){let n=!1;return()=>{const r=Vo;ya();const s=r==null?null:Vo-r;if(n){n=!1;return}s&&t(s)?(n=!0,window.history.go(-s)):e()}}const Dh=/^(?:[a-z0-9]+:)?\/\//i,qh=/^\/+|(\/)\/+$/g,_u="http://sr";function Vn(e,t=!1){const n=e.replace(qh,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function ni(e,t,n){if(Dh.test(t))return;const r=Vn(e),s=n&&Vn(n);let i="";return!s||t.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+Vn(t,!i)}function Fh(e,t){if(e==null)throw new Error(t);return e}function Ih(e,t){return Vn(e).replace(/\/*(\*.*)?$/g,"")+Vn(t)}function ku(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Vh(e,t,n){const[r,s]=e.split("/*",2),i=r.split("/").filter(Boolean),o=i.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-o;if(c<0||c>0&&s===void 0&&!t)return null;const u={path:o?"":"/",params:{}},f=d=>n===void 0?void 0:n[d];for(let d=0;d<o;d++){const m=i[d],w=m[0]===":",b=w?l[d]:l[d].toLowerCase(),$=w?m.slice(1):m.toLowerCase();if(w&&wo(b,f($)))u.params[$]=b;else if(w||!wo(b,$))return null;u.path+=`/${b}`}if(s){const d=c?l.slice(-c).join("/"):"";if(wo(d,f(s)))u.params[s]=d;else return null}return u}}function wo(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Uh(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Su(e){const t=new Map,n=ha();return new Proxy({},{get(r,s){return t.has(s)||ga(n,()=>t.set(s,Me(()=>e()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function Hh(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([s,i])=>{i==null||i===""||i instanceof Array&&!i.length?n.delete(s):i instanceof Array?(n.delete(s),i.forEach(o=>{n.append(s,String(o))})):n.set(s,String(i))});const r=n.toString();return r?`?${r}`:""}function $u(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=t[1]),r=r.slice(t[0].length);return $u(r).reduce((i,o)=>[...i,...s.map(a=>a+o)],[])}const Bh=100,Cu=du(),ba=du(),bs=()=>Fh(pa(Cu),"<A> and 'use' router primitives can be only used inside a Route."),zh=()=>pa(ba)||bs().base,Wh=e=>{const t=zh();return Me(()=>t.resolvePath(e()))},Yh=e=>{const t=bs();return Me(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},rn=()=>bs().navigatorFactory(),xa=()=>bs().location,Wi=()=>bs().params,Qh=()=>{const e=xa(),t=rn(),n=(r,s)=>{const i=ht(()=>Hh(e.search,r)+e.hash);t(i,{scroll:!1,resolve:!1,...s})};return[e.query,n]};function Kh(e,t=""){const{component:n,preload:r,load:s,children:i,info:o}=e,a=!i||Array.isArray(i)&&!i.length,l={key:e,component:n,preload:r||s,info:o};return Eu(e.path).reduce((c,u)=>{for(const f of $u(u)){const d=Ih(t,f);let m=a?d:d.split("/*",1)[0];m=m.split("/").map(w=>w.startsWith(":")||w.startsWith("*")?w:encodeURIComponent(w)).join("/"),c.push({...l,originalPath:u,pattern:m,matcher:Vh(m,!a,e.matchFilters)})}return c},[])}function Gh(e,t=0){return{routes:e,score:Uh(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let s=e.length-1;s>=0;s--){const i=e[s],o=i.matcher(n);if(!o)return null;r.unshift({...o,route:i})}return r}}}function Eu(e){return Array.isArray(e)?e:[e]}function Au(e,t="",n=[],r=[]){const s=Eu(e);for(let i=0,o=s.length;i<o;i++){const a=s[i];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Kh(a,t);for(const c of l){n.push(c);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)Au(a.children,c.pattern,n,r);else{const f=Gh([...n],r.length);r.push(f)}n.pop()}}}return n.length?r:r.sort((i,o)=>o.score-i.score)}function vo(e,t){for(let n=0,r=e.length;n<r;n++){const s=e[n].matcher(t);if(s)return s}return[]}function Jh(e,t,n){const r=new URL(_u),s=Me(u=>{const f=e();try{return new URL(f,r)}catch{return console.error(`Invalid path ${f}`),u}},r,{equals:(u,f)=>u.href===f.href}),i=Me(()=>s().pathname),o=Me(()=>s().search,!0),a=Me(()=>s().hash),l=()=>"",c=fa(o,()=>ku(s()));return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return l()},query:n?n(c):Su(c)}}let Rn;function Xh(){return Rn}function Zh(e,t,n,r={}){const{signal:[s,i],utils:o={}}=e,a=o.parsePath||(H=>H),l=o.renderPath||(H=>H),c=o.beforeLeave||xu(),u=ni("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!s().value&&i({value:u,replace:!0,scroll:!1});const[f,d]=K(!1);let m;const w=(H,G)=>{G.value===b()&&G.state===A()||(m===void 0&&d(!0),Rn=H,m=G,oh(()=>{m===G&&($(m.value),_(m.state),O[1](te=>te.filter(B=>B.pending)))}).finally(()=>{m===G&&fu(()=>{Rn=void 0,H==="navigate"&&E(m),d(!1),m=void 0})}))},[b,$]=K(s().value),[A,_]=K(s().state),P=Jh(b,A,o.queryWrapper),L=[],O=K([]),R=Me(()=>typeof r.transformUrl=="function"?vo(t(),r.transformUrl(P.pathname)):vo(t(),P.pathname)),M=()=>{const H=R(),G={};for(let te=0;te<H.length;te++)Object.assign(G,H[te].params);return G},g=o.paramsWrapper?o.paramsWrapper(M,t):Su(M),p={pattern:u,path:()=>u,outlet:()=>null,resolvePath(H){return ni(u,H)}};return ce(fa(s,H=>w("native",H),{defer:!0})),{base:p,location:P,params:g,isRouting:f,renderPath:l,parsePath:a,navigatorFactory:y,matches:R,beforeLeave:c,preloadRoute:V,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:O};function x(H,G,te){ht(()=>{if(typeof G=="number"){G&&(o.go?o.go(G):console.warn("Router integration does not support relative routing"));return}const B=!G||G[0]==="?",{replace:F,resolve:N,scroll:Z,state:I}={replace:!1,resolve:!B,scroll:!0,...te},z=N?H.resolvePath(G):ni(B&&P.pathname||"",G);if(z===void 0)throw new Error(`Path '${G}' is not a routable path`);if(L.length>=Bh)throw new Error("Too many redirects");const T=b();(z!==T||I!==A())&&(yu||c.confirm(z,te)&&(L.push({value:T,replace:F,scroll:Z,state:A()}),w("navigate",{value:z,state:I})))})}function y(H){return H=H||pa(ba)||p,(G,te)=>x(H,G,te)}function E(H){const G=L[0];G&&(i({...H,replace:G.replace,scroll:G.scroll}),L.length=0)}function V(H,G){const te=vo(t(),H.pathname),B=Rn;Rn="preload";for(let F in te){const{route:N,params:Z}=te[F];N.component&&N.component.preload&&N.component.preload();const{preload:I}=N;G&&I&&ga(n(),()=>I({params:Z,location:{pathname:H.pathname,search:H.search,hash:H.hash,query:ku(H),state:null,key:""},intent:"preload"}))}Rn=B}}function e0(e,t,n,r){const{base:s,location:i,params:o}=e,{pattern:a,component:l,preload:c}=r().route,u=Me(()=>r().path);l&&l.preload&&l.preload();const f=c?c({params:o,location:i,intent:Rn||"initial"}):void 0;return{parent:t,pattern:a,path:u,outlet:()=>l?S(l,{params:o,location:i,data:f,get children(){return n()}}):n(),resolvePath(m){return ni(s.path(),m,u())}}}const t0=e=>t=>{const{base:n}=t,r=ma(()=>t.children),s=Me(()=>Au(r(),t.base||""));let i;const o=Zh(e,s,()=>i,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(o),S(Cu.Provider,{value:o,get children(){return S(n0,{routerState:o,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[nt(()=>(i=ha())&&null),S(r0,{routerState:o,get branches(){return s()}})]}})}})};function n0(e){const t=e.routerState.location,n=e.routerState.params,r=Me(()=>e.preload&&ht(()=>{e.preload({params:n,location:t,intent:Xh()||"initial"})}));return S(_e,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:s=>S(s,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function r0(e){const t=[];let n;const r=Me(fa(e.routerState.matches,(s,i,o)=>{let a=i&&s.length===i.length;const l=[];for(let c=0,u=s.length;c<u;c++){const f=i&&i[c],d=s[c];o&&f&&d.route.key===f.route.key?l[c]=o[c]:(a=!1,t[c]&&t[c](),In(m=>{t[c]=m,l[c]=e0(e.routerState,l[c-1]||e.routerState.base,Yl(()=>r()[c+1]),()=>e.routerState.matches()[c])}))}return t.splice(s.length).forEach(c=>c()),o&&a?o:(n=l[0],l)}));return Yl(()=>r()&&n)()}const Yl=e=>()=>S(_e,{get when(){return e()},keyed:!0,children:t=>S(ba.Provider,{value:t,get children(){return t.outlet()}})}),yt=e=>{const t=ma(()=>e.children);return be(e,{get children(){return t()}})};function s0([e,t],n,r){return[e,r?s=>t(r(s)):t]}function i0(e){let t=!1;const n=s=>typeof s=="string"?{value:s}:s,r=s0(K(n(e.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!t&&e.set(s),s));return e.init&&gt(e.init((s=e.get())=>{t=!0,r[1](n(s)),t=!1})),t0({signal:r,create:e.create,utils:e.utils})}function o0(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function a0(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const l0=new Map;function c0(e=!0,t=!1,n="/_server",r){return s=>{const i=s.base.path(),o=s.navigatorFactory(s.base);let a,l;function c(b){return b.namespaceURI==="http://www.w3.org/2000/svg"}function u(b){if(b.defaultPrevented||b.button!==0||b.metaKey||b.altKey||b.ctrlKey||b.shiftKey)return;const $=b.composedPath().find(R=>R instanceof Node&&R.nodeName.toUpperCase()==="A");if(!$||t&&!$.hasAttribute("link"))return;const A=c($),_=A?$.href.baseVal:$.href;if((A?$.target.baseVal:$.target)||!_&&!$.hasAttribute("state"))return;const L=($.getAttribute("rel")||"").split(/\s+/);if($.hasAttribute("download")||L&&L.includes("external"))return;const O=A?new URL(_,document.baseURI):new URL(_);if(!(O.origin!==window.location.origin||i&&O.pathname&&!O.pathname.toLowerCase().startsWith(i.toLowerCase())))return[$,O]}function f(b){const $=u(b);if(!$)return;const[A,_]=$,P=s.parsePath(_.pathname+_.search+_.hash),L=A.getAttribute("state");b.preventDefault(),o(P,{resolve:!1,replace:A.hasAttribute("replace"),scroll:!A.hasAttribute("noscroll"),state:L?JSON.parse(L):void 0})}function d(b){const $=u(b);if(!$)return;const[A,_]=$;r&&(_.pathname=r(_.pathname)),s.preloadRoute(_,A.getAttribute("preload")!=="false")}function m(b){clearTimeout(a);const $=u(b);if(!$)return l=null;const[A,_]=$;l!==A&&(r&&(_.pathname=r(_.pathname)),a=setTimeout(()=>{s.preloadRoute(_,A.getAttribute("preload")!=="false"),l=A},20))}function w(b){if(b.defaultPrevented)return;let $=b.submitter&&b.submitter.hasAttribute("formaction")?b.submitter.getAttribute("formaction"):b.target.getAttribute("action");if(!$)return;if(!$.startsWith("https://action/")){const _=new URL($,_u);if($=s.parsePath(_.pathname+_.search),!$.startsWith(n))return}if(b.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const A=l0.get($);if(A){b.preventDefault();const _=new FormData(b.target,b.submitter);A.call({r:s,f:b.target},b.target.enctype==="multipart/form-data"?_:new URLSearchParams(_))}}ze(["click","submit"]),document.addEventListener("click",f),e&&(document.addEventListener("mousemove",m,{passive:!0}),document.addEventListener("focusin",d,{passive:!0}),document.addEventListener("touchstart",d,{passive:!0})),document.addEventListener("submit",w),gt(()=>{document.removeEventListener("click",f),e&&(document.removeEventListener("mousemove",m),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",w)})}}function u0(e){const t=()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,s=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:s}},n=xu();return i0({get:t,set({value:r,replace:s,scroll:i,state:o}){s?window.history.replaceState(Oh(o),"",r):window.history.pushState(o,"",r),a0(decodeURIComponent(window.location.hash.slice(1)),i),ya()},init:r=>o0(window,"popstate",jh(r,s=>{if(s&&s<0)return!n.confirm(s);{const i=t();return!n.confirm(i.value,{state:i.state})}})),create:c0(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(e)}var f0=q("<a>");function ir(e){e=be({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=wu(e,["href","state","class","activeClass","inactiveClass","end"]),n=Wh(()=>e.href),r=Yh(n),s=xa(),i=Me(()=>{const o=n();if(o===void 0)return[!1,!1];const a=Vn(o.split(/[?#]/,1)[0]).toLowerCase(),l=decodeURI(Vn(s.pathname).toLowerCase());return[e.end?a===l:l.startsWith(a+"/")||l===a,a===l]});return(()=>{var o=f0();return ct(o,be(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!i()[0],[e.activeClass]:i()[0],...t.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),o})()}const Uo=Symbol("store-raw"),cr=Symbol("store-node"),Xt=Symbol("store-has"),Ru=Symbol("store-self");function Pu(e){let t=e[Nt];if(!t&&(Object.defineProperty(e,Nt,{value:t=new Proxy(e,g0)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,i=n.length;s<i;s++){const o=n[s];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function pi(e){let t;return e!=null&&typeof e=="object"&&(e[Nt]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ss(e,t=new Set){let n,r,s,i;if(n=e!=null&&e[Uo])return n;if(!pi(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,a=e.length;o<a;o++)s=e[o],(r=ss(s,t))!==s&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let l=0,c=o.length;l<c;l++)i=o[l],!a[i].get&&(s=e[i],(r=ss(s,t))!==s&&(e[i]=r))}return e}function mi(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function is(e,t,n){if(e[t])return e[t];const[r,s]=K(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function d0(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Nt||t===cr||(delete n.value,delete n.writable,n.get=()=>e[Nt][t]),n}function Tu(e){Do()&&is(mi(e,cr),Ru)()}function h0(e){return Tu(e),Reflect.ownKeys(e)}const g0={get(e,t,n){if(t===Uo)return e;if(t===Nt)return n;if(t===jo)return Tu(e),n;const r=mi(e,cr),s=r[t];let i=s?s():e[t];if(t===cr||t===Xt||t==="__proto__")return i;if(!s){const o=Object.getOwnPropertyDescriptor(e,t);Do()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(i=is(r,t,i)())}return pi(i)?Pu(i):i},has(e,t){return t===Uo||t===Nt||t===jo||t===cr||t===Xt||t==="__proto__"?!0:(Do()&&is(mi(e,Xt),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:h0,getOwnPropertyDescriptor:d0};function wi(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],i=e.length;n===void 0?(delete e[t],e[Xt]&&e[Xt][t]&&s!==void 0&&e[Xt][t].$()):(e[t]=n,e[Xt]&&e[Xt][t]&&s===void 0&&e[Xt][t].$());let o=mi(e,cr),a;if((a=is(o,t,s))&&a.$(()=>n),Array.isArray(e)&&e.length!==i){for(let l=e.length;l<i;l++)(a=o[l])&&a.$();(a=is(o,"length",i))&&a.$(e.length)}(a=o[Ru])&&a.$()}function Mu(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];wi(e,s,t[s])}}function p0(e,t){if(typeof t=="function"&&(t=t(e)),t=ss(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&wi(e,n,s)}wi(e,"length",r)}else Mu(e,t)}function Nr(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const o=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)Nr(e,[r[l]].concat(t),n);return}else if(a&&o==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&Nr(e,[l].concat(t),n);return}else if(a&&o==="object"){const{from:l=0,to:c=e.length-1,by:u=1}=r;for(let f=l;f<=c;f+=u)Nr(e,[f].concat(t),n);return}else if(t.length>1){Nr(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let i=t[0];typeof i=="function"&&(i=i(s,n),i===s)||r===void 0&&i==null||(i=ss(i),r===void 0||pi(s)&&pi(i)&&!Array.isArray(i)?Mu(s,i):wi(e,r,i))}function m0(...[e,t]){const n=ss(e||{}),r=Array.isArray(n),s=Pu(n);function i(...o){fu(()=>{r&&o.length===1?p0(n,o[0]):Nr(n,o)})}return[s,i]}var w0=q('<svg class="w-5 h-5 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6">'),v0=q('<svg class="w-5 h-5 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">'),y0=q('<main class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50"><div class="flex flex-col items-center justify-center min-h-screen px-4"><div class="max-w-4xl w-full text-center"><div class=mb-8><div class="mx-auto w-20 h-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg"><svg class="w-10 h-10 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h1 class="text-6xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">CoRATES</h1><p class="text-xl md:text-2xl text-gray-600 mb-4 font-medium">Collaborative Research Appraisal Tool for Evidence Synthesis</p><p class="text-lg text-gray-500 mb-12 max-w-2xl mx-auto leading-relaxed">Streamline your systematic review process with our interactive AMSTAR 2 checklist tool. Create, score, and visualize research appraisals with confidence.</p><div class="flex flex-col sm:flex-row gap-4 justify-center mb-16"></div></div></div><div class="py-20 px-4 bg-white/50 backdrop-blur-sm"><div class="max-w-6xl mx-auto"><h2 class="text-3xl md:text-4xl font-bold text-center mb-16 text-gray-800">Why Choose CoRATES?</h2><div class="grid md:grid-cols-3 gap-8"><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-blue-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Works Offline</h3><p class="text-gray-600 leading-relaxed">Complete your assessments anywhere, anytime. No internet connection required once loaded.</p></div><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-green-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Auto-Save</h3><p class="text-gray-600 leading-relaxed">Never lose your progress. Your work is automatically saved as you go.</p></div><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-purple-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Visual Results</h3><p class="text-gray-600 leading-relaxed">Generate clear, professional charts and summaries of your AMSTAR 2 assessments.</p></div></div></div></div><div class="py-20 px-4"><div class="max-w-4xl mx-auto text-center"><h2 class="text-3xl md:text-4xl font-bold mb-8 text-gray-800">About AMSTAR 2</h2><p class="text-lg text-gray-600 leading-relaxed mb-8">AMSTAR 2 (A MeaSurement Tool to Assess systematic Reviews) is a critical appraisal tool for systematic reviews that include randomized or non-randomized studies of healthcare interventions.</p><div class="bg-blue-50 rounded-2xl p-8 border border-blue-100"><p class="text-blue-800 font-medium">Our tool makes it easy to apply the 16 AMSTAR 2 criteria to evaluate the methodological quality of systematic reviews, helping researchers make informed decisions about evidence quality.</p></div></div></div><footer class="py-12 px-4 bg-gray-50 border-t border-gray-200"><div class="max-w-4xl mx-auto text-center"><div class="flex flex-col sm:flex-row items-center justify-center gap-6 text-sm text-gray-500"><a href=https://github.com/InfinityBowman/amstar2-checklist-scoring-app target=_blank rel=noopener class="flex items-center gap-2 hover:text-blue-600 transition-colors duration-200"><svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>View on GitHub</a><span class=text-gray-300>•</span><span>Built for researchers, by researchers</span><span class=text-gray-300>•</span><span>Free & Open Source');function b0(){return(()=>{var e=y0(),t=e.firstChild,n=t.firstChild,r=n.firstChild,s=r.nextSibling,i=s.nextSibling,o=i.nextSibling,a=o.nextSibling;return C(a,S(ir,{href:"/checklist/new",class:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",get children(){return[w0(),"Start New Checklist"]}}),null),C(a,S(ir,{href:"/dashboard",class:"inline-flex items-center px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-blue-300 hover:text-blue-600 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",get children(){return[v0(),"View Saved Work"]}}),null),e})()}const et={q1:{text:"1. Did the research questions and inclusion criteria for the review include the components of PICO?",columns:[{label:"For Yes:",options:["Population","Intervention","Comparator group","Outcome"]},{label:"Optional (recommended):",options:["Timeframe for follow-up"]},{label:"",options:["Yes","No"]}]},q2:{text:"2. Did the report of the review contain an explicit statement that the review methods were established prior to the conduct of the review and did the report justify any significant deviations from the protocol?",columns:[{label:"For Partial Yes:",description:"The authors state that they had a written protocol or guide that included ALL the following:",options:["review question(s)","a search strategy","inclusion/exclusion criteria","risk of bias assessment"]},{label:"For Yes:",description:"As for Partial Yes, plus the protocol should be registered and should also have specified:",options:["a meta-analysis/synthesis plan, if appropriate, and","a plan for investigating causes of heterogeneity","a plan for investigating causes of heterogeneity"]},{label:"",description:"",options:["Yes","Partial Yes","No"]}]},q3:{text:"3. Did the review authors explain their selection of the study designs for inclusion in the review?",columns:[{label:"For Yes, the review should satisfy ONE of the following:",options:["Explanation for including only RCTs ","OR Explanation for including only NRSI","OR Explanation for including both RCTs and NRSI"]},{label:"",options:["Yes","No"]}]},q4:{text:"4. Did the review authors use a comprehensive literature search strategy? ",columns:[{label:"For Partial Yes (all the following):",options:["searched at least 2 databases (relevant to research question)","provided key word and/or search strategy","justified publication restrictions (e.g. language)"]},{label:"For Yes, should also have (all the following):",options:["searched the reference lists / bibliographies of included studies","searched trial/study registries","included/consulted content experts in the field","where relevant, searched for grey literature","conducted search within 24 months of completion of the review"]},{label:"",options:["Yes","Partial Yes","No"]}]},q5:{text:"5. Did the review authors perform study selection in duplicate?",columns:[{label:"For Yes, either ONE of the following:",options:["at least two reviewers achieved consensus on which data to extract from included studies","OR two reviewers extracted data from a sample of eligible studies and achieved good agreement (at least 80 percent), with the remainder extracted by one reviewer."]},{label:"",options:["Yes","No"]}]},q6:{text:"6. Did the review authors perform data extraction in duplicate?",columns:[{label:"For Yes, either ONE of the following:",options:["at least two reviewers achieved consensus on which data to extract from included studies","OR two reviewers extracted data from a sample of eligible studies and achieved good agreement (at least 80 percent), with the remainder extracted by one reviewer."]},{label:"",options:["Yes","No"]}]},q7:{text:"7. Did the review authors provide a list of excluded studies and justify the exclusions?",columns:[{label:"For Partial Yes:",options:["provided a list of all potentially relevant studies that were read in full-text form but excluded from the review"]},{label:"For Yes, must also have:",options:["Justified the exclusion from the review of each potentially relevant study"]},{label:"",options:["Yes","Partial Yes","No"]}]},q8:{text:"8. Did the review authors describe the included studies in adequate detail?",columns:[{label:"For Partial Yes (ALL the following):",options:["described populations","described interventions","described comparators","described outcomes","described research designs"]},{label:"For Yes, should also have ALL the following:",options:["described population in detail","described comparator in detail (including doses where relevant)","described study’s setting in detail","timeframe for follow-up"]},{label:"",options:["Yes","Partial Yes","No"]}]},q9:{text:"9. Did the review authors use a satisfactory technique for assessing the risk of bias (RoB) in individual studies that were included in the review?",subtitle:"RCTs",columns:[{label:"For Partial Yes, must have assessed RoB from",options:["unconcealed allocation, and","lack of blinding of patients and assessors when assessing outcomes (unnecessary for objective outcomes such as all-cause mortality)"]},{label:"For Yes, must also have assessed RoB from:",options:["allocation sequence that was not truly random, and","selection of the reported result from among multiple measurements or analyses of a specified outcome"]},{label:"",description:"",options:["Yes","Partial Yes","No"," Includes only NRSI"]}],subtitle2:"NRSI",columns2:[{label:"For Partial Yes, must have assessed RoB:",options:["from confounding, and","from selection bias"]},{label:"For Yes, must also have assessed RoB:",options:["methods used to ascertain exposures and outcomes, and","selection of the reported result from among multiple measurements or analyses of a specified outcome"]},{label:"",options:["Yes","Partial Yes","No","Includes only RCTs"]}]},q10:{text:"10. Did the review authors report on the sources of funding for the studies included in the review?",columns:[{label:"For Yes:",options:["Must have reported on the sources of funding for individual studies included in the review. Note: Reporting that the reviewers looked for this information but it was not reported by study authors also qualifies"]},{label:"",options:["Yes","No"]}]},q11:{text:"11. If meta-analysis was performed did the review authors use appropriate methods for statistical combination of results?",subtitle:"RCTs",columns:[{label:"For Yes:",options:["The authors justified combining the data in a meta-analysis","AND they used an appropriate weighted technique to combine study results and adjusted for heterogeneity if present.","AND investigated the causes of any heterogeneity"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}],subtitle2:"NRSI",columns2:[{label:"For Yes:",options:["The authors justified combining the data in a meta-analysis","AND they used an appropriate weighted technique to combine study results, adjusting for heterogeneity if present","AND they statistically combined effect estimates from NRSI that were adjusted for confounding, rather than combining raw data, or justified combining raw data when adjusted effect estimates were not available","AND they reported separate summary estimates for RCTs and NRSI separately when both were included in the review"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q12:{text:"12. If meta-analysis was performed, did the review authors assess the potential impact of RoB in individual studies on the results of the meta-analysis or other evidence synthesis?",columns:[{label:"For Yes:",options:["included only low risk of bias RCTs","OR, if the pooled estimate was based on RCTs and/or NRSI at variable RoB, the authors performed analyses to investigate possible impact of RoB on summary estimates of effect."]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q13:{text:"13. Did the review authors account for RoB in individual studies when interpreting/ discussing the results of the review?",columns:[{label:"For Yes:",options:["included only low risk of bias RCTs","OR, if RCTs with moderate or high RoB, or NRSI were included the review provided a discussion of the likely impact of RoB on the results"]},{label:"",options:["Yes","No"]}]},q14:{text:"14. Did the review authors provide a satisfactory explanation for, and discussion of, any heterogeneity observed in the results of the review?",columns:[{label:"For Yes:",options:["There was no significant heterogeneity in the results","OR if heterogeneity was present the authors performed an investigation of sources of any heterogeneity in the results and discussed the impact of this on the results of the review"]},{label:"",options:["Yes","No"]}]},q15:{text:"15. If they performed quantitative synthesis did the review authors carry out an adequate investigation of publication bias (small study bias) and discuss its likely impact on the results of the review?",columns:[{label:"For Yes:",options:["performed graphical or statistical tests for publication bias and discussed the likelihood and magnitude of impact of publication bias"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q16:{text:"16. Did the review authors report any potential sources of conflict of interest, including any funding they received for conducting the review?",options:["Yes","Partial Yes","No"],columns:[{label:"For Yes:",options:["The authors reported no competing interests OR","The authors described their funding sources and how they managed potential conflicts of interest"]},{label:"",options:["Yes","No"]}]}},x0="modulepreload",_0=function(e){return"/amstar2-checklist-scoring-app/"+e},Ql={},Kl=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=l(n.map(c=>{if(c=_0(c),c in Ql)return;Ql[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":x0,u||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((m,w)=>{d.addEventListener("load",m),d.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},k0="corates-app-db",vn="checklists",Bt="projects",S0=1,Lu=new BroadcastChannel("corates-sync");function Yi(){Lu.postMessage("initiate-sync")}function $0(e){Lu.onmessage=t=>{t.data==="initiate-sync"&&e()}}function hr(e){return JSON.parse(JSON.stringify(e))}function Qn(){return new Promise((e,t)=>{const n=indexedDB.open(k0,S0);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(vn)||r.createObjectStore(vn,{keyPath:"id"}),r.objectStoreNames.contains(Bt)||r.createObjectStore(Bt,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})}async function Nu(e){const t=await Qn();return e=hr(e),new Promise((n,r)=>{const s=t.transaction(vn,"readwrite");s.objectStore(vn).put(e),s.oncomplete=()=>{n(),Yi()},s.onerror=()=>r(s.error)})}async function Ou(){const e=await Qn();return new Promise((t,n)=>{const i=e.transaction(vn,"readonly").objectStore(vn).getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)})}async function C0(e){const t=await Qn();return new Promise((n,r)=>{const s=t.transaction(vn,"readwrite");s.objectStore(vn).delete(e),s.oncomplete=()=>{n(),Yi()},s.onerror=()=>r(s.error)})}async function _r(e){const t=await Qn();return e=hr(e),new Promise((n,r)=>{const s=t.transaction(Bt,"readwrite");s.objectStore(Bt).put(e),s.oncomplete=()=>{n(),Yi()},s.onerror=()=>r(s.error)})}async function Qi(e){const t=await Qn();return new Promise((n,r)=>{const i=t.transaction(Bt,"readonly").objectStore(Bt).get(e);i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async function ju(){const e=await Qn();return new Promise((t,n)=>{const i=e.transaction(Bt,"readonly").objectStore(Bt).getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)})}async function Du(e,t,n){try{const r=await Qi(e);if(!r)throw new Error(`Project with ID ${e} not found`);r.reviews||(r.reviews=[]);const s=r.reviews.findIndex(a=>a.id===t);if(s===-1)throw new Error(`Review with ID ${t} not found in project ${e}`);const i=r.reviews[s];i.checklists||(i.checklists=[]);const o=i.checklists.findIndex(a=>a.id===n.id);return o>=0?i.checklists[o]=hr(n):i.checklists.push(hr(n)),await _r(r),r}catch(r){throw console.error("Error saving checklist to review:",r),r}}async function E0(e,t,n){try{const r=await Qi(e);if(!r)throw new Error(`Project with ID ${e} not found`);r.reviews||(r.reviews=[]);const s=r.reviews.findIndex(a=>a.id===t);if(s===-1)throw new Error(`Review with ID ${t} not found in project ${e}`);const i=r.reviews[s];i.checklists||(i.checklists=[]);const o=i.checklists.length;return i.checklists=i.checklists.filter(a=>a.id!==n),i.checklists.length===o?!1:(await _r(r),!0)}catch(r){throw console.error("Error deleting checklist from review:",r),r}}async function qu(e,t){try{const n=await Qi(e);if(!n)throw new Error(`Project with ID ${e} not found`);n.reviews||(n.reviews=[]);const r=n.reviews.findIndex(s=>s.id===t.id);return r>=0?n.reviews[r]=hr(t):n.reviews.push(hr(t)),await _r(n),n}catch(n){console.error("Error saving review to project:",n)}}async function A0(e,t){try{const n=await Qi(e);if(!n)throw new Error(`Project with ID ${e} not found`);n.reviews||(n.reviews=[]);const r=n.reviews.length;return n.reviews=n.reviews.filter(s=>s.id!==t),n.reviews.length===r?!1:(await _r(n),!0)}catch(n){throw console.error("Error deleting review from project:",n),n}}async function R0(e){const t=await Qn();return new Promise((n,r)=>{const s=t.transaction(Bt,"readwrite");s.objectStore(Bt).delete(e),s.oncomplete=()=>{n(),Yi()},s.onerror=()=>r(s.error)})}async function Un(){const[e,t]=await Promise.all([ju(),Ou()]),n=new Set;for(const s of e){n.add(s.id);for(const i of s.reviews||[]){n.add(i.id);for(const o of i.checklists||[])n.add(o.id)}}for(const s of t)n.add(s.id);let r;do r=crypto.randomUUID().split("-")[0];while(n.has(r));return r}const[$e,Oe]=m0({projects:[],currentProject:null,currentChecklist:null,dataLoading:!0,checklists:[]});async function P0(){try{await Ho(),$0(Ho)}catch(e){console.error("Error loading data:",e)}finally{Oe("dataLoading",!1)}}P0();async function Ho(){try{Oe("loading",!0);const e=await ju()||[];e.sort((n,r)=>(n.createdAt||0)-(r.createdAt||0)),Oe("projects",e);const t=await Ou()||[];Oe("checklists",t)}catch(e){throw console.error("Error loading IndexedDB data:",e),e}finally{Oe("loading",!1)}}async function T0(e){try{return await _r(e),Oe("projects",t=>[...t,e]),e}catch(t){throw console.error("Error adding project:",t),t}}async function M0(e){try{return await R0(e),Oe("projects",t=>t.filter(n=>n.id!==e)),$e.currentProject?.id===e&&(Oe("currentProject",null),Oe("currentChecklist",null)),!0}catch(t){throw console.error("Error deleting project:",t),t}}function L0(e){Oe("projects",e)}function N0(e){let t=null;if(typeof e=="object"&&e!==null){if("project"in e&&e.project)t={...e.project};else if("id"in e)t=$e.projects.find(n=>n.id===e.id);else if("name"in e){const n=$e.projects.filter(r=>r.name===e.name);t=n[e.index??0]?{...n[e.index??0]}:null}}else typeof e=="string"&&(t=$e.projects.find(n=>n.id===e),t||(t=$e.projects.find(n=>n.name===e)),t=t?{...t}:null);Oe("currentProject",t)}function O0(e){if(e==null)return Oe("currentChecklist",null),!1;const t=Fu(e);return Oe("currentChecklist",t||null),!!t}async function j0(e,t,n){if(!e||!t)try{return await Nu(n),Oe("checklists",r=>[...r,n]),n}catch(r){throw console.error("Error adding checklist without project/review:",r),r}try{const r=await Du(e,t,n),s=$e.projects.findIndex(i=>i.id===e);if(s!==-1){const i=($e.projects[s].reviews||[]).findIndex(o=>o.id===t);i!==-1&&Oe("projects",s,"reviews",i,r.reviews[i])}return n}catch(r){throw console.error("Error adding checklist:",r),r}}async function D0(e){const t=Ki(e.id);if(!t)throw console.warn("Could not find checklist to update:",e.id),new Error(`Could not find checklist to update: ${e.id}`);try{const{projectIndex:n,reviewIndex:r,checklistIndex:s,review:i,project:o}=t;if(n>=0)await Du(o.id,i.id,e),Oe("projects",n,"reviews",r,"checklists",s,{...e});else{const a=$e.checklists.findIndex(l=>l.id===e.id);if(a>=0)await Nu(e),Oe("checklists",a,{...e});else throw console.warn("Could not find checklist:",e.id),new Error(`Could not find checklist: ${e.id}`)}return $e.currentChecklist?.id===e.id&&Oe("currentChecklist",{...e}),e}catch(n){throw console.error("Error updating checklist:",n),n}}async function q0(e,t,n){if(!e||!t)try{return await C0(n),Oe("checklists",r=>r.filter(s=>s.id!==n)),$e.currentChecklist?.id===n&&Oe("currentChecklist",null),!0}catch(r){return console.error("Error deleting checklist without project/review:",r),!1}try{await E0(e,t,n);const r=$e.projects.findIndex(s=>s.id===e);if(r!==-1){const s=($e.projects[r].reviews||[]).findIndex(i=>i.id===t);s!==-1&&Oe("projects",r,"reviews",s,"checklists",i=>i.filter(o=>o.id!==n))}return $e.currentChecklist?.id===n&&Oe("currentChecklist",null),!0}catch(r){return console.error("Error deleting checklist:",r),!1}}function Fu(e){let t=Ki(e);return t?.checklist?{...t.checklist}:null}function F0(e,t){let n=Ki(e);if(n&&typeof n.checklistIndex=="number")return n.checklistIndex;let r=-1;return e?r=$e.checklists.findIndex(s=>s.id===e):t&&(r=$e.checklists.findIndex(s=>s.name===t)),r}function Ki(e){if(typeof e=="object"&&e!==null){if("checklist"in e&&e.checklist)return Ki({id:e.checklist.id});if("id"in e)for(let t=0;t<$e.projects.length;t++){const n=$e.projects[t];for(let r=0;r<(n.reviews||[]).length;r++){const s=n.reviews[r],i=(s.checklists||[]).findIndex(o=>o.id===e.id);if(i!==-1)return{project:n,projectIndex:t,review:s,reviewIndex:r,checklist:s.checklists[i],checklistIndex:i}}}else if("name"in e){let t=[];for(let n=0;n<$e.projects.length;n++){const r=$e.projects[n];for(let s=0;s<(r.reviews||[]).length;s++){const i=r.reviews[s];(i.checklists||[]).forEach((o,a)=>{o.name===e.name&&t.push({project:r,projectIndex:n,review:i,reviewIndex:s,checklist:o,checklistIndex:a})})}}return t[e.index??0]||null}}else if(typeof e=="string"){for(let n=0;n<$e.projects.length;n++){const r=$e.projects[n];for(let s=0;s<(r.reviews||[]).length;s++){const i=r.reviews[s],o=(i.checklists||[]).findIndex(a=>a.id===e);if(o!==-1)return{project:r,projectIndex:n,review:i,reviewIndex:s,checklist:i.checklists[o],checklistIndex:o}}}let t=[];for(let n=0;n<$e.projects.length;n++){const r=$e.projects[n];for(let s=0;s<(r.reviews||[]).length;s++){const i=r.reviews[s];(i.checklists||[]).forEach((o,a)=>{o.name===e&&t.push({project:r,projectIndex:n,review:i,reviewIndex:s,checklist:o,checklistIndex:a})})}}return t[0]||null}return null}async function I0(e,t){try{const n=$e.projects.findIndex(s=>s.id===e);if(n===-1)throw new Error("Project not found");const r=await qu(e,t);return Oe("projects",n,r),t}catch(n){throw console.error("Error adding review:",n),n}}async function V0(e,t){try{const n=$e.projects.findIndex(s=>s.id===e);if(n===-1)throw new Error("Project not found");const r=await qu(e,t);return Oe("projects",n,r),t}catch(n){throw console.error("Error updating review:",n),n}}async function U0(e,t){try{const n=$e.projects.findIndex(s=>s.id===e);if(n===-1)throw new Error("Project not found");if(!await A0(e,t))throw new Error("Review not found or could not be deleted");return Oe("projects",n,s=>({...s,reviews:(s.reviews||[]).filter(i=>i.id!==t)})),!0}catch(n){throw console.error("Error deleting review:",n),n}}function zt(){return{projects:()=>$e.projects,currentProject:()=>$e.currentProject,currentChecklist:()=>$e.currentChecklist,dataLoading:()=>$e.dataLoading,checklists:()=>$e.checklists,loadData:Ho,setProjects:L0,addProject:T0,deleteProject:M0,setCurrentProject:N0,setCurrentChecklist:O0,addChecklist:j0,updateChecklist:D0,deleteChecklist:q0,getChecklist:Fu,getChecklistIndex:F0,addReview:I0,updateReview:V0,deleteReview:U0,searchUsers:async(e,t=10)=>{const{searchUsers:n}=await Kl(async()=>{const{searchUsers:r}=await import("./AppStore.api-D30tTOvR.js");return{searchUsers:r}},[]);return n(e,t)},addUserToProjectByEmail:async(e,t)=>{const{addUserToProjectByEmail:n}=await Kl(async()=>{const{addUserToProjectByEmail:r}=await import("./AppStore.api-D30tTOvR.js");return{addUserToProjectByEmail:r}},[]);return n(e,t)}}}var ri={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var H0=ri.exports,Gl;function B0(){return Gl||(Gl=1,(function(e,t){((n,r)=>{e.exports=r()})(H0,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,i=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,a={},l=0,c={};function u(g){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(p){var x=O(p);x.chunkSize=parseInt(x.chunkSize),p.step||p.chunk||(x.chunkSize=null),this._handle=new b(x),(this._handle.streamer=this)._config=x}.call(this,g),this.parseChunk=function(p,x){var y=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<y){let V=this._config.newline;V||(E=this._config.quoteChar||'"',V=this._handle.guessLineEndings(p,E)),p=[...p.split(V).slice(y)].join(V)}this.isFirstChunk&&M(this._config.beforeFirstChunk)&&(E=this._config.beforeFirstChunk(p))!==void 0&&(p=E),this.isFirstChunk=!1,this._halted=!1;var y=this._partialLine+p,E=(this._partialLine="",this._handle.parse(y,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(p=E.meta.cursor,y=(this._finished||(this._partialLine=y.substring(p-this._baseIndex),this._baseIndex=p),E&&E.data&&(this._rowCount+=E.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:E,workerId:c.WORKER_ID,finished:y});else if(M(this._config.chunk)&&!x){if(this._config.chunk(E,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=E=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(E.data),this._completeResults.errors=this._completeResults.errors.concat(E.errors),this._completeResults.meta=E.meta),this._completed||!y||!M(this._config.complete)||E&&E.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),y||E&&E.meta.paused||this._nextChunk(),E}this._halted=!0},this._sendError=function(p){M(this._config.error)?this._config.error(p):o&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:p,finished:!1})}}function f(g){var p;(g=g||{}).chunkSize||(g.chunkSize=c.RemoteChunkSize),u.call(this,g),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(x){this._input=x,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(p=new XMLHttpRequest,this._config.withCredentials&&(p.withCredentials=this._config.withCredentials),i||(p.onload=R(this._chunkLoaded,this),p.onerror=R(this._chunkError,this)),p.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var x,y=this._config.downloadRequestHeaders;for(x in y)p.setRequestHeader(x,y[x])}var E;this._config.chunkSize&&(E=this._start+this._config.chunkSize-1,p.setRequestHeader("Range","bytes="+this._start+"-"+E));try{p.send(this._config.downloadRequestBody)}catch(V){this._chunkError(V.message)}i&&p.status===0&&this._chunkError()}},this._chunkLoaded=function(){p.readyState===4&&(p.status<200||400<=p.status?this._chunkError():(this._start+=this._config.chunkSize||p.responseText.length,this._finished=!this._config.chunkSize||this._start>=(x=>(x=x.getResponseHeader("Content-Range"))!==null?parseInt(x.substring(x.lastIndexOf("/")+1)):-1)(p),this.parseChunk(p.responseText)))},this._chunkError=function(x){x=p.statusText||x,this._sendError(new Error(x))}}function d(g){(g=g||{}).chunkSize||(g.chunkSize=c.LocalChunkSize),u.call(this,g);var p,x,y=typeof FileReader<"u";this.stream=function(E){this._input=E,x=E.slice||E.webkitSlice||E.mozSlice,y?((p=new FileReader).onload=R(this._chunkLoaded,this),p.onerror=R(this._chunkError,this)):p=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var E=this._input,V=(this._config.chunkSize&&(V=Math.min(this._start+this._config.chunkSize,this._input.size),E=x.call(E,this._start,V)),p.readAsText(E,this._config.encoding));y||this._chunkLoaded({target:{result:V}})},this._chunkLoaded=function(E){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(E.target.result)},this._chunkError=function(){this._sendError(p.error)}}function m(g){var p;u.call(this,g=g||{}),this.stream=function(x){return p=x,this._nextChunk()},this._nextChunk=function(){var x,y;if(!this._finished)return x=this._config.chunkSize,p=x?(y=p.substring(0,x),p.substring(x)):(y=p,""),this._finished=!p,this.parseChunk(y)}}function w(g){u.call(this,g=g||{});var p=[],x=!0,y=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(E){this._input=E,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){y&&p.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),p.length?this.parseChunk(p.shift()):x=!0},this._streamData=R(function(E){try{p.push(typeof E=="string"?E:E.toString(this._config.encoding)),x&&(x=!1,this._checkIsFinished(),this.parseChunk(p.shift()))}catch(V){this._streamError(V)}},this),this._streamError=R(function(E){this._streamCleanUp(),this._sendError(E)},this),this._streamEnd=R(function(){this._streamCleanUp(),y=!0,this._streamData("")},this),this._streamCleanUp=R(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function b(g){var p,x,y,E,V=Math.pow(2,53),H=-V,G=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,te=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,B=this,F=0,N=0,Z=!1,I=!1,z=[],T={data:[],errors:[],meta:{}};function ee(ne){return g.skipEmptyLines==="greedy"?ne.join("").trim()==="":ne.length===1&&ne[0].length===0}function J(){if(T&&y&&(we("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),y=!1),g.skipEmptyLines&&(T.data=T.data.filter(function(Y){return!ee(Y)})),ie()){let Y=function(ge,pe){M(g.transformHeader)&&(ge=g.transformHeader(ge,pe)),z.push(ge)};if(T)if(Array.isArray(T.data[0])){for(var ne=0;ie()&&ne<T.data.length;ne++)T.data[ne].forEach(Y);T.data.splice(0,1)}else T.data.forEach(Y)}function se(Y,ge){for(var pe=g.header?{}:[],re=0;re<Y.length;re++){var ve=re,fe=Y[re],fe=((We,le)=>(ke=>(g.dynamicTypingFunction&&g.dynamicTyping[ke]===void 0&&(g.dynamicTyping[ke]=g.dynamicTypingFunction(ke)),(g.dynamicTyping[ke]||g.dynamicTyping)===!0))(We)?le==="true"||le==="TRUE"||le!=="false"&&le!=="FALSE"&&((ke=>{if(G.test(ke)&&(ke=parseFloat(ke),H<ke&&ke<V))return 1})(le)?parseFloat(le):te.test(le)?new Date(le):le===""?null:le):le)(ve=g.header?re>=z.length?"__parsed_extra":z[re]:ve,fe=g.transform?g.transform(fe,ve):fe);ve==="__parsed_extra"?(pe[ve]=pe[ve]||[],pe[ve].push(fe)):pe[ve]=fe}return g.header&&(re>z.length?we("FieldMismatch","TooManyFields","Too many fields: expected "+z.length+" fields but parsed "+re,N+ge):re<z.length&&we("FieldMismatch","TooFewFields","Too few fields: expected "+z.length+" fields but parsed "+re,N+ge)),pe}var ae;T&&(g.header||g.dynamicTyping||g.transform)&&(ae=1,!T.data.length||Array.isArray(T.data[0])?(T.data=T.data.map(se),ae=T.data.length):T.data=se(T.data,0),g.header&&T.meta&&(T.meta.fields=z),N+=ae)}function ie(){return g.header&&z.length===0}function we(ne,se,ae,Y){ne={type:ne,code:se,message:ae},Y!==void 0&&(ne.row=Y),T.errors.push(ne)}M(g.step)&&(E=g.step,g.step=function(ne){T=ne,ie()?J():(J(),T.data.length!==0&&(F+=ne.data.length,g.preview&&F>g.preview?x.abort():(T.data=T.data[0],E(T,B))))}),this.parse=function(ne,se,ae){var Y=g.quoteChar||'"',Y=(g.newline||(g.newline=this.guessLineEndings(ne,Y)),y=!1,g.delimiter?M(g.delimiter)&&(g.delimiter=g.delimiter(ne),T.meta.delimiter=g.delimiter):((Y=((ge,pe,re,ve,fe)=>{var We,le,ke,at;fe=fe||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var ut=0;ut<fe.length;ut++){for(var Qe,rt=fe[ut],He=0,Xe=0,De=0,Ye=(ke=void 0,new A({comments:ve,delimiter:rt,newline:pe,preview:10}).parse(ge)),wt=0;wt<Ye.data.length;wt++)re&&ee(Ye.data[wt])?De++:(Qe=Ye.data[wt].length,Xe+=Qe,ke===void 0?ke=Qe:0<Qe&&(He+=Math.abs(Qe-ke),ke=Qe));0<Ye.data.length&&(Xe/=Ye.data.length-De),(le===void 0||He<=le)&&(at===void 0||at<Xe)&&1.99<Xe&&(le=He,We=rt,at=Xe)}return{successful:!!(g.delimiter=We),bestDelimiter:We}})(ne,g.newline,g.skipEmptyLines,g.comments,g.delimitersToGuess)).successful?g.delimiter=Y.bestDelimiter:(y=!0,g.delimiter=c.DefaultDelimiter),T.meta.delimiter=g.delimiter),O(g));return g.preview&&g.header&&Y.preview++,p=ne,x=new A(Y),T=x.parse(p,se,ae),J(),Z?{meta:{paused:!0}}:T||{meta:{paused:!1}}},this.paused=function(){return Z},this.pause=function(){Z=!0,x.abort(),p=M(g.chunk)?"":p.substring(x.getCharIndex())},this.resume=function(){B.streamer._halted?(Z=!1,B.streamer.parseChunk(p,!0)):setTimeout(B.resume,3)},this.aborted=function(){return I},this.abort=function(){I=!0,x.abort(),T.meta.aborted=!0,M(g.complete)&&g.complete(T),p=""},this.guessLineEndings=function(ge,Y){ge=ge.substring(0,1048576);var Y=new RegExp($(Y)+"([^]*?)"+$(Y),"gm"),ae=(ge=ge.replace(Y,"")).split("\r"),Y=ge.split(`
`),ge=1<Y.length&&Y[0].length<ae[0].length;if(ae.length===1||ge)return`
`;for(var pe=0,re=0;re<ae.length;re++)ae[re][0]===`
`&&pe++;return pe>=ae.length/2?`\r
`:"\r"}}function $(g){return g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(g){var p=(g=g||{}).delimiter,x=g.newline,y=g.comments,E=g.step,V=g.preview,H=g.fastMode,G=null,te=!1,B=g.quoteChar==null?'"':g.quoteChar,F=B;if(g.escapeChar!==void 0&&(F=g.escapeChar),(typeof p!="string"||-1<c.BAD_DELIMITERS.indexOf(p))&&(p=","),y===p)throw new Error("Comment character same as delimiter");y===!0?y="#":(typeof y!="string"||-1<c.BAD_DELIMITERS.indexOf(y))&&(y=!1),x!==`
`&&x!=="\r"&&x!==`\r
`&&(x=`
`);var N=0,Z=!1;this.parse=function(I,z,T){if(typeof I!="string")throw new Error("Input must be a string");var ee=I.length,J=p.length,ie=x.length,we=y.length,ne=M(E),se=[],ae=[],Y=[],ge=N=0;if(!I)return He();if(H||H!==!1&&I.indexOf(B)===-1){for(var pe=I.split(x),re=0;re<pe.length;re++){if(Y=pe[re],N+=Y.length,re!==pe.length-1)N+=x.length;else if(T)return He();if(!y||Y.substring(0,we)!==y){if(ne){if(se=[],at(Y.split(p)),Xe(),Z)return He()}else at(Y.split(p));if(V&&V<=re)return se=se.slice(0,V),He(!0)}}return He()}for(var ve=I.indexOf(p,N),fe=I.indexOf(x,N),We=new RegExp($(F)+$(B),"g"),le=I.indexOf(B,N);;)if(I[N]===B)for(le=N,N++;;){if((le=I.indexOf(B,le+1))===-1)return T||ae.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:se.length,index:N}),Qe();if(le===ee-1)return Qe(I.substring(N,le).replace(We,B));if(B===F&&I[le+1]===F)le++;else if(B===F||le===0||I[le-1]!==F){ve!==-1&&ve<le+1&&(ve=I.indexOf(p,le+1));var ke=ut((fe=fe!==-1&&fe<le+1?I.indexOf(x,le+1):fe)===-1?ve:Math.min(ve,fe));if(I.substr(le+1+ke,J)===p){Y.push(I.substring(N,le).replace(We,B)),I[N=le+1+ke+J]!==B&&(le=I.indexOf(B,N)),ve=I.indexOf(p,N),fe=I.indexOf(x,N);break}if(ke=ut(fe),I.substring(le+1+ke,le+1+ke+ie)===x){if(Y.push(I.substring(N,le).replace(We,B)),rt(le+1+ke+ie),ve=I.indexOf(p,N),le=I.indexOf(B,N),ne&&(Xe(),Z))return He();if(V&&se.length>=V)return He(!0);break}ae.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:se.length,index:N}),le++}}else if(y&&Y.length===0&&I.substring(N,N+we)===y){if(fe===-1)return He();N=fe+ie,fe=I.indexOf(x,N),ve=I.indexOf(p,N)}else if(ve!==-1&&(ve<fe||fe===-1))Y.push(I.substring(N,ve)),N=ve+J,ve=I.indexOf(p,N);else{if(fe===-1)break;if(Y.push(I.substring(N,fe)),rt(fe+ie),ne&&(Xe(),Z))return He();if(V&&se.length>=V)return He(!0)}return Qe();function at(De){se.push(De),ge=N}function ut(De){var Ye=0;return Ye=De!==-1&&(De=I.substring(le+1,De))&&De.trim()===""?De.length:Ye}function Qe(De){return T||(De===void 0&&(De=I.substring(N)),Y.push(De),N=ee,at(Y),ne&&Xe()),He()}function rt(De){N=De,at(Y),Y=[],fe=I.indexOf(x,N)}function He(De){if(g.header&&!z&&se.length&&!te){var Ye=se[0],wt=Object.create(null),Kn=new Set(Ye);let Sr=!1;for(let Yt=0;Yt<Ye.length;Yt++){let _t=Ye[Yt];if(wt[_t=M(g.transformHeader)?g.transformHeader(_t,Yt):_t]){let sn,kn=wt[_t];for(;sn=_t+"_"+kn,kn++,Kn.has(sn););Kn.add(sn),Ye[Yt]=sn,wt[_t]++,Sr=!0,(G=G===null?{}:G)[sn]=_t}else wt[_t]=1,Ye[Yt]=_t;Kn.add(_t)}Sr&&console.warn("Duplicate headers found and renamed."),te=!0}return{data:se,errors:ae,meta:{delimiter:p,linebreak:x,aborted:Z,truncated:!!De,cursor:ge+(z||0),renamedHeaders:G}}}function Xe(){E(He()),se=[],ae=[]}},this.abort=function(){Z=!0},this.getCharIndex=function(){return N}}function _(g){var p=g.data,x=a[p.workerId],y=!1;if(p.error)x.userError(p.error,p.file);else if(p.results&&p.results.data){var E={abort:function(){y=!0,P(p.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:L,resume:L};if(M(x.userStep)){for(var V=0;V<p.results.data.length&&(x.userStep({data:p.results.data[V],errors:p.results.errors,meta:p.results.meta},E),!y);V++);delete p.results}else M(x.userChunk)&&(x.userChunk(p.results,E,p.file),delete p.results)}p.finished&&!y&&P(p.workerId,p.results)}function P(g,p){var x=a[g];M(x.userComplete)&&x.userComplete(p),x.terminate(),delete a[g]}function L(){throw new Error("Not implemented.")}function O(g){if(typeof g!="object"||g===null)return g;var p,x=Array.isArray(g)?[]:{};for(p in g)x[p]=O(g[p]);return x}function R(g,p){return function(){g.apply(p,arguments)}}function M(g){return typeof g=="function"}return c.parse=function(g,p){var x=(p=p||{}).dynamicTyping||!1;if(M(x)&&(p.dynamicTypingFunction=x,x={}),p.dynamicTyping=x,p.transform=!!M(p.transform)&&p.transform,!p.worker||!c.WORKERS_SUPPORTED)return x=null,c.NODE_STREAM_INPUT,typeof g=="string"?(g=(y=>y.charCodeAt(0)!==65279?y:y.slice(1))(g),x=new(p.download?f:m)(p)):g.readable===!0&&M(g.read)&&M(g.on)?x=new w(p):(r.File&&g instanceof File||g instanceof Object)&&(x=new d(p)),x.stream(g);(x=(()=>{var y;return!!c.WORKERS_SUPPORTED&&(y=(()=>{var E=r.URL||r.webkitURL||null,V=n.toString();return c.BLOB_URL||(c.BLOB_URL=E.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",V,")();"],{type:"text/javascript"})))})(),(y=new r.Worker(y)).onmessage=_,y.id=l++,a[y.id]=y)})()).userStep=p.step,x.userChunk=p.chunk,x.userComplete=p.complete,x.userError=p.error,p.step=M(p.step),p.chunk=M(p.chunk),p.complete=M(p.complete),p.error=M(p.error),delete p.worker,x.postMessage({input:g,config:p,workerId:x.id})},c.unparse=function(g,p){var x=!1,y=!0,E=",",V=`\r
`,H='"',G=H+H,te=!1,B=null,F=!1,N=((()=>{if(typeof p=="object"){if(typeof p.delimiter!="string"||c.BAD_DELIMITERS.filter(function(z){return p.delimiter.indexOf(z)!==-1}).length||(E=p.delimiter),typeof p.quotes!="boolean"&&typeof p.quotes!="function"&&!Array.isArray(p.quotes)||(x=p.quotes),typeof p.skipEmptyLines!="boolean"&&typeof p.skipEmptyLines!="string"||(te=p.skipEmptyLines),typeof p.newline=="string"&&(V=p.newline),typeof p.quoteChar=="string"&&(H=p.quoteChar),typeof p.header=="boolean"&&(y=p.header),Array.isArray(p.columns)){if(p.columns.length===0)throw new Error("Option columns is empty");B=p.columns}p.escapeChar!==void 0&&(G=p.escapeChar+H),p.escapeFormulae instanceof RegExp?F=p.escapeFormulae:typeof p.escapeFormulae=="boolean"&&p.escapeFormulae&&(F=/^[=+\-@\t\r].*$/)}})(),new RegExp($(H),"g"));if(typeof g=="string"&&(g=JSON.parse(g)),Array.isArray(g)){if(!g.length||Array.isArray(g[0]))return Z(null,g,te);if(typeof g[0]=="object")return Z(B||Object.keys(g[0]),g,te)}else if(typeof g=="object")return typeof g.data=="string"&&(g.data=JSON.parse(g.data)),Array.isArray(g.data)&&(g.fields||(g.fields=g.meta&&g.meta.fields||B),g.fields||(g.fields=Array.isArray(g.data[0])?g.fields:typeof g.data[0]=="object"?Object.keys(g.data[0]):[]),Array.isArray(g.data[0])||typeof g.data[0]=="object"||(g.data=[g.data])),Z(g.fields||[],g.data||[],te);throw new Error("Unable to serialize unrecognized input");function Z(z,T,ee){var J="",ie=(typeof z=="string"&&(z=JSON.parse(z)),typeof T=="string"&&(T=JSON.parse(T)),Array.isArray(z)&&0<z.length),we=!Array.isArray(T[0]);if(ie&&y){for(var ne=0;ne<z.length;ne++)0<ne&&(J+=E),J+=I(z[ne],ne);0<T.length&&(J+=V)}for(var se=0;se<T.length;se++){var ae=(ie?z:T[se]).length,Y=!1,ge=ie?Object.keys(T[se]).length===0:T[se].length===0;if(ee&&!ie&&(Y=ee==="greedy"?T[se].join("").trim()==="":T[se].length===1&&T[se][0].length===0),ee==="greedy"&&ie){for(var pe=[],re=0;re<ae;re++){var ve=we?z[re]:re;pe.push(T[se][ve])}Y=pe.join("").trim()===""}if(!Y){for(var fe=0;fe<ae;fe++){0<fe&&!ge&&(J+=E);var We=ie&&we?z[fe]:fe;J+=I(T[se][We],fe)}se<T.length-1&&(!ee||0<ae&&!ge)&&(J+=V)}}return J}function I(z,T){var ee,J;return z==null?"":z.constructor===Date?JSON.stringify(z).slice(1,25):(J=!1,F&&typeof z=="string"&&F.test(z)&&(z="'"+z,J=!0),ee=z.toString().replace(N,G),(J=J||x===!0||typeof x=="function"&&x(z,T)||Array.isArray(x)&&x[T]||((ie,we)=>{for(var ne=0;ne<we.length;ne++)if(-1<ie.indexOf(we[ne]))return!0;return!1})(ee,c.BAD_DELIMITERS)||-1<ee.indexOf(E)||ee.charAt(0)===" "||ee.charAt(ee.length-1)===" ")?H+ee+H:ee)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=A,c.ParserHandle=b,c.NetworkStreamer=f,c.FileStreamer=d,c.StringStreamer=m,c.ReadableStreamStreamer=w,r.jQuery&&((s=r.jQuery).fn.parse=function(g){var p=g.config||{},x=[];return this.each(function(V){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var H=0;H<this.files.length;H++)x.push({file:this.files[H],inputElem:this,instanceConfig:s.extend({},p)})}),y(),this;function y(){if(x.length===0)M(g.complete)&&g.complete();else{var V,H,G,te,B=x[0];if(M(g.before)){var F=g.before(B.file,B.inputElem);if(typeof F=="object"){if(F.action==="abort")return V="AbortError",H=B.file,G=B.inputElem,te=F.reason,void(M(g.error)&&g.error({name:V},H,G,te));if(F.action==="skip")return void E();typeof F.config=="object"&&(B.instanceConfig=s.extend(B.instanceConfig,F.config))}else if(F==="skip")return void E()}var N=B.instanceConfig.complete;B.instanceConfig.complete=function(Z){M(N)&&N(Z,B.file,B.inputElem),E()},c.parse(B.file,B.instanceConfig)}}function E(){x.splice(0,1),y()}}),o&&(r.onmessage=function(g){g=g.data,c.WORKER_ID===void 0&&g&&(c.WORKER_ID=g.workerId),typeof g.input=="string"?r.postMessage({workerId:c.WORKER_ID,results:c.parse(g.input,g.config),finished:!0}):(r.File&&g.input instanceof File||g.input instanceof Object)&&(g=c.parse(g.input,g.config))&&r.postMessage({workerId:c.WORKER_ID,results:g,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(d.prototype=Object.create(u.prototype)).constructor=d,(m.prototype=Object.create(m.prototype)).constructor=m,(w.prototype=Object.create(u.prototype)).constructor=w,c})})(ri)),ri.exports}B0();function _a({name:e=null,id:t=null,createdAt:n=Date.now(),reviewerName:r=""}){if(!t||typeof t!="string"||!t.trim())throw new Error("AMSTAR2Checklist requires a non-empty string id.");if(!e||typeof e!="string"||!e.trim())throw new Error("AMSTAR2Checklist requires a non-empty string name.");return{name:e,reviewerName:r||"",createdAt:n,id:t,q1:{answers:[[!1,!1,!1,!1],[!1],[!1,!0]],critical:!1},q2:{answers:[[!1,!1,!1,!1],[!1,!1,!1],[!1,!1,!0]],critical:!0},q3:{answers:[[!1,!1,!1],[!1,!0]],critical:!1},q4:{answers:[[!1,!1,!1],[!1,!1,!1,!1,!1],[!1,!1,!0]],critical:!0},q5:{answers:[[!1,!1],[!1,!0]],critical:!1},q6:{answers:[[!1,!1],[!1,!0]],critical:!1},q7:{answers:[[!1],[!1],[!1,!1,!0]],critical:!0},q8:{answers:[[!1,!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!0]],critical:!1},q9a:{answers:[[!1,!1],[!1,!1],[!1,!1,!0,!1]],critical:!0},q9b:{answers:[[!1,!1],[!1,!1],[!1,!1,!0,!1]],critical:!0},q10:{answers:[[!1],[!1,!0]],critical:!1},q11a:{answers:[[!1,!1,!1],[!1,!0,!1]],critical:!0},q11b:{answers:[[!1,!1,!1,!1],[!1,!0,!1]],critical:!0},q12:{answers:[[!1,!1],[!1,!0,!1]],critical:!1},q13:{answers:[[!1,!1],[!1,!0]],critical:!0},q14:{answers:[[!1,!1],[!1,!0]],critical:!1},q15:{answers:[[!1],[!1,!0,!1]],critical:!0},q16:{answers:[[!1,!1],[!1,!0]],critical:!1}}}function Jl(e){if(!e||typeof e!="object")return"Error";let t=0,n=0;return Object.entries(e).forEach(([r,s])=>{if(!/^q\d+[a-z]*$/i.test(r)||!s||!Array.isArray(s.answers))return;const i=ka(s.answers,r);(!i||i==="No")&&(s.critical?t++:n++)}),t>1?"Critically Low":t===1?"Low":n>1?"Moderate":"High"}function ka(e,t){const n=["q11a","q11b","q12","q15"],r=["Yes","No","No MA"],s=["Yes","Partial Yes","No","No MA"];if(!Array.isArray(e)||e.length===0)return null;const i=e[e.length-1];if(!Array.isArray(i))return null;const o=i.findIndex(a=>a===!0);return o===-1?null:n.includes(t)?r[o]||null:i.length===2?o===0?"Yes":"No":i.length>=3&&s[o]||null}function z0(e){if(!e||typeof e!="object")return null;const t={};return Object.entries(e).forEach(([n,r])=>{if(!/^q\d+[a-z]*$/i.test(n)||!r||!Array.isArray(r.answers))return;const s=ka(r.answers,n);t[n]=s}),"q9a"in t&&"q9b"in t&&(t.q9a==="No"||t.q9b==="No"?t.q9="No":t.q9a==="No MA"&&t.q9b==="No MA"?t.q9="No MA":t.q9="Yes"),delete t.q9a,delete t.q9b,"q11a"in t&&"q11b"in t&&(t.q11a==="No"||t.q11b==="No"?t.q11="No":t.q11a==="No MA"&&t.q11b==="No MA"?t.q11="No MA":t.q11="Yes"),delete t.q11a,delete t.q11b,t}function W0(e){const t=Array.isArray(e)?e:[e],n=Object.keys(et),r=["Checklist Name","Reviewer","Question","Question Text","Column Label","Option Text","Selected","Selected Answer"],s=[];t.forEach(a=>{n.forEach(l=>{const c=et[l],u=c?.text||l,f=c?.columns||[],d=a[l]?.answers||[],m=a[l]?.critical||!1,w=ka(d,l)||"";f.forEach((b,$)=>{const A=b.label||"",_=b.options||[],P=d[$]||[];_.forEach((L,O)=>{const R=P[O]===!0?"TRUE":"FALSE";s.push([a.name||"",a.reviewerName||"",m,l,u,A,L,R,w])})})})});const i=a=>`"${String(a).replace(/"/g,'""').replace(/\n/g," ")}"`;return r.map(i).join(",")+`
`+s.map(a=>a.map(i).join(",")).join(`
`)}var Y0=q('<div class="bg-white rounded-lg shadow-md p-8 text-sm"><div class=flex><h3 class="font-semibold text-gray-900"></h3></div><div class="font-semibold text-gray-900 h-4 mt-2 mb-1"></div><div class="font-semibold text-gray-900 h-4 mt-2">'),Q0=q('<div class="bg-white rounded-lg shadow-md p-8 text-sm"><div class=flex><h3 class="font-semibold text-gray-900"></h3></div><div class="font-semibold text-gray-900 h-4 mt-2"></div><div class="font-semibold text-gray-900 h-4 mt-4">'),K0=q('<div class="bg-white rounded-lg shadow-md p-7"><div class=flex><h3 class="font-semibold text-sm text-gray-900 mb-1">'),G0=q("<div class=ml-auto><button>"),J0=q('<div class="flex flex-col gap-4 sm:flex-row sm:gap-6">'),X0=q('<div><div class="font-semibold text-gray-800 text-xs break-words whitespace-normal min-w-0 w-full min-h-[2rem] flex items-center">'),Z0=q('<div class="flex flex-col gap-2 mt-1">'),eg=q('<label class="flex items-center space-x-2 text-xs"><input type=radio class="w-3.5 h-3.5 text-blue-600 border-gray-300 focus:ring-blue-500 cursor-pointer"><span class="text-gray-700 break-words">'),tg=q('<div class="flex flex-col gap-2">'),ng=q('<label class="flex items-center space-x-2 text-xs"><input type=checkbox class="w-3 h-3 shrink-0 text-blue-600 border-gray-300 focus:ring-blue-500"><span class="text-gray-700 break-words">'),rg=q("<div class=space-y-6>"),sg=q('<div class="min-h-screen bg-linear-to-br from-blue-50 to-indigo-100"><div class="container mx-auto px-4 py-6 max-w-5xl"><div class="bg-white rounded-lg shadow-lg p-6 mb-8"><h1 class="text-2xl font-bold text-gray-900 mb-4">AMSTAR 2 Checklist</h1><div class="grid md:grid-cols-3 gap-4 text-xs"><div><label for=reviewName class="block font-medium text-gray-700 mb-2">Review Title</label><input type=text id=reviewName class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"placeholder="Enter review title"></div><div><label for=reviewerName class="block font-medium text-gray-700 mb-2">Reviewer Name</label><input type=text id=reviewerName class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"placeholder="Enter your name"></div><div><label for=reviewDate class="block font-medium text-gray-700 mb-2">Review Date</label><input type=date id=reviewDate class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs">'),ig=q("<div>Loading...");function og(e){const t=()=>e.checklistState().q1,n=et.q1;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].every(Boolean);o[2][0]=l,o[2][1]=!l}s===2&&(i===0&&o[2][0]&&(o[2][1]=!1),i===1&&o[2][1]&&(o[2][0]=!1));const a={...e.checklistState().q1,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function ag(e){const t=()=>e.checklistState().q2,n=et.q2;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q2,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function lg(e){const t=()=>e.checklistState().q3,n=et.q3;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q3,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function cg(e){const t=()=>e.checklistState().q4,n=et.q4;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q4,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function ug(e){const t=()=>e.checklistState().q5,n=et.q5;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q5,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function fg(e){const t=()=>e.checklistState().q6,n=et.q6;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q6,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function dg(e){const t=()=>e.checklistState().q7,n=et.q7;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q7,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function hg(e){const t=()=>e.checklistState().q8,n=et.q8;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q8,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function gg(e){const t=()=>e.checklistState().q9a,n=()=>e.checklistState().q9b,r=et.q9;function s(a,l){const c=t().answers.map(f=>[...f]);if(c[a][l]=!t().answers[a][l],a===0||a===1){const f=c[0].every(Boolean),d=f&&c[1].every(Boolean);c[2][0]=d,c[2][1]=!d&&f,c[2][2]=!d&&!f,c[2][3]=!1}a===2&&(c[2]=c[2].map((f,d)=>d===l?!t().answers[2][l]:!1));const u={...e.checklistState().q9a,answers:c};e.onUpdatea(u)}function i(a,l){const c=n().answers.map(f=>[...f]);if(c[a][l]=!n().answers[a][l],a===0||a===1){const f=c[0].every(Boolean),d=f&&c[1].every(Boolean);c[2][0]=d,c[2][1]=!d&&f,c[2][2]=!d&&!f,c[2][3]=!1}a===2&&(c[2]=c[2].map((f,d)=>d===l?!n().answers[2][l]:!1));const u={...e.checklistState().q9b,answers:c};console.log("Updating q9b to",u),e.onUpdateb(u)}function o(a){const l=a.critical,c={...t(),critical:l},u={...n(),critical:l};e.onUpdatea(c),setTimeout(()=>{e.onUpdateb(u)},10)}return(()=>{var a=Y0(),l=a.firstChild,c=l.firstChild,u=l.nextSibling,f=u.nextSibling;return C(c,()=>r.text),C(l,S(Sa,{state:t,onUpdate:o}),null),C(u,()=>r.subtitle),C(a,S(os,{state:t,question:{text:"q9a"},get columns(){return r.columns},handleChange:s}),f),C(f,()=>r.subtitle2),C(a,S(os,{state:n,question:{text:"q9b"},get columns(){return r.columns2},handleChange:i}),null),a})()}function pg(e){const t=()=>e.checklistState().q10,n=et.q10;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q10,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function mg(e){const t=()=>e.checklistState().q11a,n=()=>e.checklistState().q11b,r=et.q11;function s(a,l){const c=t().answers.map(f=>[...f]);if(c[a][l]=!t().answers[a][l],a===0){const f=c[0].every(Boolean);c[1][0]=f,c[1][1]=!f,c[1][2]=!1}a===1&&(c[1]=c[1].map((f,d)=>d===l?!t().answers[1][l]:!1));const u={...e.checklistState().q11a,answers:c};e.onUpdatea(u)}function i(a,l){const c=n().answers.map(f=>[...f]);if(c[a][l]=!n().answers[a][l],a===0){const f=c[0].every(Boolean);c[1][0]=f,c[1][1]=!f,c[1][2]=!1}a===1&&(c[1]=c[1].map((f,d)=>d===l?!n().answers[1][l]:!1));const u={...e.checklistState().q11b,answers:c};e.onUpdateb(u)}function o(a){const l=a.critical,c={...t(),critical:l},u={...n(),critical:l};e.onUpdatea(c),setTimeout(()=>{e.onUpdateb(u)},10)}return(()=>{var a=Q0(),l=a.firstChild,c=l.firstChild,u=l.nextSibling,f=u.nextSibling;return C(c,()=>r.text),C(l,S(Sa,{state:t,onUpdate:o}),null),C(u,()=>r.subtitle),C(a,S(os,{state:t,question:{text:"q11a"},get columns(){return r.columns},handleChange:s,width:"w-48"}),f),C(f,()=>r.subtitle2),C(a,S(os,{state:n,question:{text:"q11b"},get columns(){return r.columns2},handleChange:i,width:"w-48"}),null),a})()}function wg(e){const t=()=>e.checklistState().q12,n=et.q12;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l,o[1][2]=!1}s===1&&(o[1]=o[1].map((l,c)=>c===i?!t().answers[1][i]:!1));const a={...e.checklistState().q12,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e,{width:"w-48"}))}function vg(e){const t=()=>e.checklistState().q13,n=et.q13;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q13,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function yg(e){const t=()=>e.checklistState().q14,n=et.q14;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q14,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function bg(e){const t=()=>e.checklistState().q15,n=et.q15;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l,o[1][2]=!1}s===1&&(o[1]=o[1].map((l,c)=>c===i?!t().answers[1][i]:!1));const a={...e.checklistState().q15,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e,{width:"w-48"}))}function xg(e){const t=()=>e.checklistState().q16,n=et.q16;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q16,answers:o};e.onUpdate(a)}return S(mt,be({state:t,question:n,handleChange:r},e))}function mt(e){return(()=>{var t=K0(),n=t.firstChild,r=n.firstChild;return C(r,()=>e.question.text),C(n,S(Sa,{get state(){return e.state},get onUpdate(){return e.onUpdate}}),null),C(t,S(os,be({get columns(){return e.question.columns}},e)),null),t})()}function Sa(e){function t(n){const r={...e.state(),critical:n};e.onUpdate(r)}return(()=>{var n=G0(),r=n.firstChild;return r.$$click=()=>t(!e.state().critical),C(r,()=>e.state().critical?"Critical":"Not Critical"),ce(s=>{var i=`ml-2 px-3 h-6 rounded-full text-xs font-medium transition-colors text-nowrap
        ${e.state().critical?"bg-red-100 text-red-700 border border-red-300 hover:bg-red-200":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,o=e.state().critical;return i!==s.e&&Be(r,s.e=i),o!==s.t&&pt(r,"aria-pressed",s.t=o),s},{e:void 0,t:void 0}),n})()}function os(e){return(()=>{var t=J0();return C(t,S(it,{get each(){return e.columns},children:(n,r)=>(()=>{var s=X0(),i=s.firstChild;return C(i,()=>n.label),C(s,(()=>{var o=nt(()=>r()===e.columns.length-1);return()=>o()?(()=>{var a=Z0();return C(a,S(it,{get each(){return n.options},children:(l,c)=>(()=>{var u=eg(),f=u.firstChild,d=f.nextSibling;return f.addEventListener("change",()=>e.handleChange(r(),c())),C(d,l),ce(()=>pt(f,"name",`col-${r()}-${e.question?.text??""}`)),ce(()=>f.checked=e.state().answers[r()][c()]),u})()})),a})():(()=>{var a=tg();return C(a,S(it,{get each(){return n.options},children:(l,c)=>(()=>{var u=ng(),f=u.firstChild,d=f.nextSibling;return f.addEventListener("change",()=>e.handleChange(r(),c())),C(d,l),ce(()=>f.checked=e.state().answers[r()][c()]),u})()})),a})()})(),null),ce(()=>Be(s,r()===e.columns.length-1?`${e.width??"w-32"} flex flex-col min-w-0`:"flex-1 flex flex-col min-w-0")),s})()})),t})()}function Xl(){const[e,t]=K(""),[n,r]=K(""),[s,i]=K(""),{currentChecklist:o,setCurrentChecklist:a,updateChecklist:l,dataLoading:c}=zt(),u=Wi(),f=rn();je(async()=>{if(u.checklistSlug==="new"){const m=_a({name:"New AMSTAR 2 Checklist",id:await Un(),createdAt:Date.now(),reviewerName:""});if(a(m),u.projectSlug&&u.reviewSlug){const w=Ht(m.name)+"-"+m.id;f(`/projects/${u.projectSlug}/reviews/${u.reviewSlug}/checklists/${w}`,{replace:!0})}}else if(u.checklistSlug!==void 0){const m=u.checklistSlug.lastIndexOf("-");let w=m!==-1?u.checklistSlug.slice(m+1):u.checklistSlug;a({id:w})}else c()||(console.warn("AMSTAR2Checklist: No current checklist found for",u.checklistSlug),f("/dashboard"))}),je(()=>{o()&&(t(o().name||""),r(o().reviewerName||""),i(o().reviewDate||""))});const d=m=>{const w={...o(),...m};l(w)};return(()=>{var m=sg(),w=m.firstChild,b=w.firstChild,$=b.firstChild,A=$.nextSibling,_=A.firstChild,P=_.firstChild,L=P.nextSibling,O=_.nextSibling,R=O.firstChild,M=R.nextSibling,g=O.nextSibling,p=g.firstChild,x=p.nextSibling;return L.addEventListener("change",y=>{if(t(y.target.value),d({name:y.target.value}),console.log("Review name changed to",y.target.value),u.projectSlug&&u.reviewSlug&&u.checklistSlug&&o()){const E=u.checklistSlug.lastIndexOf("-"),V=E!==-1?u.checklistSlug.slice(E+1):u.checklistSlug,H=Ht(y.target.value)+"-"+V;f(`/projects/${u.projectSlug}/reviews/${u.reviewSlug}/checklists/${H}`,{replace:!0})}}),M.addEventListener("change",y=>{r(y.target.value),d({reviewerName:y.target.value})}),x.addEventListener("change",y=>{i(y.target.value),d({reviewDate:y.target.value})}),C(w,S(_e,{get when(){return nt(()=>!c())()&&o()},get fallback(){return ig()},get children(){var y=rg();return C(y,S(og,{onUpdate:E=>d({q1:E}),checklistState:o}),null),C(y,S(ag,{onUpdate:E=>d({q2:E}),checklistState:o}),null),C(y,S(lg,{onUpdate:E=>d({q3:E}),checklistState:o}),null),C(y,S(cg,{onUpdate:E=>d({q4:E}),checklistState:o}),null),C(y,S(ug,{onUpdate:E=>d({q5:E}),checklistState:o}),null),C(y,S(fg,{onUpdate:E=>d({q6:E}),checklistState:o}),null),C(y,S(dg,{onUpdate:E=>d({q7:E}),checklistState:o}),null),C(y,S(hg,{onUpdate:E=>d({q8:E}),checklistState:o}),null),C(y,S(gg,{onUpdatea:E=>d({q9a:E}),onUpdateb:E=>d({q9b:E}),checklistState:o}),null),C(y,S(pg,{onUpdate:E=>d({q10:E}),checklistState:o}),null),C(y,S(mg,{onUpdatea:E=>d({q11a:E}),onUpdateb:E=>d({q11b:E}),checklistState:o}),null),C(y,S(wg,{onUpdate:E=>d({q12:E}),checklistState:o}),null),C(y,S(vg,{onUpdate:E=>d({q13:E}),checklistState:o}),null),C(y,S(yg,{onUpdate:E=>d({q14:E}),checklistState:o}),null),C(y,S(bg,{onUpdate:E=>d({q15:E}),checklistState:o}),null),C(y,S(xg,{onUpdate:E=>d({q16:E}),checklistState:o}),null),y}}),null),ce(()=>L.value=e()),ce(()=>M.value=n()),ce(()=>x.value=s()),m})()}ze(["click"]);function Iu({id:e,name:t,createdAt:n=Date.now(),checklists:r=[],pdfFileName:s=null}={}){if(!e)throw new Error("Review id is required");if(!t)throw new Error("Review name is required");return{id:e,name:t,createdAt:n,checklists:r,pdfFileName:s}}var _g=q('<div class="absolute w-full z-50"><ul class="max-h-[240px] overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg divide-y divide-gray-100">'),kg=q('<div class="absolute w-full z-50"><div class="bg-white border border-gray-200 rounded-lg shadow-lg p-6 flex flex-col items-center justify-center text-gray-500"><svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600"xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Searching...'),Sg=q('<div class="absolute w-full z-50"><div class="bg-white border border-gray-200 rounded-lg shadow-lg p-6 flex flex-col items-center justify-center text-gray-500"><svg class="h-12 w-12 text-gray-300 mb-2"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=1 d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=text-sm>No users found'),$g=q('<div class="absolute w-full z-50"><div class="bg-white border border-gray-200 rounded-lg shadow-lg p-4 text-center"><p class="text-sm text-gray-500">Type at least 2 characters to search'),Cg=q('<div class="rounded-lg bg-red-50 border border-red-200 p-4 flex items-start"><svg class="h-5 w-5 text-red-400 mt-0.5 mr-3 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"clip-rule=evenodd></path></svg><p class="text-sm text-red-800">'),Eg=q('<div class="rounded-lg bg-green-50 border border-green-200 p-4 flex items-start"><svg class="h-5 w-5 text-green-400 mt-0.5 mr-3 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg><p class="text-sm text-green-800">'),Ag=q('<div class="fixed inset-0 z-50 w-full flex items-center justify-center bg-black/40 overflow-auto py-8"><div class="max-w-2xl w-full mx-auto p-6 md:p-8 bg-white rounded-xl shadow-lg border border-gray-100 m-4"><div class="flex justify-between items-start mb-6"><div><h3 class="text-2xl font-bold text-gray-900 mb-2">Add Team Members</h3><p class="text-sm text-gray-600">Search for users or add them directly by email</p></div><button class="text-gray-400 hover:text-gray-600 focus:outline-none"aria-label="Close dialog"><svg class="h-6 w-6"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class=mb-8><div class=relative><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><input type=text placeholder="Search users by name or email"class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"autocomplete=off></div><div class="relative mt-3"></div></div><div class="relative mb-8"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-4 bg-white text-gray-500 font-medium">Or add by email</span></div></div><div class=space-y-4><div><label for=email class="block text-sm font-medium text-gray-700 mb-2">Email Address</label><input id=email type=email placeholder=colleague@example.com class="block w-full px-4 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"></div><button class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg">Add to Project</button><div class="h-[20px] mt-4"></div><div class="flex justify-end mt-8 pt-4 border-t border-gray-200"><button class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg mr-3 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Cancel</button><button class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Done'),Rg=q('<li class="px-4 py-3 hover:bg-blue-50 cursor-pointer transition-colors duration-150 flex items-center justify-between group"><div class="flex items-center min-w-0"><div class="flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm"></div><div class="ml-3 min-w-0 flex-1"><p class="text-sm font-medium text-gray-900 truncate"></p><p class="text-sm text-gray-500 truncate"></p></div></div><svg class="h-5 w-5 text-gray-400 group-hover:text-blue-600 transition-colors"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">');function Pg(e){const{searchUsers:t,addUserToProjectByEmail:n,currentProject:r}=zt(),[s,i]=K(""),[o,a]=K([]),[l,c]=K(!1),[u,f]=K(""),[d,m]=K(""),[w,b]=K("");let $;je(()=>{const P=s();if(!P||P.length<2){a([]);return}clearTimeout($),P.length>=2&&(c(!0),f(""),$=setTimeout(async()=>{try{const L=await t(P);await new Promise(O=>setTimeout(O,500)),a(L)}catch(L){console.error("Search error:",L),f("Failed to search users"),a([])}finally{c(!1)}},300))});const A=async P=>{b(P.email),i(""),a([])},_=async P=>{if(P.preventDefault(),!w()){f("Please enter an email address");return}f(""),m("");try{const L=await n(r().id,w());m(`Added ${L.user.name} (${L.user.email}) to the project`),b(""),e.onMemberAdded&&e.onMemberAdded(L.user)}catch(L){f(L.message||"Failed to add user to project")}};return S(_e,{get when(){return e.open},get children(){return S(bu,{get children(){var P=Ag(),L=P.firstChild,O=L.firstChild,R=O.firstChild,M=R.nextSibling,g=O.nextSibling,p=g.firstChild,x=p.firstChild,y=x.nextSibling,E=p.nextSibling,V=g.nextSibling,H=V.nextSibling,G=H.firstChild,te=G.firstChild,B=te.nextSibling,F=G.nextSibling,N=F.nextSibling,Z=N.nextSibling,I=Z.firstChild,z=I.nextSibling;return M.$$click=()=>e.onClose?.(),y.$$input=T=>i(T.target.value),C(E,S(_e,{get when(){return o().length>0},get children(){var T=_g(),ee=T.firstChild;return C(ee,()=>o().map(J=>(()=>{var ie=Rg(),we=ie.firstChild,ne=we.firstChild,se=ne.nextSibling,ae=se.firstChild,Y=ae.nextSibling;return ie.$$click=()=>A(J),C(ne,()=>J.name?.charAt(0).toUpperCase()),C(ae,()=>J.name),C(Y,()=>J.email),ie})())),T}}),null),C(E,S(_e,{get when(){return l()},get children(){return kg()}}),null),C(E,S(_e,{get when(){return nt(()=>!l()&&s().length>=2)()&&o().length===0},get children(){return Sg()}}),null),C(E,S(_e,{get when(){return nt(()=>s().length<2&&!l())()&&s().length>0},get children(){return $g()}}),null),B.addEventListener("keypress",T=>T.key==="Enter"&&_(T)),B.$$input=T=>b(T.target.value),F.$$click=_,C(N,S(_e,{get when(){return u()},get children(){var T=Cg(),ee=T.firstChild,J=ee.nextSibling;return C(J,u),T}}),null),C(N,S(_e,{get when(){return d()},get children(){var T=Eg(),ee=T.firstChild,J=ee.nextSibling;return C(J,d),T}}),null),I.$$click=()=>e.onClose?.(),z.$$click=()=>e.onClose?.(),ce(()=>y.value=s()),ce(()=>B.value=w()),P}})}})}ze(["click","input"]);const Tg="http://localhost:8000",ft="/api/v1";let Ke=Tg;Ke.endsWith("/api/v1")&&(Ke=Ke.replace("/api/v1",""));const Je={SIGNUP:`${Ke}${ft}/auth/signup`,SIGNIN:`${Ke}${ft}/auth/signin`,SIGNOUT:`${Ke}${ft}/auth/signout`,REFRESH:`${Ke}${ft}/auth/refresh`,SEND_VERIFICATION:`${Ke}${ft}/auth/send-verification`,VERIFY_EMAIL:`${Ke}${ft}/auth/verify-email`,REQUEST_PASSWORD_RESET:`${Ke}${ft}/auth/request-password-reset`,RESET_PASSWORD:`${Ke}${ft}/auth/reset-password`,CURRENT_USER:`${Ke}${ft}/users/me`,SEARCH_USERS:`${Ke}${ft}/users/search`,PROJECTS:`${Ke}${ft}/projects`,REVIEWS:`${Ke}${ft}/reviews`,CHECKLISTS:`${Ke}${ft}/checklists`,ELECTRIC_SHAPE:`${Ke}${ft}/electric/shape`,HEALTH:`${Ke}/healthz`,HEALTH_DB:`${Ke}/healthz/db`};async function Mg(e,t,n){const r=Intl.DateTimeFormat().resolvedOptions().timeZone,s=navigator.language,i=await fetch(Je.SIGNUP,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n,timezone:r,locale:s})});if(!i.ok){const o=await i.text();throw console.error("Signup error:",o),new Error(o||"Signup failed")}}let as=null;async function Lg(e,t){const n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=navigator.language,s=await fetch(Je.SIGNIN,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t,timezone:n,locale:r})});if(!s.ok){const o=await s.text();throw console.error("Sign in failed:",o),new Error(o||"Sign in failed")}as=(await s.json()).accessToken}async function yo(){const e=await xs(Je.CURRENT_USER);if(!e.ok){const t=await e.text();throw console.error("Failed to fetch user:",t),new Error(t||"Failed to fetch user")}return await e.json()}async function xs(e,t={}){t.headers={...t.headers,Authorization:`Bearer ${as}`},t.credentials="include";let n=await fetch(e,t);if(n.status===401||n.status===403)try{await Bo(),t.headers.Authorization=`Bearer ${as}`,t.credentials="include",n=await fetch(e,t)}catch(r){throw await Vu(),new Error("Session expired. Please log in again. Error:",r)}return n}async function Bo(){const e=await fetch(Je.REFRESH,{method:"POST",credentials:"include"});if(!e.ok){const n=await e.text();throw console.error("Refresh failed:",n),new Error(n||"Refresh failed")}as=(await e.json()).accessToken}async function Vu(){await fetch(Je.SIGNOUT,{method:"POST",credentials:"include"}),as=null}async function Ng(e){const t=await fetch(Je.SEND_VERIFICATION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(console.log("Send verification response:",await t.text()),!t.ok){const n=await t.text();throw console.error("Send verification error:",n),new Error(n||"Failed to send verification email")}}async function Og(e,t){const n=await fetch(Je.VERIFY_EMAIL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})});if(!n.ok){const r=await n.text();throw console.error("Verify email error:",r),new Error(r||"Email verification failed")}}async function jg(){const e=await fetch(Je.HEALTH,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.status===200){const t=await e.json();console.log("Health check response data:",t)}if(!e.ok){const t=await e.text();throw console.error("Reset password error:",t),new Error(t||"Failed to reset password")}}async function Dg(){const e=await fetch(Je.HEALTH_DB,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.status===200){const t=await e.json();console.log("Health DB check response data:",t)}if(!e.ok){const t=await e.text();throw console.error("Reset password error:",t),new Error(t||"Failed to reset password")}}async function Uu(e){console.log("Creating project with name:",e);try{const t=await xs(`${Je.PROJECTS}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!t.ok){const n=await t.json();throw new Error(n.detail||"Failed to create project")}return await t.json()}catch(t){throw console.error("Error creating project:",t),t}}async function qg(e,t){try{const n=await xs(`${Je.PROJECTS}/${e}/members/${t}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok){const r=await n.json();throw new Error(r.detail||"Failed to add user to project")}return await n.json()}catch(n){throw console.error("Error adding user to project:",n),n}}async function Fg(e,t){try{const n=await xs(`${Je.PROJECTS}/${e}/members/add-by-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(!n.ok){const r=await n.json();throw new Error(r.detail||"Failed to add user to project")}return await n.json()}catch(n){throw console.error("Error adding user to project by email:",n),n}}const F_=Object.freeze(Object.defineProperty({__proto__:null,addUserToProject:qg,addUserToProjectByEmail:Fg,createProject:Uu},Symbol.toStringTag,{value:"Module"}));var Ig=q('<div class="flex flex-wrap items-center justify-between mb-4 gap-2"><h2 class="text-xl font-bold"> Dashboard</h2><div class="flex gap-2"><button class="bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600 transition">Upload Project</button><button class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition flex items-center"><svg class="w-4 h-4 mr-1"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path></svg>Manage Members</button><button class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition">Delete Project');function Vg(e){function t(){Uu(e.project.name).then(n=>{console.log("Project created successfully:",n)}).catch(n=>{console.error("Failed to create project:",n)})}return(()=>{var n=Ig(),r=n.firstChild,s=r.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling,l=a.nextSibling;return C(r,()=>e.project.name,s),o.$$click=t,Mt(a,"click",e.onManageMembers,!0),l.$$click=()=>e.onDeleteProject(e.project.id),n})()}ze(["click"]);var Ug=q('<div class="mb-4 text-xs text-gray-500 flex items-center"><svg class="w-4 h-4 mr-1 text-gray-400"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path fillRule=evenodd d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"clipRule=evenodd></path></svg>Created: ');function Hg(e){return(()=>{var t=Ug(),n=t.firstChild;return n.nextSibling,C(t,()=>new Date(e.createdAt).toLocaleDateString(),null),t})()}var Bg=q('<div class="mb-6 p-4 bg-white rounded-lg shadow-sm"><h3 class="text-base font-semibold mb-3 flex items-center"><svg class="w-5 h-5 mr-2 text-green-500"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"></path></svg>Add New Review</h3><div class="flex gap-2 items-center"><input type=text class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 w-64 text-sm"placeholder="Review (study/article) name"><button class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition text-sm flex items-center"><svg class="w-4 h-4 mr-1"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path fillRule=evenodd d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"clipRule=evenodd></path></svg>Add Review');function zg(e){const[t,n]=K(""),r=async()=>{t().trim()&&(await e.onAddReview(t()),n(""))};return(()=>{var s=Bg(),i=s.firstChild,o=i.nextSibling,a=o.firstChild,l=a.nextSibling;return a.$$input=c=>n(c.target.value),l.$$click=r,ce(()=>l.disabled=!t().trim()),ce(()=>a.value=t()),s})()}ze(["input","click"]);var Wg=q('<li class="flex items-center justify-between border rounded px-2 py-1 bg-white hover:bg-blue-50 cursor-pointer"><span><span class=font-semibold></span><span class="ml-2 text-xs text-gray-600">Reviewer: </span></span><button class="ml-2 px-2 py-0.5 bg-red-400 text-white rounded hover:bg-red-500 text-xs">Delete'),Yg=q('<span class="italic text-gray-400">Unassigned');function Qg(e){return(()=>{var t=Wg(),n=t.firstChild,r=n.firstChild,s=r.nextSibling;s.firstChild;var i=n.nextSibling;return t.$$click=()=>e.onChecklistClick(e.checklist),C(r,()=>e.checklist.name),C(s,()=>e.checklist.reviewerName||Yg(),null),i.$$click=o=>{o.stopPropagation(),e.onDeleteChecklist(e.checklist.id)},t})()}ze(["click"]);var Kg=q('<div class="flex gap-2 mt-2"><input type=text class="px-2 py-1 border rounded w-40 text-xs"placeholder="Checklist name"><button class="px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 text-xs">+ Checklist');function Gg(e){const[t,n]=K(""),r=async()=>{t().trim()&&(await e.onAddChecklist(t()),n(""))};return(()=>{var s=Kg(),i=s.firstChild,o=i.nextSibling;return i.$$input=a=>n(a.target.value),o.$$click=r,ce(()=>o.disabled=!t().trim()),ce(()=>i.value=t()),s})()}ze(["input","click"]);var Jg=q('<div class=mt-2><h4 class="text-sm font-medium mb-1">Checklists</h4><ul class=space-y-1>'),Xg=q('<li class="px-2 py-1 text-xs text-gray-400">No checklists yet.');function Zg(e){return(()=>{var t=Jg(),n=t.firstChild,r=n.nextSibling;return C(r,S(it,{get each(){return e.checklists||[]},children:s=>S(Qg,{checklist:s,get onChecklistClick(){return e.onChecklistClick},onDeleteChecklist:i=>e.onDeleteChecklist(e.reviewId,i)})}),null),C(r,(()=>{var s=nt(()=>!e.checklists||e.checklists.length===0);return()=>s()&&Xg()})(),null),C(t,S(Gg,{onAddChecklist:s=>e.onAddChecklist(e.reviewId,s)}),null),t})()}var ep=q('<li class=p-3><div class="flex items-center justify-between"><div><span class=font-semibold></span><span class="ml-2 text-xs text-gray-400">Created: </span></div><button class="px-2 py-1 bg-red-400 text-white rounded hover:bg-red-500 text-xs">Delete Review');function tp(e){return(()=>{var t=ep(),n=t.firstChild,r=n.firstChild,s=r.firstChild,i=s.nextSibling;i.firstChild;var o=r.nextSibling;return C(s,()=>e.review.name),C(i,()=>new Date(e.review.createdAt).toLocaleDateString(),null),o.$$click=()=>e.onDeleteReview(e.review.id),C(t,S(Zg,{get checklists(){return e.review.checklists},get reviewId(){return e.review.id},get onChecklistClick(){return e.onChecklistClick},get onDeleteChecklist(){return e.onDeleteChecklist},get onAddChecklist(){return e.onAddChecklist}}),null),t})()}ze(["click"]);var np=q('<div class=mb-4><h3 class="text-base font-semibold mb-1">Reviews &amp; Checklists</h3><ul class="divide-y divide-gray-100 border rounded bg-white shadow-sm">'),rp=q('<li class="px-4 py-2 text-xs text-gray-400">No reviews yet.');function sp(e){const{currentProject:t}=zt();return(()=>{var n=np(),r=n.firstChild,s=r.nextSibling;return C(s,S(it,{get each(){return t().reviews||[]},children:i=>S(tp,{review:i,onDeleteReview:o=>e.onDeleteReview(o),get onChecklistClick(){return e.onChecklistClick},get onDeleteChecklist(){return e.onDeleteChecklist},get onAddChecklist(){return e.onAddChecklist}})}),null),C(s,(()=>{var i=nt(()=>!e.reviews||e.reviews.length===0);return()=>i()&&rp()})(),null),n})()}function ip(e){return new Promise((t,n)=>{const r=indexedDB.open("fileStorageDB",1);r.onupgradeneeded=s=>{const i=s.target.result;i.objectStoreNames.contains("files")||i.createObjectStore("files",{keyPath:"name"})},r.onsuccess=s=>{const o=s.target.result.transaction("files","readwrite");o.objectStore("files").put({name:e.name,blob:e}),o.oncomplete=()=>t(e.name),o.onerror=n},r.onerror=n})}function op(e){return new Promise((t,n)=>{const r=indexedDB.open("fileStorageDB",1);r.onsuccess=s=>{const l=s.target.result.transaction("files","readonly").objectStore("files").get(e);l.onsuccess=()=>t(l.result?.blob||null),l.onerror=n},r.onerror=n})}async function ap(){let e;if(window.showOpenFilePicker){const[t]=await window.showOpenFilePicker();e=await t.getFile()}else console.warn("showOpenFilePicker not supported, falling back to manual file selection."),e=await new Promise(t=>{const n=document.createElement("input");n.type="file",n.onchange=()=>t(n.files[0]),n.click()});if(navigator.storage?.getDirectory){const r=await(await(await navigator.storage.getDirectory()).getFileHandle(e.name,{create:!0})).createWritable();return await r.write(await e.arrayBuffer()),await r.close(),e.name}else return console.warn("File System Access API getDirectory not supported, falling back to IndexedDB."),await ip(e),e.name}async function Zl(e){return navigator.storage?.getDirectory?await(await(await navigator.storage.getDirectory()).getFileHandle(e)).getFile():(console.warn("File System Access API getDirectory not supported, falling back to IndexedDB."),await op(e))}var lp=q('<div class="mb-6 p-4 bg-white rounded-lg shadow-sm"><h3 class="text-base font-semibold mb-3 flex items-center cursor-pointer"><svg class="w-5 h-5 mr-2 text-gray-600"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path fillRule=evenodd d="M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z"clipRule=evenodd></path><path d="M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z"></path></svg>File Management<svg fill=none stroke=currentColor viewBox="0 0 24 24"xmlns=http://www.w3.org/2000/svg><path strokeLinecap=round strokeLinejoin=round strokeWidth=2 d="M19 9l-7 7-7-7">'),cp=q('<div class="grid grid-cols-2 gap-3 mt-3"><button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition text-sm flex items-center justify-center"><svg class="w-4 h-4 mr-1"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path fillRule=evenodd d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"clipRule=evenodd></path></svg>Export Checklists CSV</button><button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition text-sm flex items-center justify-center"><svg class="w-4 h-4 mr-1"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path fillRule=evenodd d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"clipRule=evenodd></path></svg>Upload File</button><button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition text-sm flex items-center justify-center"><svg class="w-4 h-4 mr-1"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path fillRule=evenodd d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"clipRule=evenodd></path></svg>Download File</button><button class="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition text-sm flex items-center justify-center"><svg class="w-4 h-4 mr-1"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path><path fillRule=evenodd d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"clipRule=evenodd></path></svg>Display File');function up(){const e=async()=>{const i=prompt("Enter the name of the file to retrieve (including extension):");if(i)try{const o=await Zl(i);if(!o){alert(`File "${i}" not found.`);return}const a=URL.createObjectURL(o),l=document.createElement("a");l.href=a,l.download=o.name||i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}catch(o){console.error("Error retrieving file:",o),alert("Error retrieving file. See console for details.")}},t=async()=>{const i=prompt("Enter the name of the PDF file to display (including .pdf):");if(i)try{const o=await Zl(i);if(!o){alert(`File "${i}" not found.`);return}if(o.type!=="application/pdf"&&!i.toLowerCase().endsWith(".pdf")){alert("Selected file is not a PDF.");return}const a=URL.createObjectURL(o);window.open(a,"_blank"),setTimeout(()=>URL.revokeObjectURL(a),6e4)}catch(o){console.error("Error displaying file:",o),alert("Error displaying file. See console for details.")}},n=()=>{let i=W0(currentProject().checklists);console.log(i)},[r,s]=K(!1);return(()=>{var i=lp(),o=i.firstChild,a=o.firstChild,l=a.nextSibling,c=l.nextSibling;return o.$$click=()=>s(!r()),C(i,(()=>{var u=nt(()=>!!r());return()=>u()&&(()=>{var f=cp(),d=f.firstChild,m=d.nextSibling,w=m.nextSibling,b=w.nextSibling;return d.$$click=n,Mt(m,"click",ap,!0),w.$$click=e,b.$$click=t,f})()})(),null),ce(()=>pt(c,"class",`ml-2 w-4 h-4 transition-transform ${r()?"transform rotate-180":""}`)),i})()}ze(["click"]);function si(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fp(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Hu(e){let t,n,r;e.length!==2?(t=si,n=(a,l)=>si(e(a),l),r=(a,l)=>e(a)-l):(t=e===si||e===fp?e:dp,n=e,r=e);function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){const f=s(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:s,center:o,right:i}}function dp(){return 0}function hp(e){return e===null?NaN:+e}const gp=Hu(si),pp=gp.right;Hu(hp).center;class ec extends Map{constructor(t,n=vp){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(tc(this,t))}has(t){return super.has(tc(this,t))}set(t,n){return super.set(mp(this,t),n)}delete(t){return super.delete(wp(this,t))}}function tc({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function mp({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function wp({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function vp(e){return e!==null&&typeof e=="object"?e.valueOf():e}const yp=Math.sqrt(50),bp=Math.sqrt(10),xp=Math.sqrt(2);function vi(e,t,n){const r=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=yp?10:i>=bp?5:i>=xp?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?vi(e,t,n*2):[a,l,c]}function _p(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[s,i,o]=r?vi(t,e,n):vi(e,t,n);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function zo(e,t,n){return t=+t,e=+e,n=+n,vi(e,t,n)[2]}function kp(e,t,n){t=+t,e=+e,n=+n;const r=t<e,s=r?zo(t,e,n):zo(e,t,n);return(r?-1:1)*(s<0?1/-s:s)}function Bu(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++r<s;)i[r]=e+r*n;return i}function Sp(e){return e}var $p=3,nc=1e-6;function Cp(e){return"translate("+e+",0)"}function Ep(e){return t=>+e(t)}function Ap(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Rp(){return!this.__axis}function Pp(e,t){var n=[],r=null,s=null,i=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1,u="y",f=Cp;function d(m){var w=r??(t.ticks?t.ticks.apply(t,n):t.domain()),b=s??(t.tickFormat?t.tickFormat.apply(t,n):Sp),$=Math.max(i,0)+a,A=t.range(),_=+A[0]+l,P=+A[A.length-1]+l,L=(t.bandwidth?Ap:Ep)(t.copy(),l),O=m.selection?m.selection():m,R=O.selectAll(".domain").data([null]),M=O.selectAll(".tick").data(w,t).order(),g=M.exit(),p=M.enter().append("g").attr("class","tick"),x=M.select("line"),y=M.select("text");R=R.merge(R.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(p),x=x.merge(p.append("line").attr("stroke","currentColor").attr(u+"2",c*i)),y=y.merge(p.append("text").attr("fill","currentColor").attr(u,c*$).attr("dy","0.71em")),m!==O&&(R=R.transition(m),M=M.transition(m),x=x.transition(m),y=y.transition(m),g=g.transition(m).attr("opacity",nc).attr("transform",function(E){return isFinite(E=L(E))?f(E+l):this.getAttribute("transform")}),p.attr("opacity",nc).attr("transform",function(E){var V=this.parentNode.__axis;return f((V&&isFinite(V=V(E))?V:L(E))+l)})),g.remove(),R.attr("d",o?"M"+_+","+c*o+"V"+l+"H"+P+"V"+c*o:"M"+_+","+l+"H"+P),M.attr("opacity",1).attr("transform",function(E){return f(L(E)+l)}),x.attr(u+"2",c*i),y.attr(u,c*$).text(b),O.filter(Rp).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),O.each(function(){this.__axis=L})}return d.scale=function(m){return arguments.length?(t=m,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),d):n.slice()},d.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),d):r&&r.slice()},d.tickFormat=function(m){return arguments.length?(s=m,d):s},d.tickSize=function(m){return arguments.length?(i=o=+m,d):i},d.tickSizeInner=function(m){return arguments.length?(i=+m,d):i},d.tickSizeOuter=function(m){return arguments.length?(o=+m,d):o},d.tickPadding=function(m){return arguments.length?(a=+m,d):a},d.offset=function(m){return arguments.length?(l=+m,d):l},d}function Tp(e){return Pp($p,e)}var Mp={value:()=>{}};function zu(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ii(n)}function ii(e){this._=e}function Lp(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ii.prototype=zu.prototype={constructor:ii,on:function(e,t){var n=this._,r=Lp(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=Np(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=rc(n[s],e.name,t);else if(t==null)for(s in n)n[s]=rc(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ii(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function Np(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function rc(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=Mp,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Wo="http://www.w3.org/1999/xhtml";const sc={svg:"http://www.w3.org/2000/svg",xhtml:Wo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),sc.hasOwnProperty(t)?{space:sc[t],local:e}:e}function Op(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Wo&&t.documentElement.namespaceURI===Wo?t.createElement(e):t.createElementNS(n,e)}}function jp(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Wu(e){var t=Gi(e);return(t.local?jp:Op)(t)}function Dp(){}function $a(e){return e==null?Dp:function(){return this.querySelector(e)}}function qp(e){typeof e!="function"&&(e=$a(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=e.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new xt(r,this._parents)}function Fp(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ip(){return[]}function Yu(e){return e==null?Ip:function(){return this.querySelectorAll(e)}}function Vp(e){return function(){return Fp(e.apply(this,arguments))}}function Up(e){typeof e=="function"?e=Vp(e):e=Yu(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),s.push(l));return new xt(r,s)}function Qu(e){return function(){return this.matches(e)}}function Ku(e){return function(t){return t.matches(e)}}var Hp=Array.prototype.find;function Bp(e){return function(){return Hp.call(this.children,e)}}function zp(){return this.firstElementChild}function Wp(e){return this.select(e==null?zp:Bp(typeof e=="function"?e:Ku(e)))}var Yp=Array.prototype.filter;function Qp(){return Array.from(this.children)}function Kp(e){return function(){return Yp.call(this.children,e)}}function Gp(e){return this.selectAll(e==null?Qp:Kp(typeof e=="function"?e:Ku(e)))}function Jp(e){typeof e!="function"&&(e=Qu(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new xt(r,this._parents)}function Gu(e){return new Array(e.length)}function Xp(){return new xt(this._enter||this._groups.map(Gu),this._parents)}function yi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yi.prototype={constructor:yi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zp(e){return function(){return e}}function em(e,t,n,r,s,i){for(var o=0,a,l=t.length,c=i.length;o<c;++o)(a=t[o])?(a.__data__=i[o],r[o]=a):n[o]=new yi(e,i[o]);for(;o<l;++o)(a=t[o])&&(s[o]=a)}function tm(e,t,n,r,s,i,o){var a,l,c=new Map,u=t.length,f=i.length,d=new Array(u),m;for(a=0;a<u;++a)(l=t[a])&&(d[a]=m=o.call(l,l.__data__,a,t)+"",c.has(m)?s[a]=l:c.set(m,l));for(a=0;a<f;++a)m=o.call(e,i[a],a,i)+"",(l=c.get(m))?(r[a]=l,l.__data__=i[a],c.delete(m)):n[a]=new yi(e,i[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(d[a])===l&&(s[a]=l)}function nm(e){return e.__data__}function rm(e,t){if(!arguments.length)return Array.from(this,nm);var n=t?tm:em,r=this._parents,s=this._groups;typeof e!="function"&&(e=Zp(e));for(var i=s.length,o=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],f=s[c],d=f.length,m=sm(e.call(u,u&&u.__data__,c,r)),w=m.length,b=a[c]=new Array(w),$=o[c]=new Array(w),A=l[c]=new Array(d);n(u,f,b,$,A,m,t);for(var _=0,P=0,L,O;_<w;++_)if(L=b[_]){for(_>=P&&(P=_+1);!(O=$[P])&&++P<w;);L._next=O||null}}return o=new xt(o,r),o._enter=a,o._exit=l,o}function sm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function im(){return new xt(this._exit||this._groups.map(Gu),this._parents)}function om(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function am(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),a=new Array(s),l=0;l<o;++l)for(var c=n[l],u=r[l],f=c.length,d=a[l]=new Array(f),m,w=0;w<f;++w)(m=c[w]||u[w])&&(d[w]=m);for(;l<s;++l)a[l]=n[l];return new xt(a,this._parents)}function lm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function cm(e){e||(e=um);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],a=o.length,l=s[i]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new xt(s,this._parents).order()}function um(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function fm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function dm(){return Array.from(this)}function hm(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function gm(){let e=0;for(const t of this)++e;return e}function pm(){return!this.node()}function mm(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,a;i<o;++i)(a=s[i])&&e.call(a,a.__data__,i,s);return this}function wm(e){return function(){this.removeAttribute(e)}}function vm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ym(e,t){return function(){this.setAttribute(e,t)}}function bm(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function xm(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function _m(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function km(e,t){var n=Gi(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?vm:wm:typeof t=="function"?n.local?_m:xm:n.local?bm:ym)(n,t))}function Ju(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Sm(e){return function(){this.style.removeProperty(e)}}function $m(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Cm(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Em(e,t,n){return arguments.length>1?this.each((t==null?Sm:typeof t=="function"?Cm:$m)(e,t,n??"")):gr(this.node(),e)}function gr(e,t){return e.style.getPropertyValue(t)||Ju(e).getComputedStyle(e,null).getPropertyValue(t)}function Am(e){return function(){delete this[e]}}function Rm(e,t){return function(){this[e]=t}}function Pm(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Tm(e,t){return arguments.length>1?this.each((t==null?Am:typeof t=="function"?Pm:Rm)(e,t)):this.node()[e]}function Xu(e){return e.trim().split(/^|\s+/)}function Ca(e){return e.classList||new Zu(e)}function Zu(e){this._node=e,this._names=Xu(e.getAttribute("class")||"")}Zu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ef(e,t){for(var n=Ca(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function tf(e,t){for(var n=Ca(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function Mm(e){return function(){ef(this,e)}}function Lm(e){return function(){tf(this,e)}}function Nm(e,t){return function(){(t.apply(this,arguments)?ef:tf)(this,e)}}function Om(e,t){var n=Xu(e+"");if(arguments.length<2){for(var r=Ca(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?Nm:t?Mm:Lm)(n,t))}function jm(){this.textContent=""}function Dm(e){return function(){this.textContent=e}}function qm(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Fm(e){return arguments.length?this.each(e==null?jm:(typeof e=="function"?qm:Dm)(e)):this.node().textContent}function Im(){this.innerHTML=""}function Vm(e){return function(){this.innerHTML=e}}function Um(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Hm(e){return arguments.length?this.each(e==null?Im:(typeof e=="function"?Um:Vm)(e)):this.node().innerHTML}function Bm(){this.nextSibling&&this.parentNode.appendChild(this)}function zm(){return this.each(Bm)}function Wm(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ym(){return this.each(Wm)}function Qm(e){var t=typeof e=="function"?e:Wu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Km(){return null}function Gm(e,t){var n=typeof e=="function"?e:Wu(e),r=t==null?Km:typeof t=="function"?t:$a(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Jm(){var e=this.parentNode;e&&e.removeChild(this)}function Xm(){return this.each(Jm)}function Zm(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ew(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tw(e){return this.select(e?ew:Zm)}function nw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function rw(e){return function(t){e.call(this,t,this.__data__)}}function sw(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function iw(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function ow(e,t,n){return function(){var r=this.__on,s,i=rw(t);if(r){for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function aw(e,t,n){var r=sw(e+""),s,i=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(s=0,u=a[l];s<i;++s)if((o=r[s]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?ow:iw,s=0;s<i;++s)this.each(a(r[s],t,n));return this}function nf(e,t,n){var r=Ju(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function lw(e,t){return function(){return nf(this,e,t)}}function cw(e,t){return function(){return nf(this,e,t.apply(this,arguments))}}function uw(e,t){return this.each((typeof t=="function"?cw:lw)(e,t))}function*fw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var rf=[null];function xt(e,t){this._groups=e,this._parents=t}function _s(){return new xt([[document.documentElement]],rf)}function dw(){return this}xt.prototype=_s.prototype={constructor:xt,select:qp,selectAll:Up,selectChild:Wp,selectChildren:Gp,filter:Jp,data:rm,enter:Xp,exit:im,join:om,merge:am,selection:dw,order:lm,sort:cm,call:fm,nodes:dm,node:hm,size:gm,empty:pm,each:mm,attr:km,style:Em,property:Tm,classed:Om,text:Fm,html:Hm,raise:zm,lower:Ym,append:Qm,insert:Gm,remove:Xm,clone:tw,datum:nw,on:aw,dispatch:uw,[Symbol.iterator]:fw};function sf(e){return typeof e=="string"?new xt([[document.querySelector(e)]],[document.documentElement]):new xt([[e]],rf)}function Ea(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function of(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ks(){}var ls=.7,bi=1/ls,ur="\\s*([+-]?\\d+)\\s*",cs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hw=/^#([0-9a-f]{3,8})$/,gw=new RegExp(`^rgb\\(${ur},${ur},${ur}\\)$`),pw=new RegExp(`^rgb\\(${Vt},${Vt},${Vt}\\)$`),mw=new RegExp(`^rgba\\(${ur},${ur},${ur},${cs}\\)$`),ww=new RegExp(`^rgba\\(${Vt},${Vt},${Vt},${cs}\\)$`),vw=new RegExp(`^hsl\\(${cs},${Vt},${Vt}\\)$`),yw=new RegExp(`^hsla\\(${cs},${Vt},${Vt},${cs}\\)$`),ic={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ea(ks,zn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oc,formatHex:oc,formatHex8:bw,formatHsl:xw,formatRgb:ac,toString:ac});function oc(){return this.rgb().formatHex()}function bw(){return this.rgb().formatHex8()}function xw(){return af(this).formatHsl()}function ac(){return this.rgb().formatRgb()}function zn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?lc(t):n===3?new dt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Fs(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Fs(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gw.exec(e))?new dt(t[1],t[2],t[3],1):(t=pw.exec(e))?new dt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mw.exec(e))?Fs(t[1],t[2],t[3],t[4]):(t=ww.exec(e))?Fs(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vw.exec(e))?fc(t[1],t[2]/100,t[3]/100,1):(t=yw.exec(e))?fc(t[1],t[2]/100,t[3]/100,t[4]):ic.hasOwnProperty(e)?lc(ic[e]):e==="transparent"?new dt(NaN,NaN,NaN,0):null}function lc(e){return new dt(e>>16&255,e>>8&255,e&255,1)}function Fs(e,t,n,r){return r<=0&&(e=t=n=NaN),new dt(e,t,n,r)}function _w(e){return e instanceof ks||(e=zn(e)),e?(e=e.rgb(),new dt(e.r,e.g,e.b,e.opacity)):new dt}function Yo(e,t,n,r){return arguments.length===1?_w(e):new dt(e,t,n,r??1)}function dt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ea(dt,Yo,of(ks,{brighter(e){return e=e==null?bi:Math.pow(bi,e),new dt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ls:Math.pow(ls,e),new dt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dt(Hn(this.r),Hn(this.g),Hn(this.b),xi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cc,formatHex:cc,formatHex8:kw,formatRgb:uc,toString:uc}));function cc(){return`#${Nn(this.r)}${Nn(this.g)}${Nn(this.b)}`}function kw(){return`#${Nn(this.r)}${Nn(this.g)}${Nn(this.b)}${Nn((isNaN(this.opacity)?1:this.opacity)*255)}`}function uc(){const e=xi(this.opacity);return`${e===1?"rgb(":"rgba("}${Hn(this.r)}, ${Hn(this.g)}, ${Hn(this.b)}${e===1?")":`, ${e})`}`}function xi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Nn(e){return e=Hn(e),(e<16?"0":"")+e.toString(16)}function fc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Pt(e,t,n,r)}function af(e){if(e instanceof Pt)return new Pt(e.h,e.s,e.l,e.opacity);if(e instanceof ks||(e=zn(e)),!e)return new Pt;if(e instanceof Pt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(t===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new Pt(o,a,l,e.opacity)}function Sw(e,t,n,r){return arguments.length===1?af(e):new Pt(e,t,n,r??1)}function Pt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ea(Pt,Sw,of(ks,{brighter(e){return e=e==null?bi:Math.pow(bi,e),new Pt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ls:Math.pow(ls,e),new Pt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new dt(bo(e>=240?e-240:e+120,s,r),bo(e,s,r),bo(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Pt(dc(this.h),Is(this.s),Is(this.l),xi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xi(this.opacity);return`${e===1?"hsl(":"hsla("}${dc(this.h)}, ${Is(this.s)*100}%, ${Is(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dc(e){return e=(e||0)%360,e<0?e+360:e}function Is(e){return Math.max(0,Math.min(1,e||0))}function bo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Aa=e=>()=>e;function $w(e,t){return function(n){return e+n*t}}function Cw(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ew(e){return(e=+e)==1?lf:function(t,n){return n-t?Cw(t,n,e):Aa(isNaN(t)?n:t)}}function lf(e,t){var n=t-e;return n?$w(e,n):Aa(isNaN(e)?t:e)}const _i=(function e(t){var n=Ew(t);function r(s,i){var o=n((s=Yo(s)).r,(i=Yo(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),c=lf(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=e,r})(1);function Aw(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=e[s]*(1-i)+t[s]*i;return r}}function Rw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Pw(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=Ra(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(a){for(o=0;o<r;++o)i[o]=s[o](a);return i}}function Tw(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Rt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Mw(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=Ra(e[s],t[s]):r[s]=t[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var Qo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xo=new RegExp(Qo.source,"g");function Lw(e){return function(){return e}}function Nw(e){return function(t){return e(t)+""}}function cf(e,t){var n=Qo.lastIndex=xo.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Qo.exec(e))&&(s=xo.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Rt(r,s)})),n=xo.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?Nw(l[0].x):Lw(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function Ra(e,t){var n=typeof t,r;return t==null||n==="boolean"?Aa(t):(n==="number"?Rt:n==="string"?(r=zn(t))?(t=r,_i):cf:t instanceof zn?_i:t instanceof Date?Tw:Rw(t)?Aw:Array.isArray(t)?Pw:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Mw:Rt)(e,t)}function Ow(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var hc=180/Math.PI,Ko={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uf(e,t,n,r,s,i){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*hc,skewX:Math.atan(l)*hc,scaleX:o,scaleY:a}}var Vs;function jw(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ko:uf(t.a,t.b,t.c,t.d,t.e,t.f)}function Dw(e){return e==null||(Vs||(Vs=document.createElementNS("http://www.w3.org/2000/svg","g")),Vs.setAttribute("transform",e),!(e=Vs.transform.baseVal.consolidate()))?Ko:(e=e.matrix,uf(e.a,e.b,e.c,e.d,e.e,e.f))}function ff(e,t,n,r){function s(c){return c.length?c.pop()+" ":""}function i(c,u,f,d,m,w){if(c!==f||u!==d){var b=m.push("translate(",null,t,null,n);w.push({i:b-4,x:Rt(c,f)},{i:b-2,x:Rt(u,d)})}else(f||d)&&m.push("translate("+f+t+d+n)}function o(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(s(f)+"rotate(",null,r)-2,x:Rt(c,u)})):u&&f.push(s(f)+"rotate("+u+r)}function a(c,u,f,d){c!==u?d.push({i:f.push(s(f)+"skewX(",null,r)-2,x:Rt(c,u)}):u&&f.push(s(f)+"skewX("+u+r)}function l(c,u,f,d,m,w){if(c!==f||u!==d){var b=m.push(s(m)+"scale(",null,",",null,")");w.push({i:b-4,x:Rt(c,f)},{i:b-2,x:Rt(u,d)})}else(f!==1||d!==1)&&m.push(s(m)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=e(c),u=e(u),i(c.translateX,c.translateY,u.translateX,u.translateY,f,d),o(c.rotate,u.rotate,f,d),a(c.skewX,u.skewX,f,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(m){for(var w=-1,b=d.length,$;++w<b;)f[($=d[w]).i]=$.x(m);return f.join("")}}}var qw=ff(jw,"px, ","px)","deg)"),Fw=ff(Dw,", ",")",")"),pr=0,Or=0,Rr=0,df=1e3,ki,jr,Si=0,Wn=0,Ji=0,us=typeof performance=="object"&&performance.now?performance:Date,hf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Pa(){return Wn||(hf(Iw),Wn=us.now()+Ji)}function Iw(){Wn=0}function $i(){this._call=this._time=this._next=null}$i.prototype=gf.prototype={constructor:$i,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Pa():+n)+(t==null?0:+t),!this._next&&jr!==this&&(jr?jr._next=this:ki=this,jr=this),this._call=e,this._time=n,Go()},stop:function(){this._call&&(this._call=null,this._time=1/0,Go())}};function gf(e,t,n){var r=new $i;return r.restart(e,t,n),r}function Vw(){Pa(),++pr;for(var e=ki,t;e;)(t=Wn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pr}function gc(){Wn=(Si=us.now())+Ji,pr=Or=0;try{Vw()}finally{pr=0,Hw(),Wn=0}}function Uw(){var e=us.now(),t=e-Si;t>df&&(Ji-=t,Si=e)}function Hw(){for(var e,t=ki,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ki=n);jr=e,Go(r)}function Go(e){if(!pr){Or&&(Or=clearTimeout(Or));var t=e-Wn;t>24?(e<1/0&&(Or=setTimeout(gc,e-us.now()-Ji)),Rr&&(Rr=clearInterval(Rr))):(Rr||(Si=us.now(),Rr=setInterval(Uw,df)),pr=1,hf(gc))}}function pc(e,t,n){var r=new $i;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var Bw=zu("start","end","cancel","interrupt"),zw=[],pf=0,mc=1,Jo=2,oi=3,wc=4,Xo=5,ai=6;function Xi(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Ww(e,n,{name:t,index:r,group:s,on:Bw,tween:zw,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:pf})}function Ta(e,t){var n=jt(e,t);if(n.state>pf)throw new Error("too late; already scheduled");return n}function Wt(e,t){var n=jt(e,t);if(n.state>oi)throw new Error("too late; already running");return n}function jt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ww(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=gf(i,0,n.time);function i(c){n.state=mc,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,f,d,m;if(n.state!==mc)return l();for(u in r)if(m=r[u],m.name===n.name){if(m.state===oi)return pc(o);m.state===wc?(m.state=ai,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[u]):+u<t&&(m.state=ai,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[u])}if(pc(function(){n.state===oi&&(n.state=wc,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Jo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Jo){for(n.state=oi,s=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(m=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++f]=m);s.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Xo,1),f=-1,d=s.length;++f<d;)s[f].call(e,u);n.state===Xo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=ai,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Yw(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>Jo&&r.state<Xo,r.state=ai,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function Qw(e){return this.each(function(){Yw(this,e)})}function Kw(e,t){var n,r;return function(){var s=Wt(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function Gw(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=Wt(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:t,value:n},l=0,c=s.length;l<c;++l)if(s[l].name===t){s[l]=a;break}l===c&&s.push(a)}i.tween=s}}function Jw(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=jt(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?Kw:Gw)(n,e,t))}function Ma(e,t,n){var r=e._id;return e.each(function(){var s=Wt(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return jt(s,r).value[t]}}function mf(e,t){var n;return(typeof t=="number"?Rt:t instanceof zn?_i:(n=zn(t))?(t=n,_i):cf)(e,t)}function Xw(e){return function(){this.removeAttribute(e)}}function Zw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function e1(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function t1(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function n1(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function r1(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function s1(e,t){var n=Gi(e),r=n==="transform"?Fw:mf;return this.attrTween(e,typeof t=="function"?(n.local?r1:n1)(n,r,Ma(this,"attr."+e,t)):t==null?(n.local?Zw:Xw)(n):(n.local?t1:e1)(n,r,t))}function i1(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function o1(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function a1(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&o1(e,i)),n}return s._value=t,s}function l1(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&i1(e,i)),n}return s._value=t,s}function c1(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Gi(e);return this.tween(n,(r.local?a1:l1)(r,t))}function u1(e,t){return function(){Ta(this,e).delay=+t.apply(this,arguments)}}function f1(e,t){return t=+t,function(){Ta(this,e).delay=t}}function d1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?u1:f1)(t,e)):jt(this.node(),t).delay}function h1(e,t){return function(){Wt(this,e).duration=+t.apply(this,arguments)}}function g1(e,t){return t=+t,function(){Wt(this,e).duration=t}}function p1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?h1:g1)(t,e)):jt(this.node(),t).duration}function m1(e,t){if(typeof t!="function")throw new Error;return function(){Wt(this,e).ease=t}}function w1(e){var t=this._id;return arguments.length?this.each(m1(t,e)):jt(this.node(),t).ease}function v1(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Wt(this,e).ease=n}}function y1(e){if(typeof e!="function")throw new Error;return this.each(v1(this._id,e))}function b1(e){typeof e!="function"&&(e=Qu(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new tn(r,this._parents,this._name,this._id)}function x1(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),a=0;a<i;++a)for(var l=t[a],c=n[a],u=l.length,f=o[a]=new Array(u),d,m=0;m<u;++m)(d=l[m]||c[m])&&(f[m]=d);for(;a<r;++a)o[a]=t[a];return new tn(o,this._parents,this._name,this._id)}function _1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function k1(e,t,n){var r,s,i=_1(t)?Ta:Wt;return function(){var o=i(this,e),a=o.on;a!==r&&(s=(r=a).copy()).on(t,n),o.on=s}}function S1(e,t){var n=this._id;return arguments.length<2?jt(this.node(),n).on.on(e):this.each(k1(n,e,t))}function $1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function C1(){return this.on("end.remove",$1(this._id))}function E1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$a(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a=r[o],l=a.length,c=i[o]=new Array(l),u,f,d=0;d<l;++d)(u=a[d])&&(f=e.call(u,u.__data__,d,a))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,Xi(c[d],t,n,d,c,jt(u,n)));return new tn(i,this._parents,t,n)}function A1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Yu(e));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var d=e.call(u,u.__data__,f,l),m,w=jt(u,n),b=0,$=d.length;b<$;++b)(m=d[b])&&Xi(m,t,n,b,d,w);i.push(d),o.push(u)}return new tn(i,o,t,n)}var R1=_s.prototype.constructor;function P1(){return new R1(this._groups,this._parents)}function T1(e,t){var n,r,s;return function(){var i=gr(this,e),o=(this.style.removeProperty(e),gr(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function wf(e){return function(){this.style.removeProperty(e)}}function M1(e,t,n){var r,s=n+"",i;return function(){var o=gr(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function L1(e,t,n){var r,s,i;return function(){var o=gr(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),gr(this,e))),o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a))}}function N1(e,t){var n,r,s,i="style."+t,o="end."+i,a;return function(){var l=Wt(this,e),c=l.on,u=l.value[i]==null?a||(a=wf(t)):void 0;(c!==n||s!==u)&&(r=(n=c).copy()).on(o,s=u),l.on=r}}function O1(e,t,n){var r=(e+="")=="transform"?qw:mf;return t==null?this.styleTween(e,T1(e,r)).on("end.style."+e,wf(e)):typeof t=="function"?this.styleTween(e,L1(e,r,Ma(this,"style."+e,t))).each(N1(this._id,e)):this.styleTween(e,M1(e,r,t),n).on("end.style."+e,null)}function j1(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function D1(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&j1(e,o,n)),r}return i._value=t,i}function q1(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,D1(e,t,n??""))}function F1(e){return function(){this.textContent=e}}function I1(e){return function(){var t=e(this);this.textContent=t??""}}function V1(e){return this.tween("text",typeof e=="function"?I1(Ma(this,"text",e)):F1(e==null?"":e+""))}function U1(e){return function(t){this.textContent=e.call(this,t)}}function H1(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&U1(s)),t}return r._value=e,r}function B1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,H1(e))}function z1(){for(var e=this._name,t=this._id,n=vf(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=jt(l,t);Xi(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new tn(r,this._parents,e,n)}function W1(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--s===0&&i()}};n.each(function(){var c=Wt(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),s===0&&i()})}var Y1=0;function tn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function vf(){return++Y1}var Kt=_s.prototype;tn.prototype={constructor:tn,select:E1,selectAll:A1,selectChild:Kt.selectChild,selectChildren:Kt.selectChildren,filter:b1,merge:x1,selection:P1,transition:z1,call:Kt.call,nodes:Kt.nodes,node:Kt.node,size:Kt.size,empty:Kt.empty,each:Kt.each,on:S1,attr:s1,attrTween:c1,style:O1,styleTween:q1,text:V1,textTween:B1,remove:C1,tween:Jw,delay:d1,duration:p1,ease:w1,easeVarying:y1,end:W1,[Symbol.iterator]:Kt[Symbol.iterator]};function Q1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var K1={time:null,delay:0,duration:250,ease:Q1};function G1(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function J1(e){var t,n;e instanceof tn?(t=e._id,e=e._name):(t=vf(),(n=K1).time=Pa(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Xi(l,e,t,c,o,n||G1(l,t));return new tn(r,this._parents,e,t)}_s.prototype.interrupt=Qw;_s.prototype.transition=J1;function X1(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ci(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function mr(e){return e=Ci(Math.abs(e)),e?e[1]:NaN}function Z1(e,t){return function(n,r){for(var s=n.length,i=[],o=0,a=e[0],l=0;s>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(n.substring(s-=a,s+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return i.reverse().join(t)}}function ev(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var tv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ei(e){if(!(t=tv.exec(e)))throw new Error("invalid format: "+e);var t;return new La({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ei.prototype=La.prototype;function La(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}La.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nv(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var yf;function rv(e,t){var n=Ci(e,t);if(!n)return e+"";var r=n[0],s=n[1],i=s-(yf=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Ci(e,Math.max(0,t+i-1))[0]}function vc(e,t){var n=Ci(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const yc={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:X1,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>vc(e*100,t),r:vc,s:rv,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function bc(e){return e}var xc=Array.prototype.map,_c=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function sv(e){var t=e.grouping===void 0||e.thousands===void 0?bc:Z1(xc.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?bc:ev(xc.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(f){f=Ei(f);var d=f.fill,m=f.align,w=f.sign,b=f.symbol,$=f.zero,A=f.width,_=f.comma,P=f.precision,L=f.trim,O=f.type;O==="n"?(_=!0,O="g"):yc[O]||(P===void 0&&(P=12),L=!0,O="g"),($||d==="0"&&m==="=")&&($=!0,d="0",m="=");var R=b==="$"?n:b==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",M=b==="$"?r:/[%p]/.test(O)?o:"",g=yc[O],p=/[defgprs%]/.test(O);P=P===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function x(y){var E=R,V=M,H,G,te;if(O==="c")V=g(y)+V,y="";else{y=+y;var B=y<0||1/y<0;if(y=isNaN(y)?l:g(Math.abs(y),P),L&&(y=nv(y)),B&&+y==0&&w!=="+"&&(B=!1),E=(B?w==="("?w:a:w==="-"||w==="("?"":w)+E,V=(O==="s"?_c[8+yf/3]:"")+V+(B&&w==="("?")":""),p){for(H=-1,G=y.length;++H<G;)if(te=y.charCodeAt(H),48>te||te>57){V=(te===46?s+y.slice(H+1):y.slice(H))+V,y=y.slice(0,H);break}}}_&&!$&&(y=t(y,1/0));var F=E.length+y.length+V.length,N=F<A?new Array(A-F+1).join(d):"";switch(_&&$&&(y=t(N+y,N.length?A-V.length:1/0),N=""),m){case"<":y=E+y+V+N;break;case"=":y=E+N+y+V;break;case"^":y=N.slice(0,F=N.length>>1)+E+y+V+N.slice(F);break;default:y=N+E+y+V;break}return i(y)}return x.toString=function(){return f+""},x}function u(f,d){var m=c((f=Ei(f),f.type="f",f)),w=Math.max(-8,Math.min(8,Math.floor(mr(d)/3)))*3,b=Math.pow(10,-w),$=_c[8+w/3];return function(A){return m(b*A)+$}}return{format:c,formatPrefix:u}}var Us,bf,xf;iv({thousands:",",grouping:[3],currency:["$",""]});function iv(e){return Us=sv(e),bf=Us.format,xf=Us.formatPrefix,Us}function ov(e){return Math.max(0,-mr(Math.abs(e)))}function av(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mr(t)/3)))*3-mr(Math.abs(e)))}function lv(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mr(t)-mr(e))+1}function Na(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const kc=Symbol("implicit");function _f(){var e=new ec,t=[],n=[],r=kc;function s(i){let o=e.get(i);if(o===void 0){if(r!==kc)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new ec;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return _f(t,n).unknown(r)},Na.apply(s,arguments),s}function kf(){var e=_f().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function f(){var d=t().length,m=s<r,w=m?s:r,b=m?r:s;i=(b-w)/Math.max(1,d-l+c*2),a&&(i=Math.floor(i)),w+=(b-w-i*(d-l))*u,o=i*(1-l),a&&(w=Math.round(w),o=Math.round(o));var $=Bu(d).map(function(A){return w+i*A});return n(m?$.reverse():$)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,s]=d,r=+r,s=+s,f()):[r,s]},e.rangeRound=function(d){return[r,s]=d,r=+r,s=+s,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(l=Math.min(1,c=+d),f()):l},e.paddingInner=function(d){return arguments.length?(l=Math.min(1,d),f()):l},e.paddingOuter=function(d){return arguments.length?(c=+d,f()):c},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.copy=function(){return kf(t(),[r,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},Na.apply(f(),arguments)}function cv(e){return function(){return e}}function uv(e){return+e}var Sc=[0,1];function or(e){return e}function Zo(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:cv(isNaN(t)?NaN:.5)}function fv(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function dv(e,t,n){var r=e[0],s=e[1],i=t[0],o=t[1];return s<r?(r=Zo(s,r),i=n(o,i)):(r=Zo(r,s),i=n(i,o)),function(a){return i(r(a))}}function hv(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)s[o]=Zo(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(a){var l=pp(e,a,1,r)-1;return i[l](s[l](a))}}function gv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pv(){var e=Sc,t=Sc,n=Ra,r,s,i,o=or,a,l,c;function u(){var d=Math.min(e.length,t.length);return o!==or&&(o=fv(e[0],e[d-1])),a=d>2?hv:dv,l=c=null,f}function f(d){return d==null||isNaN(d=+d)?i:(l||(l=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(s((c||(c=a(t,e.map(r),Rt)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,uv),u()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),u()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Ow,u()},f.clamp=function(d){return arguments.length?(o=d?!0:or,u()):o!==or},f.interpolate=function(d){return arguments.length?(n=d,u()):n},f.unknown=function(d){return arguments.length?(i=d,f):i},function(d,m){return r=d,s=m,u()}}function mv(){return pv()(or,or)}function wv(e,t,n,r){var s=kp(e,t,n),i;switch(r=Ei(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=av(s,o))&&(r.precision=i),xf(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=lv(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=ov(s))&&(r.precision=i-(r.type==="%")*2);break}}return bf(r)}function vv(e){var t=e.domain;return e.ticks=function(n){var r=t();return _p(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return wv(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,i=r.length-1,o=r[s],a=r[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=zo(o,a,n),c===l)return r[s]=o,r[i]=a,t(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function Sf(){var e=mv();return e.copy=function(){return gv(e,Sf())},Na.apply(e,arguments),vv(e)}function Dr(e,t,n){this.k=e,this.x=t,this.y=n}Dr.prototype={constructor:Dr,scale:function(e){return e===1?this:new Dr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Dr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Dr.prototype;var yv=q('<div style="background:#ffffff;border-radius:8px;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);padding:16px;margin:16px 0"><svg>');function bv(e){let t=null;const[n,r]=K({width:800,height:500});je(()=>{function _(){if(t&&t.parentElement){const P=t.parentElement.getBoundingClientRect();r({width:Math.max(P.width,600),height:Math.max(P.height,400)})}}_(),window.addEventListener("resize",_),gt(()=>window.removeEventListener("resize",_))});const s=()=>e.data??[],i=16,o=()=>e.width??n().width,a=()=>e.height??n().height,l=()=>e.title??"AMSTAR-2 Quality Assessment",c={top:60,right:170,bottom:60,left:120},u=()=>(o()-c.left-c.right)/i,f=()=>(a()-c.top-c.bottom)/s().length,d=()=>Math.min(u(),f()),m=()=>d()*i,w=()=>d()*s().length,b=()=>c.left+m()+c.right,$=()=>c.top+w()+c.bottom,A={yes:"#10b981","partial yes":"#facc15",no:"#ef4444","no ma":"#9ca3af"};return je(()=>{const _=sf(t).attr("width",b()).attr("height",$()).style("background","#ffffff").style("font-family",'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif');_.selectAll("*").remove(),_.append("g").attr("class","footer").selectAll("text").data(Bu(1,i+1)).enter().append("text").attr("x",(p,x)=>c.left+x*d()+d()/2).attr("y",c.top+w()+20).attr("text-anchor","middle").attr("font-size",Math.max(10,d()*.4)).attr("font-weight","600").attr("fill","#374151").text(p=>`Q${p}`),_.append("g").attr("class","rows").selectAll("text").data(s()).enter().append("text").attr("x",c.left-15).attr("y",(p,x)=>c.top+x*d()+d()/2).attr("text-anchor","end").attr("font-size",Math.max(10,d()*.45)).attr("font-weight","500").attr("fill","#374151").attr("dominant-baseline","middle").text(p=>p.label);const O=_.append("g").attr("class","cells");s().forEach((p,x)=>{for(let y=0;y<i;y++){const E=p.questions[y]?.toLowerCase?.()??"",V=A[E]??"#e5e7eb";O.append("rect").attr("x",c.left+y*d()+2).attr("y",c.top+x*d()+2).attr("width",d()-4).attr("height",d()-4).attr("fill",V).attr("stroke","#ffffff").attr("stroke-width",1).attr("rx",Math.max(2,d()*.12)).style("filter","drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.1))")}});const R=[{key:"yes",label:"Yes"},{key:"partial yes",label:"Partial Yes"},{key:"no",label:"No"},{key:"no ma",label:"No MA"}],g=_.append("g").attr("class","legend").attr("transform",`translate(${b()-c.right+20}, ${c.top+20})`).selectAll(".legend-item").data(R).enter().append("g").attr("class","legend-item").attr("transform",(p,x)=>`translate(0, ${x*25})`);g.append("rect").attr("x",0).attr("y",-8).attr("width",16).attr("height",16).attr("rx",2).attr("fill",p=>A[p.key]).attr("stroke","#ffffff").attr("stroke-width",1),g.append("text").attr("x",24).attr("y",0).attr("dy","0.35em").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(p=>p.label),_.append("text").attr("x",b()/2).attr("y",40).attr("text-anchor","middle").attr("font-size","18px").attr("font-weight","600").attr("fill","#111827").text(l()),gt(()=>{_.selectAll("*").remove()})}),(()=>{var _=yv(),P=_.firstChild,L=t;return typeof L=="function"?ns(L,P):t=P,ce(O=>zi(P,`width: 100%; height: ${$()}px; max-width: 100%; display: block;`,O)),_})()}var xv=q('<div style="background:#ffffff;border-radius:8px;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);padding:16px;margin:16px 0"><svg>');function _v(e){let t=null,n=null;const r=()=>e.data??[],[s,i]=K({width:900,height:600});da(()=>{const w=()=>{if(n){const b=n.getBoundingClientRect();i({width:Math.max(b.width,400),height:Math.max(b.height,400)})}};w(),window.addEventListener("resize",w),gt(()=>window.removeEventListener("resize",w))}),je(()=>{if(n){const w=n.getBoundingClientRect();i({width:Math.max(w.width,400),height:Math.max(w.height,400)})}});const o=()=>e.width??s().width,a=()=>e.height??s().width/1.5,l=()=>e.title??"Distribution of AMSTAR Ratings on Each Item Across Included Reviews",c={top:50,right:150,bottom:60,left:80},u=()=>o()-c.left-c.right,f=()=>a()-c.top-c.bottom,d=()=>Math.max(Math.round(o()/50),12)+1,m={yes:"#10b981","partial yes":"#facc15",no:"#ef4444","no ma":"#9ca3af"};return je(()=>{if(!r().length)return;const w=sf(t).attr("width",o()).attr("height",a()).style("background","#ffffff").style("font-family",'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif');w.selectAll("*").remove();const b=[],$=Math.max(...r().map(p=>p.questions?.length||0)),A=r().length;for(let p=0;p<$;p++){const x={question:p+1,label:`Q${p+1}`,counts:{yes:0,"partial yes":0,no:0,"no ma":0}};r().forEach(y=>{const E=y.questions[p]?.toLowerCase?.()??"no ma";x.counts.hasOwnProperty(E)&&x.counts[E]++}),x.percentages={},Object.keys(x.counts).forEach(y=>{x.percentages[y]=x.counts[y]/A*100}),b.push(x)}const _=kf().domain(b.map(p=>p.label)).range([0,f()]).padding(.1),P=Sf().domain([0,100]).range([0,u()]),L=w.append("g").attr("transform",`translate(${c.left}, ${c.top})`);w.append("text").attr("x",o()/2).attr("y",30).attr("text-anchor","middle").attr("font-size",d()+"px").attr("font-weight","600").attr("fill","#111827").text(l()),b.forEach(p=>{let x=0;const y=_.bandwidth(),E=_(p.label);["yes","partial yes","no ma","no"].forEach(V=>{const H=p.percentages[V],G=P(H);H>0&&(L.append("rect").attr("x",P(x)).attr("y",E).attr("width",G).attr("height",y).attr("fill",m[V]).attr("stroke","#ffffff").attr("stroke-width",1),H>=5&&L.append("text").attr("x",P(x)+G/2).attr("y",E+y/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").attr("font-weight","600").attr("fill",V==="partial yes"?"#000000":"#ffffff").text(`${H.toFixed(1)}`)),x+=H})}),L.selectAll(".y-label").data(b).enter().append("text").attr("class","y-label").attr("x",-10).attr("y",p=>_(p.label)+_.bandwidth()/2).attr("text-anchor","end").attr("dominant-baseline","middle").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(p=>p.label);const O=Tp(P).tickFormat(p=>`${p}`).ticks(5);L.append("g").attr("class","x-axis").attr("transform",`translate(0, ${f()})`).call(O).selectAll("text").attr("font-size","12px").attr("fill","#374151"),L.append("text").attr("x",u()/2).attr("y",f()+50).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","500").attr("fill","#374151").text(`Percentage of SRs (%), N=${A}`),w.append("text").attr("transform","rotate(-90)").attr("x",-a()/2).attr("y",20).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","500").attr("fill","#374151").text("Items of AMSTAR-2");const R=w.append("g").attr("class","legend").attr("transform",`translate(${o()-c.right+20}, ${c.top+20})`),M=[{key:"yes",label:"Yes"},{key:"partial yes",label:"Partial Yes"},{key:"no",label:"No"},{key:"no ma",label:"No MA"}],g=R.selectAll(".legend-item").data(M).enter().append("g").attr("class","legend-item").attr("transform",(p,x)=>`translate(0, ${x*25})`);g.append("rect").attr("x",0).attr("y",-8).attr("width",16).attr("height",16).attr("rx",2).attr("fill",p=>m[p.key]).attr("stroke","#ffffff").attr("stroke-width",1),g.append("text").attr("x",24).attr("y",0).attr("dy","0.35em").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(p=>p.label),gt(()=>{w.selectAll("*").remove()})}),(()=>{var w=xv(),b=w.firstChild,$=n;typeof $=="function"?ns($,w):n=w;var A=t;return typeof A=="function"?ns(A,b):t=b,ce(_=>zi(b,`width: 100%; height: ${a()}px; max-width: 100%; display: block;`,_)),w})()}var kv=q("<div class=mb-6>"),Sv=q("<div>");function $v(){const{currentProject:e}=zt(),[t,n]=K([]),r=["q1","q2","q3","q4","q5","q6","q7","q8","q9","q10","q11","q12","q13","q14","q15","q16"];return je(()=>{const s=(e()?.reviews||[]).flatMap(i=>(i.checklists||[]).map(o=>{const a=z0(o);return{label:o.name||o.title||o.id,reviewer:o.reviewerName||"",reviewName:i.name,questions:r.map(l=>a[l])}}));n(s)}),[(()=>{var s=kv();return C(s,S(bv,{get data(){return t()}})),s})(),(()=>{var s=Sv();return C(s,S(_v,{get data(){return t()}})),s})()]}var Cv=q("<div class=p-6>"),Ev=q("<div class=p-8>Project not found.");function Av(){const{currentProject:e,setCurrentProject:t,deleteProject:n,addReview:r,deleteReview:s,addChecklistToReview:i,deleteChecklistFromReview:o}=zt(),a=Wi(),l=rn(),[c,u]=K(!1);function f(A){if(!A)return null;const _=A.lastIndexOf("-");return _!==-1?A.slice(_+1):A}je(()=>{const A=f(a.projectSlug);A?t(A):(console.warn("ProjectDashboard: No project found for",A),l("/dashboard"))});const d=async A=>{const _=Iu({id:await Un(),name:A,createdAt:Date.now(),checklists:[]});await r(e().id,_)},m=async(A,_)=>{const P=_a({name:_,id:await Un(),createdAt:Date.now(),reviewerName:"Unassigned"});await i(e().id,A,P)},w=A=>{const _=Ht(A.name),P=Ht(e().name),L=(e().reviews||[]).find(R=>(R.checklists||[]).some(M=>M.id===A.id));if(!L){console.error("Review not found for checklist",A);return}const O=Ht(L.name);l(`/projects/${P}-${e().id}/reviews/${O}-${L.id}/checklists/${_}-${A.id}`)},b=()=>{console.log("Toggling member manager",c()),u(!c())},$=A=>{console.log("New member added:",A),u(!1)};return S(_e,{get when(){return e()},get fallback(){return Ev()},get children(){var A=Cv();return C(A,S(Vg,{get project(){return e()},onDeleteProject:n,onManageMembers:b}),null),C(A,S(Pg,{get open(){return c()},onClose:()=>u(!1),get projectId(){return e().id},onMemberAdded:$}),null),C(A,S(Hg,{get createdAt(){return e().createdAt}}),null),C(A,S(zg,{onAddReview:d}),null),C(A,S(sp,{onDeleteReview:_=>s(e().id,_),onChecklistClick:w,onDeleteChecklist:(_,P)=>o(e().id,_,P),onAddChecklist:m}),null),C(A,S(up,{}),null),C(A,S($v,{}),null),A}})}function $f({id:e,name:t,createdAt:n=Date.now(),reviews:r=[]}={}){if(t===null)throw new Error("Project name cannot be null");return{id:e,name:t,createdAt:n,reviews:r}}function Rv(e,t){return Object.keys(e).forEach(n=>{/^q\d+[a-z]*$/i.test(n)&&e[n]?.answers&&e[n].answers.forEach((r,s)=>{r.fill(!1),t%2===0?r[0]=!0:r[r.length-1]=!0})}),e}async function Pv(){const e=["Review 1","Review 2","Review 3"];let t=[];for(const[r,s]of e.entries()){const i=r%2===0?2:1;for(let o=0;o<i;o++){let a=_a({name:`Checklist ${o+1}`,id:await Un(),createdAt:Date.now()});a=Rv(a,r+o);const l=Iu({id:await Un(),name:s,createdAt:Date.now(),checklists:[a]});t.push(l)}}const n=$f({id:await Un(),name:"Example Project",createdAt:Date.now(),reviews:t});await _r(n)}var Tv=q("<ul class=space-y-1>"),Mv=q('<div class=p-4><h2 class="text-xl font-bold mb-3">Your Projects</h2><div class="mt-4 flex items-center gap-2"><input type=text class="px-2 py-1 border rounded w-48 text-sm"placeholder="Project name"><button class="px-3 py-1.5 bg-green-500 text-white rounded hover:bg-green-600 transition text-sm">+ Add New Project</button></div><div class="mt-4 flex flex-wrap gap-2"><button class="px-3 py-1.5 bg-gray-500 text-white rounded hover:bg-gray-600 transition text-sm">Load Example Project</button><button class="px-3 py-1.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition text-sm">Check Health</button><button class="px-3 py-1.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition text-sm">Check Health DB'),Lv=q('<div class="text-sm text-gray-500">No projects found.'),Nv=q('<li><div><div class=font-medium></div><div class="text-xs text-gray-600"></div><div class="text-xs text-gray-400">Created: </div></div><button class="ml-0 sm:ml-4 mt-2 sm:mt-0 px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600 transition text-xs">Delete');function Ov(){const{projects:e,currentProject:t,addProject:n,deleteProject:r}=zt(),s=rn(),[i,o]=K(""),a=u=>{const f=Ht(u.name);s(`/projects/${f}-${u.id}`)},l=async()=>{if(!i().trim())return;const u=await n($f({id:await Un(),name:i().trim(),createdAt:Date.now()}));o(""),a(u)},c=async u=>{window.confirm("Are you sure you want to delete this project?")&&await r(u)};return(()=>{var u=Mv(),f=u.firstChild,d=f.nextSibling,m=d.firstChild,w=m.nextSibling,b=d.nextSibling,$=b.firstChild,A=$.nextSibling,_=A.nextSibling;return C(u,S(_e,{get when(){return e().length!==0},get fallback(){return Lv()},get children(){var P=Tv();return C(P,S(it,{get each(){return e()},children:L=>(()=>{var O=Nv(),R=O.firstChild,M=R.firstChild,g=M.nextSibling,p=g.nextSibling;p.firstChild;var x=R.nextSibling;return O.$$click=()=>a(L),C(M,()=>L.name),C(g,()=>L.description),C(p,()=>new Date(L.createdAt).toLocaleDateString(),null),x.$$click=y=>{y.stopPropagation(),c(L.id)},ce(()=>Be(O,`p-2 border rounded cursor-pointer transition text-sm flex flex-col sm:flex-row sm:items-center sm:justify-between ${t()&&t().id===L.id?"bg-blue-50 border-blue-300":"hover:bg-gray-100"}`)),O})()})),P}}),d),m.$$input=P=>o(P.target.value),w.$$click=l,$.$$click=async()=>{const P=await Pv();console.log("Loaded example project:",P),window.location.reload()},Mt(A,"click",jg,!0),Mt(_,"click",Dg,!0),ce(()=>w.disabled=!i().trim()),ce(()=>m.value=i()),u})()}ze(["input","click"]);const[jv,Cf]=K(navigator.onLine);window.addEventListener("online",()=>{console.info("Went online"),Cf(!0)});window.addEventListener("offline",()=>{console.info("Went offline"),Cf(!1)});function Ef(){return jv}function Dv(){const[e,t]=K(!1),[n,r]=K(null),[s,i]=K(!0),o=Ef();let a=o();async function l(){i(!0);try{await Bo();const _=await yo();r(_),t(!!_)}catch{r(null),t(!1)}finally{i(!1)}}o()?l():i(!1),je(()=>{o()&&!a&&!n()&&l(),a=o()});async function c(_,P,L){await Mg(_,P,L),localStorage.setItem("pendingEmail",_)}async function u(){await Ng(localStorage.getItem("pendingEmail"))}async function f(_){await Og(localStorage.getItem("pendingEmail"),_),localStorage.removeItem("pendingEmail")}async function d(_,P){localStorage.setItem("pendingEmail",_),await Lg(_,P),localStorage.removeItem("pendingEmail"),t(!0),r(await yo())}async function m(){await Vu(),t(!1),r(null)}async function w(){const _=await yo();return r(_),_}async function b(){await Bo()}async function $(_,P={}){return await xs(_,P)}function A(){return localStorage.getItem("pendingEmail")}return{isLoggedIn:e,user:n,signup:c,signin:d,signout:m,getCurrentUser:w,refreshAccessToken:b,authFetch:$,authLoading:s,sendEmailVerification:u,verifyEmail:f,getPendingEmail:A}}const qv=In(Dv);function kr(){return qv}var Fv=q("<div>");function Ft(e){const[t,n]=K(!1),[r,s]=K(!1);let i=null,o=null;const a=()=>e.duration??300,l=()=>e.timingFunction??"ease-in-out",c=()=>e.when;return je(()=>{c()?(clearTimeout(o),s(!0),requestAnimationFrame(()=>{n(!0)})):(n(!1),clearTimeout(o),o=setTimeout(()=>{s(!1)},a()))}),gt(()=>{clearTimeout(o)}),S(_e,{get when(){return r()},get fallback(){return e.fallback},get children(){var u=Fv(),f=i;return typeof f=="function"?ns(f,u):i=u,C(u,()=>e.children),ce(d=>{var m=t()?1:0,w=`opacity ${a()}ms ${l()}`,b=e.ariaLive||"polite",$=e.role||"alert",A=e.class||"";return m!==d.e&&Yr(u,"opacity",d.e=m),w!==d.t&&Yr(u,"transition",d.t=w),b!==d.a&&pt(u,"aria-live",d.a=b),$!==d.o&&pt(u,"role",d.o=$),A!==d.i&&Be(u,d.i=A),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),u}})}var ar=(e,t=[])=>({parts:(...n)=>{if(Iv(t))return ar(e,n);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...n)=>ar(e,[...t,...n]),omit:(...n)=>ar(e,t.filter(r=>!n.includes(r))),rename:n=>ar(n,t),keys:()=>t,build:()=>[...new Set(t)].reduce((n,r)=>Object.assign(n,{[r]:{selector:[`&[data-scope="${Xn(e)}"][data-part="${Xn(r)}"]`,`& [data-scope="${Xn(e)}"][data-part="${Xn(r)}"]`].join(", "),attrs:{"data-scope":Xn(e),"data-part":Xn(r)}}}),{})}),Xn=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),Iv=e=>e.length===0,Zi=e=>typeof e=="object"&&e!==null,Re=e=>e?"":void 0,Af=e=>e?"true":void 0,Vv=1,Uv=9,Hv=11,Rf=e=>Zi(e)&&e.nodeType===Vv&&typeof e.nodeName=="string",Pf=e=>Zi(e)&&e.nodeType===Uv,Bv=e=>Zi(e)&&e===e.window,zv=e=>Zi(e)&&e.nodeType!==void 0,Wv=e=>zv(e)&&e.nodeType===Hv&&"host"in e;function Yv(e){if(!e)return!1;const t=e.getRootNode();return Tf(t)===e}function Qv(e){return Pf(e)?e:Bv(e)?e.document:e?.ownerDocument??document}function Oa(e){return Wv(e)?Oa(e.host):Pf(e)?e.defaultView??window:Rf(e)?e.ownerDocument?.defaultView??window:window}function Tf(e){let t=e.activeElement;for(;t?.shadowRoot;){const n=t.shadowRoot.activeElement;if(!n||n===t)break;t=n}return t}function Kv(e){const{selectionStart:t,selectionEnd:n,value:r}=e.currentTarget,s=e.data;return r.slice(0,t)+(s??"")+r.slice(n)}function Gv(e){return Mf(e).isComposing||e.keyCode===229}var Jv=e=>e.button===0,Xv=e=>e.ctrlKey||e.altKey||e.metaKey,Zv={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},$c={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function ey(e,t={}){const{dir:n="ltr",orientation:r="horizontal"}=t;let s=e.key;return s=Zv[s]??s,n==="rtl"&&r==="horizontal"&&s in $c&&(s=$c[s]),s}function Mf(e){return e.nativeEvent??e}function ty(e,t){const{type:n="HTMLInputElement",property:r="value"}=t,s=Oa(e)[n].prototype;return Object.getOwnPropertyDescriptor(s,r)??{}}function ny(e){if(e.localName==="input")return"HTMLInputElement";if(e.localName==="textarea")return"HTMLTextAreaElement";if(e.localName==="select")return"HTMLSelectElement"}function ry(e,t,n="value"){if(!e)return;const r=ny(e);r&&ty(e,{type:r,property:n}).set?.call(e,t),e.setAttribute(n,t)}function sy(e,t){const{value:n,bubbles:r=!0}=t;if(!e)return;const s=Oa(e);e instanceof s.HTMLInputElement&&(ry(e,`${n}`),e.dispatchEvent(new s.Event("input",{bubbles:r})))}function Hs(e){let t;const n=globalThis.requestAnimationFrame(()=>{t=e()});return()=>{globalThis.cancelAnimationFrame(n),t?.()}}function iy(e,t){return Array.from(e?.querySelectorAll(t)??[])}var oy={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"};function ay(e){return e==null?[]:Array.isArray(e)?e:[e]}var Cc=e=>e?.constructor.name==="Array",ly=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!eo(e[n],t[n]))return!1;return!0},eo=(e,t)=>{if(Object.is(e,t))return!0;if(e==null&&t!=null||e!=null&&t==null)return!1;if(typeof e?.isEqual=="function"&&typeof t?.isEqual=="function")return e.isEqual(t);if(typeof e=="function"&&typeof t=="function")return e.toString()===t.toString();if(Cc(e)&&Cc(t))return ly(Array.from(e),Array.from(t));if(typeof e!="object"||typeof t!="object")return!1;const n=Object.keys(t??Object.create(null)),r=n.length;for(let s=0;s<r;s++)if(!Reflect.has(e,n[s]))return!1;for(let s=0;s<r;s++){const i=n[s];if(!eo(e[i],t[i]))return!1}return!0},cy=e=>Array.isArray(e),Lf=e=>e!=null&&typeof e=="object",uy=e=>Lf(e)&&!cy(e),fy=e=>typeof e=="number"&&!Number.isNaN(e),ja=e=>typeof e=="string",gn=e=>typeof e=="function",dy=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),hy=e=>Object.prototype.toString.call(e),Nf=Function.prototype.toString,gy=Nf.call(Object),py=e=>{if(!Lf(e)||hy(e)!="[object Object]"||vy(e))return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const n=dy(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Nf.call(n)==gy},my=e=>typeof e=="object"&&e!==null&&"$$typeof"in e&&"props"in e,wy=e=>typeof e=="object"&&e!==null&&"__v_isVNode"in e,vy=e=>my(e)||wy(e),yy=(()=>{let e=0;return()=>(e++,e.toString(36))})(),_o=(e,t,n)=>e[t]===n?e:[...e.slice(0,t),n,...e.slice(t+1)];function Of(e){if(!py(e)||e===void 0)return e;const t=Reflect.ownKeys(e).filter(r=>typeof r=="string"),n={};for(const r of t){const s=e[r];s!==void 0&&(n[r]=Of(s))}return n}function Ec(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function by(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function xy(e,t){if(e==null)throw new Error(t())}function _y(){return{and:(...e)=>function(n){return e.every(r=>n.guard(r))},or:(...e)=>function(n){return e.some(r=>n.guard(r))},not:e=>function(n){return!n.guard(e)}}}function ky(){return{guards:_y(),createMachine:e=>e,choose:e=>function({choose:n}){return n(e)?.actions}}}var nr=(e=>(e.NotStarted="Not Started",e.Started="Started",e.Stopped="Stopped",e))(nr||{}),ko="__init__";function Sy(e){const t=()=>e.getRootNode?.()??document,n=()=>Qv(t());return{...e,getRootNode:t,getDoc:n,getWin:()=>n().defaultView??window,getActiveElement:()=>Tf(t()),isActiveElement:Yv,getById:o=>t().getElementById(o)}}function $y(e){return new Proxy({},{get(t,n){return n==="style"?r=>e({style:r}).style:e}})}var jf=()=>e=>Array.from(new Set(e)),Cy=ar("password-input").parts("root","input","label","control","indicator","visibilityTrigger"),Zn=Cy.build(),li=e=>e.ids?.input??`p-input-${e.id}-input`,ea=e=>e.getById(li(e));function Ey(e,t){const{scope:n,prop:r,context:s}=e,i=s.get("visible"),o=!!r("disabled"),a=!!r("invalid"),l=!!r("readOnly"),c=!!r("required"),u=!(l||o),f=r("translations");return{visible:i,disabled:o,invalid:a,focus(){ea(n)?.focus()},setVisible(d){e.send({type:"VISIBILITY.SET",value:d})},toggleVisible(){e.send({type:"VISIBILITY.SET",value:!i})},getRootProps(){return t.element({...Zn.root.attrs,dir:r("dir"),"data-disabled":Re(o),"data-invalid":Re(a),"data-readonly":Re(l)})},getLabelProps(){return t.label({...Zn.label.attrs,htmlFor:li(n),"data-disabled":Re(o),"data-invalid":Re(a),"data-readonly":Re(l),"data-required":Re(c)})},getInputProps(){return t.input({...Zn.input.attrs,id:li(n),autoCapitalize:"off",name:r("name"),required:r("required"),autoComplete:r("autoComplete"),spellCheck:!1,readOnly:l,disabled:o,type:i?"text":"password","data-state":i?"visible":"hidden","aria-invalid":Af(a),"data-disabled":Re(o),"data-invalid":Re(a),"data-readonly":Re(l),...r("ignorePasswordManagers")?Ay:{}})},getVisibilityTriggerProps(){return t.button({...Zn.visibilityTrigger.attrs,type:"button",tabIndex:-1,"aria-controls":li(n),"aria-expanded":i,"data-readonly":Re(l),disabled:o,"data-disabled":Re(o),"data-state":i?"visible":"hidden","aria-label":f?.visibilityTrigger?.(i),onPointerDown(d){Jv(d)&&u&&(d.preventDefault(),e.send({type:"TRIGGER.CLICK"}))}})},getIndicatorProps(){return t.element({...Zn.indicator.attrs,"aria-hidden":!0,"data-state":i?"visible":"hidden","data-disabled":Re(o),"data-invalid":Re(a),"data-readonly":Re(l)})},getControlProps(){return t.element({...Zn.control.attrs,"data-disabled":Re(o),"data-invalid":Re(a),"data-readonly":Re(l)})}}}var Ay={"data-1p-ignore":"","data-lpignore":"true","data-bwignore":"true","data-form-type":"other","data-protonpass-ignore":"true"},Ry={props({props:e}){return{id:yy(),defaultVisible:!1,autoComplete:"current-password",ignorePasswordManagers:!1,...e,translations:{visibilityTrigger(t){return t?"Hide password":"Show password"},...e.translations}}},context({prop:e,bindable:t}){return{visible:t(()=>({value:e("visible"),defaultValue:e("defaultVisible"),onChange(n){e("onVisibilityChange")?.({visible:n})}}))}},initialState(){return"idle"},effects:["trackFormEvents"],states:{idle:{on:{"VISIBILITY.SET":{actions:["setVisibility"]},"TRIGGER.CLICK":{actions:["toggleVisibility","focusInputEl"]}}}},implementations:{actions:{setVisibility({context:e,event:t}){e.set("visible",t.value)},toggleVisibility({context:e}){e.set("visible",t=>!t)},focusInputEl({scope:e}){ea(e)?.focus()}},effects:{trackFormEvents({scope:e,send:t}){const r=ea(e)?.form;if(!r)return;const s=e.getWin(),i=new s.AbortController;return r.addEventListener("reset",o=>{o.defaultPrevented||t({type:"VISIBILITY.SET",value:!1})},{signal:i.signal}),r.addEventListener("submit",()=>{t({type:"VISIBILITY.SET",value:!1})},{signal:i.signal}),()=>i.abort()}}}};jf()(["defaultVisible","dir","id","onVisibilityChange","visible","ids","getRootNode","disabled","invalid","required","readOnly","translations","ignorePasswordManagers","autoComplete","name"]);function Ai(e){const t=e().value??e().defaultValue,n=e().isEqual??Object.is,[r,s]=K(t),i=Me(()=>e().value!=null),o={current:r()},a={current:void 0};je(()=>{const u=i()?e().value:r();a.current=u,o.current=u});const l=u=>{const f=a.current,d=gn(u)?u(o.current):u;e().debug&&console.log(`[bindable > ${e().debug}] setValue`,{next:d,prev:f}),i()||s(d),n(d,f)||e().onChange?.(d,f)};function c(){const u=i()?e().value:r;return gn(u)?u():u}return{initial:t,ref:o,get:c,set:l,invoke(u,f){e().onChange?.(u,f)},hash(u){return e().hash?.(u)??String(u)}}}Ai.cleanup=e=>{gt(()=>e())};Ai.ref=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}};function Py(e){const t={current:e};return{get(n){return t.current[n]},set(n,r){t.current[n]=r}}}function So(e){return gn(e)?e():e}var Ty=(e,t)=>{let n=[],r=!0;je(()=>{if(r){n=e.map(i=>So(i)),r=!1;return}let s=!1;for(let i=0;i<e.length;i++)if(!eo(n[i],So(e[i]))){s=!0;break}s&&(n=e.map(i=>So(i)),t())})};function Df(e,t={}){const n=Me(()=>{const{id:g,ids:p,getRootNode:x}=$o(t);return Sy({id:g,ids:p,getRootNode:x})}),r=(...g)=>{e.debug&&console.log(...g)},s=Me(()=>e.props?.({props:Of($o(t)),scope:n()})??$o(t)),i=My(s),o=e.context?.({prop:i,bindable:Ai,get scope(){return n()},flush:Ac,getContext(){return a},getComputed(){return L},getRefs(){return w},getEvent(){return d()}}),a={get(g){return o?.[g].get()},set(g,p){o?.[g].set(p)},initial(g){return o?.[g].initial},hash(g){const p=o?.[g].get();return o?.[g].hash(p)}},l={current:new Map},c={current:null},u={current:null},f={current:{type:""}},d=()=>be(f.current,{current(){return f.current},previous(){return u.current}}),m=()=>be(O,{matches(...g){const p=O.get();return g.includes(p)},hasTag(g){const p=O.get();return!!e.states[p]?.tags?.includes(g)}}),w=Py(e.refs?.({prop:i,context:a})??{}),b=()=>({state:m(),context:a,event:d(),prop:i,send:M,action:$,guard:A,track:Ty,refs:w,computed:L,flush:Ac,get scope(){return n()},choose:P}),$=g=>{const p=gn(g)?g(b()):g;if(!p)return;const x=p.map(y=>{const E=e.implementations?.actions?.[y];return E||Ec(`[zag-js] No implementation found for action "${JSON.stringify(y)}"`),E});for(const y of x)y?.(b())},A=g=>gn(g)?g(b()):e.implementations?.guards?.[g](b()),_=g=>{const p=gn(g)?g(b()):g;if(!p)return;const x=p.map(E=>{const V=e.implementations?.effects?.[E];return V||Ec(`[zag-js] No implementation found for effect "${JSON.stringify(E)}"`),V}),y=[];for(const E of x){const V=E?.(b());V&&y.push(V)}return()=>y.forEach(E=>E?.())},P=g=>ay(g).find(p=>{let x=!p.guard;return ja(p.guard)?x=!!A(p.guard):gn(p.guard)&&(x=p.guard(b())),x}),L=g=>{xy(e.computed,()=>"[zag-js] No computed object found on machine");const p=e.computed[g];return p({context:a,event:f.current,prop:i,refs:w,scope:n(),computed:L})},O=Ai(()=>({defaultValue:e.initialState({prop:i}),onChange(g,p){p&&(l.current.get(p)?.(),l.current.delete(p)),p&&$(e.states[p]?.exit),$(c.current?.actions);const x=_(e.states[g]?.effects);if(x&&l.current.set(g,x),p===ko){$(e.entry);const y=_(e.effects);y&&l.current.set(ko,y)}$(e.states[g]?.entry)}}));let R=nr.NotStarted;da(()=>{const g=R===nr.Started;R=nr.Started,r(g?"rehydrating...":"initializing..."),O.invoke(O.initial,ko)}),gt(()=>{r("unmounting..."),R=nr.Stopped,l.current.forEach(p=>p?.()),l.current=new Map,c.current=null,$(e.exit)});const M=g=>{queueMicrotask(()=>{if(R!==nr.Started)return;u.current=f.current,f.current=g;let p=ht(()=>O.get());const x=e.states[p].on?.[g.type]??e.on?.[g.type],y=P(x);if(!y)return;c.current=y;const E=y.target??p;r("transition",g.type,y.target||p,`(${y.actions})`);const V=E!==p;V?O.set(E):y.reenter&&!V?O.invoke(p,p):$(y.actions)})};return e.watch?.(b()),{state:m(),send:M,context:a,prop:i,get scope(){return n()},refs:w,computed:L,event:d(),getStatus:()=>R}}function Ac(e){e()}function $o(e){return gn(e)?e():e}function My(e){return function(n){return e()[n]}}var Rc={onFocus:"onFocusIn",onBlur:"onFocusOut",onDoubleClick:"onDblClick",onChange:"onInput",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",className:"class"},Ly=e=>e.startsWith("--")?e:Fy(e);function Ny(e){return e in Rc?Rc[e]:e}var qf=$y(e=>{const t={};for(const n in e){const r=e[n];if(!(n==="readOnly"&&r===!1)){if(n==="style"&&uy(r)){t.style=Oy(r);continue}if(n==="children"){ja(r)&&(t.textContent=r);continue}t[Ny(n)]=r}}return t});function Oy(e){let t={};for(const n in e){const r=e[n];!ja(r)&&!fy(r)||(t[Ly(n)]=r)}return t}var jy=/[A-Z]/g,Dy=/^ms-/;function qy(e){return"-"+e.toLowerCase()}var Co={};function Fy(e){if(Co.hasOwnProperty(e))return Co[e];var t=e.replace(jy,qy);return Co[e]=Dy.test(t)?"-"+t:t}var Iy=q("<svg stroke-width=0>");function to(e,t){const n=be(e.a,t),[r,s]=wu(n,["src"]),[i,o]=K(""),a=Me(()=>t.title?`${e.c}<title>${t.title}</title>`:e.c);return je(()=>o(a())),gt(()=>{o("")}),(()=>{var l=Iy();return ct(l,be({get stroke(){return e.a?.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},s,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return i()}}),!0,!0),C(l,()=>yu),l})()}function Vy(e){return to({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><path d="M1 1 23 23"/>'},e)}function Uy(e){return to({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><path d="M12 9A3 3 0 1 0 12 15 3 3 0 1 0 12 9z"/>'},e)}function Hy(e){return to({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M3 12 21 12"/><path d="M3 6 21 6"/><path d="M3 18 21 18"/>'},e)}var By=q("<div><label>Password</label><div><input><button><span>");function Ff(e){const t=Df(Ry,{id:vu(),autoComplete:e.autoComplete||"new-password",value:e.password||"",required:e.required||!1}),n=Me(()=>Ey(t,qf)),r=e.inputClass||"w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition big-placeholder",s=e.iconSize||20;return(()=>{var i=By(),o=i.firstChild,a=o.nextSibling,l=a.firstChild,c=l.nextSibling,u=c.firstChild;return ct(i,be(()=>n().getRootProps(),{get class(){return e.class}}),!1,!0),ct(o,be(()=>n().getLabelProps(),{class:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"}),!1,!0),ct(a,be(()=>n().getControlProps(),{class:"relative"}),!1,!0),ct(l,be(()=>n().getInputProps(),{class:r,onInput:f=>e.onPasswordChange?.(f.target.value),placeholder:"••••••••"}),!1,!1),ct(c,be(()=>n().getVisibilityTriggerProps(),{class:"absolute right-3 sm:right-4 top-1/2 -translate-y-1/2 text-gray-400"}),!1,!0),ct(u,be(()=>n().getIndicatorProps()),!1,!0),C(u,S(_e,{get when(){return n().visible},get fallback(){return S(Vy,{size:s-2})},get children(){return S(Uy,{size:s})}})),i})()}function Qr(e){return to({a:{viewBox:"0 0 1024 1024"},c:'<path d="M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"/>'},e)}var zy=q('<p class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm">'),Wy=q('<div class="flex items-center">Signing In...'),Yy=q('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-8 sm:py-12"><form aria-labelledby=signin-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 space-y-4 border border-gray-100"autocomplete=off><div class="mb-2 sm:mb-4 text-center"><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=signin-heading>Welcome Back</h2><p class="text-gray-500 text-xs sm:text-sm">Sign in to your account.</p></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=email-input>Email</label><input type=email autocomplete=email autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"required id=email-input placeholder=you@example.com></div><div></div><button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"></button><div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Don&apos;t have an account? <a href=/signup class="text-indigo-600 hover:underline font-semibold">Sign Up');function Qy(){const[e,t]=K(""),[n,r]=K(""),[s,i]=K(""),[o,a]=K(!1),l=rn(),{signin:c}=kr();async function u(f){if(f.preventDefault(),i(""),!e()||!n()){i("Please enter email and password");return}a(!0);try{await c(e(),n()),await new Promise(d=>setTimeout(d,200)),l("/dashboard",{replace:!0}),a(!1)}catch(d){JSON.parse(d.message).detail.includes("Email not verified")?l("/verify-email",{replace:!0}):(a(!1),i("Incorrect email or password"))}}return(()=>{var f=Yy(),d=f.firstChild,m=d.firstChild,w=m.nextSibling,b=w.firstChild,$=b.nextSibling,A=w.nextSibling,_=A.nextSibling,P=_.nextSibling,L=P.firstChild,O=L.nextSibling;return d.addEventListener("submit",u),$.$$input=R=>t(R.target.value),C(A,S(Ff,{get password(){return n()},onPasswordChange:r,autoComplete:"current-password",required:!0}),null),C(A,S(Ft,{get when(){return!!s()},get children(){var R=zy();return C(R,s),R}}),null),C(_,S(Ft,{get when(){return o()},fallback:"Sign In",get children(){var R=Wy(),M=R.firstChild;return C(R,S(Qr,{class:"animate-spin mr-2",size:22}),M),R}})),O.$$click=R=>{R.preventDefault(),l("/signup")},ce(()=>_.disabled=o()),ce(()=>$.value=e()),f})()}ze(["input","click"]);var Ky=q('<div class="w-full mt-2"><div class="text-xs text-gray-700"id=password-requirements aria-live=polite><ul class="pace-y-0.5 sm:space-y-1">'),Gy=q('<li class="flex items-center gap-2"><span aria-hidden=true></span><span>'),Jy=q('<svg class="w-3 h-3"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 16 16"><path stroke-linecap=round stroke-linejoin=round d="M4 8l3 3 5-5">'),Xy=q('<svg class="w-3 h-3"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 16 16"><path stroke-linecap=round stroke-linejoin=round d="M5 5l6 6M11 5l-6 6">');const qr=[{label:"At least 8 characters",test:e=>e.length>=8,error:"at least 8 characters"},{label:"Uppercase letter (A-Z)",test:e=>/[A-Z]/.test(e),error:"an uppercase letter"},{label:"Lowercase letter (a-z)",test:e=>/[a-z]/.test(e),error:"a lowercase letter"},{label:"Number (0-9)",test:e=>/\d/.test(e),error:"a number"},{label:"Special character (e.g. !?<>@#$%)",test:e=>/[^A-Za-z0-9]/.test(e),error:"a special character"}];function Zy(e){if(e=e(),!e)return{met:[],unmet:qr.map(s=>s.label)};const t=qr.filter(s=>s.test(e)).map(s=>s.label),n=qr.filter(s=>!s.test(e)).map(s=>s.label),r=qr.filter(s=>!s.test(e)).map(s=>s.error);return{met:t,unmet:n,errors:r}}function eb(e){const t=Me(()=>Zy(()=>e.password));return je(()=>{e.onUnmet?.(t().errors)}),(()=>{var n=Ky(),r=n.firstChild,s=r.firstChild;return C(s,S(it,{each:qr,children:i=>{const o=()=>t().met.includes(i.label);return(()=>{var a=Gy(),l=a.firstChild,c=l.nextSibling;return C(l,(()=>{var u=nt(()=>!!o());return()=>u()?Jy():Xy()})()),C(c,()=>i.label),ce(u=>{var f=`w-3.5 h-3.5 ml-1 rounded-full flex items-center justify-center ${o()?"bg-white text-green-500 border-green-500 border-[1.5px]":"border-red-500 border-[1.5px] text-red-500"}`,d=o()?"text-green-500":"text-red-500";return f!==u.e&&Be(l,u.e=f),d!==u.t&&Be(c,u.t=d),u},{e:void 0,t:void 0}),a})()}})),n})()}var tb=q('<p class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm">Password must include '),nb=q('<p class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm">'),rb=q('<div class="flex items-center">Signing Up...'),sb=q('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-6 sm:py-12"><form aria-labelledby=signup-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 space-y-4 border border-gray-100"autocomplete=off><div class="mb-2 text-center"><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=signup-heading>Get Started</h2><p class="text-gray-500 text-xs sm:text-sm">Create a new account.</p></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=name-input>Name</label><div class=relative><input type=text autocomplete=name autocapitalize=words spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"required id=name-input placeholder="What should we call you?"></div></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=email-input>Email</label><div class=relative><input type=email autocomplete=email autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"required id=email-input placeholder=you@example.com></div></div><div></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=confirm-password-input>Confirm Password</label><div class=relative><input type=password autocomplete=new-password autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition big-placeholder"required id=confirm-password-input placeholder=••••••••></div></div><button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"></button><div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Already have an account? <a href=/signin class="text-indigo-600 hover:underline font-semibold">Sign In');function ib(){const[e,t]=K(""),[n,r]=K(""),[s,i]=K(""),[o,a]=K(""),[l,c]=K(""),[u,f]=K(!1),[d,m]=K([]),[w,b]=K(!1),$=rn(),{signup:A}=kr();async function _(P){if(P.preventDefault(),f(!0),c(""),!e()||!n()||!s()||!o()){c("Please fill out all fields");return}if(s()!==o()){c("Passwords do not match");return}if(!(d().length>0)){b(!0);try{await A(n(),s(),e()),await new Promise(L=>setTimeout(L,200)),$("/verify-email",{replace:!0}),b(!1)}catch(L){console.error("Signup error:",L),JSON.parse(L.message).detail.includes("Email not verified")?$("/verify-email",{replace:!0}):(b(!1),c("Sign up failed"))}}}return je(()=>{s()===o()&&c("")}),(()=>{var P=sb(),L=P.firstChild,O=L.firstChild,R=O.nextSibling,M=R.firstChild,g=M.nextSibling,p=g.firstChild,x=R.nextSibling,y=x.firstChild,E=y.nextSibling,V=E.firstChild,H=x.nextSibling,G=H.nextSibling,te=G.firstChild,B=te.nextSibling,F=B.firstChild,N=G.nextSibling,Z=N.nextSibling,I=Z.firstChild,z=I.nextSibling;return L.addEventListener("submit",_),p.$$input=T=>t(T.target.value),V.$$input=T=>r(T.target.value),C(H,S(Ff,{get password(){return s()},onPasswordChange:i,autoComplete:"new-password",required:!0}),null),C(H,S(Ft,{get when(){return nt(()=>!!u())()&&d().length>0},get children(){var T=tb();return T.firstChild,C(T,()=>d()?.[0],null),T}}),null),C(H,S(eb,{get password(){return s()},onUnmet:m}),null),F.$$input=T=>a(T.target.value),C(G,S(Ft,{get when(){return!!l()},get children(){var T=nb();return C(T,l),T}}),null),C(N,S(Ft,{get when(){return w()},fallback:"Sign Up",get children(){var T=rb(),ee=T.firstChild;return C(T,S(Qr,{class:"animate-spin mr-2",size:22}),ee),T}})),z.$$click=T=>{T.preventDefault(),$("/signin")},ce(()=>N.disabled=w()),ce(()=>p.value=e()),ce(()=>V.value=n()),ce(()=>F.value=o()),P})()}ze(["input","click"]);var ob=ar("pinInput").parts("root","label","input","control"),Bs=ob.build(),Kr=e=>e.ids?.root??`pin-input:${e.id}`,ab=(e,t)=>e.ids?.input?.(t)??`pin-input:${e.id}:${t}`,ta=e=>e.ids?.hiddenInput??`pin-input:${e.id}:hidden`,lb=e=>e.ids?.label??`pin-input:${e.id}:label`,cb=e=>e.ids?.control??`pin-input:${e.id}:control`,ub=e=>e.getById(Kr(e)),Ri=e=>{const n=`input[data-ownedby=${CSS.escape(Kr(e))}]`;return iy(ub(e),n)},Pr=(e,t)=>Ri(e)[t],fb=e=>Ri(e)[0],Pc=e=>e.getById(ta(e)),Eo=(e,t)=>{e.value=t,e.setAttribute("value",t)},db={numeric:/^[0-9]+$/,alphabetic:/^[A-Za-z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/i};function hb(e,t){return e?!!db[e]?.test(t):!0}function gb(e,t,n){return n?new RegExp(n,"g").test(e):hb(t,e)}function pb(e,t){const{send:n,context:r,computed:s,prop:i,scope:o}=e,a=s("isValueComplete"),l=!!i("disabled"),c=!!i("readOnly"),u=!!i("invalid"),f=!!i("required"),d=i("translations"),m=r.get("focusedIndex");function w(){fb(o)?.focus()}return{focus:w,count:r.get("count"),items:Array.from({length:r.get("count")}).map((b,$)=>$),value:r.get("value"),valueAsString:s("valueAsString"),complete:a,setValue(b){Array.isArray(b)||by("[pin-input/setValue] value must be an array"),n({type:"VALUE.SET",value:b})},clearValue(){n({type:"VALUE.CLEAR"})},setValueAtIndex(b,$){n({type:"VALUE.SET",value:$,index:b})},getRootProps(){return t.element({dir:i("dir"),...Bs.root.attrs,id:Kr(o),"data-invalid":Re(u),"data-disabled":Re(l),"data-complete":Re(a),"data-readonly":Re(c)})},getLabelProps(){return t.label({...Bs.label.attrs,dir:i("dir"),htmlFor:ta(o),id:lb(o),"data-invalid":Re(u),"data-disabled":Re(l),"data-complete":Re(a),"data-required":Re(f),"data-readonly":Re(c),onClick(b){b.preventDefault(),w()}})},getHiddenInputProps(){return t.input({"aria-hidden":!0,type:"text",tabIndex:-1,id:ta(o),readOnly:c,disabled:l,required:f,name:i("name"),form:i("form"),style:oy,maxLength:s("valueLength"),defaultValue:s("valueAsString")})},getControlProps(){return t.element({...Bs.control.attrs,dir:i("dir"),id:cb(o)})},getInputProps(b){const{index:$}=b,A=i("type")==="numeric"?"tel":"text";return t.input({...Bs.input.attrs,dir:i("dir"),disabled:l,"data-disabled":Re(l),"data-complete":Re(a),id:ab(o,$.toString()),"data-index":$,"data-ownedby":Kr(o),"aria-label":d?.inputLabel?.($,s("valueLength")),inputMode:i("otp")||i("type")==="numeric"?"numeric":"text","aria-invalid":Af(u),"data-invalid":Re(u),type:i("mask")?"password":A,defaultValue:r.get("value")[$]||"",readOnly:c,autoCapitalize:"none",autoComplete:i("otp")?"one-time-code":"off",placeholder:m===$?"":i("placeholder"),onBeforeInput(_){try{const P=Kv(_);gb(P,i("type"),i("pattern"))||(n({type:"VALUE.INVALID",value:P}),_.preventDefault()),P.length>2&&_.currentTarget.setSelectionRange(0,1,"forward")}catch{}},onChange(_){const P=Mf(_),{value:L}=_.currentTarget;if(P.inputType==="insertFromPaste"||L.length>2){n({type:"INPUT.PASTE",value:L}),_.currentTarget.value=L[0],_.preventDefault();return}if(P.inputType==="deleteContentBackward"){n({type:"INPUT.BACKSPACE"});return}n({type:"INPUT.CHANGE",value:L,index:$})},onKeyDown(_){if(_.defaultPrevented||Gv(_)||Xv(_))return;const L={Backspace(){n({type:"INPUT.BACKSPACE"})},Delete(){n({type:"INPUT.DELETE"})},ArrowLeft(){n({type:"INPUT.ARROW_LEFT"})},ArrowRight(){n({type:"INPUT.ARROW_RIGHT"})},Enter(){n({type:"INPUT.ENTER"})}}[ey(_,{dir:i("dir"),orientation:"horizontal"})];L&&(L(_),_.preventDefault())},onFocus(){n({type:"INPUT.FOCUS",index:$})},onBlur(_){const P=_.relatedTarget;Rf(P)&&P.dataset.ownedby===Kr(o)||n({type:"INPUT.BLUR",index:$})}})}}}var{choose:mb,createMachine:wb}=ky(),vb=wb({props({props:e}){return{placeholder:"○",otp:!1,type:"numeric",defaultValue:e.count?zs([],e.count):[],...e,translations:{inputLabel:(t,n)=>`pin code ${t+1} of ${n}`,...e.translations}}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({value:e("value"),defaultValue:e("defaultValue"),isEqual:eo,onChange(n){e("onValueChange")?.({value:n,valueAsString:n.join("")})}})),focusedIndex:t(()=>({sync:!0,defaultValue:-1})),count:t(()=>({defaultValue:e("count")}))}},computed:{_value:({context:e})=>zs(e.get("value"),e.get("count")),valueLength:({computed:e})=>e("_value").length,filledValueLength:({computed:e})=>e("_value").filter(t=>t?.trim()!=="").length,isValueComplete:({computed:e})=>e("valueLength")===e("filledValueLength"),valueAsString:({computed:e})=>e("_value").join(""),focusedValue:({computed:e,context:t})=>e("_value")[t.get("focusedIndex")]||""},entry:mb([{guard:"autoFocus",actions:["setInputCount","setFocusIndexToFirst"]},{actions:["setInputCount"]}]),watch({action:e,track:t,context:n,computed:r}){t([()=>n.get("focusedIndex")],()=>{e(["focusInput","selectInputIfNeeded"])}),t([()=>n.get("value").join(",")],()=>{e(["syncInputElements","dispatchInputEvent"])}),t([()=>r("isValueComplete")],()=>{e(["invokeOnComplete","blurFocusedInputIfNeeded"])})},on:{"VALUE.SET":[{guard:"hasIndex",actions:["setValueAtIndex"]},{actions:["setValue"]}],"VALUE.CLEAR":{actions:["clearValue","setFocusIndexToFirst"]}},states:{idle:{on:{"INPUT.FOCUS":{target:"focused",actions:["setFocusedIndex"]}}},focused:{on:{"INPUT.CHANGE":{actions:["setFocusedValue","syncInputValue","setNextFocusedIndex"]},"INPUT.PASTE":{actions:["setPastedValue","setLastValueFocusIndex"]},"INPUT.FOCUS":{actions:["setFocusedIndex"]},"INPUT.BLUR":{target:"idle",actions:["clearFocusedIndex"]},"INPUT.DELETE":{guard:"hasValue",actions:["clearFocusedValue"]},"INPUT.ARROW_LEFT":{actions:["setPrevFocusedIndex"]},"INPUT.ARROW_RIGHT":{actions:["setNextFocusedIndex"]},"INPUT.BACKSPACE":[{guard:"hasValue",actions:["clearFocusedValue"]},{actions:["setPrevFocusedIndex","clearFocusedValue"]}],"INPUT.ENTER":{guard:"isValueComplete",actions:["requestFormSubmit"]},"VALUE.INVALID":{actions:["invokeOnInvalid"]}}}},implementations:{guards:{autoFocus:({prop:e})=>!!e("autoFocus"),hasValue:({context:e})=>e.get("value")[e.get("focusedIndex")]!=="",isValueComplete:({computed:e})=>e("isValueComplete"),hasIndex:({event:e})=>e.index!==void 0},actions:{dispatchInputEvent({computed:e,scope:t}){const n=Pc(t);sy(n,{value:e("valueAsString")})},setInputCount({scope:e,context:t,prop:n}){if(n("count"))return;const r=Ri(e);t.set("count",r.length)},focusInput({context:e,scope:t}){const n=e.get("focusedIndex");n!==-1&&Pr(t,n)?.focus({preventScroll:!0})},selectInputIfNeeded({context:e,prop:t,scope:n}){const r=e.get("focusedIndex");!t("selectOnFocus")||r===-1||Hs(()=>{Pr(n,r)?.select()})},invokeOnComplete({computed:e,prop:t}){e("isValueComplete")&&t("onValueComplete")?.({value:e("_value"),valueAsString:e("valueAsString")})},invokeOnInvalid({context:e,event:t,prop:n}){n("onValueInvalid")?.({value:t.value,index:e.get("focusedIndex")})},clearFocusedIndex({context:e}){e.set("focusedIndex",-1)},setFocusedIndex({context:e,event:t}){e.set("focusedIndex",t.index)},setValue({context:e,event:t}){const n=zs(t.value,e.get("count"));e.set("value",n)},setFocusedValue({context:e,event:t,computed:n,flush:r}){const s=n("focusedValue"),i=e.get("focusedIndex"),o=Tc(s,t.value);r(()=>{e.set("value",_o(n("_value"),i,o))})},revertInputValue({context:e,computed:t,scope:n}){const r=Pr(n,e.get("focusedIndex"));Eo(r,t("focusedValue"))},syncInputValue({context:e,event:t,scope:n}){const r=e.get("value"),s=Pr(n,t.index);Eo(s,r[t.index])},syncInputElements({context:e,scope:t}){const n=Ri(t),r=e.get("value");n.forEach((s,i)=>{Eo(s,r[i])})},setPastedValue({context:e,event:t,computed:n,flush:r}){Hs(()=>{const s=n("valueAsString"),i=e.get("focusedIndex"),o=n("valueLength"),a=n("filledValueLength"),l=Math.min(i,a),c=l>0?s.substring(0,i):"",u=t.value.substring(0,o-l),f=zs(`${c}${u}`.split(""),o);r(()=>{e.set("value",f)})})},setValueAtIndex({context:e,event:t,computed:n}){const r=Tc(n("focusedValue"),t.value);e.set("value",_o(n("_value"),t.index,r))},clearValue({context:e}){const t=Array.from({length:e.get("count")}).fill("");queueMicrotask(()=>{e.set("value",t)})},clearFocusedValue({context:e,computed:t}){const n=e.get("focusedIndex");n!==-1&&e.set("value",_o(t("_value"),n,""))},setFocusIndexToFirst({context:e}){e.set("focusedIndex",0)},setNextFocusedIndex({context:e,computed:t}){e.set("focusedIndex",Math.min(e.get("focusedIndex")+1,t("valueLength")-1))},setPrevFocusedIndex({context:e}){e.set("focusedIndex",Math.max(e.get("focusedIndex")-1,0))},setLastValueFocusIndex({context:e,computed:t}){Hs(()=>{e.set("focusedIndex",Math.min(t("filledValueLength"),t("valueLength")-1))})},blurFocusedInputIfNeeded({context:e,prop:t,scope:n}){t("blurOnComplete")&&Hs(()=>{Pr(n,e.get("focusedIndex"))?.blur()})},requestFormSubmit({computed:e,prop:t,scope:n}){if(!t("name")||!e("isValueComplete"))return;Pc(n)?.form?.requestSubmit()}}}});function Tc(e,t){let n=t;e[0]===t[0]?n=t[1]:e[0]===t[1]&&(n=t[0]);const r=n.split("");return n=r[r.length-1],n??""}function zs(e,t){return Array.from({length:t}).fill("").map((n,r)=>e[r]||n)}jf()(["autoFocus","blurOnComplete","count","defaultValue","dir","disabled","form","getRootNode","id","ids","invalid","mask","name","onValueChange","onValueComplete","onValueInvalid","otp","pattern","placeholder","readOnly","required","selectOnFocus","translations","type","value"]);var yb=q('<div class="flex flex-col items-center"><div><input><input><input><input><input><input>');function bb(e){const t=Df(vb,{id:vu(),required:e.required||!0,autoComplete:e.autoComplete||"one-time-code",otp:e.otp||!0,onValueChange(s){e.onInput&&e.onInput(s.valueAsString)},onValueComplete(s){e.onComplete&&e.onComplete(s.valueAsString)}}),n=Me(()=>pb(t,qf)),r=()=>"w-10 h-12 sm:w-14 sm:h-14 rounded-lg border-2 "+(e.isError?"border-red-500 focus:border-red-600 focus:ring-red-400":"border-gray-300 focus:border-blue-500 focus:ring-blue-400")+" bg-gray-50 text-center text-xl font-semibold outline-none";return(()=>{var s=yb(),i=s.firstChild,o=i.firstChild,a=o.nextSibling,l=a.nextSibling,c=l.nextSibling,u=c.nextSibling,f=u.nextSibling;return ct(i,be(()=>n().getRootProps(),{class:"flex justify-center gap-1 sm:gap-3 my-6"}),!1,!0),ct(o,be({get required(){return e.required??!0}},()=>n().getInputProps({index:0}),{get class(){return r()}}),!1,!1),ct(a,be({get required(){return e.required??!0}},()=>n().getInputProps({index:1}),{get class(){return r()}}),!1,!1),ct(l,be({get required(){return e.required??!0}},()=>n().getInputProps({index:2}),{get class(){return r()}}),!1,!1),ct(c,be({get required(){return e.required??!0}},()=>n().getInputProps({index:3}),{get class(){return r()}}),!1,!1),ct(u,be({get required(){return e.required??!0}},()=>n().getInputProps({index:4}),{get class(){return r()}}),!1,!1),ct(f,be({get required(){return e.required??!0}},()=>n().getInputProps({index:5}),{get class(){return r()}}),!1,!1),s})()}var xb=q('<div class=text-center><p class="text-gray-500 text-sm sm:text-base">Enter the verification code sent to your email.'),_b=q('<div class="flex items-center">Verifying...'),kb=q('<button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center">'),Mc=q('<div class="flex items-center">Sending...'),Sb=q(`<div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Didn't get a code? <button type=button class="text-indigo-600 hover:underline font-semibold bg-transparent border-none p-0 m-0 cursor-pointer inline-flex items-center">`),$b=q('<p class=" text-red-600 text-xs sm:text-sm">'),Cb=q('<p class="pt-2 sm:pt-3 px-2 text-green-600 text-xs sm:text-sm">Email verified! Ready to sign in...'),Eb=q('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-12"><form aria-labelledby=verifyemail-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-4 sm:p-12 space-y-2 border border-gray-100 relative"autocomplete=off><div class=text-center><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=verifyemail-heading>Verify Your Email'),Ab=q('<div class="mb-6 sm:mb-8 text-center"><p class="text-gray-500 text-xs sm:text-sm">Send a code to verify your email.'),Rb=q('<button class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"type=button>');function Pb(){const[e,t]=K(""),[n,r]=K(!1),[s,i]=K(""),[o,a]=K(!1),[l,c]=K(!1),[u,f]=K(!1),d=rn(),[m,w]=Qh(),{verifyEmail:b,sendEmailVerification:$,getPendingEmail:A}=kr();da(()=>{A()||d("/signin",{replace:!0})});async function _(L,O){L?.preventDefault&&L.preventDefault(),i(""),a(!0);try{const R=O??e();await b(R),await new Promise(M=>setTimeout(M,200)),c(!0),d("/signin",{replace:!0}),a(!1)}catch(R){console.error("Verify email error:",R),a(!1),i("Invalid code. Please try again.")}}async function P({resend:L=!1}){i(""),L?f(!0):a(!0);try{await $(),await new Promise(O=>setTimeout(O,L?1e3:200)),a(!1),f(!1),w({codeSent:"true"}),r(!0)}catch(O){console.error("Send verification code error:",O),a(!1),f(!1),i("Error sending code. Please try again later.")}}return je(async()=>{if(m.codeSent==="true"&&(r(!0),m.code))try{await b(m.code),c(!0),d("/signin",{replace:!0}),a(!1)}catch(L){console.error("Verify email error with URL code:",L),a(!1),i("Invalid or expired link.")}}),je(()=>{e(),i("")}),(()=>{var L=Eb(),O=L.firstChild;return O.firstChild,O.addEventListener("submit",_),C(O,S(_e,{get when(){return n()},get fallback(){return[Ab(),(()=>{var R=Rb();return R.$$click=P,C(R,S(Ft,{get when(){return o()},fallback:"Send Code",get children(){var M=Mc(),g=M.firstChild;return C(M,S(Qr,{class:"animate-spin mr-2",size:22}),g),M}})),ce(()=>R.disabled=o()),R})()]},get children(){return[xb(),S(bb,{otp:!0,required:!0,autocomplete:!0,onInput:t,get isError(){return!!s()},onComplete:R=>_(void 0,R)}),(()=>{var R=kb();return C(R,S(Ft,{get when(){return o()},fallback:"Verify Email",get children(){var M=_b(),g=M.firstChild;return C(M,S(Qr,{class:"animate-spin mr-2",size:22}),g),M}})),ce(()=>R.disabled=o()),R})(),(()=>{var R=Sb(),M=R.firstChild,g=M.nextSibling;return g.$$click=()=>P({resend:!0}),C(g,S(_e,{get when(){return u()},fallback:"Resend",get children(){var p=Mc();return p.firstChild,C(p,S(Qr,{class:"animate-spin mr-1",size:16}),null),p}})),ce(p=>{var x=u(),y=u();return x!==p.e&&(g.disabled=p.e=x),y!==p.t&&pt(g,"aria-disabled",p.t=y),p},{e:void 0,t:void 0}),R})()]}}),null),C(O,S(Ft,{get when(){return!!s()},class:"absolute left-10 right-0 bottom-2 sm:bottom-6",get children(){var R=$b();return C(R,s),R}}),null),C(O,S(Ft,{get when(){return l()},class:"absolute left-10 right-0 bottom-2 sm:bottom-6",get children(){return Cb()}}),null),L})()}ze(["click"]);var Tb=q("<div>Reset Password Page");function Mb(){return Tb()}var Lb=q('<div tabindex=0 role=button><span class=truncate></span><button class="flex items-center justify-center w-6 h-6 rounded hover:bg-gray-200 transition-colors"tabindex=0 type=button><svg fill=none stroke=currentColor stroke-width=2.2 viewBox="0 0 20 20"><polyline points="6 8 10 12 14 8"fill=none stroke-linecap=round stroke-linejoin=round>'),Nb=q("<div class=overflow-y-scroll>");function Ob(e){const[t,n]=K({}),{projects:r,currentProject:s}=zt(),i=()=>r().find(l=>l.id===e.projectId),o=()=>i()&&t()[i().id],a=l=>{l.stopPropagation(),n(c=>({...c,[i().id]:!c[i().id]}))};return[(()=>{var l=Lb(),c=l.firstChild,u=c.nextSibling,f=u.firstChild;return l.$$keydown=d=>{(d.key==="Enter"||d.key===" ")&&(e.onSelect?.({project:i()}),d.preventDefault())},l.$$click=()=>e.onSelect?.({project:i()}),C(c,()=>i().name||i().id),u.$$click=a,ce(d=>{var m=`
    flex items-center justify-between cursor-pointer select-none rounded-md transition-colors
    px-2 py-1 font-medium text-xs text-gray-800 hover:bg-gray-100 ${s()?.id===i()?.id?"bg-gray-200":"bg-white"}
  `,w=o()?"Collapse project":"Expand project",b=`transition-transform duration-200 w-5 h-5 text-gray-500 ${o()?"rotate-90":""}`;return m!==d.e&&Be(l,d.e=m),w!==d.t&&pt(u,"aria-label",d.t=w),b!==d.a&&pt(f,"class",d.a=b),d},{e:void 0,t:void 0,a:void 0}),l})(),S(_e,{get when(){return(i().reviews||[]).some(l=>(l.checklists||[]).length>0)},get children(){var l=Nb();return Yr(l,"transition","max-height 0.25s ease-in-out, opacity 0.25s ease-in-out"),C(l,S(it,{get each(){return i().reviews||[]},children:c=>S(it,{get each(){return c.checklists||[]},children:u=>e.children(u,c)})})),ce(c=>{var u=o()?"600px":"0",f=o()?1:0;return u!==c.e&&Yr(l,"max-height",c.e=u),f!==c.t&&Yr(l,"opacity",c.t=f),c},{e:void 0,t:void 0}),l}})]}ze(["click","keydown"]);var jb=q('<ul class="list-disc space-y-1 text-xs">'),Db=q('<div style=max-width:100vw><div><div class="flex-1 overflow-y-auto sidebar-scrollbar space-y-6"><div class="mb-2 px-2 pt-4"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Projects</h3></div><div class="p-2 pb-0 space-y-1 border-t border-gray-100"></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Checklists</h3></div><div class="border-t border-gray-100 pt-1 mx-2"></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Actions</h3></div><div class="border-t border-gray-100 pt-1 space-y-1 mx-2"><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Export CSV</button><label class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-gray-700 hover:bg-gray-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>Import CSV<input type=file accept=.csv,text/csv class=hidden></label><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-blue-700 hover:bg-blue-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-blue-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 10l4.553-2.276A2 2 0 0020 6.382V5a2 2 0 00-2-2H6a2 2 0 00-2 2v1.382a2 2 0 00.447 1.342L9 10m6 0v10m-6-10v10"></path></svg>Set PDF URL</button><label class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-blue-700 hover:bg-blue-50 flex items-center gap-2 text-xs cursor-pointer"><svg class="w-4 h-4 text-blue-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 10l4.553-2.276A2 2 0 0020 6.382V5a2 2 0 00-2-2H6a2 2 0 00-2 2v1.382a2 2 0 00.447 1.342L9 10m6 0v10m-6-10v10"></path></svg>Set PDF File<input type=file accept=application/pdf class=hidden></label></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Settings</h3></div><div class="border-t border-gray-100 pt-1 space-y-1 mx-2"><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-red-600 hover:bg-red-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-red-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>Clear all data</button><div class=mt-10>'),qb=q('<div class="text-center py-2 px-2"><div class="w-8 h-8 bg-gray-100 rounded-lg mx-auto mb-2 flex items-center justify-center"><svg class="w-4 h-4 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-xs text-gray-500 font-medium">No projects yet'),Fb=q('<div class="text-center py-2 px-2"><div class="w-8 h-8 bg-gray-100 rounded-lg mx-auto mb-2 flex items-center justify-center"><svg class="w-4 h-4 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-xs text-gray-500 font-medium">No checklists yet'),Ib=q('<div style=flex:1><button class="flex-1 flex items-center gap-2 px-2 py-1.5 text-left focus:outline-none"tabindex=0><svg class="w-4 h-4 text-gray-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><div class="flex-1 min-w-0"><div class="flex gap-2 items-center"><div class="text-xs font-medium truncate"></div><span></span></div><div class="text-2xs text-gray-500 mt-0.5"></div></div></button><button aria-label="Delete checklist"tabindex=-1><svg class="w-4 h-4"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),Vb=q('<span class="inline-block w-2 h-2 rounded-full"style=background:currentColor>');function Ub(e){const{projects:t,checklists:n,getChecklist:r}=zt(),[s,i]=K(null),o=rn(),a=Wi();je(()=>{if(a.name&&a.index!==void 0){const u=decodeURIComponent(a.name),f=Number(a.index);i(r({name:u,index:f}))}});function l(){const u=window.prompt("Enter PDF URL:");u&&e.setPdfUrl(u)}function c(u){const f=u.target.files[0];if(f&&f.type==="application/pdf"){const d=URL.createObjectURL(f);e.setPdfUrl(d)}else alert("Please select a valid PDF file.")}return(()=>{var u=Db(),f=u.firstChild,d=f.firstChild,m=d.firstChild,w=m.nextSibling,b=w.nextSibling,$=b.nextSibling,A=$.nextSibling,_=A.nextSibling,P=_.firstChild,L=P.nextSibling,O=L.firstChild,R=O.nextSibling,M=R.nextSibling,g=L.nextSibling,p=g.nextSibling,x=p.firstChild,y=x.nextSibling,E=y.nextSibling,V=_.nextSibling,H=V.nextSibling,G=H.firstChild;return C(w,S(_e,{get when(){return t()?.length>0},get fallback(){return qb()},get children(){return S(it,{get each(){return t()},children:te=>S(Ob,{get projectId(){return te.id},onSelect:()=>{o(`/projects/${Ht(te.name)}-${te.id}`)},children:(B,F)=>S(Lc,{project:te,get isSelected(){return s()?.id===B.id},checklist:B,onDelete:()=>e.onDeleteChecklist(te.id,F.id,B.id)})})})}})),C($,S(_e,{get when(){return n()?.length>0},get fallback(){return Fb()},get children(){var te=jb();return C(te,S(it,{get each(){return n()},children:B=>S(Lc,{project:null,checklist:B,onDelete:()=>e.onDeleteChecklist(null,B.id)})})),te}})),Mt(P,"click",e.onExportCSV,!0),Mt(M,"change",e.onImportCSV),g.$$click=l,E.addEventListener("change",c),Mt(G,"click",e.onDeleteAll,!0),ce(te=>{var B=`
        transition-all duration-200 ease-in-out
        bg-white border-r border-gray-200 h-screen overflow-x-hidden
        ${e.open?"w-64":"w-0"}
        md:relative
        ${e.open?"":"md:w-0"}
        fixed top-0 left-0 z-30 md:static md:z-auto
        ${e.open?"translate-x-0":"-translate-x-full md:translate-x-0"}
      `,F=`
          flex flex-col h-full
          transition-opacity duration-100
          ${e.open?"duration-500 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}
        `;return B!==te.e&&Be(u,te.e=B),F!==te.t&&Be(f,te.t=F),te},{e:void 0,t:void 0}),u})()}function Lc(e){const t=rn();function n(){const r=Ht(e.checklist.name);if(!e.project){t(`/checklist/${r}-${e.checklist.id}`);return}const s=Ht(e.project.name),i=(e.project.reviews||[]).find(a=>(a.checklists||[]).some(l=>l.id===e.checklist.id));if(!i){console.error("Review not found for checklist",e.checklist);return}const o=Ht(i.name);t(`/projects/${s}-${e.project.id}/reviews/${o}-${i.id}/checklists/${r}-${e.checklist.id}`)}return(()=>{var r=Ib(),s=r.firstChild,i=s.firstChild,o=i.nextSibling,a=o.firstChild,l=a.firstChild,c=l.nextSibling,u=a.nextSibling,f=s.nextSibling;return s.$$click=()=>n(),C(l,()=>e.checklist.name),C(c,S(_e,{get when(){return e.checklist},fallback:"Unknown",children:()=>{const d=Jl(e.checklist);return d.length+(e.checklist.name?.length||0)<30?d:Vb()}})),C(u,()=>new Date(e.checklist.createdAt).toLocaleDateString()),f.$$click=d=>{d.stopPropagation(),e.onDelete(null,e.checklist.id)},ce(d=>{var m=`
            flex items-center group rounded transition-colors
            ${e.isSelected?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}
          `,w=`
                    text-3xs font-medium px-1.5 py-0.5 rounded
                    ${(()=>{const $=Jl(e.checklist);return $==="High"?"bg-green-100 text-green-800":$==="Moderate"?"bg-yellow-100 text-yellow-800":$==="Low"?"bg-orange-100 text-orange-800":$==="Critically Low"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"})()}
                  `,b=`p-1.5 mr-1 rounded transition-colors text-gray-400 hover:text-red-600 hover:bg-red-50
                  ${e.isSelected?"opacity-0 group-hover:opacity-100":""}
                `;return m!==d.e&&Be(r,d.e=m),w!==d.t&&Be(c,d.t=w),b!==d.a&&Be(f,d.a=b),d},{e:void 0,t:void 0,a:void 0}),r})()}ze(["click"]);var Hb=q('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"><div class="bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 mx-2 animate-fade-in"><div class=mb-4><h2 class="text-lg font-semibold text-gray-900"></h2></div><div class="flex justify-end gap-2 mt-6"><button class="px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"autofocus>Cancel</button><button class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors">'),Bb=q('<p class="mt-2 text-gray-600">');function Nc(e){return S(_e,{get when(){return e.open},get children(){return S(bu,{get children(){var t=Hb(),n=t.firstChild,r=n.firstChild,s=r.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling;return C(s,()=>e.title||"Are you sure?"),C(r,(()=>{var l=nt(()=>!!e.description);return()=>l()&&(()=>{var c=Bb();return C(c,()=>e.description),c})()})(),null),Mt(o,"click",e.onCancel,!0),Mt(a,"click",e.onConfirm,!0),C(a,()=>e.confirmText||"Delete"),t}})}})}ze(["click"]);var zb=q('<div><div class="w-full h-full overflow-auto"></div><div role=separator tabindex=0 style=touch-action:none>');function Wb(e){const t=e.direction||"horizontal",n=t==="horizontal"?"right":"bottom",r=e.position||n,s=e.min??200,i=e.max??800,o=e.initial??400,[a,l]=K(o);let c=!1,u=0,f=0,d=null;const m=A=>{c=!0,d=A.pointerId,u=t==="horizontal"?A.clientX:A.clientY,f=a(),document.body.style.userSelect="none",A.target.setPointerCapture(d),window.addEventListener("pointermove",w),window.addEventListener("pointerup",b)},w=A=>{if(!c)return;let _=t==="horizontal"?A.clientX-u:A.clientY-u;(r==="left"||r==="top")&&(_=-_);let P=f+_;P=Math.max(s,Math.min(i,P)),l(P)},b=A=>{if(c=!1,document.body.style.userSelect="",A.target.releasePointerCapture&&d!==null)try{A.target.releasePointerCapture(d)}catch{}window.removeEventListener("pointermove",w),window.removeEventListener("pointerup",b),d=null};let $="";return t==="horizontal"?$=r==="right"?"top-0 right-0 h-full w-2 cursor-col-resize":"top-0 left-0 h-full w-2 cursor-col-resize":$=r==="bottom"?"left-0 bottom-0 w-full h-2 cursor-row-resize":"left-0 top-0 w-full h-2 cursor-row-resize",(()=>{var A=zb(),_=A.firstChild,P=_.nextSibling;return Be(A,`relative ${t==="horizontal"?"h-full":"w-full"}`),C(_,()=>e.children),P.$$pointerdown=m,Be(P,`absolute ${$} bg-gray-200 hover:bg-gray-300 transition-colors z-10`),pt(P,"aria-orientation",t),ce(L=>zi(A,t==="horizontal"?`width: ${a()}px; min-width:0;`:`height: ${a()}px; min-height:0;`,L)),A})()}ze(["pointerdown"]);var Yb=q('<button class="ml-[-6px] bg-white/80 text-blue-700 p-1.5 rounded-full shadow hover:bg-white transition-all duration-200 border border-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-400"aria-label="Toggle sidebar open or closed">'),Oc=q("<span class=font-medium>Hello, "),jc=q('<button class="hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium">Sign Out'),Qb=q('<nav class="flex items-center justify-between bg-gradient-to-r from-blue-700 to-blue-500 text-white px-4 py-2 shadow-lg"><div class="flex items-center space-x-3"></div><div class="flex space-x-4 items-center text-2xs sm:text-xs">'),Kb=q('<svg fill=none stroke=currentColor class="w-4 h-4"viewBox="0 0 20 20"><path d="M3.5 3C3.77614 3 4 3.22386 4 3.5V16.5L3.99023 16.6006C3.94371 16.8286 3.74171 17 3.5 17C3.25829 17 3.05629 16.8286 3.00977 16.6006L3 16.5V3.5C3 3.22386 3.22386 3 3.5 3ZM11.2471 5.06836C11.4476 4.95058 11.7104 4.98547 11.8721 5.16504C12.0338 5.34471 12.0407 5.60979 11.9023 5.79688L11.835 5.87207L7.80371 9.5H16.5C16.7761 9.5 17 9.72386 17 10C17 10.2761 16.7761 10.5 16.5 10.5H7.80371L11.835 14.1279C12.0402 14.3127 12.0568 14.6297 11.8721 14.835C11.6873 15.0402 11.3703 15.0568 11.165 14.8721L6.16504 10.3721L6.09473 10.2939C6.03333 10.2093 6 10.1063 6 10C6 9.85828 6.05972 9.72275 6.16504 9.62793L11.165 5.12793L11.2471 5.06836Z">');function Dc(e){return e.endsWith("/")?e.slice(0,-1):e}function Gb(e){const{user:t,signout:n,authLoading:r}=kr(),s=xa(),i=()=>Dc(s.pathname)===Dc(Ad),o=localStorage.getItem("userName"),a=!!o;return je(()=>{t()?localStorage.setItem("userName",t().name):localStorage.removeItem("userName")}),(()=>{var l=Qb(),c=l.firstChild,u=c.nextSibling;return C(c,S(_e,{get when(){return!i()},get children(){var f=Yb();return Mt(f,"click",e.toggleSidebar,!0),C(f,S(_e,{get when(){return!e.open},get fallback(){return Kb()},get children(){return S(Hy,{})}})),f}}),null),C(c,S(ir,{href:"/",class:"font-extrabold text-base sm:text-lg tracking-tight drop-shadow",children:"CoRATES"}),null),C(u,S(ir,{href:"/dashboard",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Dashboard"}),null),C(u,S(_e,{get when(){return t()},get fallback(){return nt(()=>!!(a&&r()))()?[(()=>{var f=Oc();return f.firstChild,C(f,o,null),f})(),jc()]:[S(ir,{href:"/signin",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Sign In"}),S(ir,{href:"/signup",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Sign Up"})]},get children(){return[(()=>{var f=Oc();return f.firstChild,C(f,()=>t().name,null),f})(),(()=>{var f=jc();return f.$$click=async()=>{await n()},f})()]}}),null),l})()}ze(["click"]);var Jb=q('<div class="flex-1 min-h-0 overflow-y-auto">'),Xb=q('<div class="h-full border-l border-gray-200 bg-white flex flex-col"><iframe class="w-full h-full"title="PDF Viewer"style=min-width:300px>'),Zb=q('<div class="flex flex-col h-screen overflow-y-hidden"><div class="flex flex-1 min-h-0">');function ex(e){const[t,n]=K(!1),[r,s]=K(!1),[i,o]=K(!1),[a,l]=K(null),[c,u]=K(null),{authLoading:f}=kr(),{dataLoading:d,deleteChecklist:m,setCurrentChecklist:w,getChecklist:b}=zt(),$=async()=>{try{w(null),alert("All checklists deleted!")}catch(R){console.error("Error removing all checklists:",R),alert("Error deleting checklists!")}finally{s(!1)}},A=()=>{let R="this checklist";const M=a();let g=b(M.checklistId);return g&&(R=g.name||g.title||"Untitled Checklist"),`Are you sure you want to delete ${R}? This action cannot be undone.`},_=()=>s(!1),P=(R,M)=>{console.log("Request to delete checklist id:",M,"from project:",R),l({projectId:R,checklistId:M}),o(!0)},L=async()=>{const R=a();if(!(!R||!R.checklistId))try{console.log("Deleting checklist id:",R.checklistId,"from project:",R.projectId),await m(R.projectId,R.checklistId)}catch(M){console.error("Error deleting checklist:",M),alert("Error deleting checklist!")}finally{o(!1),l(null)}},O=()=>{o(!1),l(null)};return(()=>{var R=Zb(),M=R.firstChild;return C(R,S(Gb,{toggleSidebar:()=>n(g=>!g),get open(){return t()}}),M),C(M,S(Ub,{get open(){return t()},onClose:()=>n(!1),setPdfUrl:u,onDeleteChecklist:P}),null),C(M,S(Ft,{class:"flex flex-1",get when(){return nt(()=>!d())()&&!f()},get children(){var g=Jb();return C(g,()=>e.children),g}}),null),C(M,S(_e,{get when(){return c()},get children(){return S(Wb,{direction:"horizontal",min:250,max:1600,initial:500,position:"left",get children(){var g=Xb(),p=g.firstChild;return ce(()=>pt(p,"src",c())),g}})}}),null),C(R,S(Nc,{get open(){return i()},title:"Delete checklist?",get description(){return A()},confirmText:"Delete",onCancel:O,onConfirm:L}),null),C(R,S(Nc,{get open(){return r()},title:"Delete all checklists?",description:"Are you sure you want to delete all saved checklists? This action cannot be undone.",confirmText:"Delete all",onCancel:_,onConfirm:$}),null),R})()}var tx=q("<h1>404 - Not Found");function nx(){return tx()}var rx=q("<h1>You are offline, you must be online to access this page.");function sx(){return rx()}var ix=q('<div class="max-w-5xl mx-auto p-6"><h2 class="text-xl font-bold mb-4">Merge AMSTAR2 Checklists</h2><div class="grid grid-cols-3 gap-4 font-mono text-xs"><div class="font-bold text-center">Checklist A</div><div class="font-bold text-center">Checklist B</div><div class="font-bold text-center">Merged Result</div></div><button class="mt-6 px-4 py-2 bg-blue-600 text-white rounded">Save Merged Checklist'),qc=q('<button class="mt-1 text-blue-600 underline">Use this'),ox=q('<div class=contents><div><pre></pre></div><div><pre></pre></div><div class="p-2 border bg-green-50"><pre>');function ax(){const e=Wi(),{getChecklist:t}=zt();console.log("Route params:",decodeURIComponent(e.nameA),e.indexA,decodeURIComponent(e.nameB),e.indexB);const n=t(decodeURIComponent(e.nameA),e.indexA),r=t(decodeURIComponent(e.nameB),e.indexB);console.log("Merging checklists:",n,r);const[s,i]=K({...n}),o=["q1","q2","q3","q4","q5","q6","q7","q8","q9a","q9b","q10","q11a","q11b","q12","q13","q14","q15","q16"];function a(u){const f=n[u]?.answers,d=r[u]?.answers;return JSON.stringify(f)!==JSON.stringify(d)}function l(u,f){i(d=>({...d,[f]:u==="A"?{...n[f]}:{...r[f]}}))}function c(){alert("not implemented")}return(()=>{var u=ix(),f=u.firstChild,d=f.nextSibling,m=d.firstChild,w=m.nextSibling;w.nextSibling;var b=d.nextSibling;return C(d,S(it,{each:o,children:$=>(()=>{var A=ox(),_=A.firstChild,P=_.firstChild,L=_.nextSibling,O=L.firstChild,R=L.nextSibling,M=R.firstChild;return C(P,()=>JSON.stringify(n[$]?.answers,null,1)),C(_,S(_e,{get when(){return a($)},get children(){var g=qc();return g.$$click=()=>l("A",$),g}}),null),C(O,()=>JSON.stringify(r[$]?.answers,null,1)),C(L,S(_e,{get when(){return a($)},get children(){var g=qc();return g.$$click=()=>l("B",$),g}}),null),C(M,()=>JSON.stringify(s()[$]?.answers,null,1)),ce(g=>{var p=`p-2 border ${a($)?"bg-yellow-100":""}`,x=`p-2 border ${a($)?"bg-yellow-100":""}`;return p!==g.e&&Be(_,g.e=p),x!==g.t&&Be(L,g.t=x),g},{e:void 0,t:void 0}),A})()}),null),b.$$click=c,u})()}ze(["click"]);async function lx(e,t){const n=e.getReader();let r;for(;!(r=await n.read()).done;)t(r.value)}function cx(e){let t,n,r,s=!1;return function(o){t===void 0?(t=o,n=0,r=-1):t=fx(t,o);const a=t.length;let l=0;for(;n<a;){s&&(t[n]===10&&(l=++n),s=!1);let c=-1;for(;n<a&&c===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-l);break;case 13:s=!0;case 10:c=n;break}if(c===-1)break;e(t.subarray(l,c),r),l=n,r=-1}l===a?t=void 0:l!==0&&(t=t.subarray(l),n-=l)}}function ux(e,t,n){let r=Fc();const s=new TextDecoder;return function(o,a){if(o.length===0)n?.(r),r=Fc();else if(a>0){const l=s.decode(o.subarray(0,a)),c=a+(o[a+1]===32?2:1),u=s.decode(o.subarray(c));switch(l){case"data":r.data=r.data?r.data+`
`+u:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":const f=parseInt(u,10);isNaN(f)||t(r.retry=f);break}}}}function fx(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Fc(){return{data:"",event:"",id:"",retry:void 0}}var dx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const na="text/event-stream",hx=1e3,Ic="last-event-id";function gx(e,t){var{signal:n,headers:r,onopen:s,onmessage:i,onclose:o,onerror:a,openWhenHidden:l,fetch:c}=t,u=dx(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((f,d)=>{const m=Object.assign({},r);m.accept||(m.accept=na);let w;function b(){w.abort(),document.hidden||O()}l||document.addEventListener("visibilitychange",b);let $=hx,A=0;function _(){document.removeEventListener("visibilitychange",b),window.clearTimeout(A),w.abort()}n?.addEventListener("abort",()=>{_(),f()});const P=c??window.fetch,L=s??px;async function O(){var R;w=new AbortController;try{const M=await P(e,Object.assign(Object.assign({},u),{headers:m,signal:w.signal}));await L(M),await lx(M.body,cx(ux(g=>{g?m[Ic]=g:delete m[Ic]},g=>{$=g},i))),o?.(),_(),f()}catch(M){if(!w.signal.aborted)try{const g=(R=a?.(M))!==null&&R!==void 0?R:$;window.clearTimeout(A),A=window.setTimeout(O,g)}catch(g){_(),d(g)}}}O()})}function px(e){const t=e.headers.get("content-type");if(!t?.startsWith(na))throw new Error(`Expected content-type to be ${na}, Actual: ${t}`)}var mx=Object.defineProperty,wx=Object.defineProperties,vx=Object.getOwnPropertyDescriptors,Pi=Object.getOwnPropertySymbols,If=Object.prototype.hasOwnProperty,Vf=Object.prototype.propertyIsEnumerable,Uf=e=>{throw TypeError(e)},Vc=(e,t,n)=>t in e?mx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ct=(e,t)=>{for(var n in t||(t={}))If.call(t,n)&&Vc(e,n,t[n]);if(Pi)for(var n of Pi(t))Vf.call(t,n)&&Vc(e,n,t[n]);return e},Da=(e,t)=>wx(e,vx(t)),yx=(e,t)=>{var n={};for(var r in e)If.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Pi)for(var r of Pi(e))t.indexOf(r)<0&&Vf.call(e,r)&&(n[r]=e[r]);return n},qa=(e,t,n)=>t.has(e)||Uf("Cannot "+n),D=(e,t,n)=>(qa(e,t,"read from private field"),n?n.call(e):t.get(e)),de=(e,t,n)=>t.has(e)?Uf("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),X=(e,t,n,r)=>(qa(e,t,"write to private field"),t.set(e,n),n),ue=(e,t,n)=>(qa(e,t,"access private method"),n),Uc=(e,t,n,r)=>({set _(s){X(e,t,s)},get _(){return D(e,t,r)}}),Ce=(e,t,n)=>new Promise((r,s)=>{var i=l=>{try{a(n.next(l))}catch(c){s(c)}},o=l=>{try{a(n.throw(l))}catch(c){s(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,o);a((n=n.apply(e,t)).next())}),Yn=class Hf extends Error{constructor(t,n,r,s,i,o){super(o||`HTTP Error ${t} at ${i}: ${n??JSON.stringify(r)}`),this.url=i,this.name="FetchError",this.status=t,this.text=n,this.json=r,this.headers=s}static fromResponse(t,n){return Ce(this,null,function*(){const r=t.status,s=Object.fromEntries([...t.headers.entries()]);let i,o;const a=t.headers.get("content-type");return t.bodyUsed||(a&&a.includes("application/json")?o=yield t.json():i=yield t.text()),new Hf(r,i,o,s,n)})}},Ti=class extends Error{constructor(){super("Fetch with backoff aborted"),this.name="FetchBackoffAbortError"}},bx=class extends Error{constructor(){super("Invalid shape options: missing required url parameter"),this.name="MissingShapeUrlError"}},xx=class extends Error{constructor(){super("Invalid signal option. It must be an instance of AbortSignal."),this.name="InvalidSignalError"}},_x=class extends Error{constructor(){super("shapeHandle is required if this isn't an initial fetch (i.e. offset > -1)"),this.name="MissingShapeHandleError"}},kx=class extends Error{constructor(e){super(`Cannot use reserved Electric parameter names in custom params: ${e.join(", ")}`),this.name="ReservedParamError"}},Sx=class extends Error{constructor(e){super(`Column "${e??"unknown"}" does not allow NULL values`),this.name="ParserNullValueError"}},$x=class extends Error{constructor(e,t){let n=`The response for the shape request to ${e} didn't include the following required headers:
`;t.forEach(r=>{n+=`- ${r}
`}),n+=`
This is often due to a proxy not setting CORS correctly so that all Electric headers can be read by the client.`,n+=`
For more information visit the troubleshooting guide: /docs/guides/troubleshooting/missing-headers`,super(n)}},Ws=e=>Number(e),Cx=e=>e==="true"||e==="t",Ex=e=>BigInt(e),Hc=e=>JSON.parse(e),Ax=e=>e,Rx={int2:Ws,int4:Ws,int8:Ex,bool:Cx,float4:Ws,float8:Ws,json:Hc,jsonb:Hc};function Px(e,t){let n=0,r=null,s="",i=!1,o=0,a;function l(u,f,d){let m=u.slice(f,d);return m=m==="NULL"?null:m,t?t(m):m}function c(u){const f=[];for(;n<u.length;n++){if(r=u[n],i)r==="\\"?s+=u[++n]:r==='"'?(f.push(t?t(s):s),s="",i=u[n+1]==='"',o=n+2):s+=r;else if(r==='"')i=!0;else if(r==="{")o=++n,f.push(c(u));else if(r==="}"){i=!1,o<n&&f.push(l(u,o,n)),o=n+1;break}else r===","&&a!=="}"&&a!=='"'&&(f.push(l(u,o,n)),o=n+1);a=r}return o<n&&f.push(f.push(l(u,o,n+1))),f}return c(e)[0]}var Tx=class{constructor(e,t){this.parser=Ct(Ct({},Rx),e),this.transformer=t}parse(e,t){return JSON.parse(e,(n,r)=>{if((n==="value"||n==="old_value")&&typeof r=="object"&&r!==null){const s=r;Object.keys(s).forEach(i=>{s[i]=this.parseRow(i,s[i],t)}),this.transformer&&(r=this.transformer(r))}return r})}parseRow(e,t,n){var r;const s=n[e];if(!s)return t;const i=s,{type:o,dims:a}=i,l=yx(i,["type","dims"]),c=(r=this.parser[o])!=null?r:Ax,u=Bc(c,s,e);return a&&a>0?Bc((d,m)=>Px(d,u),s,e)(t):u(t,l)}};function Bc(e,t,n){var r;const s=!((r=t.not_null)!=null&&r);return i=>{if(i===null){if(!s)throw new Sx(n??"unknown");return null}return e(i,t)}}function Fa(e){return"key"in e}function Bf(e){return!Fa(e)}function zf(e){return Bf(e)&&e.headers.control==="up-to-date"}function Mx(e){const t=e.headers.global_last_seen_lsn;if(t)return`${t}_0`}function Lx(e,t){const n=BigInt(e),r=BigInt(t.xmin),s=BigInt(t.xmax),i=t.xip_list.map(BigInt);return n<r||n<s&&!i.includes(n)}var Nx="electric-cursor",Ia="electric-handle",Wf="electric-offset",Ox="electric-schema",jx="electric-up-to-date",Dx="columns",Va="cursor",Yf="expired_handle",no="handle",Bn="live",ro="offset",qx="table",Fx="where",Ix="replica",Vx="params",Ux="experimental_live_sse",Qf="force-disconnect-and-refresh",Kf="pause-stream",Gf="log",Ua="subset__where",Ha="subset__limit",Ba="subset__offset",za="subset__order_by",Wa="subset__params",Hx=[Bn,no,ro,Va,Yf,Gf,Ua,Ha,Ba,za,Wa],Bx=[429],Jf={initialDelay:100,maxDelay:1e4,multiplier:1.3};function zx(e,t=Jf){const{initialDelay:n,maxDelay:r,multiplier:s,debug:i=!1,onFailedAttempt:o}=t;return(...a)=>Ce(this,null,function*(){var l;const c=a[0],u=a[1];let f=n,d=0;for(;;)try{const m=yield e(...a);if(m.ok)return m;throw yield Yn.fromResponse(m,c.toString())}catch(m){if(o?.(),(l=u?.signal)!=null&&l.aborted)throw new Ti;if(m instanceof Yn&&!Bx.includes(m.status)&&m.status>=400&&m.status<500)throw m;yield new Promise(w=>setTimeout(w,f)),f=Math.min(f*s,r),i&&(d++,console.log(`Retry attempt #${d} after ${f}ms`))}})}var Wx=[201,204,205];function Yx(e){return(...t)=>Ce(this,null,function*(){const n=t[0],r=yield e(...t);try{if(r.status<200||Wx.includes(r.status))return r;const s=yield r.text();return new Response(s,r)}catch(s){throw new Yn(r.status,void 0,void 0,Object.fromEntries([...r.headers.entries()]),n.toString(),s instanceof Error?s.message:typeof s=="string"?s:"failed to read body")}})}var Qx={maxChunksToPrefetch:2};function Kx(e,t=Qx){const{maxChunksToPrefetch:n}=t;let r;return(...i)=>Ce(this,null,function*(){const o=i[0].toString(),a=r?.consume(...i);if(a)return a;r?.abort();const l=yield e(...i),c=Ya(o,l);return c&&(r=new e2({fetchClient:e,maxPrefetchedRequests:n,url:c,requestInit:i[1]})),l})}var Gx=["electric-offset","electric-handle"],Jx=["electric-cursor"],Xx=["electric-schema"];function Zx(e){return(...t)=>Ce(this,null,function*(){const n=yield e(...t);if(n.ok){const r=n.headers,s=[],i=u=>s.push(...u.filter(f=>!r.has(f))),a=t[0].toString(),l=new URL(a);if([Ua,Wa,Ha,Ba,za].some(u=>l.searchParams.has(u)))return n;if(i(Gx),l.searchParams.get(Bn)==="true"&&i(Jx),(!l.searchParams.has(Bn)||l.searchParams.get(Bn)==="false")&&i(Xx),s.length>0)throw new $x(a,s)}return n})}var Mi,Li,fn,rr,dn,Gr,Ni,e2=class{constructor(e){de(this,Gr),de(this,Mi),de(this,Li),de(this,fn,new Map),de(this,rr),de(this,dn);var t;X(this,Mi,(t=e.fetchClient)!=null?t:(...n)=>fetch(...n)),X(this,Li,e.maxPrefetchedRequests),X(this,rr,e.url.toString()),X(this,dn,D(this,rr)),ue(this,Gr,Ni).call(this,e.url,e.requestInit)}abort(){D(this,fn).forEach(([e,t])=>t.abort())}consume(...e){var t;const n=e[0].toString(),r=(t=D(this,fn).get(n))==null?void 0:t[0];if(!(!r||n!==D(this,rr)))return D(this,fn).delete(n),r.then(s=>{const i=Ya(n,s);X(this,rr,i),D(this,dn)&&!D(this,fn).has(D(this,dn))&&ue(this,Gr,Ni).call(this,D(this,dn),e[1])}).catch(()=>{}),r}};Mi=new WeakMap;Li=new WeakMap;fn=new WeakMap;rr=new WeakMap;dn=new WeakMap;Gr=new WeakSet;Ni=function(...e){var t,n;const r=e[0].toString();if(D(this,fn).size>=D(this,Li))return;const s=new AbortController;try{const{signal:i,cleanup:o}=t2(s,(t=e[1])==null?void 0:t.signal),a=D(this,Mi).call(this,r,Da(Ct({},(n=e[1])!=null?n:{}),{signal:i}));D(this,fn).set(r,[a,s]),a.then(l=>{if(!l.ok||s.signal.aborted)return;const c=Ya(r,l);if(!c||c===r){X(this,dn,void 0);return}return X(this,dn,c),ue(this,Gr,Ni).call(this,c,e[1])}).catch(()=>{}).finally(o)}catch{}};function Ya(e,t){const n=t.headers.get(Ia),r=t.headers.get(Wf),s=t.headers.has(jx);if(!n||!r||s)return;const i=new URL(e);if(!i.searchParams.has(Bn))return i.searchParams.set(no,n),i.searchParams.set(ro,r),i.searchParams.sort(),i.toString()}function t2(e,t){let n=n2;if(t)if(t.aborted)e.abort();else{const r=()=>e.abort();t.addEventListener("abort",r,{once:!0,signal:e.signal}),n=()=>t.removeEventListener("abort",r)}return{signal:e.signal,cleanup:n}}function n2(){}var r2=class{constructor(){this.data={},this.max=250,this.storageKey="electric_expired_shapes",this.load()}getExpiredHandle(e){const t=this.data[e];return t?(t.lastUsed=Date.now(),this.save(),t.expiredHandle):null}markExpired(e,t){this.data[e]={expiredHandle:t,lastUsed:Date.now()};const n=Object.keys(this.data);if(n.length>this.max){const r=n.reduce((s,i)=>this.data[i].lastUsed<this.data[s].lastUsed?i:s);delete this.data[r]}this.save()}save(){if(!(typeof localStorage>"u"))try{localStorage.setItem(this.storageKey,JSON.stringify(this.data))}catch{}}load(){if(!(typeof localStorage>"u"))try{const e=localStorage.getItem(this.storageKey);e&&(this.data=JSON.parse(e))}catch{this.data={}}}clear(){this.data={},this.save()}},Xf=new r2,s2=class{constructor(){this.activeSnapshots=new Map,this.xmaxSnapshots=new Map,this.snapshotsByDatabaseLsn=new Map}addSnapshot(e,t){var n,r,s,i;this.activeSnapshots.set(e.snapshot_mark,{xmin:BigInt(e.xmin),xmax:BigInt(e.xmax),xip_list:e.xip_list.map(BigInt),keys:t});const o=(r=(n=this.xmaxSnapshots.get(BigInt(e.xmax)))==null?void 0:n.add(e.snapshot_mark))!=null?r:new Set([e.snapshot_mark]);this.xmaxSnapshots.set(BigInt(e.xmax),o);const a=(i=(s=this.snapshotsByDatabaseLsn.get(BigInt(e.database_lsn)))==null?void 0:s.add(e.snapshot_mark))!=null?i:new Set([e.snapshot_mark]);this.snapshotsByDatabaseLsn.set(BigInt(e.database_lsn),a)}removeSnapshot(e){this.activeSnapshots.delete(e)}shouldRejectMessage(e){const t=e.headers.txids||[];if(t.length===0)return!1;const n=Math.max(...t);for(const[r,s]of this.xmaxSnapshots.entries())if(n>=r)for(const i of s)this.removeSnapshot(i);return[...this.activeSnapshots.values()].some(r=>r.keys.has(e.key)&&Lx(n,r))}lastSeenUpdate(e){for(const[t,n]of this.snapshotsByDatabaseLsn.entries())if(t<=e)for(const r of n)this.removeSnapshot(r)}},i2=new Set([Va,no,Bn,ro]);function Zf(e){return Ce(this,null,function*(){return typeof e=="function"?e():e})}function o2(e){return Ce(this,null,function*(){const t=Object.entries(e),n=yield Promise.all(t.map(r=>Ce(this,[r],function*([s,i]){if(i===void 0)return[s,void 0];const o=yield Zf(i);return[s,Array.isArray(o)?o.join(","):o]})));return Object.fromEntries(n.filter(([r,s])=>s!==void 0))})}function a2(e){return Ce(this,null,function*(){if(!e)return{};const t=Object.entries(e),n=yield Promise.all(t.map(r=>Ce(this,[r],function*([s,i]){return[s,yield Zf(i)]})));return Object.fromEntries(n)})}function ed(e){const t=new URL(e.origin+e.pathname);for(const[n,r]of e.searchParams)Hx.includes(n)||t.searchParams.set(n,r);return t.searchParams.sort(),t.toString()}var Oi,fs,Jr,wr,On,Zt,Tt,mn,vr,jn,It,yr,wn,Lt,Pn,yn,ds,Ut,fr,ln,hs,gs,Xr,ji,Tn,cn,ps,xe,ms,Fr,Qa,td,Ka,so,nd,rd,sd,Ga,Ja,id,od,Xa,ad,ld,Za,cd,ud=class{constructor(e){de(this,xe),de(this,Oi,null),de(this,fs),de(this,Jr),de(this,wr),de(this,On,new Map),de(this,Zt,!1),de(this,Tt,"active"),de(this,mn),de(this,vr),de(this,jn),de(this,It,!1),de(this,yr,!0),de(this,wn,!1),de(this,Lt),de(this,Pn),de(this,yn),de(this,ds),de(this,Ut),de(this,fr,!1),de(this,ln),de(this,hs),de(this,gs),de(this,Xr,Promise.resolve([])),de(this,ji,new s2),de(this,Tn,0),de(this,cn),de(this,ps);var t,n,r,s;this.options=Ct({subscribe:!0},e),l2(this.options),X(this,mn,(t=this.options.offset)!=null?t:"-1"),X(this,vr,""),X(this,Lt,this.options.handle),X(this,wr,new Tx(e.parser,e.transformer)),X(this,ds,this.options.onError),X(this,Pn,(n=this.options.log)!=null?n:"full");const i=(r=e.fetchClient)!=null?r:(...l)=>fetch(...l),o=Da(Ct({},(s=e.backoffOptions)!=null?s:Jf),{onFailedAttempt:()=>{var l,c;X(this,wn,!1),(c=(l=e.backoffOptions)==null?void 0:l.onFailedAttempt)==null||c.call(l)}}),a=zx(i,o);X(this,Jr,Zx(Kx(a))),X(this,fs,Yx(D(this,Jr))),ue(this,xe,ld).call(this)}get shapeHandle(){return D(this,Lt)}get error(){return D(this,Oi)}get isUpToDate(){return D(this,It)}get lastOffset(){return D(this,mn)}get mode(){return D(this,Pn)}subscribe(e,t=()=>{}){const n=Math.random();return D(this,On).set(n,[e,t]),D(this,Zt)||ue(this,xe,ms).call(this),()=>{D(this,On).delete(n)}}unsubscribeAll(){D(this,On).clear()}lastSyncedAt(){return D(this,jn)}lastSynced(){return D(this,jn)===void 0?1/0:Date.now()-D(this,jn)}isConnected(){return D(this,wn)}isLoading(){return!D(this,It)}hasStarted(){return D(this,Zt)}isPaused(){return D(this,Tt)==="paused"}forceDisconnectAndRefresh(){return Ce(this,null,function*(){var e,t;X(this,fr,!0),D(this,It)&&!((e=D(this,Ut))!=null&&e.signal.aborted)&&((t=D(this,Ut))==null||t.abort(Qf)),yield ue(this,xe,id).call(this),X(this,fr,!1)})}requestSnapshot(e){return Ce(this,null,function*(){if(D(this,Pn)==="full")throw new Error(`Snapshot requests are not supported in ${D(this,Pn)} mode, as the consumer is guaranteed to observe all data`);D(this,Zt)||(yield ue(this,xe,ms).call(this)),yield ue(this,xe,od).call(this),Uc(this,Tn)._++;try{D(this,Tn)===1&&ue(this,xe,Ga).call(this);const{fetchUrl:t,requestHeaders:n}=yield ue(this,xe,Qa).call(this,this.options.url,!0,e),{metadata:r,data:s}=yield ue(this,xe,cd).call(this,t,n),i=s.concat([{headers:Ct({control:"snapshot-end"},r)}]);return D(this,ji).addSnapshot(r,new Set(s.map(o=>o.key))),ue(this,xe,so).call(this,i,!1),{metadata:r,data:s}}finally{Uc(this,Tn)._--,D(this,Tn)===0&&ue(this,xe,Ja).call(this)}})}};Oi=new WeakMap;fs=new WeakMap;Jr=new WeakMap;wr=new WeakMap;On=new WeakMap;Zt=new WeakMap;Tt=new WeakMap;mn=new WeakMap;vr=new WeakMap;jn=new WeakMap;It=new WeakMap;yr=new WeakMap;wn=new WeakMap;Lt=new WeakMap;Pn=new WeakMap;yn=new WeakMap;ds=new WeakMap;Ut=new WeakMap;fr=new WeakMap;ln=new WeakMap;hs=new WeakMap;gs=new WeakMap;Xr=new WeakMap;ji=new WeakMap;Tn=new WeakMap;cn=new WeakMap;ps=new WeakMap;xe=new WeakSet;ms=function(){return Ce(this,null,function*(){var e;X(this,Zt,!0);try{yield ue(this,xe,Fr).call(this)}catch(t){if(X(this,Oi,t),D(this,ds)){const n=yield D(this,ds).call(this,t);typeof n=="object"&&(ue(this,xe,Za).call(this),"params"in n&&(this.options.params=n.params),"headers"in n&&(this.options.headers=n.headers),X(this,Zt,!1),ue(this,xe,ms).call(this));return}throw t}finally{X(this,wn,!1),(e=D(this,gs))==null||e.call(this)}})};Fr=function(){return Ce(this,null,function*(){var e,t;if(D(this,Tt)==="pause-requested"){X(this,Tt,"paused");return}if(!this.options.subscribe&&((e=this.options.signal)!=null&&e.aborted||D(this,It)))return;const n=D(this,Tt)==="paused";X(this,Tt,"active");const{url:r,signal:s}=this.options,{fetchUrl:i,requestHeaders:o}=yield ue(this,xe,Qa).call(this,r,n),a=yield ue(this,xe,td).call(this,s),l=D(this,Ut);try{yield ue(this,xe,nd).call(this,{fetchUrl:i,requestAbortController:l,headers:o,resumingFromPause:n})}catch(c){if((c instanceof Yn||c instanceof Ti)&&l.signal.aborted&&l.signal.reason===Qf)return ue(this,xe,Fr).call(this);if(c instanceof Ti){l.signal.aborted&&l.signal.reason===Kf&&X(this,Tt,"paused");return}if(!(c instanceof Yn))throw c;if(c.status==409){if(D(this,Lt)){const f=ed(i);Xf.markExpired(f,D(this,Lt))}const u=c.headers[Ia]||`${D(this,Lt)}-next`;return ue(this,xe,Za).call(this,u),yield ue(this,xe,Xa).call(this,c.json),ue(this,xe,Fr).call(this)}else throw ue(this,xe,ad).call(this,c),c}finally{a&&s&&s.removeEventListener("abort",a),X(this,Ut,void 0)}return(t=D(this,hs))==null||t.call(this),ue(this,xe,Fr).call(this)})};Qa=function(e,t,n){return Ce(this,null,function*(){const[r,s]=yield Promise.all([a2(this.options.headers),this.options.params?o2(c2(this.options.params)):void 0]);s&&fd(s);const i=new URL(e);if(s){s.table&&Et(i,qx,s.table),s.where&&Et(i,Fx,s.where),s.columns&&Et(i,Dx,s.columns),s.replica&&Et(i,Ix,s.replica),s.params&&Et(i,Vx,s.params);const l=Ct({},s);delete l.table,delete l.where,delete l.columns,delete l.replica,delete l.params;for(const[c,u]of Object.entries(l))Et(i,c,u)}n&&(n.where&&Et(i,Ua,n.where),n.params&&Et(i,Wa,n.params),n.limit&&Et(i,Ha,n.limit),n.offset&&Et(i,Ba,n.offset),n.orderBy&&Et(i,za,n.orderBy)),i.searchParams.set(ro,D(this,mn)),i.searchParams.set(Gf,D(this,Pn)),D(this,It)&&(!D(this,fr)&&!t&&i.searchParams.set(Bn,"true"),i.searchParams.set(Va,D(this,vr))),D(this,Lt)&&i.searchParams.set(no,D(this,Lt));const o=ed(i),a=Xf.getExpiredHandle(o);return a&&i.searchParams.set(Yf,a),i.searchParams.sort(),{fetchUrl:i,requestHeaders:r}})};td=function(e){return Ce(this,null,function*(){var t;if(X(this,Ut,new AbortController),e){const n=()=>{var r;(r=D(this,Ut))==null||r.abort(e.reason)};return e.addEventListener("abort",n,{once:!0}),e.aborted&&((t=D(this,Ut))==null||t.abort(e.reason)),n}})};Ka=function(e){return Ce(this,null,function*(){var t;const{headers:n,status:r}=e,s=n.get(Ia);s&&X(this,Lt,s);const i=n.get(Wf);i&&X(this,mn,i);const o=n.get(Nx);o&&X(this,vr,o);const a=()=>{const l=n.get(Ox);return l?JSON.parse(l):{}};X(this,yn,(t=D(this,yn))!=null?t:a()),r===204&&X(this,jn,Date.now())})};so=function(e,t=!1){return Ce(this,null,function*(){var n;if(e.length>0){X(this,yr,!0);const r=e[e.length-1];if(zf(r)){if(t){const i=Mx(r);i&&X(this,mn,i)}X(this,jn,Date.now()),X(this,It,!0),X(this,yr,!1),(n=D(this,ps))==null||n.call(this)}const s=e.filter(i=>Fa(i)?!D(this,ji).shouldRejectMessage(i):!0);yield ue(this,xe,Xa).call(this,s)}})};nd=function(e){return Ce(this,null,function*(){return D(this,It)&&this.options.experimentalLiveSse&&!D(this,fr)&&!e.resumingFromPause?(e.fetchUrl.searchParams.set(Ux,"true"),ue(this,xe,sd).call(this,e)):ue(this,xe,rd).call(this,e)})};rd=function(e){return Ce(this,null,function*(){const{fetchUrl:t,requestAbortController:n,headers:r}=e,s=yield D(this,fs).call(this,t.toString(),{signal:n.signal,headers:r});X(this,wn,!0),yield ue(this,xe,Ka).call(this,s);const i=D(this,yn),a=(yield s.text())||"[]",l=D(this,wr).parse(a,i);yield ue(this,xe,so).call(this,l)})};sd=function(e){return Ce(this,null,function*(){const{fetchUrl:t,requestAbortController:n,headers:r}=e,s=D(this,Jr);try{let i=[];yield gx(t.toString(),{headers:r,fetch:s,onopen:o=>Ce(this,null,function*(){X(this,wn,!0),yield ue(this,xe,Ka).call(this,o)}),onmessage:o=>{if(o.data){const a=D(this,yn),l=D(this,wr).parse(o.data,a);i.push(l),zf(l)&&(ue(this,xe,so).call(this,i,!0),i=[])}},onerror:o=>{throw o},signal:n.signal})}catch(i){throw n.signal.aborted?new Ti:i}})};Ga=function(){var e;D(this,Zt)&&D(this,Tt)==="active"&&(X(this,Tt,"pause-requested"),(e=D(this,Ut))==null||e.abort(Kf))};Ja=function(){D(this,Zt)&&D(this,Tt)==="paused"&&ue(this,xe,ms).call(this)};id=function(){return Ce(this,null,function*(){return D(this,ln)?D(this,ln):(X(this,ln,new Promise((e,t)=>{X(this,hs,e),X(this,gs,t)})),D(this,ln).finally(()=>{X(this,ln,void 0),X(this,hs,void 0),X(this,gs,void 0)}),D(this,ln))})};od=function(){return Ce(this,null,function*(){if(D(this,yr))return D(this,cn)?D(this,cn):(X(this,cn,new Promise(e=>{X(this,ps,e)})),D(this,cn).finally(()=>{X(this,cn,void 0),X(this,ps,void 0)}),D(this,cn))})};Xa=function(e){return Ce(this,null,function*(){return X(this,Xr,D(this,Xr).then(()=>Promise.all(Array.from(D(this,On).values()).map(t=>Ce(this,[t],function*([n,r]){try{yield n(e)}catch(s){queueMicrotask(()=>{throw s})}}))))),D(this,Xr)})};ad=function(e){D(this,On).forEach(([t,n])=>{n?.(e)})};ld=function(){if(typeof document=="object"&&typeof document.hidden=="boolean"&&typeof document.addEventListener=="function"){const e=()=>{document.hidden?ue(this,xe,Ga).call(this):ue(this,xe,Ja).call(this)};document.addEventListener("visibilitychange",e)}};Za=function(e){X(this,mn,"-1"),X(this,vr,""),X(this,Lt,e),X(this,It,!1),X(this,yr,!0),X(this,wn,!1),X(this,yn,void 0),X(this,Tn,0)};cd=function(e,t){return Ce(this,null,function*(){const n=yield D(this,fs).call(this,e.toString(),{headers:t});if(!n.ok)throw new Yn(n.status,void 0,void 0,Object.fromEntries([...n.headers.entries()]),e.toString());const{metadata:r,data:s}=yield n.json(),i=D(this,wr).parse(JSON.stringify(s),D(this,yn));return{metadata:r,data:i}})};ud.Replica={FULL:"full",DEFAULT:"default"};function fd(e){if(!e)return;const t=Object.keys(e).filter(n=>i2.has(n));if(t.length>0)throw new kx(t)}function l2(e){if(!e.url)throw new bx;if(e.signal&&!(e.signal instanceof AbortSignal))throw new xx;if(e.offset!==void 0&&e.offset!=="-1"&&e.offset!=="now"&&!e.handle)throw new _x;fd(e.params)}function Et(e,t,n){if(!(n===void 0||n==null))if(typeof n=="string")e.searchParams.set(t,n);else if(typeof n=="object")for(const[r,s]of Object.entries(n))e.searchParams.set(`${t}[${r}]`,s);else e.searchParams.set(t,n.toString())}function c2(e){return Array.isArray(e.params)?Da(Ct({},e),{params:Object.fromEntries(e.params.map((t,n)=>[n+1,t]))}):e}var kt,Mn,Ln,Di,Zr,ws,Dn,$t,dd,hd,el,ci,gd,tl,u2=class{constructor(e){de(this,$t),de(this,kt,new Map),de(this,Mn,new Map),de(this,Ln,new Set),de(this,Di,new Set),de(this,Zr,!1),de(this,ws,"syncing"),de(this,Dn,!1),this.stream=e,this.stream.subscribe(ue(this,$t,dd).bind(this),ue(this,$t,gd).bind(this))}get isUpToDate(){return D(this,ws)==="up-to-date"}get lastOffset(){return this.stream.lastOffset}get handle(){return this.stream.shapeHandle}get rows(){return this.value.then(e=>Array.from(e.values()))}get currentRows(){return Array.from(this.currentValue.values())}get value(){return new Promise((e,t)=>{if(this.stream.isUpToDate)e(this.currentValue);else{const n=this.subscribe(({value:r})=>{n(),D(this,Dn)&&t(D(this,Dn)),e(r)})}})}get currentValue(){return D(this,kt)}get error(){return D(this,Dn)}lastSyncedAt(){return this.stream.lastSyncedAt()}lastSynced(){return this.stream.lastSynced()}isLoading(){return this.stream.isLoading()}isConnected(){return this.stream.isConnected()}get mode(){return this.stream.mode}requestSnapshot(e){return Ce(this,null,function*(){const t=JSON.stringify(e);D(this,Di).add(t),yield ue(this,$t,el).call(this),yield this.stream.requestSnapshot(e)})}subscribe(e){const t=Math.random();return D(this,Mn).set(t,e),()=>{D(this,Mn).delete(t)}}unsubscribeAll(){D(this,Mn).clear()}get numSubscribers(){return D(this,Mn).size}};kt=new WeakMap;Mn=new WeakMap;Ln=new WeakMap;Di=new WeakMap;Zr=new WeakMap;ws=new WeakMap;Dn=new WeakMap;$t=new WeakSet;dd=function(e){let t=!1;e.forEach(n=>{if(Fa(n))if(t=ue(this,$t,ci).call(this,"syncing"),this.mode==="full")switch(n.headers.operation){case"insert":D(this,kt).set(n.key,n.value);break;case"update":D(this,kt).set(n.key,Ct(Ct({},D(this,kt).get(n.key)),n.value));break;case"delete":D(this,kt).delete(n.key);break}else switch(n.headers.operation){case"insert":D(this,Ln).add(n.key),D(this,kt).set(n.key,n.value);break;case"update":D(this,Ln).has(n.key)&&D(this,kt).set(n.key,Ct(Ct({},D(this,kt).get(n.key)),n.value));break;case"delete":D(this,Ln).has(n.key)&&(D(this,kt).delete(n.key),D(this,Ln).delete(n.key));break}if(Bf(n))switch(n.headers.control){case"up-to-date":t=ue(this,$t,ci).call(this,"up-to-date"),D(this,Zr)&&(X(this,Zr,!1),ue(this,$t,hd).call(this));break;case"must-refetch":D(this,kt).clear(),D(this,Ln).clear(),X(this,Dn,!1),t=ue(this,$t,ci).call(this,"syncing"),X(this,Zr,!0);break}}),t&&ue(this,$t,tl).call(this)};hd=function(){return Ce(this,null,function*(){yield ue(this,$t,el).call(this),yield Promise.all(Array.from(D(this,Di)).map(e=>Ce(this,null,function*(){try{const t=JSON.parse(e);yield this.stream.requestSnapshot(t)}catch{}})))})};el=function(){return Ce(this,null,function*(){this.stream.isUpToDate||(yield new Promise(e=>{const t=()=>{this.stream.isUpToDate&&(clearInterval(n),r(),e())},n=setInterval(t,10),r=this.stream.subscribe(()=>t(),()=>t());t()}))})};ci=function(e){const t=D(this,ws)!==e;return X(this,ws,e),t&&e==="up-to-date"};gd=function(e){e instanceof Yn&&(X(this,Dn,e),ue(this,$t,tl).call(this))};tl=function(){D(this,Mn).forEach(e=>{e({value:this.currentValue,rows:this.currentRows})})};var Ir=new Map,Vr=new Map;function ra(e){return typeof e=="function"?Function.prototype.toString.call(e):typeof e!="object"||e===null?e:Array.isArray(e)?e.map(ra):Object.keys(e).sort().reduce((t,n)=>(t[n]=ra(e[n]),t),{})}function pd(e){return JSON.stringify(ra(e))}function f2(e){const t=pd(e);if(Ir.has(t)){const r=Ir.get(t);if(!r.options.signal?.aborted)return r;Ir.delete(t),Vr.delete(r)}const n=new ud(e);return Ir.set(t,n),n}function d2(e){if(Vr.has(e)){if(!e.options.signal?.aborted)return Vr.get(e);Ir.delete(pd(e.options)),Vr.delete(e)}const t=new u2(e);return Vr.set(e,t),t}function zc(e){return{data:e.currentRows,isLoading:e.isLoading(),lastSyncedAt:e.lastSyncedAt(),isError:e.error!==!1,shape:e,stream:e.stream,error:e.error}}function h2(e,t){return!e||e.isLoading!==t.isLoading||e.lastSyncedAt!==t.lastSyncedAt||e.isError!==t.isError||e.error!==t.error||e.shape.lastOffset!==t.shape.lastOffset||e.shape.handle!==t.shape.handle}function g2(e){return e}function Sn({selector:e=g2,...t}){const n=f2(t),r=d2(n),[s,i]=K([]),[o,a]=K(!0),[l,c]=K(!1),[u,f]=K(null),[d,m]=K(void 0),w=zc(r);i(w.data),a(w.isLoading),c(w.isError),f(w.error),m(w.lastSyncedAt);let b=w;const $=r.subscribe(()=>{const P=zc(r);h2(b,P)&&(i(P.data),a(P.isLoading),c(P.isError),f(P.error),m(P.lastSyncedAt),b=P)});return gt(()=>$()),e({data:s,isLoading:o,isError:l,error:u,lastSyncedAt:d,shape:r,stream:n,get:()=>({data:s(),isLoading:o(),isError:l(),error:u(),lastSyncedAt:d(),shape:r,stream:n})})}const nn=e=>typeof e,Ze="",md=nn(Ze),p2=nn(!0),nl=nn(0),m2=nn(nn),Ys="type",$n="default",sa="Listener",w2="set",wd="add",v2="del",Cn="Has",io="Ids",lr="Table",Wc=lr+"s",y2=lr+io,qi="Row",b2=qi+"Count",x2=qi+io,ui="Cell",Yc=ui+io,Fi="Value",Qc=Fi+"s",_2=Fi+io,k2="Transaction",Pe=e=>Ze+e,Qs=(e,t)=>e.startsWith(t),Kc=(e,t)=>e.endsWith(t),S2=(e,t=Ze,n)=>e.split(t,n),ia=globalThis,rl=Math,Gc=rl.max,$2=rl.floor,vd=isFinite,C2=(e,t)=>e instanceof t,Ve=e=>e==null,Te=(e,t,n)=>Ve(e)?n?.():t(e),yd=e=>e==md||e==p2,E2=e=>nn(e)==md,Ao=e=>nn(e)==m2,oo=e=>Array.isArray(e),oa=(e,t,n)=>e.slice(t,n),Ot=e=>e.length,A2=(e,t)=>e.test(t),Jc=()=>{},Ro=async(e,t,n)=>{try{return await e()}catch(r){t?.(r)}},R2=(e,t)=>e.includes(t),P2=(e,t)=>e.every(t),T2=(e,t)=>Ot(e)===Ot(t)&&P2(e,(n,r)=>t[r]===n),M2=(e,t)=>e.sort(t),br=(e,t)=>e.forEach(t),xr=(e,t)=>e.map(t),bd=(e,t,n)=>e.reduce(t,n),Ii=(e,...t)=>e.push(...t),L2=e=>e.shift(),sr=e=>{const t=nn(e);return yd(t)||t==nl&&vd(e)?t:void 0},Xc=e=>Ve(e)||!Ve(sr(e)),Zc=(e,t,n,r,s)=>Ve(s)?e.delCell(t,n,r,!0):e.setCell(t,n,r,s),eu=(e,t,n)=>Ve(n)?e.delValue(t):e.setValue(t,n),sl=e=>t=>bd(N2(t),(n,r)=>n+e(r),0),il=e=>e?.size??0,ol=sl(il),Ur=sl(ol),Po=sl(Ur),lt=(e,t)=>e?.has(t)??!1,me=e=>Ve(e)||il(e)==0,N2=e=>[...e?.values()??[]],es=e=>e.clear(),ye=(e,t)=>e?.forEach(t),Vi=(e,t)=>e?.delete(t),_n=Object,tu=e=>_n.getPrototypeOf(e),O2=_n.isFrozen,xd=_n.entries,Ui=e=>!Ve(e)&&Te(tu(e),t=>t==_n.prototype||Ve(tu(t)),()=>!0),j2=_n.keys,_d=_n.freeze,un=(e=[])=>_n.fromEntries(e),pn=(e,t)=>t in e,kd=(e,t)=>(delete e[t],e),Dt=(e,t)=>br(xd(e),([n,r])=>t(r,n)),D2=(e,t)=>xr(xd(e),([n,r])=>t(r,n)),Jt=(e,t)=>un(D2(e,(n,r)=>[r,t(n,r)])),q2=e=>Ot(j2(e)),qt=e=>Ui(e)&&q2(e)==0,Gt=(e,t,n)=>(pn(e,t)||(e[t]=n()),e[t]),St=(e,t,n,r=0)=>Ve(e)||!Ui(e)||!r&&qt(e)||O2(e)?(n?.(),!1):(Dt(e,(s,i)=>{t(s,i)||kd(e,i)}),r?!0:!qt(e)),he=e=>new Map(e),Tr=e=>[...e?.keys()??[]],Q=(e,t)=>e?.get(t),bt=(e,t)=>ye(e,(n,r)=>t(r,n)),F2=(e,t)=>xr([...e?.entries()??[]],([n,r])=>t(r,n)),Le=(e,t,n)=>Ve(n)?(Vi(e,t),e):e?.set(t,n),Ue=(e,t,n,r)=>(lt(e,t)?r?.(Q(e,t)):Le(e,t,n()),Q(e,t)),En=(e,t,n,r=Le)=>(Jt(t,(s,i)=>n(e,i,s)),bt(e,s=>pn(t,s)?0:r(e,s)),e),Ge=(e,t,n,r)=>{const s={};return ye(e,(i,o)=>{if(!n?.(i,o)){const a=t?t(i,o):i;r?.(a)||(s[o]=a)}}),s},aa=(e,t,n)=>Ge(e,r=>Ge(r,t,n),me,qt),Ks=(e,t,n)=>Ge(e,r=>aa(r,t,n),me,qt),hn=(e,t)=>{const n=he();return ye(e,(r,s)=>n.set(s,t?.(r)??r)),n},la=e=>hn(e,hn),To=e=>hn(e,la),ca=(e,t,n,r,s=0)=>Te((n?Ue:Q)(e,t[s],s>Ot(t)-2?n:he),i=>{if(s>Ot(t)-2)return r?.(i)&&Le(e,t[s]),i;const o=ca(i,t,n,r,s+1);return me(i)&&Le(e,t[s]),o}),qn=e=>new Set(oo(e)||Ve(e)?e:[e]),Fn=(e,t)=>e?.add(t),I2=/^\d+$/,Sd=()=>{const e=[];let t=0;return[n=>(n?L2(e):null)??Ze+t++,n=>{A2(I2,n)&&Ot(e)<1e3&&Ii(e,n)}]},V2=(e,t=[Ze])=>{const n=[],r=(s,i)=>i==Ot(t)?Ii(n,s):t[i]===null?ye(s,o=>r(o,i+1)):br([t[i],null],o=>r(Q(s,o),i+1));return r(e,0),n},U2=e=>{let t;const[n,r]=Sd(),s=he();return[(c,u,f,d=[],m=()=>[])=>{t??=e();const w=n(1);return Le(s,w,[c,u,f,d,m]),Fn(ca(u,f??[Ze],qn),w),w},(c,u,...f)=>br(V2(c,u),d=>ye(d,m=>Q(s,m)[0](t,...u??[],...f))),c=>Te(Q(s,c),([,u,f])=>(ca(u,f??[Ze],void 0,d=>(Vi(d,c),me(d)?1:0)),Le(s,c),r(c),f)),c=>Te(Q(s,c),([u,,f=[],d,m])=>{const w=(...b)=>{const $=Ot(b);$==Ot(f)?u(t,...b,...m(b)):Ve(f[$])?br(d[$]?.(...b)??[],A=>w(...b,A)):w(...b,f[$])};w()})]},H2=63,$d=S2("-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz"),B2=he(xr($d,(e,t)=>[e,t])),tt=e=>$d[e&H2],At=(e,t)=>Q(B2,e[t])??0,z2=ia.crypto?e=>ia.crypto.getRandomValues(e):e=>xr(e,()=>$2(rl.random()*256)),W2=(e=16)=>bd(z2(new Uint8Array(e)),(t,n)=>t+tt(n),Ze),Y2=JSON.stringify,Mo=JSON.parse,An=e=>Y2(e,(t,n)=>C2(n,Map)?_n.fromEntries([...n]):n),Q2=new ia.TextEncoder,vs=e=>{let t=2166136261;return br(Q2.encode(e),n=>{t^=n,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}),t>>>0},Lo=(e,t)=>(e^t)>>>0,er=(e,t)=>vs(e+":"+t),K2=(e,t)=>vs(An(e??null)+":"+t),nu=2**36,ru=2**30,ua=2**24,Hr=2**18,Br=2**12,zr=2**6,su=e=>{const t=vs(e);return tt(t/ua)+tt(t/Hr)+tt(t/Br)+tt(t/zr)+tt(t)},G2=(e,t=Date.now)=>{let n=0,r=-1;const s=Te(e,su,()=>W2(5)),i=()=>(o(),a(n,++r)),o=d=>{const m=n,[w,b]=Ve(d)||d==""?[0,0]:l(d);n=Gc(m,w,t()),r=n==m?n==w?Gc(r,b):r:n==w?b:-1},a=(d,m,w)=>tt(d/nu)+tt(d/ru)+tt(d/ua)+tt(d/Hr)+tt(d/Br)+tt(d/zr)+tt(d)+tt(m/Hr)+tt(m/Br)+tt(m/zr)+tt(m)+(Ve(w)?s:su(w)),l=d=>[At(d,0)*nu+At(d,1)*ru+At(d,2)*ua+At(d,3)*Hr+At(d,4)*Br+At(d,5)*zr+At(d,6),At(d,7)*Hr+At(d,8)*Br+At(d,9)*zr+At(d,10),d.slice(11)];return[i,o,a,l,()=>n,()=>r,()=>s]},J2=(e,t)=>(e??0)<(t??0)?-1:1,Cd=([e,t])=>dr(e,t),X2=([e,t,n])=>[e,t,n],dr=(e,t)=>t?[e,t]:[e],Z2=(e,t,n)=>[e,t,n],iu=e=>e[2],No=(e,t)=>t>e?(e?vs(e):0)^vs(t):0,Gs=(e,t)=>((e??"")>(t??"")?e:t)??"",Js=(e,t,n)=>{t>e[1]&&(e[1]=t),e[2]=n>>>0},Mr=(e=Ze)=>dr(un(),e),Hi=(e=Ze)=>[he(),e,0],Xs=([e,t,n],r=X2)=>[Ge(e,r),t,n],Oo=([e,t],n=Cd)=>dr(Ge(e,n),t),tr=(e,t)=>oo(e)&&Ot(e)==3&&E2(e[1])&&nn(e[2])==nl&&vd(e[2])&&t(e[0]),Zs=e=>[e,e],Fe=(e,t=ol)=>t(e[0])+t(e[1]),Ie=()=>[he(),he()],ou=e=>[...e],ei=([e,t])=>e===t,Lr=(e,t,n)=>Le(e,t,Q(e,t)==-n?void 0:n),Ed=()=>{let e,t,n=!1,r=!1,s=0,i=[];const o=he(),a=he(),l=he(),c=he(),u=he(),f=he(),d=he(),m=he(),w=he(),b=he(),$=he(),A=he(),_=he(),P=he(),L=qn(),O=he(),R=he(),M=he(),g=he(),p=Ie(),x=Ie(),y=Ie(),E=Ie(),V=Ie(),H=Ie(),G=Ie(),te=Ie(),B=Ie(),F=Ie(),N=Ie(),Z=Ie(),I=Ie(),z=Ie(),T=Ie(),ee=Ie(),J=Ie(),ie=Ie(),we=Ie(),ne=Ie(),se=Ie(),ae=Ie(),Y=he(),ge=Ie(),[pe,re,ve,fe]=U2(()=>st),We=h=>St(h,v=>St(v,ke)),le=h=>St(h,ke),ke=h=>{if(!St(h,(k,j)=>R2([Ys,$n],j)))return!1;const v=h[Ys];return!yd(v)&&v!=nl?!1:(sr(h[$n])!=v&&kd(h,$n),!0)},at=oo,ut=h=>St(h,Qe,on),Qe=(h,v)=>(!e||lt($,v)||on(v))&&St(h,(k,j)=>rt(v,j,k),()=>on(v)),rt=(h,v,k,j)=>St(j?k:Ye(k,h,v),(U,W)=>Te(He(h,v,W,U),oe=>(k[W]=oe,!0),()=>!1),()=>on(h,v)),He=(h,v,k,j)=>e?Te(Q(Q($,h),k),U=>sr(j)!=U[Ys]?on(h,v,k,j,U[$n]):j,()=>on(h,v,k,j)):Ve(sr(j))?on(h,v,k,j):j,Xe=(h,v)=>St(v?h:wt(h),(k,j)=>Te(De(j,k),U=>(h[j]=U,!0),()=>!1),()=>Cr()),De=(h,v)=>t?Te(Q(_,h),k=>sr(v)!=k[Ys]?Cr(h,v,k[$n]):v,()=>Cr(h,v)):Ve(sr(v))?Cr(h,v):v,Ye=(h,v,k)=>(Te(Q(A,v),([j,U])=>{ye(j,(W,oe)=>{pn(h,oe)||(h[oe]=W)}),ye(U,W=>{pn(h,W)||on(v,k,W)})}),h),wt=h=>(t&&(ye(P,(v,k)=>{pn(h,k)||(h[k]=v)}),ye(L,v=>{pn(h,v)||Cr(v)})),h),Kn=h=>En($,h,(v,k,j)=>{const U=he(),W=qn();En(Ue($,k,he),j,(oe,Ee,Ae)=>{Le(oe,Ee,Ae),Te(Ae[$n],Qt=>Le(U,Ee,Qt),()=>Fn(W,Ee))}),Le(A,k,[U,W])},(v,k)=>{Le($,k),Le(A,k)}),Sr=h=>En(_,h,(v,k,j)=>{Le(_,k,j),Te(j[$n],U=>Le(P,k,U),()=>Fn(L,k))},(v,k)=>{Le(_,k),Le(P,k),Vi(L,k)}),Yt=h=>qt(h)?Ns():Ms(h),_t=([h,v])=>{(qt(h)?Ns:Ms)(h),(qt(v)?Os:Ls)(v)},sn=h=>En(M,h,(v,k,j)=>kn(k,j),(v,k)=>ul(k)),kn=(h,v)=>En(Ue(M,h,()=>(gl(h,1),Le(O,h,Sd()),Le(R,h,he()),he())),v,(k,j,U)=>$r(h,k,j,U),(k,j)=>fl(h,k,j)),$r=(h,v,k,j,U)=>En(Ue(v,k,()=>(pl(h,k,1),he())),j,(W,oe,Ee)=>ao(h,k,W,oe,Ee),(W,oe)=>dl(h,v,k,W,oe,U)),ao=(h,v,k,j,U)=>{lt(k,j)||ml(h,v,j,1);const W=Q(k,j);U!==W&&(wl(h,v,j,W,U),Le(k,j,U))},al=(h,v,k,j,U)=>Te(Q(v,k),W=>ao(h,k,W,j,U),()=>$r(h,v,k,Ye({[j]:U},h,k))),ll=h=>qt(h)?Os():Ls(h),cl=h=>En(g,h,(v,k,j)=>Ss(k,j),(v,k)=>hl(k)),Ss=(h,v)=>{lt(g,h)||vl(h,1);const k=Q(g,h);v!==k&&(yl(h,k,v),Le(g,h,v))},Rd=(h,v)=>{const[k]=Q(O,h);let j;do j=k(v);while(lt(Q(M,h),j));return j},$s=h=>Q(M,h)??kn(h,{}),ul=h=>kn(h,{}),fl=(h,v,k)=>{const[,j]=Q(O,h);j(k),$r(h,v,k,{},!0)},dl=(h,v,k,j,U,W)=>{const oe=Q(Q(A,h)?.[0],U);if(!Ve(oe)&&!W)return ao(h,k,j,U,oe);const Ee=Ae=>{wl(h,k,Ae,Q(j,Ae)),ml(h,k,Ae,-1),Le(j,Ae)};Ve(oe)?Ee(U):bt(j,Ee),me(j)&&(pl(h,k,-1),me(Le(v,k))&&(gl(h,-1),Le(M,h),Le(O,h),Le(R,h)))},hl=h=>{const v=Q(P,h);if(!Ve(v))return Ss(h,v);yl(h,Q(g,h)),vl(h,-1),Le(g,h)},gl=(h,v)=>Lr(o,h,v),pl=(h,v,k)=>Lr(Ue(c,h,he),v,k)&&Le(l,h,Ue(l,h,()=>0)+k),ml=(h,v,k,j)=>{const U=Q(R,h),W=Q(U,k)??0;(W==0&&j==1||W==1&&j==-1)&&Lr(Ue(a,h,he),k,j),Le(U,k,W!=-j?W+j:null),Lr(Ue(Ue(u,h,he),v,he),k,j)},wl=(h,v,k,j,U)=>{Ue(Ue(Ue(f,h,he),v,he),k,()=>[j,0])[1]=U,i[3]?.(h,v,k,U)},vl=(h,v)=>Lr(d,h,v),yl=(h,v,k)=>{Ue(m,h,()=>[v,0])[1]=k,i[4]?.(h,k)},on=(h,v,k,j,U)=>(Ii(Ue(Ue(Ue(w,h,he),v,he),k,()=>[]),j),U),Cr=(h,v,k)=>(Ii(Ue(b,h,()=>[]),v),k),Cs=(h,v,k)=>Te(Q(Q(Q(f,h),v),k),([j,U])=>[!0,j,U],()=>[!1,...Zs(As(h,v,k))]),bl=h=>Te(Q(m,h),([v,k])=>[!0,v,k],()=>[!1,...Zs(Rs(h))]),xl=h=>!me(w)&&!me(ee[h])?ye(h?To(w):w,(v,k)=>ye(v,(j,U)=>ye(j,(W,oe)=>re(ee[h],[k,U,oe],W)))):0,_l=h=>!me(b)&&!me(J[h])?ye(h?hn(b):b,(v,k)=>re(J[h],[k],v)):0,Er=(h,v,k,j)=>{if(!me(h))return re(v,j,()=>Ge(h)),bt(h,(U,W)=>re(k,[...j??[],U],W==1)),1},kl=h=>{const v=Ps();v!=n&&re(p[h],void 0,v);const k=me(F[h]),j=me(I[h])&&me(z[h])&&me(B[h])&&me(N[h])&&me(H[h])&&me(G[h])&&me(te[h])&&k&&me(y[h])&&me(E[h]),U=me(T[h])&&me(Z[h])&&me(V[h])&&me(x[h]);if(!j||!U){const W=h?[hn(o),la(a),hn(l),la(c),To(u),To(f)]:[o,a,l,c,u,f];if(!j){Er(W[0],y[h],E[h]),ye(W[1],(Ee,Ae)=>Er(Ee,H[h],G[h],[Ae])),ye(W[2],(Ee,Ae)=>{Ee!=0&&re(te[h],[Ae],El(Ae))});const oe=qn();ye(W[3],(Ee,Ae)=>{Er(Ee,B[h],N[h],[Ae])&&!k&&(re(F[h],[Ae,null]),Fn(oe,Ae))}),k||ye(W[5],(Ee,Ae)=>{if(!lt(oe,Ae)){const Qt=qn();ye(Ee,an=>ye(an,([js,Ds],Ar)=>Ds!==js?Fn(Qt,Ar):Vi(an,Ar))),ye(Qt,an=>re(F[h],[Ae,an]))}}),ye(W[4],(Ee,Ae)=>ye(Ee,(Qt,an)=>Er(Qt,I[h],z[h],[Ae,an])))}if(!U){let oe;ye(W[5],(Ee,Ae)=>{let Qt;ye(Ee,(an,js)=>{let Ds;ye(an,([Ar,Vl],nh)=>{Vl!==Ar&&(re(T[h],[Ae,js,nh],Vl,Ar,Cs),oe=Qt=Ds=1)}),Ds&&re(Z[h],[Ae,js],Cs)}),Qt&&re(V[h],[Ae],Cs)}),oe&&re(x[h],void 0,Cs)}}},Sl=h=>{const v=Ts();v!=r&&re(ie[h],void 0,v);const k=me(ne[h])&&me(se[h]),j=me(ae[h])&&me(we[h]);if(!k||!j){const U=h?[hn(d),hn(m)]:[d,m];if(k||Er(U[0],ne[h],se[h]),!j){let W;ye(U[1],([oe,Ee],Ae)=>{Ee!==oe&&(re(ae[h],[Ae],Ee,oe,bl),W=1)}),W&&re(we[h],void 0,bl)}}},qe=(h,...v)=>(go(()=>h(...xr(v,Pe))),st),$l=(h,v,k,j,U)=>{let W=Es(h,v,...k);return pe(()=>{const oe=Es(h,v,...k);T2(oe,W)||(W=oe,j(st,h,v,...k,W))},F[U?1:0],[h,v],[vt])},Pd=()=>[lo(),uo()],lo=()=>Ks(M),vt=()=>Tr(M),Td=h=>aa(Q(M,Pe(h))),Cl=h=>Tr(Q(R,Pe(h))),El=h=>il(Q(M,Pe(h))),Gn=h=>Tr(Q(M,Pe(h))),Es=(h,v,k,j=0,U)=>Ui(h)?Es(h.tableId,h.cellId,h.descending,h.offset,h.limit):xr(oa(M2(F2(Q(M,Pe(h)),(W,oe)=>[Ve(v)?oe:Q(W,Pe(v)),oe]),([W],[oe])=>J2(W,oe)*(k?-1:1)),j,Ve(U)?U:j+U),([,W])=>W),Md=(h,v)=>Ge(Q(Q(M,Pe(h)),Pe(v))),co=(h,v)=>Tr(Q(Q(M,Pe(h)),Pe(v))),As=(h,v,k)=>Q(Q(Q(M,Pe(h)),Pe(v)),Pe(k)),uo=()=>Ge(g),fo=()=>Tr(g),Rs=h=>Q(g,Pe(h)),Ps=()=>!me(M),Al=h=>lt(M,Pe(h)),Rl=(h,v)=>lt(Q(R,Pe(h)),Pe(v)),Pl=(h,v)=>lt(Q(M,Pe(h)),Pe(v)),Tl=(h,v,k)=>lt(Q(Q(M,Pe(h)),Pe(v)),Pe(k)),Ts=()=>!me(g),Ml=h=>lt(g,Pe(h)),Ld=()=>An(M),Nd=()=>An(g),Od=()=>An([M,g]),jd=()=>An($),Dd=()=>An(_),qd=()=>An([$,_]),Fd=h=>qe(()=>{const v=Ao(h)?h():h;at(v)&&_t(v)}),Ms=h=>qe(()=>ut(h)?sn(h):0),Id=(h,v)=>qe(k=>Qe(v,k)?kn(k,v):0,h),Vd=(h,v,k)=>qe((j,U)=>rt(j,U,k)?$r(j,$s(j),U,k):0,h,v),Ud=(h,v,k=!0)=>go(()=>{let j;return rt(h,j,v)&&(h=Pe(h),$r(h,$s(h),j=Rd(h,k?1:0),v)),j}),Hd=(h,v,k)=>qe((j,U)=>{if(rt(j,U,k,1)){const W=$s(j);Jt(k,(oe,Ee)=>al(j,W,U,Ee,oe))}},h,v),Bd=(h,v,k,j)=>qe((U,W,oe)=>Te(He(U,W,oe,Ao(j)?j(As(U,W,oe)):j),Ee=>al(U,$s(U),W,oe,Ee)),h,v,k),Ls=h=>qe(()=>Xe(h)?cl(h):0),zd=h=>qe(()=>Xe(h,1)?Jt(h,(v,k)=>Ss(k,v)):0),Wd=(h,v)=>qe(k=>Te(De(k,Ao(v)?v(Rs(k)):v),j=>Ss(k,j)),h),Yd=h=>qe(()=>{Jt(h[0],(v,k)=>Ve(v)?jl(k):Jt(v,(j,U)=>Ve(j)?Dl(k,U):Jt(j,(W,oe)=>Zc(st,k,U,oe,W)))),Jt(h[1],(v,k)=>eu(st,k,v))}),Ll=h=>(Ro(()=>Yt(Mo(h))),st),Qd=h=>(Ro(()=>ll(Mo(h))),st),Kd=h=>qe(()=>Ro(()=>{const[v,k]=Mo(h);Yt(v),ll(k)},()=>Ll(h))),Nl=h=>qe(()=>{if((e=We(h))&&(Kn(h),!me(M))){const v=lo();Ns(),Ms(v)}}),Ol=h=>qe(()=>{if(t=le(h)){const v=uo();ho(),Os(),t=!0,Sr(h),Ls(v)}}),Gd=(h,v)=>qe(()=>{Nl(h),Ol(v)}),Ns=()=>qe(()=>sn({})),jl=h=>qe(v=>lt(M,v)?ul(v):0,h),Dl=(h,v)=>qe((k,j)=>Te(Q(M,k),U=>lt(U,j)?fl(k,U,j):0),h,v),Jd=(h,v,k,j)=>qe((U,W,oe)=>Te(Q(M,U),Ee=>Te(Q(Ee,W),Ae=>lt(Ae,oe)?dl(U,Ee,W,Ae,oe,j):0)),h,v,k),Os=()=>qe(()=>cl({})),Xd=h=>qe(v=>lt(g,v)?hl(v):0,h),ql=()=>qe(()=>{Kn({}),e=!1}),ho=()=>qe(()=>{Sr({}),t=!1}),Zd=()=>qe(()=>{ql(),ho()}),go=(h,v)=>{if(s!=-1){Fl();const k=h();return Il(v),k}},Fl=()=>(s!=-1&&s++,s==1&&(i[0]?.(),re(Y)),st),eh=()=>[Ge(f,(h,v)=>Q(o,v)===-1?void 0:Ge(h,(k,j)=>Q(Q(c,v),j)===-1?void 0:Ge(k,([,U])=>U,U=>ei(U)),me,qt),me,qt),Ge(m,([,h])=>h,h=>ei(h)),1],th=()=>[!me(f),!me(m),Ks(f,ou,ei),Ks(w),Ge(m,ou,ei),Ge(b),Ge(o),aa(c),Ks(u),Ge(d)],Il=h=>(s>0&&(s--,s==0&&(s=1,xl(1),me(f)||kl(1),_l(1),me(m)||Sl(1),h?.(st)&&(ye(f,(v,k)=>ye(v,(j,U)=>ye(j,([W],oe)=>Zc(st,k,U,oe,W)))),es(f),ye(m,([v],k)=>eu(st,k,v)),es(m)),re(ge[0],void 0),s=-1,xl(0),me(f)||kl(0),_l(0),me(m)||Sl(0),i[1]?.(),re(ge[1],void 0),i[2]?.(),s=0,n=Ps(),r=Ts(),br([o,a,l,c,u,f,w,d,m,b],es))),st),st={getContent:Pd,getTables:lo,getTableIds:vt,getTable:Td,getTableCellIds:Cl,getRowCount:El,getRowIds:Gn,getSortedRowIds:Es,getRow:Md,getCellIds:co,getCell:As,getValues:uo,getValueIds:fo,getValue:Rs,hasTables:Ps,hasTable:Al,hasTableCell:Rl,hasRow:Pl,hasCell:Tl,hasValues:Ts,hasValue:Ml,getTablesJson:Ld,getValuesJson:Nd,getJson:Od,getTablesSchemaJson:jd,getValuesSchemaJson:Dd,getSchemaJson:qd,hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:Fd,setTables:Ms,setTable:Id,setRow:Vd,addRow:Ud,setPartialRow:Hd,setCell:Bd,setValues:Ls,setPartialValues:zd,setValue:Wd,applyChanges:Yd,setTablesJson:Ll,setValuesJson:Qd,setJson:Kd,setTablesSchema:Nl,setValuesSchema:Ol,setSchema:Gd,delTables:Ns,delTable:jl,delRow:Dl,delCell:Jd,delValues:Os,delValue:Xd,delTablesSchema:ql,delValuesSchema:ho,delSchema:Zd,transaction:go,startTransaction:Fl,getTransactionChanges:eh,getTransactionLog:th,finishTransaction:Il,forEachTable:h=>ye(M,(v,k)=>h(k,j=>ye(v,(U,W)=>j(W,oe=>bt(U,oe))))),forEachTableCell:(h,v)=>bt(Q(R,Pe(h)),v),forEachRow:(h,v)=>ye(Q(M,Pe(h)),(k,j)=>v(j,U=>bt(k,U))),forEachCell:(h,v,k)=>bt(Q(Q(M,Pe(h)),Pe(v)),k),forEachValue:h=>bt(g,h),addSortedRowIdsListener:(h,v,k,j,U,W,oe)=>Ui(h)?$l(h.tableId,h.cellId,[h.descending??!1,h.offset??0,h.limit],v,k):$l(h,v,[k,j,U],W,oe),addStartTransactionListener:h=>pe(h,Y),addWillFinishTransactionListener:h=>pe(h,ge[0]),addDidFinishTransactionListener:h=>pe(h,ge[1]),callListener:h=>(fe(h),st),delListener:h=>(ve(h),st),getListenerStats:()=>({hasTables:Fe(p),tables:Fe(x),tableIds:Fe(y),hasTable:Fe(E),table:Fe(V),tableCellIds:Fe(H),hasTableCell:Fe(G,Ur),rowCount:Fe(te),rowIds:Fe(B),sortedRowIds:Fe(F),hasRow:Fe(N,Ur),row:Fe(Z,Ur),cellIds:Fe(I,Ur),hasCell:Fe(z,Po),cell:Fe(T,Po),invalidCell:Fe(ee,Po),hasValues:Fe(ie),values:Fe(we),valueIds:Fe(ne),hasValue:Fe(se),value:Fe(ae),invalidValue:Fe(J),transaction:ol(Y)+Fe(ge)}),isMergeable:()=>!1,createStore:Ed,addListener:pe,callListeners:re,setInternalListeners:(h,v,k,j,U)=>i=[h,v,k,j,U]};return Jt({[Cn+Wc]:[0,p,[],()=>[Ps()]],[Wc]:[0,x],[y2]:[0,y],[Cn+lr]:[1,E,[vt],h=>[Al(...h)]],[lr]:[1,V,[vt]],[lr+Yc]:[1,H,[vt]],[Cn+lr+ui]:[2,G,[vt,Cl],h=>[Rl(...h)]],[b2]:[1,te,[vt]],[x2]:[1,B,[vt]],[Cn+qi]:[2,N,[vt,Gn],h=>[Pl(...h)]],[qi]:[2,Z,[vt,Gn]],[Yc]:[2,I,[vt,Gn]],[Cn+ui]:[3,z,[vt,Gn,co],h=>[Tl(...h)]],[ui]:[3,T,[vt,Gn,co],h=>Zs(As(...h))],InvalidCell:[3,ee],[Cn+Qc]:[0,ie,[],()=>[Ts()]],[Qc]:[0,we],[_2]:[0,ne],[Cn+Fi]:[1,se,[fo],h=>[Ml(...h)]],[Fi]:[1,ae,[fo],h=>Zs(Rs(h[0]))],InvalidValue:[1,J]},([h,v,k,j],U)=>{st[wd+U+sa]=(...W)=>pe(W[h],v[W[h+1]?1:0],h>0?oa(W,0,h):void 0,k,j)}),_d(st)},e_={HasTable:1,Table:1,TableCellIds:1,HasTableCell:2,RowCount:1,RowIds:1,SortedRowIds:5,HasRow:2,Row:2,CellIds:2,HasCell:3,Cell:3,HasValue:1,Value:1,InvalidCell:3,InvalidValue:1},au=(e=Ze)=>[Hi(e),Hi(e)],t_=e=>oo(e)&&Ot(e)==2&&tr(e[0],t=>St(t,n=>tr(n,r=>St(r,s=>tr(s,i=>St(i,o=>tr(o,Xc),void 0,1)),void 0,1)),void 0,1))&&tr(e[1],t=>St(t,n=>tr(n,Xc),void 0,1)),n_=(e,t)=>{let n=1,r=au(),s=0;const i=he(),o=qn(),[a,l]=G2(e,t),c=Ed(),u=F=>{const N=n;return n=0,F(),n=N,B},f=(F,N=0)=>{const Z={},I={},[[z,T=Ze,ee=0],J]=F,[ie,we]=r,[ne,se,ae]=ie;let Y=N?ee:ae,ge=T;Dt(z,([re,ve=Ze,fe=0],We)=>{const le=Ue(ne,We,Hi),[ke,at,ut]=le;let Qe=N?fe:ut,rt=ve;Dt(re,(He,Xe)=>{const[De,Ye,wt]=d(He,Ue(ke,Xe,Hi),Gt(Gt(Z,We,un),Xe,un),N);Qe^=N?0:Lo(Ye?er(Xe,Ye):0,er(Xe,wt)),rt=Gs(rt,De)}),Qe^=N?0:No(at,ve),Js(le,ve,Qe),Y^=N?0:Lo(ut?er(We,ut):0,er(We,le[2])),ge=Gs(ge,rt)}),Y^=N?0:No(se,T),Js(ie,T,Y);const[pe]=d(J,we,I,N);return l(Gs(ge,pe)),[Z,I,1]},d=(F,N,Z,I)=>{const[z,T=Ze,ee=0]=F,[J,ie,we]=N;let ne=T,se=I?ee:we;return Dt(z,([ae,Y=Ze,ge=0],pe)=>{const re=Ue(J,pe,()=>[void 0,Ze,0]),[,ve,fe]=re;(!ve||Y>ve)&&(Js(re,Y,I?ge:K2(ae,Y)),re[0]=ae,Z[pe]=ae,se^=I?0:Lo(er(pe,fe),er(pe,re[2])),ne=Gs(ne,Y))}),se^=I?0:No(ie,T),Js(N,T,se),[ne,we,N[2]]},m=Jc,w=Jc,b=()=>{es(i),es(o)},$=(F,N,Z,I)=>{Fn(Ue(Ue(i,F,he),N,qn),Z),n&&f([[{[F]:[{[N]:[{[Z]:[I,s?Ze:a()]}]}]}],[{}],1])},A=(F,N)=>{Fn(o,F),n&&f([[{}],[{[F]:[N,s?Ze:a()]}],1])},_=()=>[Xs(r[0],F=>Xs(F,N=>Xs(N))),Xs(r[1])],P=()=>[r[0][2],r[1][2]],L=()=>Ge(r[0][0],iu),O=F=>{const N=Mr(r[0][1]),Z={};return bt(r[0][0],(I,[z,T,ee])=>pn(F,I)?ee!=F[I]?Z[I]=ee:0:N[0][I]=Oo([z,T],J=>Oo(J))),[N,Z]},R=F=>{const N={};return Dt(F,(Z,I)=>Te(Q(r[0][0],I),([z,,T])=>T!=Z?bt(z,(ee,[,,J])=>Gt(N,I,un)[ee]=J):0)),N},M=F=>{const N=Mr(r[0][1]),Z={};return Dt(F,(I,z)=>bt(Q(r[0][0],z)?.[0],(T,[ee,J,ie])=>pn(I,T)?ie!==I[T]?Gt(Z,z,un)[T]=ie:0:Gt(N[0],z,Mr)[0][T]=Oo([ee,J]))),[N,Z]},g=F=>{const N={};return Dt(F,(Z,I)=>Te(Q(r[0][0],I),([z])=>Dt(Z,(T,ee)=>Te(Q(z,ee),([J,,ie])=>ie!==T?bt(J,(we,[,,ne])=>Gt(Gt(N,I,un),ee,un)[we]=ne):0)))),N},p=F=>{const[[N,Z]]=r,I={};return Dt(F,(z,T)=>Dt(z,(ee,J)=>Te(Q(N,T),([ie,we])=>Te(Q(ie,J),([ne,se])=>bt(ne,(ae,[Y,ge,pe])=>pe!==ee[ae]?Gt(Gt(I,T,()=>Mr(we))[0],J,()=>Mr(se))[0][ae]=[Y,ge]:0))))),dr(I,Z)},x=()=>Ge(r[1][0],iu),y=F=>{const[,[N,Z]]=r,I=Ge(N,Cd,([,,z],T)=>z==F?.[T]);return dr(I,Z)},E=F=>u(()=>t_(F)?c.transaction(()=>{c.delTables().delValues(),r=au(),c.applyChanges(f(F,1))}):0),V=F=>(c.transaction(()=>{s=1,c.setContent(F),s=0}),B),H=(F=!1)=>{const[[N,Z,I],[z,T,ee]]=r,J=F?Z2:dr,ie={};ye(i,(ne,se)=>Te(Q(N,se),([ae,Y,ge])=>{const pe={};ye(ne,(re,ve)=>Te(Q(ae,ve),([fe,We,le])=>{const ke={};ye(re,at=>{Te(Q(fe,at),([ut,Qe,rt])=>ke[at]=J(ut,Qe,rt))}),pe[ve]=J(ke,We,le)})),ie[se]=J(pe,Y,ge)}));const we={};return ye(o,ne=>Te(Q(z,ne),([se,ae,Y])=>we[ne]=J(se,ae,Y))),[J(ie,Z,I),J(we,T,ee),1]},G=F=>u(()=>c.applyChanges(f(F))),B={getMergeableContent:_,getMergeableContentHashes:P,getMergeableTableHashes:L,getMergeableTableDiff:O,getMergeableRowHashes:R,getMergeableRowDiff:M,getMergeableCellHashes:g,getMergeableCellDiff:p,getMergeableValueHashes:x,getMergeableValueDiff:y,setMergeableContent:E,setDefaultContent:V,getTransactionMergeableChanges:H,applyMergeableChanges:G,merge:F=>{const N=_(),Z=F.getMergeableContent();return F.applyMergeableChanges(N),G(Z)}};return c.setInternalListeners(m,w,b,$,A),Jt(c,(F,N)=>B[N]=Qs(N,w2)||Qs(N,v2)||Qs(N,"apply")||Kc(N,k2)||N=="call"+sa?(...Z)=>(F(...Z),B):Qs(N,wd)&&Kc(N,sa)?(...Z)=>{const I=e_[oa(N,3,-8)]??0,z=Z[I];return Z[I]=(T,...ee)=>z(B,...ee),F(...Z)}:N=="isMergeable"?()=>!0:F),_d(B)},Wr=n_();Wr.setSchema({projects:{id:{type:"string"},name:{type:"string"},updated_at:{type:"number"},owner_id:{type:"number"}},project_members:{project_id:{type:"string"},user_id:{type:"string"},role:{type:"string"}},reviews:{id:{type:"string"},project_id:{type:"string"},name:{type:"string"},created_at:{type:"number"}},review_assignments:{review_id:{type:"string"},user_id:{type:"string"}},checklists:{id:{type:"string"},review_id:{type:"string"},reviewer_id:{type:"string"},type:{type:"string"},completed_at:{type:"number"},updated_at:{type:"number"}},checklist_answers:{id:{type:"string"},checklist_id:{type:"string"},question_key:{type:"string"},answers:{type:"string"},critical:{type:"boolean"},updated_at:{type:"number"}}});var r_=q('<div class="min-h-screen bg-gray-50 flex items-center justify-center"><div class="bg-white rounded-md shadow p-4 max-w-xs text-center"><h2 class="text-base font-medium text-gray-900">Authentication Required</h2><p class="text-sm text-gray-600">Database access requires an authenticated user.'),s_=q('<span class="text-gray-400 italic">null'),i_=q('<span class="text-gray-400 italic">undefined'),o_=q("<span>"),a_=q("<span class=text-purple-600>"),l_=q("<span class=text-gray-900>"),c_=q('<div class="min-h-screen max-w-screen bg-gray-50 p-3"><div class=space-y-2>'),u_=q('<svg class="animate-spin h-3 w-3 mr-1 text-blue-600"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">'),f_=q('<div class="bg-red-50 border border-red-200 rounded p-2 mb-2 text-xs"><div class="flex items-center"><svg class="h-3 w-3 text-red-500 mr-1"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg><p class=text-red-700>'),d_=q('<div class="py-4 text-center"><svg class="animate-spin h-4 w-4 text-blue-600 mx-auto mb-1"fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><p class="text-gray-500 text-xs">Loading...'),h_=q('<div class=overflow-x-auto><table class="min-w-full divide-y divide-gray-100 text-xs"><thead class=bg-gray-50><tr><th class="px-2 py-1 text-left text-xs font-medium text-gray-500">#</th></tr></thead><tbody class="bg-white divide-y divide-gray-100">'),g_=q('<details class=mt-2><summary class="cursor-pointer text-xs text-gray-600 hover:text-gray-900 flex items-center"><svg class="w-3 h-3 mr-1"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>JSON</summary><pre class="mt-1 bg-gray-800 text-green-400 p-2 rounded text-[10px] overflow-x-auto">'),p_=q("<div class=p-2>"),m_=q('<div><div><div class="flex items-center justify-between"><div><h2></h2><p class="text-xs text-gray-600"></p></div><div class="flex items-center"><svg fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 9l-7 7-7-7">'),w_=q('<div class="text-center py-3"><p class="text-gray-500 text-xs">No records found'),v_=q('<th class="px-2 py-1 text-left text-xs font-medium text-gray-500">'),y_=q('<tr class=hover:bg-gray-50><td class="px-2 py-1 text-gray-500">'),b_=q('<td class="px-2 py-1">');function x_(){const{authFetch:e,user:t}=kr(),[n,r]=K(new Set(["users","projects","reviews","checklists","checklist_answers","project_members","review_assignments"]));if(!t())return r_();function s(){console.log(f.data());const O=[{name:"projects",data:o.data()},{name:"reviews",data:a.data()},{name:"checklists",data:l.data()},{name:"checklist_answers",data:f.data()},{name:"project_members",data:c.data()},{name:"review_assignments",data:u.data()}];for(const{name:R,data:M}of O)if(Array.isArray(M)){Wr.delTable(R);for(const g of M)R==="checklist_answers"&&Array.isArray(g.answers)?Wr.setRow(R,g.id,{...g,answers:JSON.stringify(g.answers)}):Wr.setRow(R,g.id,g)}}je(()=>{s(),console.log(Wr.getTables())});const i=Sn({url:Je.ELECTRIC_SHAPE,params:{table:"users"},fetchClient:e}),o=Sn({url:Je.ELECTRIC_SHAPE,params:{table:"projects"},fetchClient:e}),a=Sn({url:Je.ELECTRIC_SHAPE,params:{table:"reviews"},fetchClient:e}),l=Sn({url:Je.ELECTRIC_SHAPE,params:{table:"checklists"},fetchClient:e}),c=Sn({url:Je.ELECTRIC_SHAPE,params:{table:"project_members"},fetchClient:e}),u=Sn({url:Je.ELECTRIC_SHAPE,params:{table:"review_assignments"},fetchClient:e}),f=Sn({url:Je.ELECTRIC_SHAPE,params:{table:"checklist_answers"},fetchClient:e}),d=m();function m(){return[{name:"users",data:()=>i.data(),isLoading:i.isLoading,isError:i.isError,error:i.error,color:"blue",description:"User accounts and authentication data"},{name:"projects",data:()=>o.data(),isLoading:o.isLoading,isError:o.isError,error:o.error,color:"purple",description:"Research projects"},{name:"reviews",data:()=>a.data(),isLoading:a.isLoading,isError:a.isError,error:a.error,color:"green",description:"AMSTAR2 reviews"},{name:"checklists",data:()=>l.data(),isLoading:l.isLoading,isError:l.isError,error:l.error,color:"orange",description:"AMSTAR2 checklist items"},{name:"checklist_answers",data:()=>f.data(),isLoading:f.isLoading,isError:f.isError,error:f.error,color:"lime",description:"AMSTAR2 checklist answers"},{name:"project_members",data:()=>c.data(),isLoading:c.isLoading,isError:c.isError,error:c.error,color:"pink",description:"AMSTAR2 project members"},{name:"review_assignments",data:()=>u.data(),isLoading:u.isLoading,isError:u.isError,error:u.error(),color:"cyan",description:"AMSTAR2 review assignments"}]}const w=O=>{const R=new Set(n());R.has(O)?R.delete(O):R.add(O),r(R)},b=O=>{const R={blue:{bg:"bg-blue-100",border:"border-blue-200",text:"text-blue-700",badge:"bg-blue-100 text-blue-800"},purple:{bg:"bg-purple-100",border:"border-purple-200",text:"text-purple-700",badge:"bg-purple-100 text-purple-800"},green:{bg:"bg-green-100",border:"border-green-200",text:"text-green-700",badge:"bg-green-100 text-green-800"},orange:{bg:"bg-orange-100",border:"border-orange-200",text:"text-orange-700",badge:"bg-orange-100 text-orange-800"},pink:{bg:"bg-pink-100",border:"border-pink-200",text:"text-pink-700",badge:"bg-pink-100 text-pink-800"},cyan:{bg:"bg-cyan-100",border:"border-cyan-200",text:"text-cyan-700",badge:"bg-cyan-100 text-cyan-800"},lime:{bg:"bg-lime-100",border:"border-lime-300",text:"text-lime-800",badge:"bg-lime-100 text-lime-900"}};return R[O]||R.blue},$=O=>O===null?s_():O===void 0?i_():typeof O=="boolean"?(()=>{var R=o_();return Be(R,O?"text-green-600":"text-red-600"),C(R,()=>O.toString()),R})():typeof O=="object"?(()=>{var R=a_();return C(R,()=>JSON.stringify(O)),R})():(()=>{var R=l_();return C(R,()=>O.toString()),R})(),[A,_]=K(d),[P,L]=K(0);return je(()=>{const O=d.reduce((R,M)=>{const g=M.data();return R+(g?.length||0)},0);_(m()),L(O)}),(()=>{var O=c_(),R=O.firstChild;return C(R,S(it,{get each(){return A()},children:M=>{const g=()=>M.data(),p=()=>M.isLoading(),x=()=>M.isError(),y=()=>M.error(),E=()=>b(M.color),V=()=>g()?.length||0,H=()=>g()&&g().length>0?Object.keys(g()[0]):[];return(()=>{var G=m_(),te=G.firstChild,B=te.firstChild,F=B.firstChild,N=F.firstChild,Z=N.nextSibling,I=F.nextSibling,z=I.firstChild;return te.$$click=()=>w(M.name),C(N,()=>M.name),C(Z,()=>M.description,null),C(Z,(()=>{var T=nt(()=>!p());return()=>T()&&` (${V()})`})(),null),C(I,S(_e,{get when(){return p()},get children(){return u_()}}),z),C(G,S(_e,{get when(){return n().has(M.name)},get children(){var T=p_();return C(T,S(_e,{get when(){return x()},get children(){var ee=f_(),J=ee.firstChild,ie=J.firstChild,we=ie.nextSibling;return C(we,()=>y()?.message||"Error loading data"),ee}}),null),C(T,S(_e,{get when(){return nt(()=>!!p())()&&!x()},get children(){return d_()}}),null),C(T,S(_e,{get when(){return nt(()=>!!(!p()&&!x()&&g()))()&&g().length>0},get fallback(){return S(_e,{get when(){return nt(()=>!p())()&&!x()},get children(){return w_()}})},get children(){return[(()=>{var ee=h_(),J=ee.firstChild,ie=J.firstChild,we=ie.firstChild;we.firstChild;var ne=ie.nextSibling;return C(we,S(it,{get each(){return H()},children:se=>(()=>{var ae=v_();return C(ae,se),ae})()}),null),C(ne,S(it,{get each(){return g()},children:(se,ae)=>(()=>{var Y=y_(),ge=Y.firstChild;return C(ge,()=>ae()+1),C(Y,S(it,{get each(){return H()},children:pe=>(()=>{var re=b_();return C(re,()=>$(se[pe])),re})()}),null),Y})()})),ee})(),(()=>{var ee=g_(),J=ee.firstChild,ie=J.nextSibling;return C(ie,()=>JSON.stringify(g(),null,2)),ee})()]}}),null),T}}),null),ce(T=>{var ee=`bg-white rounded shadow overflow-hidden border-l-2 ${E().border} transition-all duration-200`,J=`${E().bg} px-3 py-2 cursor-pointer hover:opacity-80 transition-opacity`,ie=`text-sm font-bold ${E().text} uppercase`,we=`w-4 h-4 ${E().text} transform transition-transform duration-200 ${n().has(M.name)?"rotate-180":""}`;return ee!==T.e&&Be(G,T.e=ee),J!==T.t&&Be(te,T.t=J),ie!==T.a&&Be(N,T.a=ie),we!==T.o&&pt(z,"class",T.o=we),T},{e:void 0,t:void 0,a:void 0,o:void 0}),G})()}})),O})()}ze(["click"]);const Ad="/amstar2-checklist-scoring-app";function Ht(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function __(){return S(u0,{base:Ad,get children(){return S(yt,{path:"/",component:ex,get children(){return[S(yt,{path:"/",component:b0}),S(yt,{path:"/dashboard",component:Ov}),S(yt,{path:"/electric",component:x_}),S(yt,{path:"/projects/:projectSlug",component:Av}),S(yt,{path:"/projects/:projectSlug/reviews/:reviewSlug/checklists/:checklistSlug",component:Xl}),S(yt,{path:"/checklist/:checklistSlug",component:Xl}),S(yt,{path:"/merge/:checklistSlugA/:checklistSlugB",component:ax}),S(yt,{path:"/signin",component:()=>S(ti,{get children(){return S(Qy,{})}})}),S(yt,{path:"/signup",component:()=>S(ti,{get children(){return S(ib,{})}})}),S(yt,{path:"/verify-email",component:()=>S(ti,{get children(){return S(Pb,{})}})}),S(yt,{path:"/reset-password",component:()=>S(ti,{get children(){return S(Mb,{})}})}),S(yt,{path:"*",component:nx})]}})}})}function ti(e){const t=Ef();return S(_e,{get when(){return t()},get fallback(){return S(sx,{})},get children(){return e.children}})}function k_(){return S(__,{})}Ch(()=>S(k_,{}),document.getElementById("root"));export{Je as A,Kl as _,xs as a,F_ as p};
