(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Dh=!1,qh=(e,t)=>e===t,Bt=Symbol("solid-proxy"),qu=typeof Proxy=="function",la=Symbol("solid-track"),ji={equals:qh};let Fu=Bu;const jn=1,Li=2,Vu={owned:null,cleanups:null,context:null,owner:null};var Pe=null;let Fo=null,Fh=null,Ue=null,dt=null,fn=null,mo=0;function nr(e,t){const n=Ue,r=Pe,s=e.length===0,i=t===void 0?r:t,o=s?Vu:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=s?e:()=>e(()=>_t(()=>ys(o)));Pe=o,Ue=null;try{return Ln(a,!0)}finally{Ue=n,Pe=r}}function Q(e,t){t=t?Object.assign({},ji,t):ji;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=s=>(typeof s=="function"&&(s=s(n.value)),Hu(n,s));return[Iu.bind(n),r]}function ge(e,t,n){const r=Ja(e,t,!1,jn);Ds(r)}function Ie(e,t,n){Fu=Hh;const r=Ja(e,t,!1,jn);(!n||!n.render)&&(r.user=!0),fn?fn.push(r):Ds(r)}function Fe(e,t,n){n=n?Object.assign({},ji,n):ji;const r=Ja(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ds(r),Iu.bind(r)}function Mi(e){return Ln(e,!1)}function _t(e){if(Ue===null)return e();const t=Ue;Ue=null;try{return e()}finally{Ue=t}}function Ia(e,t,n){const r=Array.isArray(e);let s,i=n&&n.defer;return o=>{let a;if(r){a=Array(e.length);for(let c=0;c<e.length;c++)a[c]=e[c]()}else a=e();if(i)return i=!1,o;const l=_t(()=>t(a,s,o));return s=a,l}}function Ha(e){Ie(()=>_t(e))}function vt(e){return Pe===null||(Pe.cleanups===null?Pe.cleanups=[e]:Pe.cleanups.push(e)),e}function ca(){return Ue}function Ba(){return Pe}function za(e,t){const n=Pe,r=Ue;Pe=e,Ue=null;try{return Ln(t,!0)}catch(s){Qa(s)}finally{Pe=n,Ue=r}}function Vh(e){const t=Ue,n=Pe;return Promise.resolve().then(()=>{Ue=t,Pe=n;let r;return Ln(e,!1),Ue=Pe=null,r?r.done:void 0})}const[Vk,Uk]=Q(!1);function Uu(e,t){const n=Symbol("context");return{id:n,Provider:zh(n),defaultValue:e}}function Wa(e){let t;return Pe&&Pe.context&&(t=Pe.context[e.id])!==void 0?t:e.defaultValue}function Ya(e){const t=Fe(e),n=Fe(()=>ua(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Iu(){if(this.sources&&this.state)if(this.state===jn)Ds(this);else{const e=dt;dt=null,Ln(()=>Ni(this),!1),dt=e}if(Ue){const e=this.observers?this.observers.length:0;Ue.sources?(Ue.sources.push(this),Ue.sourceSlots.push(e)):(Ue.sources=[this],Ue.sourceSlots=[e]),this.observers?(this.observers.push(Ue),this.observerSlots.push(Ue.sources.length-1)):(this.observers=[Ue],this.observerSlots=[Ue.sources.length-1])}return this.value}function Hu(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&Ln(()=>{for(let s=0;s<e.observers.length;s+=1){const i=e.observers[s],o=Fo&&Fo.running;o&&Fo.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?dt.push(i):fn.push(i),i.observers&&zu(i)),o||(i.state=jn)}if(dt.length>1e6)throw dt=[],new Error},!1)),t}function Ds(e){if(!e.fn)return;ys(e);const t=mo;Uh(e,e.value,t)}function Uh(e,t,n){let r;const s=Pe,i=Ue;Ue=Pe=e;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=jn,e.owned&&e.owned.forEach(ys),e.owned=null),e.updatedAt=n+1,Qa(o)}finally{Ue=i,Pe=s}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Hu(e,r):e.value=r,e.updatedAt=n)}function Ja(e,t,n,r=jn,s){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Pe,context:Pe?Pe.context:null,pure:n};return Pe===null||Pe!==Vu&&(Pe.owned?Pe.owned.push(i):Pe.owned=[i]),i}function Oi(e){if(e.state===0)return;if(e.state===Li)return Ni(e);if(e.suspense&&_t(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<mo);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===jn)Ds(e);else if(e.state===Li){const r=dt;dt=null,Ln(()=>Ni(e,t[0]),!1),dt=r}}function Ln(e,t){if(dt)return e();let n=!1;t||(dt=[]),fn?n=!0:fn=[],mo++;try{const r=e();return Ih(n),r}catch(r){n||(fn=null),dt=null,Qa(r)}}function Ih(e){if(dt&&(Bu(dt),dt=null),e)return;const t=fn;fn=null,t.length&&Ln(()=>Fu(t),!1)}function Bu(e){for(let t=0;t<e.length;t++)Oi(e[t])}function Hh(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Oi(r)}for(t=0;t<n;t++)Oi(e[t])}function Ni(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const s=r.state;s===jn?r!==t&&(!r.updatedAt||r.updatedAt<mo)&&Oi(r):s===Li&&Ni(r,t)}}}function zu(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Li,n.pure?dt.push(n):fn.push(n),n.observers&&zu(n))}}function ys(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),o=n.observerSlots.pop();r<s.length&&(i.sourceSlots[o]=r,s[r]=i,n.observerSlots[r]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)ys(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)ys(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Bh(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Qa(e,t=Pe){throw Bh(e)}function ua(e){if(typeof e=="function"&&!e.length)return ua(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=ua(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function zh(e,t){return function(r){let s;return ge(()=>s=_t(()=>(Pe.context={...Pe.context,[e]:r.value},Ya(()=>r.children))),void 0),s}}const Wh=Symbol("fallback");function mc(e){for(let t=0;t<e.length;t++)e[t]()}function Yh(e,t,n={}){let r=[],s=[],i=[],o=0,a=t.length>1?[]:null;return vt(()=>mc(i)),()=>{let l=e()||[],c=l.length,u,d;return l[la],_t(()=>{let m,w,v,x,E,_,A,j,U;if(c===0)o!==0&&(mc(i),i=[],r=[],s=[],o=0,a&&(a=[])),n.fallback&&(r=[Wh],s[0]=nr(q=>(i[0]=q,n.fallback())),o=1);else if(o===0){for(s=new Array(c),d=0;d<c;d++)r[d]=l[d],s[d]=nr(f);o=c}else{for(v=new Array(c),x=new Array(c),a&&(E=new Array(c)),_=0,A=Math.min(o,c);_<A&&r[_]===l[_];_++);for(A=o-1,j=c-1;A>=_&&j>=_&&r[A]===l[j];A--,j--)v[j]=s[A],x[j]=i[A],a&&(E[j]=a[A]);for(m=new Map,w=new Array(j+1),d=j;d>=_;d--)U=l[d],u=m.get(U),w[d]=u===void 0?-1:u,m.set(U,d);for(u=_;u<=A;u++)U=r[u],d=m.get(U),d!==void 0&&d!==-1?(v[d]=s[u],x[d]=i[u],a&&(E[d]=a[u]),d=w[d],m.set(U,d)):i[u]();for(d=_;d<c;d++)d in v?(s[d]=v[d],i[d]=x[d],a&&(a[d]=E[d],a[d](d))):s[d]=nr(f);s=s.slice(0,o=c),r=l.slice(0)}return s});function f(m){if(i[d]=m,a){const[w,v]=Q(d);return a[d]=v,t(l[d],w)}return t(l[d])}}}function k(e,t){return _t(()=>e(t||{}))}function ti(){return!0}const da={get(e,t,n){return t===Bt?n:e.get(t)},has(e,t){return t===Bt?!0:e.has(t)},set:ti,deleteProperty:ti,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ti,deleteProperty:ti}},ownKeys(e){return e.keys()}};function Vo(e){return(e=typeof e=="function"?e():e)?e:{}}function Jh(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Ae(...e){let t=!1;for(let o=0;o<e.length;o++){const a=e[o];t=t||!!a&&Bt in a,e[o]=typeof a=="function"?(t=!0,Fe(a)):a}if(qu&&t)return new Proxy({get(o){for(let a=e.length-1;a>=0;a--){const l=Vo(e[a])[o];if(l!==void 0)return l}},has(o){for(let a=e.length-1;a>=0;a--)if(o in Vo(e[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<e.length;a++)o.push(...Object.keys(Vo(e[a])));return[...new Set(o)]}},da);const n={},r=Object.create(null);for(let o=e.length-1;o>=0;o--){const a=e[o];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let c=l.length-1;c>=0;c--){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const d=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=d.get?{enumerable:!0,configurable:!0,get:Jh.bind(n[u]=[d.get.bind(a)])}:d.value!==void 0?d:void 0;else{const f=n[u];f&&(d.get?f.push(d.get.bind(a)):d.value!==void 0&&f.push(()=>d.value))}}}const s={},i=Object.keys(r);for(let o=i.length-1;o>=0;o--){const a=i[o],l=r[a];l&&l.get?Object.defineProperty(s,a,l):s[a]=l?l.value:void 0}return s}function Wu(e,...t){if(qu&&Bt in e){const s=new Set(t.length>1?t.flat():t[0]),i=t.map(o=>new Proxy({get(a){return o.includes(a)?e[a]:void 0},has(a){return o.includes(a)&&a in e},keys(){return o.filter(a=>a in e)}},da));return i.push(new Proxy({get(o){return s.has(o)?void 0:e[o]},has(o){return s.has(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!s.has(o))}},da)),i}const n={},r=t.map(()=>({}));for(const s of Object.getOwnPropertyNames(e)){const i=Object.getOwnPropertyDescriptor(e,s),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,l=0;for(const c of t)c.includes(s)&&(a=!0,o?r[l][s]=i.value:Object.defineProperty(r[l],s,i)),++l;a||(o?n[s]=i.value:Object.defineProperty(n,s,i))}return[...r,n]}let Qh=0;function Yu(){return`cl-${Qh++}`}const Kh=e=>`Stale read from <${e}>.`;function Ee(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Fe(Yh(()=>e.each,e.children,t||void 0))}function _e(e){const t=e.keyed,n=Fe(()=>e.when,void 0,void 0),r=t?n:Fe(n,void 0,{equals:(s,i)=>!s==!i});return Fe(()=>{const s=r();if(s){const i=e.children;return typeof i=="function"&&i.length>0?_t(()=>i(t?s:()=>{if(!_t(r))throw Kh("Show");return n()})):i}return e.fallback},void 0,void 0)}const Gh=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Xh=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Gh]),Zh=new Set(["innerHTML","textContent","innerText","children"]),eg=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),tg=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function ng(e,t){const n=tg[e];return typeof n=="object"?n[t]?n.$:void 0:n}const rg=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),sg={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},et=e=>Fe(()=>e());function ig(e,t,n){let r=n.length,s=t.length,i=r,o=0,a=0,l=t[s-1].nextSibling,c=null;for(;o<s||a<i;){if(t[o]===n[a]){o++,a++;continue}for(;t[s-1]===n[i-1];)s--,i--;if(s===o){const u=i<r?a?n[a-1].nextSibling:n[i-a]:l;for(;a<i;)e.insertBefore(n[a++],u)}else if(i===a)for(;o<s;)(!c||!c.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[i-1]&&n[a]===t[s-1]){const u=t[--s].nextSibling;e.insertBefore(n[a++],t[o++].nextSibling),e.insertBefore(n[--i],u),t[s]=n[i]}else{if(!c){c=new Map;let d=a;for(;d<i;)c.set(n[d],d++)}const u=c.get(t[o]);if(u!=null)if(a<u&&u<i){let d=o,f=1,m;for(;++d<s&&d<i&&!((m=c.get(t[d]))==null||m!==u+f);)f++;if(f>u-a){const w=t[o];for(;a<u;)e.insertBefore(n[a++],w)}else e.replaceChild(n[a++],t[o++])}else o++;else t[o++].remove()}}}const wc="_$DX_DELEGATE";function og(e,t,n,r={}){let s;return nr(i=>{s=i,t===document?e():y(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{s(),t.textContent=""}}function I(e,t,n,r){let s;const i=()=>{const a=document.createElement("template");return a.innerHTML=e,a.content.firstChild},o=()=>(s||(s=i())).cloneNode(!0);return o.cloneNode=o,o}function tt(e,t=window.document){const n=t[wc]||(t[wc]=new Set);for(let r=0,s=e.length;r<s;r++){const i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,fg))}}function kt(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function ag(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function lg(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function ft(e,t){t==null?e.removeAttribute("class"):e.className=t}function En(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const s=n[0];e.addEventListener(t,n[0]=i=>s.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function cg(e,t,n={}){const r=Object.keys(t||{}),s=Object.keys(n);let i,o;for(i=0,o=s.length;i<o;i++){const a=s[i];!a||a==="undefined"||t[a]||(vc(e,a,!1),delete n[a])}for(i=0,o=r.length;i<o;i++){const a=r[i],l=!!t[a];!a||a==="undefined"||n[a]===l||!l||(vc(e,a,!0),n[a]=l)}return n}function wo(e,t,n){if(!t)return n?kt(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let s,i;for(i in n)t[i]==null&&r.removeProperty(i),delete n[i];for(i in t)s=t[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function us(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function wt(e,t={},n,r){const s={};return r||ge(()=>s.children=xs(e,t.children,s.children)),ge(()=>typeof t.ref=="function"&&bs(t.ref,e)),ge(()=>ug(e,t,n,!0,s,!0)),s}function bs(e,t,n){return _t(()=>e(t,n))}function y(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return xs(e,t,r,n);ge(s=>xs(e,t(),s,n),r)}function ug(e,t,n,r,s={},i=!1){t||(t={});for(const o in s)if(!(o in t)){if(o==="children")continue;s[o]=yc(e,o,null,s[o],n,i,t)}for(const o in t){if(o==="children")continue;const a=t[o];s[o]=yc(e,o,a,s[o],n,i,t)}}function dg(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function vc(e,t,n){const r=t.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)e.classList.toggle(r[s],n)}function yc(e,t,n,r,s,i,o){let a,l,c,u,d;if(t==="style")return wo(e,n,r);if(t==="classList")return cg(e,n,r);if(n===r)return r;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const f=t.slice(3);r&&e.removeEventListener(f,r,typeof r!="function"&&r),n&&e.addEventListener(f,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const f=t.slice(10);r&&e.removeEventListener(f,r,!0),n&&e.addEventListener(f,n,!0)}else if(t.slice(0,2)==="on"){const f=t.slice(2).toLowerCase(),m=rg.has(f);if(!m&&r){const w=Array.isArray(r)?r[0]:r;e.removeEventListener(f,w)}(m||n)&&(En(e,f,n,m),m&&tt([f]))}else if(t.slice(0,5)==="attr:")kt(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")lg(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(c=Zh.has(t))||!s&&((u=ng(t,e.tagName))||(l=Xh.has(t)))||(a=e.nodeName.includes("-")||"is"in o))d&&(t=t.slice(5),l=!0),t==="class"||t==="className"?ft(e,n):a&&!l&&!c?e[dg(t)]=n:e[u||t]=n;else{const f=s&&t.indexOf(":")>-1&&sg[t.split(":")[0]];f?ag(e,f,t,n):kt(e,eg[t]||t,n)}return n}function fg(e){let t=e.target;const n=`$$${e.type}`,r=e.target,s=e.currentTarget,i=l=>Object.defineProperty(e,"target",{configurable:!0,value:l}),o=()=>{const l=t[n];if(l&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?l.call(t,c,e):l.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},a=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const l=e.composedPath();i(l[0]);for(let c=0;c<l.length-2&&(t=l[c],!!o());c++){if(t._$host){t=t._$host,a();break}if(t.parentNode===s)break}}else a();i(r)}function xs(e,t,n,r,s){for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,o=r!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(t=t.toString(),t===n))return n;if(o){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=pr(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean")n=pr(e,n,r);else{if(i==="function")return ge(()=>{let a=t();for(;typeof a=="function";)a=a();n=xs(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],l=n&&Array.isArray(n);if(fa(a,t,n,s))return ge(()=>n=xs(e,a,n,r,!0)),()=>n;if(a.length===0){if(n=pr(e,n,r),o)return n}else l?n.length===0?bc(e,a,r):ig(e,n,a):(n&&pr(e),bc(e,a));n=a}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=pr(e,n,r,t);pr(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function fa(e,t,n,r){let s=!1;for(let i=0,o=t.length;i<o;i++){let a=t[i],l=n&&n[e.length],c;if(!(a==null||a===!0||a===!1))if((c=typeof a)=="object"&&a.nodeType)e.push(a);else if(Array.isArray(a))s=fa(e,a,l)||s;else if(c==="function")if(r){for(;typeof a=="function";)a=a();s=fa(e,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||s}else e.push(a),s=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?e.push(l):e.push(document.createTextNode(u))}}return s}function bc(e,t,n=null){for(let r=0,s=t.length;r<s;r++)e.insertBefore(t[r],n)}function pr(e,t,n,r){if(n===void 0)return e.textContent="";const s=r||document.createTextNode("");if(t.length){let i=!1;for(let o=t.length-1;o>=0;o--){const a=t[o];if(s!==a){const l=a.parentNode===e;!i&&!o?l?e.replaceChild(s,a):e.insertBefore(s,n):l&&a.remove()}else i=!0}}else e.insertBefore(s,n);return[s]}const Ju=!1,hg="http://www.w3.org/2000/svg";function gg(e,t=!1,n=void 0){return t?document.createElementNS(hg,e):document.createElement(e,{is:n})}function Qu(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,s=Ba();let i;return Ie(()=>{i||(i=za(s,()=>Fe(()=>e.children)));const o=r();if(o instanceof HTMLHeadElement){const[a,l]=Q(!1),c=()=>l(!0);nr(u=>y(o,()=>a()?u():i(),null)),vt(c)}else{const a=gg(e.isSVG?"g":"div",e.isSVG),l=t&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return n.parentNode},configurable:!0}),y(l,i),o.appendChild(a),e.ref&&e.ref(a),vt(()=>o.removeChild(a))}},void 0,{render:!0}),n}function Ku(){let e=new Set;function t(s){return e.add(s),()=>e.delete(s)}let n=!1;function r(s,i){if(n)return!(n=!1);const o={to:s,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const a of e)a.listener({...o,from:a.location,retry:l=>{l&&(n=!0),a.navigate(s,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:t,confirm:r}}let ha;function Ka(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),ha=window.history.state._depth}Ka();function pg(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function mg(e,t){let n=!1;return()=>{const r=ha;Ka();const s=r==null?null:ha-r;if(n){n=!1;return}s&&t(s)?(n=!0,window.history.go(-s)):e()}}const wg=/^(?:[a-z0-9]+:)?\/\//i,vg=/^\/+|(\/)\/+$/g,Gu="http://sr";function rr(e,t=!1){const n=e.replace(vg,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function _i(e,t,n){if(wg.test(t))return;const r=rr(e),s=n&&rr(n);let i="";return!s||t.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+rr(t,!i)}function yg(e,t){if(e==null)throw new Error(t);return e}function bg(e,t){return rr(e).replace(/\/*(\*.*)?$/g,"")+rr(t)}function Xu(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function xg(e,t,n){const[r,s]=e.split("/*",2),i=r.split("/").filter(Boolean),o=i.length;return a=>{const l=a.split("/").filter(Boolean),c=l.length-o;if(c<0||c>0&&s===void 0&&!t)return null;const u={path:o?"":"/",params:{}},d=f=>n===void 0?void 0:n[f];for(let f=0;f<o;f++){const m=i[f],w=m[0]===":",v=w?l[f]:l[f].toLowerCase(),x=w?m.slice(1):m.toLowerCase();if(w&&Uo(v,d(x)))u.params[x]=v;else if(w||!Uo(v,x))return null;u.path+=`/${v}`}if(s){const f=c?l.slice(-c).join("/"):"";if(Uo(f,d(s)))u.params[s]=f;else return null}return u}}function Uo(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function _g(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Zu(e){const t=new Map,n=Ba();return new Proxy({},{get(r,s){return t.has(s)||za(n,()=>t.set(s,Fe(()=>e()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function kg(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([s,i])=>{i==null||i===""||i instanceof Array&&!i.length?n.delete(s):i instanceof Array?(n.delete(s),i.forEach(o=>{n.append(s,String(o))})):n.set(s,String(i))});const r=n.toString();return r?`?${r}`:""}function ed(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=t[1]),r=r.slice(t[0].length);return ed(r).reduce((i,o)=>[...i,...s.map(a=>a+o)],[])}const $g=100,td=Uu(),Ga=Uu(),qs=()=>yg(Wa(td),"<A> and 'use' router primitives can be only used inside a Route."),Sg=()=>Wa(Ga)||qs().base,Cg=e=>{const t=Sg();return Fe(()=>t.resolvePath(e()))},Eg=e=>{const t=qs();return Fe(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},tn=()=>qs().navigatorFactory(),Xa=()=>qs().location,vo=()=>qs().params,Ag=()=>{const e=Xa(),t=tn(),n=(r,s)=>{const i=_t(()=>kg(e.search,r)+e.hash);t(i,{scroll:!1,resolve:!1,...s})};return[e.query,n]};function Rg(e,t=""){const{component:n,preload:r,load:s,children:i,info:o}=e,a=!i||Array.isArray(i)&&!i.length,l={key:e,component:n,preload:r||s,info:o};return nd(e.path).reduce((c,u)=>{for(const d of ed(u)){const f=bg(t,d);let m=a?f:f.split("/*",1)[0];m=m.split("/").map(w=>w.startsWith(":")||w.startsWith("*")?w:encodeURIComponent(w)).join("/"),c.push({...l,originalPath:u,pattern:m,matcher:xg(m,!a,e.matchFilters)})}return c},[])}function Tg(e,t=0){return{routes:e,score:_g(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let s=e.length-1;s>=0;s--){const i=e[s],o=i.matcher(n);if(!o)return null;r.unshift({...o,route:i})}return r}}}function nd(e){return Array.isArray(e)?e:[e]}function rd(e,t="",n=[],r=[]){const s=nd(e);for(let i=0,o=s.length;i<o;i++){const a=s[i];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Rg(a,t);for(const c of l){n.push(c);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)rd(a.children,c.pattern,n,r);else{const d=Tg([...n],r.length);r.push(d)}n.pop()}}}return n.length?r:r.sort((i,o)=>o.score-i.score)}function Io(e,t){for(let n=0,r=e.length;n<r;n++){const s=e[n].matcher(t);if(s)return s}return[]}function Pg(e,t,n){const r=new URL(Gu),s=Fe(u=>{const d=e();try{return new URL(d,r)}catch{return console.error(`Invalid path ${d}`),u}},r,{equals:(u,d)=>u.href===d.href}),i=Fe(()=>s().pathname),o=Fe(()=>s().search,!0),a=Fe(()=>s().hash),l=()=>"",c=Ia(o,()=>Xu(s()));return{get pathname(){return i()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return l()},query:n?n(c):Zu(c)}}let zn;function jg(){return zn}function Lg(e,t,n,r={}){const{signal:[s,i],utils:o={}}=e,a=o.parsePath||(O=>O),l=o.renderPath||(O=>O),c=o.beforeLeave||Ku(),u=_i("",r.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!s().value&&i({value:u,replace:!0,scroll:!1});const[d,f]=Q(!1);let m;const w=(O,X)=>{X.value===v()&&X.state===E()||(m===void 0&&f(!0),zn=O,m=X,Vh(()=>{m===X&&(x(m.value),_(m.state),U[1](ne=>ne.filter(K=>K.pending)))}).finally(()=>{m===X&&Mi(()=>{zn=void 0,O==="navigate"&&M(m),f(!1),m=void 0})}))},[v,x]=Q(s().value),[E,_]=Q(s().state),A=Pg(v,E,o.queryWrapper),j=[],U=Q([]),q=Fe(()=>typeof r.transformUrl=="function"?Io(t(),r.transformUrl(A.pathname)):Io(t(),A.pathname)),T=()=>{const O=q(),X={};for(let ne=0;ne<O.length;ne++)Object.assign(X,O[ne].params);return X},g=o.paramsWrapper?o.paramsWrapper(T,t):Zu(T),p={pattern:u,path:()=>u,outlet:()=>null,resolvePath(O){return _i(u,O)}};return ge(Ia(s,O=>w("native",O),{defer:!0})),{base:p,location:A,params:g,isRouting:d,renderPath:l,parsePath:a,navigatorFactory:C,matches:q,beforeLeave:c,preloadRoute:N,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:U};function b(O,X,ne){_t(()=>{if(typeof X=="number"){X&&(o.go?o.go(X):console.warn("Router integration does not support relative routing"));return}const K=!X||X[0]==="?",{replace:H,resolve:L,scroll:ee,state:z}={replace:!1,resolve:!K,scroll:!0,...ne},B=L?O.resolvePath(X):_i(K&&A.pathname||"",X);if(B===void 0)throw new Error(`Path '${X}' is not a routable path`);if(j.length>=$g)throw new Error("Too many redirects");const F=v();(B!==F||z!==E())&&(Ju||c.confirm(B,ne)&&(j.push({value:F,replace:H,scroll:ee,state:E()}),w("navigate",{value:B,state:z})))})}function C(O){return O=O||Wa(Ga)||p,(X,ne)=>b(O,X,ne)}function M(O){const X=j[0];X&&(i({...O,replace:X.replace,scroll:X.scroll}),j.length=0)}function N(O,X){const ne=Io(t(),O.pathname),K=zn;zn="preload";for(let H in ne){const{route:L,params:ee}=ne[H];L.component&&L.component.preload&&L.component.preload();const{preload:z}=L;X&&z&&za(n(),()=>z({params:ee,location:{pathname:O.pathname,search:O.search,hash:O.hash,query:Xu(O),state:null,key:""},intent:"preload"}))}zn=K}}function Mg(e,t,n,r){const{base:s,location:i,params:o}=e,{pattern:a,component:l,preload:c}=r().route,u=Fe(()=>r().path);l&&l.preload&&l.preload();const d=c?c({params:o,location:i,intent:zn||"initial"}):void 0;return{parent:t,pattern:a,path:u,outlet:()=>l?k(l,{params:o,location:i,data:d,get children(){return n()}}):n(),resolvePath(m){return _i(s.path(),m,u())}}}const Og=e=>t=>{const{base:n}=t,r=Ya(()=>t.children),s=Fe(()=>rd(r(),t.base||""));let i;const o=Lg(e,s,()=>i,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(o),k(td.Provider,{value:o,get children(){return k(Ng,{routerState:o,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[et(()=>(i=Ba())&&null),k(Dg,{routerState:o,get branches(){return s()}})]}})}})};function Ng(e){const t=e.routerState.location,n=e.routerState.params,r=Fe(()=>e.preload&&_t(()=>{e.preload({params:n,location:t,intent:jg()||"initial"})}));return k(_e,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:s=>k(s,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Dg(e){const t=[];let n;const r=Fe(Ia(e.routerState.matches,(s,i,o)=>{let a=i&&s.length===i.length;const l=[];for(let c=0,u=s.length;c<u;c++){const d=i&&i[c],f=s[c];o&&d&&f.route.key===d.route.key?l[c]=o[c]:(a=!1,t[c]&&t[c](),nr(m=>{t[c]=m,l[c]=Mg(e.routerState,l[c-1]||e.routerState.base,xc(()=>r()[c+1]),()=>e.routerState.matches()[c])}))}return t.splice(s.length).forEach(c=>c()),o&&a?o:(n=l[0],l)}));return xc(()=>r()&&n)()}const xc=e=>()=>k(_e,{get when(){return e()},keyed:!0,children:t=>k(Ga.Provider,{value:t,get children(){return t.outlet()}})}),Ct=e=>{const t=Ya(()=>e.children);return Ae(e,{get children(){return t()}})};function qg([e,t],n,r){return[e,r?s=>t(r(s)):t]}function Fg(e){let t=!1;const n=s=>typeof s=="string"?{value:s}:s,r=qg(Q(n(e.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!t&&e.set(s),s));return e.init&&vt(e.init((s=e.get())=>{t=!0,r[1](n(s)),t=!1})),Og({signal:r,create:e.create,utils:e.utils})}function Vg(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Ug(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const Ig=new Map;function Hg(e=!0,t=!1,n="/_server",r){return s=>{const i=s.base.path(),o=s.navigatorFactory(s.base);let a,l;function c(v){return v.namespaceURI==="http://www.w3.org/2000/svg"}function u(v){if(v.defaultPrevented||v.button!==0||v.metaKey||v.altKey||v.ctrlKey||v.shiftKey)return;const x=v.composedPath().find(q=>q instanceof Node&&q.nodeName.toUpperCase()==="A");if(!x||t&&!x.hasAttribute("link"))return;const E=c(x),_=E?x.href.baseVal:x.href;if((E?x.target.baseVal:x.target)||!_&&!x.hasAttribute("state"))return;const j=(x.getAttribute("rel")||"").split(/\s+/);if(x.hasAttribute("download")||j&&j.includes("external"))return;const U=E?new URL(_,document.baseURI):new URL(_);if(!(U.origin!==window.location.origin||i&&U.pathname&&!U.pathname.toLowerCase().startsWith(i.toLowerCase())))return[x,U]}function d(v){const x=u(v);if(!x)return;const[E,_]=x,A=s.parsePath(_.pathname+_.search+_.hash),j=E.getAttribute("state");v.preventDefault(),o(A,{resolve:!1,replace:E.hasAttribute("replace"),scroll:!E.hasAttribute("noscroll"),state:j?JSON.parse(j):void 0})}function f(v){const x=u(v);if(!x)return;const[E,_]=x;r&&(_.pathname=r(_.pathname)),s.preloadRoute(_,E.getAttribute("preload")!=="false")}function m(v){clearTimeout(a);const x=u(v);if(!x)return l=null;const[E,_]=x;l!==E&&(r&&(_.pathname=r(_.pathname)),a=setTimeout(()=>{s.preloadRoute(_,E.getAttribute("preload")!=="false"),l=E},20))}function w(v){if(v.defaultPrevented)return;let x=v.submitter&&v.submitter.hasAttribute("formaction")?v.submitter.getAttribute("formaction"):v.target.getAttribute("action");if(!x)return;if(!x.startsWith("https://action/")){const _=new URL(x,Gu);if(x=s.parsePath(_.pathname+_.search),!x.startsWith(n))return}if(v.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const E=Ig.get(x);if(E){v.preventDefault();const _=new FormData(v.target,v.submitter);E.call({r:s,f:v.target},v.target.enctype==="multipart/form-data"?_:new URLSearchParams(_))}}tt(["click","submit"]),document.addEventListener("click",d),e&&(document.addEventListener("mousemove",m,{passive:!0}),document.addEventListener("focusin",f,{passive:!0}),document.addEventListener("touchstart",f,{passive:!0})),document.addEventListener("submit",w),vt(()=>{document.removeEventListener("click",d),e&&(document.removeEventListener("mousemove",m),document.removeEventListener("focusin",f),document.removeEventListener("touchstart",f)),document.removeEventListener("submit",w)})}}function Bg(e){const t=()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,s=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:s}},n=Ku();return Fg({get:t,set({value:r,replace:s,scroll:i,state:o}){s?window.history.replaceState(pg(o),"",r):window.history.pushState(o,"",r),Ug(decodeURIComponent(window.location.hash.slice(1)),i),Ka()},init:r=>Vg(window,"popstate",mg(r,s=>{if(s&&s<0)return!n.confirm(s);{const i=t();return!n.confirm(i.value,{state:i.state})}})),create:Hg(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(e)}var zg=I("<a>");function kr(e){e=Ae({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=Wu(e,["href","state","class","activeClass","inactiveClass","end"]),n=Cg(()=>e.href),r=Eg(n),s=Xa(),i=Fe(()=>{const o=n();if(o===void 0)return[!1,!1];const a=rr(o.split(/[?#]/,1)[0]).toLowerCase(),l=decodeURI(rr(s.pathname).toLowerCase());return[e.end?a===l:l.startsWith(a+"/")||l===a,a===l]});return(()=>{var o=zg();return wt(o,Ae(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!i()[0],[e.activeClass]:i()[0],...t.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1,!1),o})()}const ga=Symbol("store-raw"),Er=Symbol("store-node"),un=Symbol("store-has"),sd=Symbol("store-self");function id(e){let t=e[Bt];if(!t&&(Object.defineProperty(e,Bt,{value:t=new Proxy(e,Jg)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,i=n.length;s<i;s++){const o=n[s];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function Di(e){let t;return e!=null&&typeof e=="object"&&(e[Bt]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function _s(e,t=new Set){let n,r,s,i;if(n=e!=null&&e[ga])return n;if(!Di(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,a=e.length;o<a;o++)s=e[o],(r=_s(s,t))!==s&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),a=Object.getOwnPropertyDescriptors(e);for(let l=0,c=o.length;l<c;l++)i=o[l],!a[i].get&&(s=e[i],(r=_s(s,t))!==s&&(e[i]=r))}return e}function qi(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ks(e,t,n){if(e[t])return e[t];const[r,s]=Q(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function Wg(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Bt||t===Er||(delete n.value,delete n.writable,n.get=()=>e[Bt][t]),n}function od(e){ca()&&ks(qi(e,Er),sd)()}function Yg(e){return od(e),Reflect.ownKeys(e)}const Jg={get(e,t,n){if(t===ga)return e;if(t===Bt)return n;if(t===la)return od(e),n;const r=qi(e,Er),s=r[t];let i=s?s():e[t];if(t===Er||t===un||t==="__proto__")return i;if(!s){const o=Object.getOwnPropertyDescriptor(e,t);ca()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(i=ks(r,t,i)())}return Di(i)?id(i):i},has(e,t){return t===ga||t===Bt||t===la||t===Er||t===un||t==="__proto__"?!0:(ca()&&ks(qi(e,un),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Yg,getOwnPropertyDescriptor:Wg};function Fi(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],i=e.length;n===void 0?(delete e[t],e[un]&&e[un][t]&&s!==void 0&&e[un][t].$()):(e[t]=n,e[un]&&e[un][t]&&s===void 0&&e[un][t].$());let o=qi(e,Er),a;if((a=ks(o,t,s))&&a.$(()=>n),Array.isArray(e)&&e.length!==i){for(let l=e.length;l<i;l++)(a=o[l])&&a.$();(a=ks(o,"length",i))&&a.$(e.length)}(a=o[sd])&&a.$()}function ad(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];Fi(e,s,t[s])}}function Qg(e,t){if(typeof t=="function"&&(t=t(e)),t=_s(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&Fi(e,n,s)}Fi(e,"length",r)}else ad(e,t)}function Xr(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const o=typeof r,a=Array.isArray(e);if(Array.isArray(r)){for(let l=0;l<r.length;l++)Xr(e,[r[l]].concat(t),n);return}else if(a&&o==="function"){for(let l=0;l<e.length;l++)r(e[l],l)&&Xr(e,[l].concat(t),n);return}else if(a&&o==="object"){const{from:l=0,to:c=e.length-1,by:u=1}=r;for(let d=l;d<=c;d+=u)Xr(e,[d].concat(t),n);return}else if(t.length>1){Xr(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let i=t[0];typeof i=="function"&&(i=i(s,n),i===s)||r===void 0&&i==null||(i=_s(i),r===void 0||Di(s)&&Di(i)&&!Array.isArray(i)?ad(s,i):Fi(e,r,i))}function ld(...[e,t]){const n=_s(e||{}),r=Array.isArray(n),s=id(n);function i(...o){Mi(()=>{r&&o.length===1?Qg(n,o[0]):Xr(n,o)})}return[s,i]}var Kg=I('<svg class="w-5 h-5 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 6v6m0 0v6m0-6h6m-6 0H6">'),Gg=I('<svg class="w-5 h-5 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10">'),Xg=I('<main class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50"><div class="flex flex-col items-center justify-center min-h-screen px-4"><div class="max-w-4xl w-full text-center"><div class=mb-8><div class="mx-auto w-20 h-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg"><svg class="w-10 h-10 text-white"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h1 class="text-6xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent">CoRATES</h1><p class="text-xl md:text-2xl text-gray-600 mb-4 font-medium">Collaborative Research Appraisal Tool for Evidence Synthesis</p><p class="text-lg text-gray-500 mb-12 max-w-2xl mx-auto leading-relaxed">Streamline your systematic review process with our interactive AMSTAR 2 checklist tool. Create, score, and visualize research appraisals with confidence.</p><div class="flex flex-col sm:flex-row gap-4 justify-center mb-16"></div></div></div><div class="py-20 px-4 bg-white/50 backdrop-blur-sm"><div class="max-w-6xl mx-auto"><h2 class="text-3xl md:text-4xl font-bold text-center mb-16 text-gray-800">Why Choose CoRATES?</h2><div class="grid md:grid-cols-3 gap-8"><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-blue-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Works Offline</h3><p class="text-gray-600 leading-relaxed">Complete your assessments anywhere, anytime. No internet connection required once loaded.</p></div><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-green-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Auto-Save</h3><p class="text-gray-600 leading-relaxed">Never lose your progress. Your work is automatically saved as you go.</p></div><div class="text-center p-8 rounded-2xl bg-white shadow-lg hover:shadow-xl transition-shadow duration-300 border border-gray-100"><div class="w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-6"><svg class="w-8 h-8 text-purple-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></div><h3 class="text-xl font-semibold mb-4 text-gray-800">Visual Results</h3><p class="text-gray-600 leading-relaxed">Generate clear, professional charts and summaries of your AMSTAR 2 assessments.</p></div></div></div></div><div class="py-20 px-4"><div class="max-w-4xl mx-auto text-center"><h2 class="text-3xl md:text-4xl font-bold mb-8 text-gray-800">About AMSTAR 2</h2><p class="text-lg text-gray-600 leading-relaxed mb-8">AMSTAR 2 (A MeaSurement Tool to Assess systematic Reviews) is a critical appraisal tool for systematic reviews that include randomized or non-randomized studies of healthcare interventions.</p><div class="bg-blue-50 rounded-2xl p-8 border border-blue-100"><p class="text-blue-800 font-medium">Our tool makes it easy to apply the 16 AMSTAR 2 criteria to evaluate the methodological quality of systematic reviews, helping researchers make informed decisions about evidence quality.</p></div></div></div><footer class="py-12 px-4 bg-gray-50 border-t border-gray-200"><div class="max-w-4xl mx-auto text-center"><div class="flex flex-col sm:flex-row items-center justify-center gap-6 text-sm text-gray-500"><a href=https://github.com/InfinityBowman/amstar2-checklist-scoring-app target=_blank rel=noopener class="flex items-center gap-2 hover:text-blue-600 transition-colors duration-200"><svg class="w-4 h-4"fill=currentColor viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>View on GitHub</a><span class=text-gray-300>•</span><span>Built for researchers, by researchers</span><span class=text-gray-300>•</span><span>Free & Open Source');function Zg(){return(()=>{var e=Xg(),t=e.firstChild,n=t.firstChild,r=n.firstChild,s=r.nextSibling,i=s.nextSibling,o=i.nextSibling,a=o.nextSibling;return y(a,k(kr,{href:"/checklist/new",class:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-indigo-700 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",get children(){return[Kg(),"Start New Checklist"]}}),null),y(a,k(kr,{href:"/dashboard",class:"inline-flex items-center px-8 py-4 bg-white text-gray-700 font-semibold rounded-xl border-2 border-gray-200 hover:border-blue-300 hover:text-blue-600 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl",get children(){return[Gg(),"View Saved Work"]}}),null),e})()}const ht={q1:{text:"1. Did the research questions and inclusion criteria for the review include the components of PICO?",columns:[{label:"For Yes:",options:["Population","Intervention","Comparator group","Outcome"]},{label:"Optional (recommended):",options:["Timeframe for follow-up"]},{label:"",options:["Yes","No"]}]},q2:{text:"2. Did the report of the review contain an explicit statement that the review methods were established prior to the conduct of the review and did the report justify any significant deviations from the protocol?",columns:[{label:"For Partial Yes:",description:"The authors state that they had a written protocol or guide that included ALL the following:",options:["review question(s)","a search strategy","inclusion/exclusion criteria","risk of bias assessment"]},{label:"For Yes:",description:"As for Partial Yes, plus the protocol should be registered and should also have specified:",options:["a meta-analysis/synthesis plan, if appropriate, and","a plan for investigating causes of heterogeneity","a plan for investigating causes of heterogeneity"]},{label:"",description:"",options:["Yes","Partial Yes","No"]}]},q3:{text:"3. Did the review authors explain their selection of the study designs for inclusion in the review?",columns:[{label:"For Yes, the review should satisfy ONE of the following:",options:["Explanation for including only RCTs ","OR Explanation for including only NRSI","OR Explanation for including both RCTs and NRSI"]},{label:"",options:["Yes","No"]}]},q4:{text:"4. Did the review authors use a comprehensive literature search strategy? ",columns:[{label:"For Partial Yes (all the following):",options:["searched at least 2 databases (relevant to research question)","provided key word and/or search strategy","justified publication restrictions (e.g. language)"]},{label:"For Yes, should also have (all the following):",options:["searched the reference lists / bibliographies of included studies","searched trial/study registries","included/consulted content experts in the field","where relevant, searched for grey literature","conducted search within 24 months of completion of the review"]},{label:"",options:["Yes","Partial Yes","No"]}]},q5:{text:"5. Did the review authors perform study selection in duplicate?",columns:[{label:"For Yes, either ONE of the following:",options:["at least two reviewers achieved consensus on which data to extract from included studies","OR two reviewers extracted data from a sample of eligible studies and achieved good agreement (at least 80 percent), with the remainder extracted by one reviewer."]},{label:"",options:["Yes","No"]}]},q6:{text:"6. Did the review authors perform data extraction in duplicate?",columns:[{label:"For Yes, either ONE of the following:",options:["at least two reviewers achieved consensus on which data to extract from included studies","OR two reviewers extracted data from a sample of eligible studies and achieved good agreement (at least 80 percent), with the remainder extracted by one reviewer."]},{label:"",options:["Yes","No"]}]},q7:{text:"7. Did the review authors provide a list of excluded studies and justify the exclusions?",columns:[{label:"For Partial Yes:",options:["provided a list of all potentially relevant studies that were read in full-text form but excluded from the review"]},{label:"For Yes, must also have:",options:["Justified the exclusion from the review of each potentially relevant study"]},{label:"",options:["Yes","Partial Yes","No"]}]},q8:{text:"8. Did the review authors describe the included studies in adequate detail?",columns:[{label:"For Partial Yes (ALL the following):",options:["described populations","described interventions","described comparators","described outcomes","described research designs"]},{label:"For Yes, should also have ALL the following:",options:["described population in detail","described comparator in detail (including doses where relevant)","described study’s setting in detail","timeframe for follow-up"]},{label:"",options:["Yes","Partial Yes","No"]}]},q9:{text:"9. Did the review authors use a satisfactory technique for assessing the risk of bias (RoB) in individual studies that were included in the review?",subtitle:"RCTs",columns:[{label:"For Partial Yes, must have assessed RoB from",options:["unconcealed allocation, and","lack of blinding of patients and assessors when assessing outcomes (unnecessary for objective outcomes such as all-cause mortality)"]},{label:"For Yes, must also have assessed RoB from:",options:["allocation sequence that was not truly random, and","selection of the reported result from among multiple measurements or analyses of a specified outcome"]},{label:"",description:"",options:["Yes","Partial Yes","No"," Includes only NRSI"]}],subtitle2:"NRSI",columns2:[{label:"For Partial Yes, must have assessed RoB:",options:["from confounding, and","from selection bias"]},{label:"For Yes, must also have assessed RoB:",options:["methods used to ascertain exposures and outcomes, and","selection of the reported result from among multiple measurements or analyses of a specified outcome"]},{label:"",options:["Yes","Partial Yes","No","Includes only RCTs"]}]},q10:{text:"10. Did the review authors report on the sources of funding for the studies included in the review?",columns:[{label:"For Yes:",options:["Must have reported on the sources of funding for individual studies included in the review. Note: Reporting that the reviewers looked for this information but it was not reported by study authors also qualifies"]},{label:"",options:["Yes","No"]}]},q11:{text:"11. If meta-analysis was performed did the review authors use appropriate methods for statistical combination of results?",subtitle:"RCTs",columns:[{label:"For Yes:",options:["The authors justified combining the data in a meta-analysis","AND they used an appropriate weighted technique to combine study results and adjusted for heterogeneity if present.","AND investigated the causes of any heterogeneity"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}],subtitle2:"NRSI",columns2:[{label:"For Yes:",options:["The authors justified combining the data in a meta-analysis","AND they used an appropriate weighted technique to combine study results, adjusting for heterogeneity if present","AND they statistically combined effect estimates from NRSI that were adjusted for confounding, rather than combining raw data, or justified combining raw data when adjusted effect estimates were not available","AND they reported separate summary estimates for RCTs and NRSI separately when both were included in the review"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q12:{text:"12. If meta-analysis was performed, did the review authors assess the potential impact of RoB in individual studies on the results of the meta-analysis or other evidence synthesis?",columns:[{label:"For Yes:",options:["included only low risk of bias RCTs","OR, if the pooled estimate was based on RCTs and/or NRSI at variable RoB, the authors performed analyses to investigate possible impact of RoB on summary estimates of effect."]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q13:{text:"13. Did the review authors account for RoB in individual studies when interpreting/ discussing the results of the review?",columns:[{label:"For Yes:",options:["included only low risk of bias RCTs","OR, if RCTs with moderate or high RoB, or NRSI were included the review provided a discussion of the likely impact of RoB on the results"]},{label:"",options:["Yes","No"]}]},q14:{text:"14. Did the review authors provide a satisfactory explanation for, and discussion of, any heterogeneity observed in the results of the review?",columns:[{label:"For Yes:",options:["There was no significant heterogeneity in the results","OR if heterogeneity was present the authors performed an investigation of sources of any heterogeneity in the results and discussed the impact of this on the results of the review"]},{label:"",options:["Yes","No"]}]},q15:{text:"15. If they performed quantitative synthesis did the review authors carry out an adequate investigation of publication bias (small study bias) and discuss its likely impact on the results of the review?",columns:[{label:"For Yes:",options:["performed graphical or statistical tests for publication bias and discussed the likelihood and magnitude of impact of publication bias"]},{label:"",options:["Yes","No","No meta-analysis conducted"]}]},q16:{text:"16. Did the review authors report any potential sources of conflict of interest, including any funding they received for conducting the review?",options:["Yes","Partial Yes","No"],columns:[{label:"For Yes:",options:["The authors reported no competing interests OR","The authors described their funding sources and how they managed potential conflicts of interest"]},{label:"",options:["Yes","No"]}]}},e0="modulepreload",t0=function(e){return"/amstar2-checklist-scoring-app/"+e},_c={},kc=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=l(n.map(c=>{if(c=t0(c),c in _c)return;_c[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":e0,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,w)=>{f.addEventListener("load",m),f.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},n0="corates-app-db",Tn="checklists",en="projects",r0=1,cd=new BroadcastChannel("corates-sync");function yo(){cd.postMessage("initiate-sync")}function s0(e){cd.onmessage=t=>{t.data==="initiate-sync"&&e()}}function Pr(e){return JSON.parse(JSON.stringify(e))}function dr(){return new Promise((e,t)=>{const n=indexedDB.open(n0,r0);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Tn)||r.createObjectStore(Tn,{keyPath:"id"}),r.objectStoreNames.contains(en)||r.createObjectStore(en,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})}async function ud(e){const t=await dr();return e=Pr(e),new Promise((n,r)=>{const s=t.transaction(Tn,"readwrite");s.objectStore(Tn).put(e),s.oncomplete=()=>{n(),yo()},s.onerror=()=>r(s.error)})}async function dd(){const e=await dr();return new Promise((t,n)=>{const i=e.transaction(Tn,"readonly").objectStore(Tn).getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)})}async function i0(e){const t=await dr();return new Promise((n,r)=>{const s=t.transaction(Tn,"readwrite");s.objectStore(Tn).delete(e),s.oncomplete=()=>{n(),yo()},s.onerror=()=>r(s.error)})}async function Ur(e){const t=await dr();return e=Pr(e),new Promise((n,r)=>{const s=t.transaction(en,"readwrite");s.objectStore(en).put(e),s.oncomplete=()=>{n(),yo()},s.onerror=()=>r(s.error)})}async function bo(e){const t=await dr();return new Promise((n,r)=>{const i=t.transaction(en,"readonly").objectStore(en).get(e);i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})}async function fd(){const e=await dr();return new Promise((t,n)=>{const i=e.transaction(en,"readonly").objectStore(en).getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)})}async function hd(e,t,n){try{const r=await bo(e);if(!r)throw new Error(`Project with ID ${e} not found`);r.reviews||(r.reviews=[]);const s=r.reviews.findIndex(a=>a.id===t);if(s===-1)throw new Error(`Review with ID ${t} not found in project ${e}`);const i=r.reviews[s];i.checklists||(i.checklists=[]);const o=i.checklists.findIndex(a=>a.id===n.id);return o>=0?i.checklists[o]=Pr(n):i.checklists.push(Pr(n)),await Ur(r),r}catch(r){throw console.error("Error saving checklist to review:",r),r}}async function o0(e,t,n){try{const r=await bo(e);if(!r)throw new Error(`Project with ID ${e} not found`);r.reviews||(r.reviews=[]);const s=r.reviews.findIndex(a=>a.id===t);if(s===-1)throw new Error(`Review with ID ${t} not found in project ${e}`);const i=r.reviews[s];i.checklists||(i.checklists=[]);const o=i.checklists.length;return i.checklists=i.checklists.filter(a=>a.id!==n),i.checklists.length===o?!1:(await Ur(r),!0)}catch(r){throw console.error("Error deleting checklist from review:",r),r}}async function gd(e,t){try{const n=await bo(e);if(!n)throw new Error(`Project with ID ${e} not found`);n.reviews||(n.reviews=[]);const r=n.reviews.findIndex(s=>s.id===t.id);return r>=0?n.reviews[r]=Pr(t):n.reviews.push(Pr(t)),await Ur(n),n}catch(n){console.error("Error saving review to project:",n)}}async function a0(e,t){try{const n=await bo(e);if(!n)throw new Error(`Project with ID ${e} not found`);n.reviews||(n.reviews=[]);const r=n.reviews.length;return n.reviews=n.reviews.filter(s=>s.id!==t),n.reviews.length===r?!1:(await Ur(n),!0)}catch(n){throw console.error("Error deleting review from project:",n),n}}async function l0(e){const t=await dr();return new Promise((n,r)=>{const s=t.transaction(en,"readwrite");s.objectStore(en).delete(e),s.oncomplete=()=>{n(),yo()},s.onerror=()=>r(s.error)})}async function ki(){const[e,t]=await Promise.all([fd(),dd()]),n=new Set;for(const s of e){n.add(s.id);for(const i of s.reviews||[]){n.add(i.id);for(const o of i.checklists||[])n.add(o.id)}}for(const s of t)n.add(s.id);let r;do r=crypto.randomUUID().split("-")[0];while(n.has(r));return r}const[je,ze]=ld({projects:[],currentProject:null,currentChecklist:null,dataLoading:!0,checklists:[]});async function c0(){try{await pa(),s0(pa)}catch(e){console.error("Error loading data:",e)}finally{ze("dataLoading",!1)}}c0();async function pa(){try{ze("loading",!0);const e=await fd()||[];e.sort((n,r)=>(n.createdAt||0)-(r.createdAt||0)),ze("projects",e);const t=await dd()||[];ze("checklists",t)}catch(e){throw console.error("Error loading IndexedDB data:",e),e}finally{ze("loading",!1)}}async function u0(e){try{return await Ur(e),ze("projects",t=>[...t,e]),e}catch(t){throw console.error("Error adding project:",t),t}}async function d0(e){try{return await l0(e),ze("projects",t=>t.filter(n=>n.id!==e)),je.currentProject?.id===e&&(ze("currentProject",null),ze("currentChecklist",null)),!0}catch(t){throw console.error("Error deleting project:",t),t}}function f0(e){ze("projects",e)}function h0(e){let t=null;if(typeof e=="object"&&e!==null){if("project"in e&&e.project)t={...e.project};else if("id"in e)t=je.projects.find(n=>n.id===e.id);else if("name"in e){const n=je.projects.filter(r=>r.name===e.name);t=n[e.index??0]?{...n[e.index??0]}:null}}else typeof e=="string"&&(t=je.projects.find(n=>n.id===e),t||(t=je.projects.find(n=>n.name===e)),t=t?{...t}:null);ze("currentProject",t)}function g0(e){if(e==null)return ze("currentChecklist",null),!1;const t=pd(e);return ze("currentChecklist",t||null),!!t}async function p0(e,t,n){if(!e||!t)try{return await ud(n),ze("checklists",r=>[...r,n]),n}catch(r){throw console.error("Error adding checklist without project/review:",r),r}try{const r=await hd(e,t,n),s=je.projects.findIndex(i=>i.id===e);if(s!==-1){const i=(je.projects[s].reviews||[]).findIndex(o=>o.id===t);i!==-1&&ze("projects",s,"reviews",i,r.reviews[i])}return n}catch(r){throw console.error("Error adding checklist:",r),r}}async function m0(e){const t=xo(e.id);if(!t)throw console.warn("Could not find checklist to update:",e.id),new Error(`Could not find checklist to update: ${e.id}`);try{const{projectIndex:n,reviewIndex:r,checklistIndex:s,review:i,project:o}=t;if(n>=0)await hd(o.id,i.id,e),ze("projects",n,"reviews",r,"checklists",s,{...e});else{const a=je.checklists.findIndex(l=>l.id===e.id);if(a>=0)await ud(e),ze("checklists",a,{...e});else throw console.warn("Could not find checklist:",e.id),new Error(`Could not find checklist: ${e.id}`)}return je.currentChecklist?.id===e.id&&ze("currentChecklist",{...e}),e}catch(n){throw console.error("Error updating checklist:",n),n}}async function w0(e,t,n){if(!e||!t)try{return await i0(n),ze("checklists",r=>r.filter(s=>s.id!==n)),je.currentChecklist?.id===n&&ze("currentChecklist",null),!0}catch(r){return console.error("Error deleting checklist without project/review:",r),!1}try{await o0(e,t,n);const r=je.projects.findIndex(s=>s.id===e);if(r!==-1){const s=(je.projects[r].reviews||[]).findIndex(i=>i.id===t);s!==-1&&ze("projects",r,"reviews",s,"checklists",i=>i.filter(o=>o.id!==n))}return je.currentChecklist?.id===n&&ze("currentChecklist",null),!0}catch(r){return console.error("Error deleting checklist:",r),!1}}function pd(e){let t=xo(e);return t?.checklist?{...t.checklist}:null}function v0(e,t){let n=xo(e);if(n&&typeof n.checklistIndex=="number")return n.checklistIndex;let r=-1;return e?r=je.checklists.findIndex(s=>s.id===e):t&&(r=je.checklists.findIndex(s=>s.name===t)),r}function xo(e){if(typeof e=="object"&&e!==null){if("checklist"in e&&e.checklist)return xo({id:e.checklist.id});if("id"in e)for(let t=0;t<je.projects.length;t++){const n=je.projects[t];for(let r=0;r<(n.reviews||[]).length;r++){const s=n.reviews[r],i=(s.checklists||[]).findIndex(o=>o.id===e.id);if(i!==-1)return{project:n,projectIndex:t,review:s,reviewIndex:r,checklist:s.checklists[i],checklistIndex:i}}}else if("name"in e){let t=[];for(let n=0;n<je.projects.length;n++){const r=je.projects[n];for(let s=0;s<(r.reviews||[]).length;s++){const i=r.reviews[s];(i.checklists||[]).forEach((o,a)=>{o.name===e.name&&t.push({project:r,projectIndex:n,review:i,reviewIndex:s,checklist:o,checklistIndex:a})})}}return t[e.index??0]||null}}else if(typeof e=="string"){for(let n=0;n<je.projects.length;n++){const r=je.projects[n];for(let s=0;s<(r.reviews||[]).length;s++){const i=r.reviews[s],o=(i.checklists||[]).findIndex(a=>a.id===e);if(o!==-1)return{project:r,projectIndex:n,review:i,reviewIndex:s,checklist:i.checklists[o],checklistIndex:o}}}let t=[];for(let n=0;n<je.projects.length;n++){const r=je.projects[n];for(let s=0;s<(r.reviews||[]).length;s++){const i=r.reviews[s];(i.checklists||[]).forEach((o,a)=>{o.name===e&&t.push({project:r,projectIndex:n,review:i,reviewIndex:s,checklist:o,checklistIndex:a})})}}return t[0]||null}return null}async function y0(e,t){try{const n=je.projects.findIndex(s=>s.id===e);if(n===-1)throw new Error("Project not found");const r=await gd(e,t);return ze("projects",n,r),t}catch(n){throw console.error("Error adding review:",n),n}}async function b0(e,t){try{const n=je.projects.findIndex(s=>s.id===e);if(n===-1)throw new Error("Project not found");const r=await gd(e,t);return ze("projects",n,r),t}catch(n){throw console.error("Error updating review:",n),n}}async function x0(e,t){try{const n=je.projects.findIndex(s=>s.id===e);if(n===-1)throw new Error("Project not found");if(!await a0(e,t))throw new Error("Review not found or could not be deleted");return ze("projects",n,s=>({...s,reviews:(s.reviews||[]).filter(i=>i.id!==t)})),!0}catch(n){throw console.error("Error deleting review:",n),n}}function Ir(){return{projects:()=>je.projects,currentProject:()=>je.currentProject,currentChecklist:()=>je.currentChecklist,dataLoading:()=>je.dataLoading,checklists:()=>je.checklists,loadData:pa,setProjects:f0,addProject:u0,deleteProject:d0,setCurrentProject:h0,setCurrentChecklist:g0,addChecklist:p0,updateChecklist:m0,deleteChecklist:w0,getChecklist:pd,getChecklistIndex:v0,addReview:y0,updateReview:b0,deleteReview:x0,searchUsers:async(e,t=10)=>{const{searchUsers:n}=await kc(async()=>{const{searchUsers:r}=await import("./AppStore.api-BNN_Z6Yy.js");return{searchUsers:r}},[]);return n(e,t)},addUserToProjectByEmail:async(e,t)=>{const{addUserToProjectByEmail:n}=await kc(async()=>{const{addUserToProjectByEmail:r}=await import("./AppStore.api-BNN_Z6Yy.js");return{addUserToProjectByEmail:r}},[]);return n(e,t)}}}var $i={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var _0=$i.exports,$c;function k0(){return $c||($c=1,(function(e,t){((n,r)=>{e.exports=r()})(_0,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},s,i=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,a={},l=0,c={};function u(g){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(p){var b=U(p);b.chunkSize=parseInt(b.chunkSize),p.step||p.chunk||(b.chunkSize=null),this._handle=new v(b),(this._handle.streamer=this)._config=b}.call(this,g),this.parseChunk=function(p,b){var C=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<C){let N=this._config.newline;N||(M=this._config.quoteChar||'"',N=this._handle.guessLineEndings(p,M)),p=[...p.split(N).slice(C)].join(N)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&(M=this._config.beforeFirstChunk(p))!==void 0&&(p=M),this.isFirstChunk=!1,this._halted=!1;var C=this._partialLine+p,M=(this._partialLine="",this._handle.parse(C,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(p=M.meta.cursor,C=(this._finished||(this._partialLine=C.substring(p-this._baseIndex),this._baseIndex=p),M&&M.data&&(this._rowCount+=M.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:M,workerId:c.WORKER_ID,finished:C});else if(T(this._config.chunk)&&!b){if(this._config.chunk(M,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=M=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(M.data),this._completeResults.errors=this._completeResults.errors.concat(M.errors),this._completeResults.meta=M.meta),this._completed||!C||!T(this._config.complete)||M&&M.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),C||M&&M.meta.paused||this._nextChunk(),M}this._halted=!0},this._sendError=function(p){T(this._config.error)?this._config.error(p):o&&this._config.error&&r.postMessage({workerId:c.WORKER_ID,error:p,finished:!1})}}function d(g){var p;(g=g||{}).chunkSize||(g.chunkSize=c.RemoteChunkSize),u.call(this,g),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(b){this._input=b,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(p=new XMLHttpRequest,this._config.withCredentials&&(p.withCredentials=this._config.withCredentials),i||(p.onload=q(this._chunkLoaded,this),p.onerror=q(this._chunkError,this)),p.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var b,C=this._config.downloadRequestHeaders;for(b in C)p.setRequestHeader(b,C[b])}var M;this._config.chunkSize&&(M=this._start+this._config.chunkSize-1,p.setRequestHeader("Range","bytes="+this._start+"-"+M));try{p.send(this._config.downloadRequestBody)}catch(N){this._chunkError(N.message)}i&&p.status===0&&this._chunkError()}},this._chunkLoaded=function(){p.readyState===4&&(p.status<200||400<=p.status?this._chunkError():(this._start+=this._config.chunkSize||p.responseText.length,this._finished=!this._config.chunkSize||this._start>=(b=>(b=b.getResponseHeader("Content-Range"))!==null?parseInt(b.substring(b.lastIndexOf("/")+1)):-1)(p),this.parseChunk(p.responseText)))},this._chunkError=function(b){b=p.statusText||b,this._sendError(new Error(b))}}function f(g){(g=g||{}).chunkSize||(g.chunkSize=c.LocalChunkSize),u.call(this,g);var p,b,C=typeof FileReader<"u";this.stream=function(M){this._input=M,b=M.slice||M.webkitSlice||M.mozSlice,C?((p=new FileReader).onload=q(this._chunkLoaded,this),p.onerror=q(this._chunkError,this)):p=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var M=this._input,N=(this._config.chunkSize&&(N=Math.min(this._start+this._config.chunkSize,this._input.size),M=b.call(M,this._start,N)),p.readAsText(M,this._config.encoding));C||this._chunkLoaded({target:{result:N}})},this._chunkLoaded=function(M){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(M.target.result)},this._chunkError=function(){this._sendError(p.error)}}function m(g){var p;u.call(this,g=g||{}),this.stream=function(b){return p=b,this._nextChunk()},this._nextChunk=function(){var b,C;if(!this._finished)return b=this._config.chunkSize,p=b?(C=p.substring(0,b),p.substring(b)):(C=p,""),this._finished=!p,this.parseChunk(C)}}function w(g){u.call(this,g=g||{});var p=[],b=!0,C=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(M){this._input=M,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&p.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),p.length?this.parseChunk(p.shift()):b=!0},this._streamData=q(function(M){try{p.push(typeof M=="string"?M:M.toString(this._config.encoding)),b&&(b=!1,this._checkIsFinished(),this.parseChunk(p.shift()))}catch(N){this._streamError(N)}},this),this._streamError=q(function(M){this._streamCleanUp(),this._sendError(M)},this),this._streamEnd=q(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=q(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function v(g){var p,b,C,M,N=Math.pow(2,53),O=-N,X=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ne=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,K=this,H=0,L=0,ee=!1,z=!1,B=[],F={data:[],errors:[],meta:{}};function oe(ae){return g.skipEmptyLines==="greedy"?ae.join("").trim()==="":ae.length===1&&ae[0].length===0}function ce(){if(F&&C&&(ke("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),C=!1),g.skipEmptyLines&&(F.data=F.data.filter(function(P){return!oe(P)})),we()){let P=function(W,se){T(g.transformHeader)&&(W=g.transformHeader(W,se)),B.push(W)};if(F)if(Array.isArray(F.data[0])){for(var ae=0;we()&&ae<F.data.length;ae++)F.data[ae].forEach(P);F.data.splice(0,1)}else F.data.forEach(P)}function re(P,W){for(var se=g.header?{}:[],G=0;G<P.length;G++){var pe=G,le=P[G],le=((de,J)=>(fe=>(g.dynamicTypingFunction&&g.dynamicTyping[fe]===void 0&&(g.dynamicTyping[fe]=g.dynamicTypingFunction(fe)),(g.dynamicTyping[fe]||g.dynamicTyping)===!0))(de)?J==="true"||J==="TRUE"||J!=="false"&&J!=="FALSE"&&((fe=>{if(X.test(fe)&&(fe=parseFloat(fe),O<fe&&fe<N))return 1})(J)?parseFloat(J):ne.test(J)?new Date(J):J===""?null:J):J)(pe=g.header?G>=B.length?"__parsed_extra":B[G]:pe,le=g.transform?g.transform(le,pe):le);pe==="__parsed_extra"?(se[pe]=se[pe]||[],se[pe].push(le)):se[pe]=le}return g.header&&(G>B.length?ke("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+G,L+W):G<B.length&&ke("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+G,L+W)),se}var R;F&&(g.header||g.dynamicTyping||g.transform)&&(R=1,!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(re),R=F.data.length):F.data=re(F.data,0),g.header&&F.meta&&(F.meta.fields=B),L+=R)}function we(){return g.header&&B.length===0}function ke(ae,re,R,P){ae={type:ae,code:re,message:R},P!==void 0&&(ae.row=P),F.errors.push(ae)}T(g.step)&&(M=g.step,g.step=function(ae){F=ae,we()?ce():(ce(),F.data.length!==0&&(H+=ae.data.length,g.preview&&H>g.preview?b.abort():(F.data=F.data[0],M(F,K))))}),this.parse=function(ae,re,R){var P=g.quoteChar||'"',P=(g.newline||(g.newline=this.guessLineEndings(ae,P)),C=!1,g.delimiter?T(g.delimiter)&&(g.delimiter=g.delimiter(ae),F.meta.delimiter=g.delimiter):((P=((W,se,G,pe,le)=>{var de,J,fe,rt;le=le||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var lt=0;lt<le.length;lt++){for(var Xe,it=le[lt],We=0,nt=0,He=0,Ye=(fe=void 0,new E({comments:pe,delimiter:it,newline:se,preview:10}).parse(W)),pt=0;pt<Ye.data.length;pt++)G&&oe(Ye.data[pt])?He++:(Xe=Ye.data[pt].length,nt+=Xe,fe===void 0?fe=Xe:0<Xe&&(We+=Math.abs(Xe-fe),fe=Xe));0<Ye.data.length&&(nt/=Ye.data.length-He),(J===void 0||We<=J)&&(rt===void 0||rt<nt)&&1.99<nt&&(J=We,de=it,rt=nt)}return{successful:!!(g.delimiter=de),bestDelimiter:de}})(ae,g.newline,g.skipEmptyLines,g.comments,g.delimitersToGuess)).successful?g.delimiter=P.bestDelimiter:(C=!0,g.delimiter=c.DefaultDelimiter),F.meta.delimiter=g.delimiter),U(g));return g.preview&&g.header&&P.preview++,p=ae,b=new E(P),F=b.parse(p,re,R),ce(),ee?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return ee},this.pause=function(){ee=!0,b.abort(),p=T(g.chunk)?"":p.substring(b.getCharIndex())},this.resume=function(){K.streamer._halted?(ee=!1,K.streamer.parseChunk(p,!0)):setTimeout(K.resume,3)},this.aborted=function(){return z},this.abort=function(){z=!0,b.abort(),F.meta.aborted=!0,T(g.complete)&&g.complete(F),p=""},this.guessLineEndings=function(W,P){W=W.substring(0,1048576);var P=new RegExp(x(P)+"([^]*?)"+x(P),"gm"),R=(W=W.replace(P,"")).split("\r"),P=W.split(`
`),W=1<P.length&&P[0].length<R[0].length;if(R.length===1||W)return`
`;for(var se=0,G=0;G<R.length;G++)R[G][0]===`
`&&se++;return se>=R.length/2?`\r
`:"\r"}}function x(g){return g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(g){var p=(g=g||{}).delimiter,b=g.newline,C=g.comments,M=g.step,N=g.preview,O=g.fastMode,X=null,ne=!1,K=g.quoteChar==null?'"':g.quoteChar,H=K;if(g.escapeChar!==void 0&&(H=g.escapeChar),(typeof p!="string"||-1<c.BAD_DELIMITERS.indexOf(p))&&(p=","),C===p)throw new Error("Comment character same as delimiter");C===!0?C="#":(typeof C!="string"||-1<c.BAD_DELIMITERS.indexOf(C))&&(C=!1),b!==`
`&&b!=="\r"&&b!==`\r
`&&(b=`
`);var L=0,ee=!1;this.parse=function(z,B,F){if(typeof z!="string")throw new Error("Input must be a string");var oe=z.length,ce=p.length,we=b.length,ke=C.length,ae=T(M),re=[],R=[],P=[],W=L=0;if(!z)return We();if(O||O!==!1&&z.indexOf(K)===-1){for(var se=z.split(b),G=0;G<se.length;G++){if(P=se[G],L+=P.length,G!==se.length-1)L+=b.length;else if(F)return We();if(!C||P.substring(0,ke)!==C){if(ae){if(re=[],rt(P.split(p)),nt(),ee)return We()}else rt(P.split(p));if(N&&N<=G)return re=re.slice(0,N),We(!0)}}return We()}for(var pe=z.indexOf(p,L),le=z.indexOf(b,L),de=new RegExp(x(H)+x(K),"g"),J=z.indexOf(K,L);;)if(z[L]===K)for(J=L,L++;;){if((J=z.indexOf(K,J+1))===-1)return F||R.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:re.length,index:L}),Xe();if(J===oe-1)return Xe(z.substring(L,J).replace(de,K));if(K===H&&z[J+1]===H)J++;else if(K===H||J===0||z[J-1]!==H){pe!==-1&&pe<J+1&&(pe=z.indexOf(p,J+1));var fe=lt((le=le!==-1&&le<J+1?z.indexOf(b,J+1):le)===-1?pe:Math.min(pe,le));if(z.substr(J+1+fe,ce)===p){P.push(z.substring(L,J).replace(de,K)),z[L=J+1+fe+ce]!==K&&(J=z.indexOf(K,L)),pe=z.indexOf(p,L),le=z.indexOf(b,L);break}if(fe=lt(le),z.substring(J+1+fe,J+1+fe+we)===b){if(P.push(z.substring(L,J).replace(de,K)),it(J+1+fe+we),pe=z.indexOf(p,L),J=z.indexOf(K,L),ae&&(nt(),ee))return We();if(N&&re.length>=N)return We(!0);break}R.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:re.length,index:L}),J++}}else if(C&&P.length===0&&z.substring(L,L+ke)===C){if(le===-1)return We();L=le+we,le=z.indexOf(b,L),pe=z.indexOf(p,L)}else if(pe!==-1&&(pe<le||le===-1))P.push(z.substring(L,pe)),L=pe+ce,pe=z.indexOf(p,L);else{if(le===-1)break;if(P.push(z.substring(L,le)),it(le+we),ae&&(nt(),ee))return We();if(N&&re.length>=N)return We(!0)}return Xe();function rt(He){re.push(He),W=L}function lt(He){var Ye=0;return Ye=He!==-1&&(He=z.substring(J+1,He))&&He.trim()===""?He.length:Ye}function Xe(He){return F||(He===void 0&&(He=z.substring(L)),P.push(He),L=oe,rt(P),ae&&nt()),We()}function it(He){L=He,rt(P),P=[],le=z.indexOf(b,L)}function We(He){if(g.header&&!B&&re.length&&!ne){var Ye=re[0],pt=Object.create(null),pn=new Set(Ye);let mn=!1;for(let Tt=0;Tt<Ye.length;Tt++){let yt=Ye[Tt];if(pt[yt=T(g.transformHeader)?g.transformHeader(yt,Tt):yt]){let Nt,sn=pt[yt];for(;Nt=yt+"_"+sn,sn++,pn.has(Nt););pn.add(Nt),Ye[Tt]=Nt,pt[yt]++,mn=!0,(X=X===null?{}:X)[Nt]=yt}else pt[yt]=1,Ye[Tt]=yt;pn.add(yt)}mn&&console.warn("Duplicate headers found and renamed."),ne=!0}return{data:re,errors:R,meta:{delimiter:p,linebreak:b,aborted:ee,truncated:!!He,cursor:W+(B||0),renamedHeaders:X}}}function nt(){M(We()),re=[],R=[]}},this.abort=function(){ee=!0},this.getCharIndex=function(){return L}}function _(g){var p=g.data,b=a[p.workerId],C=!1;if(p.error)b.userError(p.error,p.file);else if(p.results&&p.results.data){var M={abort:function(){C=!0,A(p.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:j,resume:j};if(T(b.userStep)){for(var N=0;N<p.results.data.length&&(b.userStep({data:p.results.data[N],errors:p.results.errors,meta:p.results.meta},M),!C);N++);delete p.results}else T(b.userChunk)&&(b.userChunk(p.results,M,p.file),delete p.results)}p.finished&&!C&&A(p.workerId,p.results)}function A(g,p){var b=a[g];T(b.userComplete)&&b.userComplete(p),b.terminate(),delete a[g]}function j(){throw new Error("Not implemented.")}function U(g){if(typeof g!="object"||g===null)return g;var p,b=Array.isArray(g)?[]:{};for(p in g)b[p]=U(g[p]);return b}function q(g,p){return function(){g.apply(p,arguments)}}function T(g){return typeof g=="function"}return c.parse=function(g,p){var b=(p=p||{}).dynamicTyping||!1;if(T(b)&&(p.dynamicTypingFunction=b,b={}),p.dynamicTyping=b,p.transform=!!T(p.transform)&&p.transform,!p.worker||!c.WORKERS_SUPPORTED)return b=null,c.NODE_STREAM_INPUT,typeof g=="string"?(g=(C=>C.charCodeAt(0)!==65279?C:C.slice(1))(g),b=new(p.download?d:m)(p)):g.readable===!0&&T(g.read)&&T(g.on)?b=new w(p):(r.File&&g instanceof File||g instanceof Object)&&(b=new f(p)),b.stream(g);(b=(()=>{var C;return!!c.WORKERS_SUPPORTED&&(C=(()=>{var M=r.URL||r.webkitURL||null,N=n.toString();return c.BLOB_URL||(c.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",N,")();"],{type:"text/javascript"})))})(),(C=new r.Worker(C)).onmessage=_,C.id=l++,a[C.id]=C)})()).userStep=p.step,b.userChunk=p.chunk,b.userComplete=p.complete,b.userError=p.error,p.step=T(p.step),p.chunk=T(p.chunk),p.complete=T(p.complete),p.error=T(p.error),delete p.worker,b.postMessage({input:g,config:p,workerId:b.id})},c.unparse=function(g,p){var b=!1,C=!0,M=",",N=`\r
`,O='"',X=O+O,ne=!1,K=null,H=!1,L=((()=>{if(typeof p=="object"){if(typeof p.delimiter!="string"||c.BAD_DELIMITERS.filter(function(B){return p.delimiter.indexOf(B)!==-1}).length||(M=p.delimiter),typeof p.quotes!="boolean"&&typeof p.quotes!="function"&&!Array.isArray(p.quotes)||(b=p.quotes),typeof p.skipEmptyLines!="boolean"&&typeof p.skipEmptyLines!="string"||(ne=p.skipEmptyLines),typeof p.newline=="string"&&(N=p.newline),typeof p.quoteChar=="string"&&(O=p.quoteChar),typeof p.header=="boolean"&&(C=p.header),Array.isArray(p.columns)){if(p.columns.length===0)throw new Error("Option columns is empty");K=p.columns}p.escapeChar!==void 0&&(X=p.escapeChar+O),p.escapeFormulae instanceof RegExp?H=p.escapeFormulae:typeof p.escapeFormulae=="boolean"&&p.escapeFormulae&&(H=/^[=+\-@\t\r].*$/)}})(),new RegExp(x(O),"g"));if(typeof g=="string"&&(g=JSON.parse(g)),Array.isArray(g)){if(!g.length||Array.isArray(g[0]))return ee(null,g,ne);if(typeof g[0]=="object")return ee(K||Object.keys(g[0]),g,ne)}else if(typeof g=="object")return typeof g.data=="string"&&(g.data=JSON.parse(g.data)),Array.isArray(g.data)&&(g.fields||(g.fields=g.meta&&g.meta.fields||K),g.fields||(g.fields=Array.isArray(g.data[0])?g.fields:typeof g.data[0]=="object"?Object.keys(g.data[0]):[]),Array.isArray(g.data[0])||typeof g.data[0]=="object"||(g.data=[g.data])),ee(g.fields||[],g.data||[],ne);throw new Error("Unable to serialize unrecognized input");function ee(B,F,oe){var ce="",we=(typeof B=="string"&&(B=JSON.parse(B)),typeof F=="string"&&(F=JSON.parse(F)),Array.isArray(B)&&0<B.length),ke=!Array.isArray(F[0]);if(we&&C){for(var ae=0;ae<B.length;ae++)0<ae&&(ce+=M),ce+=z(B[ae],ae);0<F.length&&(ce+=N)}for(var re=0;re<F.length;re++){var R=(we?B:F[re]).length,P=!1,W=we?Object.keys(F[re]).length===0:F[re].length===0;if(oe&&!we&&(P=oe==="greedy"?F[re].join("").trim()==="":F[re].length===1&&F[re][0].length===0),oe==="greedy"&&we){for(var se=[],G=0;G<R;G++){var pe=ke?B[G]:G;se.push(F[re][pe])}P=se.join("").trim()===""}if(!P){for(var le=0;le<R;le++){0<le&&!W&&(ce+=M);var de=we&&ke?B[le]:le;ce+=z(F[re][de],le)}re<F.length-1&&(!oe||0<R&&!W)&&(ce+=N)}}return ce}function z(B,F){var oe,ce;return B==null?"":B.constructor===Date?JSON.stringify(B).slice(1,25):(ce=!1,H&&typeof B=="string"&&H.test(B)&&(B="'"+B,ce=!0),oe=B.toString().replace(L,X),(ce=ce||b===!0||typeof b=="function"&&b(B,F)||Array.isArray(b)&&b[F]||((we,ke)=>{for(var ae=0;ae<ke.length;ae++)if(-1<we.indexOf(ke[ae]))return!0;return!1})(oe,c.BAD_DELIMITERS)||-1<oe.indexOf(M)||oe.charAt(0)===" "||oe.charAt(oe.length-1)===" ")?O+oe+O:oe)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!i&&!!r.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=E,c.ParserHandle=v,c.NetworkStreamer=d,c.FileStreamer=f,c.StringStreamer=m,c.ReadableStreamStreamer=w,r.jQuery&&((s=r.jQuery).fn.parse=function(g){var p=g.config||{},b=[];return this.each(function(N){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var O=0;O<this.files.length;O++)b.push({file:this.files[O],inputElem:this,instanceConfig:s.extend({},p)})}),C(),this;function C(){if(b.length===0)T(g.complete)&&g.complete();else{var N,O,X,ne,K=b[0];if(T(g.before)){var H=g.before(K.file,K.inputElem);if(typeof H=="object"){if(H.action==="abort")return N="AbortError",O=K.file,X=K.inputElem,ne=H.reason,void(T(g.error)&&g.error({name:N},O,X,ne));if(H.action==="skip")return void M();typeof H.config=="object"&&(K.instanceConfig=s.extend(K.instanceConfig,H.config))}else if(H==="skip")return void M()}var L=K.instanceConfig.complete;K.instanceConfig.complete=function(ee){T(L)&&L(ee,K.file,K.inputElem),M()},c.parse(K.file,K.instanceConfig)}}function M(){b.splice(0,1),C()}}),o&&(r.onmessage=function(g){g=g.data,c.WORKER_ID===void 0&&g&&(c.WORKER_ID=g.workerId),typeof g.input=="string"?r.postMessage({workerId:c.WORKER_ID,results:c.parse(g.input,g.config),finished:!0}):(r.File&&g.input instanceof File||g.input instanceof Object)&&(g=c.parse(g.input,g.config))&&r.postMessage({workerId:c.WORKER_ID,results:g,finished:!0})}),(d.prototype=Object.create(u.prototype)).constructor=d,(f.prototype=Object.create(u.prototype)).constructor=f,(m.prototype=Object.create(m.prototype)).constructor=m,(w.prototype=Object.create(u.prototype)).constructor=w,c})})($i)),$i.exports}k0();function $s({name:e=null,id:t=null,createdAt:n=Date.now(),reviewerName:r=""}){if(!t||typeof t!="string"||!t.trim())throw new Error("AMSTAR2Checklist requires a non-empty string id.");if(!e||typeof e!="string"||!e.trim())throw new Error("AMSTAR2Checklist requires a non-empty string name.");let s=new Date(n);isNaN(s)&&(s=Date.now());const i=String(s.getMonth()+1).padStart(2,"0"),o=String(s.getDate()).padStart(2,"0");return n=`${s.getFullYear()}-${i}-${o}`,{name:e,reviewerName:r||"",createdAt:n,id:t,q1:{answers:[[!1,!1,!1,!1],[!1],[!1,!0]],critical:!1},q2:{answers:[[!1,!1,!1,!1],[!1,!1,!1],[!1,!1,!0]],critical:!0},q3:{answers:[[!1,!1,!1],[!1,!0]],critical:!1},q4:{answers:[[!1,!1,!1],[!1,!1,!1,!1,!1],[!1,!1,!0]],critical:!0},q5:{answers:[[!1,!1],[!1,!0]],critical:!1},q6:{answers:[[!1,!1],[!1,!0]],critical:!1},q7:{answers:[[!1],[!1],[!1,!1,!0]],critical:!0},q8:{answers:[[!1,!1,!1,!1,!1],[!1,!1,!1,!1],[!1,!1,!0]],critical:!1},q9a:{answers:[[!1,!1],[!1,!1],[!1,!1,!0,!1]],critical:!0},q9b:{answers:[[!1,!1],[!1,!1],[!1,!1,!0,!1]],critical:!0},q10:{answers:[[!1],[!1,!0]],critical:!1},q11a:{answers:[[!1,!1,!1],[!1,!0,!1]],critical:!0},q11b:{answers:[[!1,!1,!1,!1],[!1,!0,!1]],critical:!0},q12:{answers:[[!1,!1],[!1,!0,!1]],critical:!1},q13:{answers:[[!1,!1],[!1,!0]],critical:!0},q14:{answers:[[!1,!1],[!1,!0]],critical:!1},q15:{answers:[[!1],[!1,!0,!1]],critical:!0},q16:{answers:[[!1,!1],[!1,!0]],critical:!1}}}function Sc(e){if(!e||typeof e!="object")return"Error";let t=0,n=0;return Object.entries(e).forEach(([r,s])=>{if(!/^q\d+[a-z]*$/i.test(r)||!s||!Array.isArray(s.answers))return;const i=md(s.answers,r);(!i||i==="No")&&(s.critical?t++:n++)}),t>1?"Critically Low":t===1?"Low":n>1?"Moderate":"High"}function md(e,t){const n=["q11a","q11b","q12","q15"],r=["Yes","No","No MA"],s=["Yes","Partial Yes","No","No MA"];if(!Array.isArray(e)||e.length===0)return null;const i=e[e.length-1];if(!Array.isArray(i))return null;const o=i.findIndex(a=>a===!0);return o===-1?null:n.includes(t)?r[o]||null:i.length===2?o===0?"Yes":"No":i.length>=3&&s[o]||null}function $0(e){if(!e||typeof e!="object")return null;const t={};return Object.entries(e).forEach(([n,r])=>{if(!/^q\d+[a-z]*$/i.test(n)||!r||!Array.isArray(r.answers))return;const s=md(r.answers,n);t[n]=s}),"q9a"in t&&"q9b"in t&&(t.q9a==="No"||t.q9b==="No"?t.q9="No":t.q9a==="No MA"&&t.q9b==="No MA"?t.q9="No MA":t.q9="Yes"),delete t.q9a,delete t.q9b,"q11a"in t&&"q11b"in t&&(t.q11a==="No"||t.q11b==="No"?t.q11="No":t.q11a==="No MA"&&t.q11b==="No MA"?t.q11="No MA":t.q11="Yes"),delete t.q11a,delete t.q11b,t}const hn=e=>typeof e,at="",wd=hn(at),S0=hn(!0),Za=hn(0),C0=hn(hn),ni="type",Dn="default",ma="Listener",E0="set",vd="add",A0="del",qn="Has",_o="Ids",$r="Table",Cc=$r+"s",R0=$r+_o,Vi="Row",T0=Vi+"Count",P0=Vi+_o,Si="Cell",Ec=Si+_o,Ui="Value",Ac=Ui+"s",j0=Ui+_o,L0="Transaction",De=e=>at+e,ri=(e,t)=>e.startsWith(t),Rc=(e,t)=>e.endsWith(t),M0=(e,t=at,n)=>e.split(t,n),wa=globalThis,el=Math,Tc=el.max,O0=el.floor,yd=isFinite,N0=(e,t)=>e instanceof t,Ge=e=>e==null,qe=(e,t,n)=>Ge(e)?n?.():t(e),bd=e=>e==wd||e==S0,D0=e=>hn(e)==wd,Ho=e=>hn(e)==C0,ko=e=>Array.isArray(e),va=(e,t,n)=>e.slice(t,n),zt=e=>e.length,q0=(e,t)=>e.test(t),Pc=()=>{},Bo=async(e,t,n)=>{try{return await e()}catch(r){t?.(r)}},F0=(e,t)=>e.includes(t),V0=(e,t)=>e.every(t),U0=(e,t)=>zt(e)===zt(t)&&V0(e,(n,r)=>t[r]===n),I0=(e,t)=>e.sort(t),jr=(e,t)=>e.forEach(t),Lr=(e,t)=>e.map(t),xd=(e,t,n)=>e.reduce(t,n),Ii=(e,...t)=>e.push(...t),H0=e=>e.shift(),br=e=>{const t=hn(e);return bd(t)||t==Za&&yd(e)?t:void 0},jc=e=>Ge(e)||!Ge(br(e)),Lc=(e,t,n,r,s)=>Ge(s)?e.delCell(t,n,r,!0):e.setCell(t,n,r,s),Mc=(e,t,n)=>Ge(n)?e.delValue(t):e.setValue(t,n),tl=e=>t=>xd(B0(t),(n,r)=>n+e(r),0),nl=e=>e?.size??0,rl=tl(nl),Zr=tl(rl),zo=tl(Zr),mt=(e,t)=>e?.has(t)??!1,xe=e=>Ge(e)||nl(e)==0,B0=e=>[...e?.values()??[]],ds=e=>e.clear(),Ce=(e,t)=>e?.forEach(t),Hi=(e,t)=>e?.delete(t),Mn=Object,Oc=e=>Mn.getPrototypeOf(e),z0=Mn.isFrozen,_d=Mn.entries,Bi=e=>!Ge(e)&&qe(Oc(e),t=>t==Mn.prototype||Ge(Oc(t)),()=>!0),W0=Mn.keys,kd=Mn.freeze,yn=(e=[])=>Mn.fromEntries(e),Sn=(e,t)=>t in e,$d=(e,t)=>(delete e[t],e),Yt=(e,t)=>jr(_d(e),([n,r])=>t(r,n)),Y0=(e,t)=>Lr(_d(e),([n,r])=>t(r,n)),cn=(e,t)=>yn(Y0(e,(n,r)=>[r,t(n,r)])),J0=e=>zt(W0(e)),Jt=e=>Bi(e)&&J0(e)==0,an=(e,t,n)=>(Sn(e,t)||(e[t]=n()),e[t]),jt=(e,t,n,r=0)=>Ge(e)||!Bi(e)||!r&&Jt(e)||z0(e)?(n?.(),!1):(Yt(e,(s,i)=>{t(s,i)||$d(e,i)}),r?!0:!Jt(e)),be=e=>new Map(e),Wr=e=>[...e?.keys()??[]],te=(e,t)=>e?.get(t),At=(e,t)=>Ce(e,(n,r)=>t(r,n)),Q0=(e,t)=>Lr([...e?.entries()??[]],([n,r])=>t(r,n)),Ve=(e,t,n)=>Ge(n)?(Hi(e,t),e):e?.set(t,n),Ze=(e,t,n,r)=>(mt(e,t)?r?.(te(e,t)):Ve(e,t,n()),te(e,t)),Fn=(e,t,n,r=Ve)=>(cn(t,(s,i)=>n(e,i,s)),At(e,s=>Sn(t,s)?0:r(e,s)),e),st=(e,t,n,r)=>{const s={};return Ce(e,(i,o)=>{if(!n?.(i,o)){const a=t?t(i,o):i;r?.(a)||(s[o]=a)}}),s},ya=(e,t,n)=>st(e,r=>st(r,t,n),xe,Jt),si=(e,t,n)=>st(e,r=>ya(r,t,n),xe,Jt),_n=(e,t)=>{const n=be();return Ce(e,(r,s)=>n.set(s,t?.(r)??r)),n},ba=e=>_n(e,_n),Wo=e=>_n(e,ba),xa=(e,t,n,r,s=0)=>qe((n?Ze:te)(e,t[s],s>zt(t)-2?n:be),i=>{if(s>zt(t)-2)return r?.(i)&&Ve(e,t[s]),i;const o=xa(i,t,n,r,s+1);return xe(i)&&Ve(e,t[s]),o}),Kn=e=>new Set(ko(e)||Ge(e)?e:[e]),Gn=(e,t)=>e?.add(t),K0=/^\d+$/,Sd=()=>{const e=[];let t=0;return[n=>(n?H0(e):null)??at+t++,n=>{q0(K0,n)&&zt(e)<1e3&&Ii(e,n)}]},G0=(e,t=[at])=>{const n=[],r=(s,i)=>i==zt(t)?Ii(n,s):t[i]===null?Ce(s,o=>r(o,i+1)):jr([t[i],null],o=>r(te(s,o),i+1));return r(e,0),n},X0=e=>{let t;const[n,r]=Sd(),s=be();return[(c,u,d,f=[],m=()=>[])=>{t??=e();const w=n(1);return Ve(s,w,[c,u,d,f,m]),Gn(xa(u,d??[at],Kn),w),w},(c,u,...d)=>jr(G0(c,u),f=>Ce(f,m=>te(s,m)[0](t,...u??[],...d))),c=>qe(te(s,c),([,u,d])=>(xa(u,d??[at],void 0,f=>(Hi(f,c),xe(f)?1:0)),Ve(s,c),r(c),d)),c=>qe(te(s,c),([u,,d=[],f,m])=>{const w=(...v)=>{const x=zt(v);x==zt(d)?u(t,...v,...m(v)):Ge(d[x])?jr(f[x]?.(...v)??[],E=>w(...v,E)):w(...v,d[x])};w()})]},Z0=63,Cd=M0("-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz"),ep=be(Lr(Cd,(e,t)=>[e,t])),ct=e=>Cd[e&Z0],Dt=(e,t)=>te(ep,e[t])??0,tp=wa.crypto?e=>wa.crypto.getRandomValues(e):e=>Lr(e,()=>O0(el.random()*256)),np=(e=16)=>xd(tp(new Uint8Array(e)),(t,n)=>t+ct(n),at),rp=JSON.stringify,Yo=JSON.parse,Bn=e=>rp(e,(t,n)=>N0(n,Map)?Mn.fromEntries([...n]):n),sp=new wa.TextEncoder,Ss=e=>{let t=2166136261;return jr(sp.encode(e),n=>{t^=n,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}),t>>>0},Jo=(e,t)=>(e^t)>>>0,mr=(e,t)=>Ss(e+":"+t),ip=(e,t)=>Ss(Bn(e??null)+":"+t),Nc=2**36,Dc=2**30,_a=2**24,es=2**18,ts=2**12,ns=2**6,qc=e=>{const t=Ss(e);return ct(t/_a)+ct(t/es)+ct(t/ts)+ct(t/ns)+ct(t)},op=(e,t=Date.now)=>{let n=0,r=-1;const s=qe(e,qc,()=>np(5)),i=()=>(o(),a(n,++r)),o=f=>{const m=n,[w,v]=Ge(f)||f==""?[0,0]:l(f);n=Tc(m,w,t()),r=n==m?n==w?Tc(r,v):r:n==w?v:-1},a=(f,m,w)=>ct(f/Nc)+ct(f/Dc)+ct(f/_a)+ct(f/es)+ct(f/ts)+ct(f/ns)+ct(f)+ct(m/es)+ct(m/ts)+ct(m/ns)+ct(m)+(Ge(w)?s:qc(w)),l=f=>[Dt(f,0)*Nc+Dt(f,1)*Dc+Dt(f,2)*_a+Dt(f,3)*es+Dt(f,4)*ts+Dt(f,5)*ns+Dt(f,6),Dt(f,7)*es+Dt(f,8)*ts+Dt(f,9)*ns+Dt(f,10),f.slice(11)];return[i,o,a,l,()=>n,()=>r,()=>s]},ap=(e,t)=>(e??0)<(t??0)?-1:1,Ed=([e,t])=>Ar(e,t),lp=([e,t,n])=>[e,t,n],Ar=(e,t)=>t?[e,t]:[e],cp=(e,t,n)=>[e,t,n],Fc=e=>e[2],Qo=(e,t)=>t>e?(e?Ss(e):0)^Ss(t):0,ii=(e,t)=>((e??"")>(t??"")?e:t)??"",oi=(e,t,n)=>{t>e[1]&&(e[1]=t),e[2]=n>>>0},Yr=(e=at)=>Ar(yn(),e),zi=(e=at)=>[be(),e,0],ai=([e,t,n],r=lp)=>[st(e,r),t,n],Ko=([e,t],n=Ed)=>Ar(st(e,n),t),wr=(e,t)=>ko(e)&&zt(e)==3&&D0(e[1])&&hn(e[2])==Za&&yd(e[2])&&t(e[0]),li=e=>[e,e],Qe=(e,t=rl)=>t(e[0])+t(e[1]),Ke=()=>[be(),be()],Vc=e=>[...e],ci=([e,t])=>e===t,Jr=(e,t,n)=>Ve(e,t,te(e,t)==-n?void 0:n),Ad=()=>{let e,t,n=!1,r=!1,s=0,i=[];const o=be(),a=be(),l=be(),c=be(),u=be(),d=be(),f=be(),m=be(),w=be(),v=be(),x=be(),E=be(),_=be(),A=be(),j=Kn(),U=be(),q=be(),T=be(),g=be(),p=Ke(),b=Ke(),C=Ke(),M=Ke(),N=Ke(),O=Ke(),X=Ke(),ne=Ke(),K=Ke(),H=Ke(),L=Ke(),ee=Ke(),z=Ke(),B=Ke(),F=Ke(),oe=Ke(),ce=Ke(),we=Ke(),ke=Ke(),ae=Ke(),re=Ke(),R=Ke(),P=be(),W=Ke(),[se,G,pe,le]=X0(()=>ut),de=h=>jt(h,$=>jt($,fe)),J=h=>jt(h,fe),fe=h=>{if(!jt(h,(S,D)=>F0([ni,Dn],D)))return!1;const $=h[ni];return!bd($)&&$!=Za?!1:(br(h[Dn])!=$&&$d(h,Dn),!0)},rt=ko,lt=h=>jt(h,Xe,wn),Xe=(h,$)=>(!e||mt(x,$)||wn($))&&jt(h,(S,D)=>it($,D,S),()=>wn($)),it=(h,$,S,D)=>jt(D?S:Ye(S,h,$),(Y,Z)=>qe(We(h,$,Z,Y),he=>(S[Z]=he,!0),()=>!1),()=>wn(h,$)),We=(h,$,S,D)=>e?qe(te(te(x,h),S),Y=>br(D)!=Y[ni]?wn(h,$,S,D,Y[Dn]):D,()=>wn(h,$,S,D)):Ge(br(D))?wn(h,$,S,D):D,nt=(h,$)=>jt($?h:pt(h),(S,D)=>qe(He(D,S),Y=>(h[D]=Y,!0),()=>!1),()=>Hr()),He=(h,$)=>t?qe(te(_,h),S=>br($)!=S[ni]?Hr(h,$,S[Dn]):$,()=>Hr(h,$)):Ge(br($))?Hr(h,$):$,Ye=(h,$,S)=>(qe(te(E,$),([D,Y])=>{Ce(D,(Z,he)=>{Sn(h,he)||(h[he]=Z)}),Ce(Y,Z=>{Sn(h,Z)||wn($,S,Z)})}),h),pt=h=>(t&&(Ce(A,($,S)=>{Sn(h,S)||(h[S]=$)}),Ce(j,$=>{Sn(h,$)||Hr($)})),h),pn=h=>Fn(x,h,($,S,D)=>{const Y=be(),Z=Kn();Fn(Ze(x,S,be),D,(he,Me,Oe)=>{Ve(he,Me,Oe),qe(Oe[Dn],on=>Ve(Y,Me,on),()=>Gn(Z,Me))}),Ve(E,S,[Y,Z])},($,S)=>{Ve(x,S),Ve(E,S)}),mn=h=>Fn(_,h,($,S,D)=>{Ve(_,S,D),qe(D[Dn],Y=>Ve(A,S,Y),()=>Gn(j,S))},($,S)=>{Ve(_,S),Ve(A,S),Hi(j,S)}),Tt=h=>Jt(h)?Gs():Qs(h),yt=([h,$])=>{(Jt(h)?Gs:Qs)(h),(Jt($)?Xs:Ks)($)},Nt=h=>Fn(T,h,($,S,D)=>sn(S,D),($,S)=>ql(S)),sn=(h,$)=>Fn(Ze(T,h,()=>(Il(h,1),Ve(U,h,Sd()),Ve(q,h,be()),be())),$,(S,D,Y)=>Nn(h,S,D,Y),(S,D)=>Fl(h,S,D)),Nn=(h,$,S,D,Y)=>Fn(Ze($,S,()=>(Hl(h,S,1),be())),D,(Z,he,Me)=>hr(h,S,Z,he,Me),(Z,he)=>Vl(h,$,S,Z,he,Y)),hr=(h,$,S,D,Y)=>{mt(S,D)||Bl(h,$,D,1);const Z=te(S,D);Y!==Z&&(zl(h,$,D,Z,Y),Ve(S,D,Y))},Is=(h,$,S,D,Y)=>qe(te($,S),Z=>hr(h,S,Z,D,Y),()=>Nn(h,$,S,Ye({[D]:Y},h,S))),$e=h=>Jt(h)?Xs():Ks(h),Se=h=>Fn(g,h,($,S,D)=>Te(S,D),($,S)=>Ul(S)),Te=(h,$)=>{mt(g,h)||Wl(h,1);const S=te(g,h);$!==S&&(Yl(h,S,$),Ve(g,h,$))},ve=(h,$)=>{const[S]=te(U,h);let D;do D=S($);while(mt(te(T,h),D));return D},Be=h=>te(T,h)??sn(h,{}),ql=h=>sn(h,{}),Fl=(h,$,S)=>{const[,D]=te(U,h);D(S),Nn(h,$,S,{},!0)},Vl=(h,$,S,D,Y,Z)=>{const he=te(te(E,h)?.[0],Y);if(!Ge(he)&&!Z)return hr(h,S,D,Y,he);const Me=Oe=>{zl(h,S,Oe,te(D,Oe)),Bl(h,S,Oe,-1),Ve(D,Oe)};Ge(he)?Me(Y):At(D,Me),xe(D)&&(Hl(h,S,-1),xe(Ve($,S))&&(Il(h,-1),Ve(T,h),Ve(U,h),Ve(q,h)))},Ul=h=>{const $=te(A,h);if(!Ge($))return Te(h,$);Yl(h,te(g,h)),Wl(h,-1),Ve(g,h)},Il=(h,$)=>Jr(o,h,$),Hl=(h,$,S)=>Jr(Ze(c,h,be),$,S)&&Ve(l,h,Ze(l,h,()=>0)+S),Bl=(h,$,S,D)=>{const Y=te(q,h),Z=te(Y,S)??0;(Z==0&&D==1||Z==1&&D==-1)&&Jr(Ze(a,h,be),S,D),Ve(Y,S,Z!=-D?Z+D:null),Jr(Ze(Ze(u,h,be),$,be),S,D)},zl=(h,$,S,D,Y)=>{Ze(Ze(Ze(d,h,be),$,be),S,()=>[D,0])[1]=Y,i[3]?.(h,$,S,Y)},Wl=(h,$)=>Jr(f,h,$),Yl=(h,$,S)=>{Ze(m,h,()=>[$,0])[1]=S,i[4]?.(h,S)},wn=(h,$,S,D,Y)=>(Ii(Ze(Ze(Ze(w,h,be),$,be),S,()=>[]),D),Y),Hr=(h,$,S)=>(Ii(Ze(v,h,()=>[]),$),S),Hs=(h,$,S)=>qe(te(te(te(d,h),$),S),([D,Y])=>[!0,D,Y],()=>[!1,...li(zs(h,$,S))]),Jl=h=>qe(te(m,h),([$,S])=>[!0,$,S],()=>[!1,...li(Ws(h))]),Ql=h=>!xe(w)&&!xe(oe[h])?Ce(h?Wo(w):w,($,S)=>Ce($,(D,Y)=>Ce(D,(Z,he)=>G(oe[h],[S,Y,he],Z)))):0,Kl=h=>!xe(v)&&!xe(ce[h])?Ce(h?_n(v):v,($,S)=>G(ce[h],[S],$)):0,Br=(h,$,S,D)=>{if(!xe(h))return G($,D,()=>st(h)),At(h,(Y,Z)=>G(S,[...D??[],Y],Z==1)),1},Gl=h=>{const $=Ys();$!=n&&G(p[h],void 0,$);const S=xe(H[h]),D=xe(z[h])&&xe(B[h])&&xe(K[h])&&xe(L[h])&&xe(O[h])&&xe(X[h])&&xe(ne[h])&&S&&xe(C[h])&&xe(M[h]),Y=xe(F[h])&&xe(ee[h])&&xe(N[h])&&xe(b[h]);if(!D||!Y){const Z=h?[_n(o),ba(a),_n(l),ba(c),Wo(u),Wo(d)]:[o,a,l,c,u,d];if(!D){Br(Z[0],C[h],M[h]),Ce(Z[1],(Me,Oe)=>Br(Me,O[h],X[h],[Oe])),Ce(Z[2],(Me,Oe)=>{Me!=0&&G(ne[h],[Oe],tc(Oe))});const he=Kn();Ce(Z[3],(Me,Oe)=>{Br(Me,K[h],L[h],[Oe])&&!S&&(G(H[h],[Oe,null]),Gn(he,Oe))}),S||Ce(Z[5],(Me,Oe)=>{if(!mt(he,Oe)){const on=Kn();Ce(Me,vn=>Ce(vn,([Zs,ei],zr)=>ei!==Zs?Gn(on,zr):Hi(vn,zr))),Ce(on,vn=>G(H[h],[Oe,vn]))}}),Ce(Z[4],(Me,Oe)=>Ce(Me,(on,vn)=>Br(on,z[h],B[h],[Oe,vn])))}if(!Y){let he;Ce(Z[5],(Me,Oe)=>{let on;Ce(Me,(vn,Zs)=>{let ei;Ce(vn,([zr,pc],Nh)=>{pc!==zr&&(G(F[h],[Oe,Zs,Nh],pc,zr,Hs),he=on=ei=1)}),ei&&G(ee[h],[Oe,Zs],Hs)}),on&&G(N[h],[Oe],Hs)}),he&&G(b[h],void 0,Hs)}}},Xl=h=>{const $=Js();$!=r&&G(we[h],void 0,$);const S=xe(ae[h])&&xe(re[h]),D=xe(R[h])&&xe(ke[h]);if(!S||!D){const Y=h?[_n(f),_n(m)]:[f,m];if(S||Br(Y[0],ae[h],re[h]),!D){let Z;Ce(Y[1],([he,Me],Oe)=>{Me!==he&&(G(R[h],[Oe],Me,he,Jl),Z=1)}),Z&&G(ke[h],void 0,Jl)}}},Je=(h,...$)=>(qo(()=>h(...Lr($,De))),ut),Zl=(h,$,S,D,Y)=>{let Z=Bs(h,$,...S);return se(()=>{const he=Bs(h,$,...S);U0(he,Z)||(Z=he,D(ut,h,$,...S,Z))},H[Y?1:0],[h,$],[St])},uh=()=>[Lo(),Oo()],Lo=()=>si(T),St=()=>Wr(T),dh=h=>ya(te(T,De(h))),ec=h=>Wr(te(q,De(h))),tc=h=>nl(te(T,De(h))),gr=h=>Wr(te(T,De(h))),Bs=(h,$,S,D=0,Y)=>Bi(h)?Bs(h.tableId,h.cellId,h.descending,h.offset,h.limit):Lr(va(I0(Q0(te(T,De(h)),(Z,he)=>[Ge($)?he:te(Z,De($)),he]),([Z],[he])=>ap(Z,he)*(S?-1:1)),D,Ge(Y)?Y:D+Y),([,Z])=>Z),fh=(h,$)=>st(te(te(T,De(h)),De($))),Mo=(h,$)=>Wr(te(te(T,De(h)),De($))),zs=(h,$,S)=>te(te(te(T,De(h)),De($)),De(S)),Oo=()=>st(g),No=()=>Wr(g),Ws=h=>te(g,De(h)),Ys=()=>!xe(T),nc=h=>mt(T,De(h)),rc=(h,$)=>mt(te(q,De(h)),De($)),sc=(h,$)=>mt(te(T,De(h)),De($)),ic=(h,$,S)=>mt(te(te(T,De(h)),De($)),De(S)),Js=()=>!xe(g),oc=h=>mt(g,De(h)),hh=()=>Bn(T),gh=()=>Bn(g),ph=()=>Bn([T,g]),mh=()=>Bn(x),wh=()=>Bn(_),vh=()=>Bn([x,_]),yh=h=>Je(()=>{const $=Ho(h)?h():h;rt($)&&yt($)}),Qs=h=>Je(()=>lt(h)?Nt(h):0),bh=(h,$)=>Je(S=>Xe($,S)?sn(S,$):0,h),xh=(h,$,S)=>Je((D,Y)=>it(D,Y,S)?Nn(D,Be(D),Y,S):0,h,$),_h=(h,$,S=!0)=>qo(()=>{let D;return it(h,D,$)&&(h=De(h),Nn(h,Be(h),D=ve(h,S?1:0),$)),D}),kh=(h,$,S)=>Je((D,Y)=>{if(it(D,Y,S,1)){const Z=Be(D);cn(S,(he,Me)=>Is(D,Z,Y,Me,he))}},h,$),$h=(h,$,S,D)=>Je((Y,Z,he)=>qe(We(Y,Z,he,Ho(D)?D(zs(Y,Z,he)):D),Me=>Is(Y,Be(Y),Z,he,Me)),h,$,S),Ks=h=>Je(()=>nt(h)?Se(h):0),Sh=h=>Je(()=>nt(h,1)?cn(h,($,S)=>Te(S,$)):0),Ch=(h,$)=>Je(S=>qe(He(S,Ho($)?$(Ws(S)):$),D=>Te(S,D)),h),Eh=h=>Je(()=>{cn(h[0],($,S)=>Ge($)?uc(S):cn($,(D,Y)=>Ge(D)?dc(S,Y):cn(D,(Z,he)=>Lc(ut,S,Y,he,Z)))),cn(h[1],($,S)=>Mc(ut,S,$))}),ac=h=>(Bo(()=>Tt(Yo(h))),ut),Ah=h=>(Bo(()=>$e(Yo(h))),ut),Rh=h=>Je(()=>Bo(()=>{const[$,S]=Yo(h);Tt($),$e(S)},()=>ac(h))),lc=h=>Je(()=>{if((e=de(h))&&(pn(h),!xe(T))){const $=Lo();Gs(),Qs($)}}),cc=h=>Je(()=>{if(t=J(h)){const $=Oo();Do(),Xs(),t=!0,mn(h),Ks($)}}),Th=(h,$)=>Je(()=>{lc(h),cc($)}),Gs=()=>Je(()=>Nt({})),uc=h=>Je($=>mt(T,$)?ql($):0,h),dc=(h,$)=>Je((S,D)=>qe(te(T,S),Y=>mt(Y,D)?Fl(S,Y,D):0),h,$),Ph=(h,$,S,D)=>Je((Y,Z,he)=>qe(te(T,Y),Me=>qe(te(Me,Z),Oe=>mt(Oe,he)?Vl(Y,Me,Z,Oe,he,D):0)),h,$,S),Xs=()=>Je(()=>Se({})),jh=h=>Je($=>mt(g,$)?Ul($):0,h),fc=()=>Je(()=>{pn({}),e=!1}),Do=()=>Je(()=>{mn({}),t=!1}),Lh=()=>Je(()=>{fc(),Do()}),qo=(h,$)=>{if(s!=-1){hc();const S=h();return gc($),S}},hc=()=>(s!=-1&&s++,s==1&&(i[0]?.(),G(P)),ut),Mh=()=>[st(d,(h,$)=>te(o,$)===-1?void 0:st(h,(S,D)=>te(te(c,$),D)===-1?void 0:st(S,([,Y])=>Y,Y=>ci(Y)),xe,Jt),xe,Jt),st(m,([,h])=>h,h=>ci(h)),1],Oh=()=>[!xe(d),!xe(m),si(d,Vc,ci),si(w),st(m,Vc,ci),st(v),st(o),ya(c),si(u),st(f)],gc=h=>(s>0&&(s--,s==0&&(s=1,Ql(1),xe(d)||Gl(1),Kl(1),xe(m)||Xl(1),h?.(ut)&&(Ce(d,($,S)=>Ce($,(D,Y)=>Ce(D,([Z],he)=>Lc(ut,S,Y,he,Z)))),ds(d),Ce(m,([$],S)=>Mc(ut,S,$)),ds(m)),G(W[0],void 0),s=-1,Ql(0),xe(d)||Gl(0),Kl(0),xe(m)||Xl(0),i[1]?.(),G(W[1],void 0),i[2]?.(),s=0,n=Ys(),r=Js(),jr([o,a,l,c,u,d,w,f,m,v],ds))),ut),ut={getContent:uh,getTables:Lo,getTableIds:St,getTable:dh,getTableCellIds:ec,getRowCount:tc,getRowIds:gr,getSortedRowIds:Bs,getRow:fh,getCellIds:Mo,getCell:zs,getValues:Oo,getValueIds:No,getValue:Ws,hasTables:Ys,hasTable:nc,hasTableCell:rc,hasRow:sc,hasCell:ic,hasValues:Js,hasValue:oc,getTablesJson:hh,getValuesJson:gh,getJson:ph,getTablesSchemaJson:mh,getValuesSchemaJson:wh,getSchemaJson:vh,hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:yh,setTables:Qs,setTable:bh,setRow:xh,addRow:_h,setPartialRow:kh,setCell:$h,setValues:Ks,setPartialValues:Sh,setValue:Ch,applyChanges:Eh,setTablesJson:ac,setValuesJson:Ah,setJson:Rh,setTablesSchema:lc,setValuesSchema:cc,setSchema:Th,delTables:Gs,delTable:uc,delRow:dc,delCell:Ph,delValues:Xs,delValue:jh,delTablesSchema:fc,delValuesSchema:Do,delSchema:Lh,transaction:qo,startTransaction:hc,getTransactionChanges:Mh,getTransactionLog:Oh,finishTransaction:gc,forEachTable:h=>Ce(T,($,S)=>h(S,D=>Ce($,(Y,Z)=>D(Z,he=>At(Y,he))))),forEachTableCell:(h,$)=>At(te(q,De(h)),$),forEachRow:(h,$)=>Ce(te(T,De(h)),(S,D)=>$(D,Y=>At(S,Y))),forEachCell:(h,$,S)=>At(te(te(T,De(h)),De($)),S),forEachValue:h=>At(g,h),addSortedRowIdsListener:(h,$,S,D,Y,Z,he)=>Bi(h)?Zl(h.tableId,h.cellId,[h.descending??!1,h.offset??0,h.limit],$,S):Zl(h,$,[S,D,Y],Z,he),addStartTransactionListener:h=>se(h,P),addWillFinishTransactionListener:h=>se(h,W[0]),addDidFinishTransactionListener:h=>se(h,W[1]),callListener:h=>(le(h),ut),delListener:h=>(pe(h),ut),getListenerStats:()=>({hasTables:Qe(p),tables:Qe(b),tableIds:Qe(C),hasTable:Qe(M),table:Qe(N),tableCellIds:Qe(O),hasTableCell:Qe(X,Zr),rowCount:Qe(ne),rowIds:Qe(K),sortedRowIds:Qe(H),hasRow:Qe(L,Zr),row:Qe(ee,Zr),cellIds:Qe(z,Zr),hasCell:Qe(B,zo),cell:Qe(F,zo),invalidCell:Qe(oe,zo),hasValues:Qe(we),values:Qe(ke),valueIds:Qe(ae),hasValue:Qe(re),value:Qe(R),invalidValue:Qe(ce),transaction:rl(P)+Qe(W)}),isMergeable:()=>!1,createStore:Ad,addListener:se,callListeners:G,setInternalListeners:(h,$,S,D,Y)=>i=[h,$,S,D,Y]};return cn({[qn+Cc]:[0,p,[],()=>[Ys()]],[Cc]:[0,b],[R0]:[0,C],[qn+$r]:[1,M,[St],h=>[nc(...h)]],[$r]:[1,N,[St]],[$r+Ec]:[1,O,[St]],[qn+$r+Si]:[2,X,[St,ec],h=>[rc(...h)]],[T0]:[1,ne,[St]],[P0]:[1,K,[St]],[qn+Vi]:[2,L,[St,gr],h=>[sc(...h)]],[Vi]:[2,ee,[St,gr]],[Ec]:[2,z,[St,gr]],[qn+Si]:[3,B,[St,gr,Mo],h=>[ic(...h)]],[Si]:[3,F,[St,gr,Mo],h=>li(zs(...h))],InvalidCell:[3,oe],[qn+Ac]:[0,we,[],()=>[Js()]],[Ac]:[0,ke],[j0]:[0,ae],[qn+Ui]:[1,re,[No],h=>[oc(...h)]],[Ui]:[1,R,[No],h=>li(Ws(h[0]))],InvalidValue:[1,ce]},([h,$,S,D],Y)=>{ut[vd+Y+ma]=(...Z)=>se(Z[h],$[Z[h+1]?1:0],h>0?va(Z,0,h):void 0,S,D)}),kd(ut)},up={HasTable:1,Table:1,TableCellIds:1,HasTableCell:2,RowCount:1,RowIds:1,SortedRowIds:5,HasRow:2,Row:2,CellIds:2,HasCell:3,Cell:3,HasValue:1,Value:1,InvalidCell:3,InvalidValue:1},Uc=(e=at)=>[zi(e),zi(e)],dp=e=>ko(e)&&zt(e)==2&&wr(e[0],t=>jt(t,n=>wr(n,r=>jt(r,s=>wr(s,i=>jt(i,o=>wr(o,jc),void 0,1)),void 0,1)),void 0,1))&&wr(e[1],t=>jt(t,n=>wr(n,jc),void 0,1)),fp=(e,t)=>{let n=1,r=Uc(),s=0;const i=be(),o=Kn(),[a,l]=op(e,t),c=Ad(),u=H=>{const L=n;return n=0,H(),n=L,K},d=(H,L=0)=>{const ee={},z={},[[B,F=at,oe=0],ce]=H,[we,ke]=r,[ae,re,R]=we;let P=L?oe:R,W=F;Yt(B,([G,pe=at,le=0],de)=>{const J=Ze(ae,de,zi),[fe,rt,lt]=J;let Xe=L?le:lt,it=pe;Yt(G,(We,nt)=>{const[He,Ye,pt]=f(We,Ze(fe,nt,zi),an(an(ee,de,yn),nt,yn),L);Xe^=L?0:Jo(Ye?mr(nt,Ye):0,mr(nt,pt)),it=ii(it,He)}),Xe^=L?0:Qo(rt,pe),oi(J,pe,Xe),P^=L?0:Jo(lt?mr(de,lt):0,mr(de,J[2])),W=ii(W,it)}),P^=L?0:Qo(re,F),oi(we,F,P);const[se]=f(ce,ke,z,L);return l(ii(W,se)),[ee,z,1]},f=(H,L,ee,z)=>{const[B,F=at,oe=0]=H,[ce,we,ke]=L;let ae=F,re=z?oe:ke;return Yt(B,([R,P=at,W=0],se)=>{const G=Ze(ce,se,()=>[void 0,at,0]),[,pe,le]=G;(!pe||P>pe)&&(oi(G,P,z?W:ip(R,P)),G[0]=R,ee[se]=R,re^=z?0:Jo(mr(se,le),mr(se,G[2])),ae=ii(ae,P))}),re^=z?0:Qo(we,F),oi(L,F,re),[ae,ke,L[2]]},m=Pc,w=Pc,v=()=>{ds(i),ds(o)},x=(H,L,ee,z)=>{Gn(Ze(Ze(i,H,be),L,Kn),ee),n&&d([[{[H]:[{[L]:[{[ee]:[z,s?at:a()]}]}]}],[{}],1])},E=(H,L)=>{Gn(o,H),n&&d([[{}],[{[H]:[L,s?at:a()]}],1])},_=()=>[ai(r[0],H=>ai(H,L=>ai(L))),ai(r[1])],A=()=>[r[0][2],r[1][2]],j=()=>st(r[0][0],Fc),U=H=>{const L=Yr(r[0][1]),ee={};return At(r[0][0],(z,[B,F,oe])=>Sn(H,z)?oe!=H[z]?ee[z]=oe:0:L[0][z]=Ko([B,F],ce=>Ko(ce))),[L,ee]},q=H=>{const L={};return Yt(H,(ee,z)=>qe(te(r[0][0],z),([B,,F])=>F!=ee?At(B,(oe,[,,ce])=>an(L,z,yn)[oe]=ce):0)),L},T=H=>{const L=Yr(r[0][1]),ee={};return Yt(H,(z,B)=>At(te(r[0][0],B)?.[0],(F,[oe,ce,we])=>Sn(z,F)?we!==z[F]?an(ee,B,yn)[F]=we:0:an(L[0],B,Yr)[0][F]=Ko([oe,ce]))),[L,ee]},g=H=>{const L={};return Yt(H,(ee,z)=>qe(te(r[0][0],z),([B])=>Yt(ee,(F,oe)=>qe(te(B,oe),([ce,,we])=>we!==F?At(ce,(ke,[,,ae])=>an(an(L,z,yn),oe,yn)[ke]=ae):0)))),L},p=H=>{const[[L,ee]]=r,z={};return Yt(H,(B,F)=>Yt(B,(oe,ce)=>qe(te(L,F),([we,ke])=>qe(te(we,ce),([ae,re])=>At(ae,(R,[P,W,se])=>se!==oe[R]?an(an(z,F,()=>Yr(ke))[0],ce,()=>Yr(re))[0][R]=[P,W]:0))))),Ar(z,ee)},b=()=>st(r[1][0],Fc),C=H=>{const[,[L,ee]]=r,z=st(L,Ed,([,,B],F)=>B==H?.[F]);return Ar(z,ee)},M=H=>u(()=>dp(H)?c.transaction(()=>{c.delTables().delValues(),r=Uc(),c.applyChanges(d(H,1))}):0),N=H=>(c.transaction(()=>{s=1,c.setContent(H),s=0}),K),O=(H=!1)=>{const[[L,ee,z],[B,F,oe]]=r,ce=H?cp:Ar,we={};Ce(i,(ae,re)=>qe(te(L,re),([R,P,W])=>{const se={};Ce(ae,(G,pe)=>qe(te(R,pe),([le,de,J])=>{const fe={};Ce(G,rt=>{qe(te(le,rt),([lt,Xe,it])=>fe[rt]=ce(lt,Xe,it))}),se[pe]=ce(fe,de,J)})),we[re]=ce(se,P,W)}));const ke={};return Ce(o,ae=>qe(te(B,ae),([re,R,P])=>ke[ae]=ce(re,R,P))),[ce(we,ee,z),ce(ke,F,oe),1]},X=H=>u(()=>c.applyChanges(d(H))),K={getMergeableContent:_,getMergeableContentHashes:A,getMergeableTableHashes:j,getMergeableTableDiff:U,getMergeableRowHashes:q,getMergeableRowDiff:T,getMergeableCellHashes:g,getMergeableCellDiff:p,getMergeableValueHashes:b,getMergeableValueDiff:C,setMergeableContent:M,setDefaultContent:N,getTransactionMergeableChanges:O,applyMergeableChanges:X,merge:H=>{const L=_(),ee=H.getMergeableContent();return H.applyMergeableChanges(L),X(ee)}};return c.setInternalListeners(m,w,v,x,E),cn(c,(H,L)=>K[L]=ri(L,E0)||ri(L,A0)||ri(L,"apply")||Rc(L,L0)||L=="call"+ma?(...ee)=>(H(...ee),K):ri(L,vd)&&Rc(L,ma)?(...ee)=>{const z=up[va(L,3,-8)]??0,B=ee[z];return ee[z]=(F,...oe)=>B(K,...oe),H(...ee)}:L=="isMergeable"?()=>!0:H),kd(K)},Wi="",Rd="￼",Gt=e=>e==null,Yi=(e,t,n)=>Gt(e)?n?.():t(e),ka=e=>Array.isArray(e),or=e=>e.length,hp=(e,t)=>e.test(t),Td=e=>{throw new Error(e)},Qr=async(e,t,n)=>{try{return await e()}catch(r){t?.(r)}},$a=(e,t)=>e.forEach(t),gp=(e,t)=>e.splice(0,t),sl=(e,...t)=>e.push(...t),Pd=e=>e.shift(),$o=Object,Ic=e=>$o.getPrototypeOf(e),pp=e=>!Gt(e)&&Yi(Ic(e),t=>t==$o.prototype||Gt(Ic(t)),()=>!0),mp=$o.keys,wp=$o.freeze,vp=e=>or(mp(e)),ui=e=>pp(e)&&vp(e)==0,yp=JSON.stringify,bp=JSON.parse,xp=e=>yp(e,(t,n)=>n===void 0?Rd:n),_p=e=>bp(e,(t,n)=>n===Rd?void 0:n),kp=e=>e?.size??0,$p=(e,t)=>e?.has(t)??!1,jd=e=>Gt(e)||kp(e)==0,Ld=(e,t)=>e?.forEach(t),Md=(e,t)=>e?.delete(t),Fs=e=>new Map(e),It=(e,t)=>e?.get(t),ar=(e,t,n)=>Gt(n)?(Md(e,t),e):e?.set(t,n),Sa=(e,t,n,r)=>($p(e,t)?r?.(It(e,t)):ar(e,t,n()),It(e,t)),Ca=(e,t,n,r,s=0)=>Yi((n?Sa:It)(e,t[s],s>or(t)-2?n:Fs),i=>{if(s>or(t)-2)return r?.(i)&&ar(e,t[s]),i;const o=Ca(i,t,n,r,s+1);return jd(i)&&ar(e,t[s]),o}),Sp=/^\d+$/,Cp=()=>{const e=[];let t=0;return[n=>(n?Pd(e):null)??Wi+t++,n=>{hp(Sp,n)&&or(e)<1e3&&sl(e,n)}]},Ep=e=>new Set(ka(e)||Gt(e)?e:[e]),Ap=(e,t)=>e?.add(t),Rp=(e,t=[Wi])=>{const n=[],r=(s,i)=>i==or(t)?sl(n,s):t[i]===null?Ld(s,o=>r(o,i+1)):$a([t[i],null],o=>r(It(s,o),i+1));return r(e,0),n},Tp=e=>{let t;const[n,r]=Cp(),s=Fs();return[(c,u,d,f=[],m=()=>[])=>{t??=e();const w=n(1);return ar(s,w,[c,u,d,f,m]),Ap(Ca(u,d??[Wi],Ep),w),w},(c,u,...d)=>$a(Rp(c,u),f=>Ld(f,m=>It(s,m)[0](t,...u??[],...d))),c=>Yi(It(s,c),([,u,d])=>(Ca(u,d??[Wi],void 0,f=>(Md(f,c),jd(f)?1:0)),ar(s,c),r(c),d)),c=>Yi(It(s,c),([u,,d=[],f,m])=>{const w=(...v)=>{const x=or(v);x==or(d)?u(t,...v,...m(v)):Gt(d[x])?$a(f[x]?.(...v)??[],E=>w(...v,E)):w(...v,d[x])};w()})]},di=Fs(),fi=Fs(),Pp=(e=1,t,n)=>e!=1&&t.isMergeable()?[1,t.getMergeableContent,()=>t.getTransactionMergeableChanges(!n),([[r],[s]])=>!ui(r)||!ui(s),t.setDefaultContent]:e!=2?[0,t.getContent,t.getTransactionChanges,([r,s])=>!ui(r)||!ui(s),t.setContent]:Td("Store type not supported by this Persister"),jp=(e,t,n,r,s,i,o,a={},l=0,c=[])=>{let u=0,d=0,f=0,m,w,v;Sa(di,c,()=>0),Sa(fi,c,()=>[]);const x=Fs(),[E,_,A,j,U]=Pp(o,e,l),[q,T,g]=Tp(()=>re),p=R=>{R!=u&&(u=R,T(x,void 0,u))},b=async()=>{if(!It(di,c)){for(ar(di,c,1);!Gt(m=Pd(It(fi,c)));)await Qr(m,i);ar(di,c,0)}},C=R=>{(E&&ka(R?.[0])?R?.[2]===1?e.applyMergeableChanges:e.setMergeableContent:R?.[2]===1?e.applyChanges:e.setContent)(R)},M=async R=>(u!=2&&(p(1),d++,await ce(async()=>{await Qr(async()=>{const P=await t();ka(P)?C(P):R?U(R):Td(`Content is not an array: ${P}`)},()=>{R&&U(R)}),p(0)})),re),N=async R=>(O(),await M(R),await Qr(async()=>w=await r(async(P,W)=>{W||P?u!=2&&(p(1),d++,C(W??P),p(0)):await M()}),i),re),O=async()=>(w&&(await Qr(()=>s(w),i),w=void 0),re),X=()=>!Gt(w),ne=async R=>(u!=1&&(p(2),f++,await ce(async()=>{await Qr(()=>n(_,R),i),p(0)})),re),K=async()=>(H(),await ne(),v=e.addDidFinishTransactionListener(()=>{const R=A();j(R)&&ne(R)}),re),H=async()=>(v&&(e.delListener(v),v=void 0),re),L=()=>!Gt(v),ee=async(R,P=!1)=>{const[W,se]=P?[K,N]:[N,K];return await W(R),await se(R),re},z=async(R=!1)=>{const[P,W]=R?[H,O]:[O,H];return await P(),await W(),re},B=()=>u,F=R=>q(R,x),oe=R=>(g(R),e),ce=async(...R)=>(sl(It(fi,c),...R),await b(),re),re={load:M,startAutoLoad:N,stopAutoLoad:O,isAutoLoading:X,save:ne,startAutoSave:K,stopAutoSave:H,isAutoSaving:L,startAutoPersisting:ee,stopAutoPersisting:z,getStatus:B,addStatusListener:F,delListener:oe,schedule:ce,getStore:()=>e,destroy:()=>(gp(It(fi,c)),z()),getStats:()=>({loads:d,saves:f}),...a};return wp(re)},Lp=(e,t,n)=>jp(e,async()=>_p(await(await t.getFile()).text()),async a=>{const l=await t.createWritable();await l.write(xp(a())),await l.close()},async a=>{const l=new FileSystemObserver(()=>a());return await l.observe(t),l},a=>a?.disconnect(),n,3,{getHandle:()=>t}),Mp="https://localhost",Et="/api/v1";let ot=Mp;ot.endsWith("/api/v1")&&(ot=ot.replace("/api/v1",""));const gt={SIGNUP:`${ot}${Et}/auth/signup`,SIGNIN:`${ot}${Et}/auth/signin`,SIGNOUT:`${ot}${Et}/auth/signout`,REFRESH:`${ot}${Et}/auth/refresh`,SEND_VERIFICATION:`${ot}${Et}/auth/send-verification`,VERIFY_EMAIL:`${ot}${Et}/auth/verify-email`,REQUEST_PASSWORD_RESET:`${ot}${Et}/auth/request-password-reset`,RESET_PASSWORD:`${ot}${Et}/auth/reset-password`,CURRENT_USER:`${ot}${Et}/users/me`,SEARCH_USERS:`${ot}${Et}/users/search`,PROJECTS:`${ot}${Et}/projects`,REVIEWS:`${ot}${Et}/reviews`,CHECKLISTS:`${ot}${Et}/checklists`,ELECTRIC_SHAPE:"https://localhost/v1/shape",HEALTH:`${ot}/healthz`,HEALTH_DB:`${ot}/healthz/db`};async function Op(e,t,n){const r=Intl.DateTimeFormat().resolvedOptions().timeZone,s=navigator.language,i=await fetch(gt.SIGNUP,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:n,timezone:r,locale:s})});if(!i.ok){const o=await i.text();throw console.error("Signup error:",o),new Error(o||"Signup failed")}}let Mr=null;function Np(){return Mr}async function Dp(e,t){const n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=navigator.language,s=await fetch(gt.SIGNIN,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t,timezone:n,locale:r})});if(!s.ok){const o=await s.text();throw console.error("Sign in failed:",o),new Error(o||"Sign in failed")}Mr=(await s.json()).accessToken}async function Go(){const e=await nn(gt.CURRENT_USER);if(!e.ok){const t=await e.text();throw console.error("Failed to fetch user:",t),new Error(t||"Failed to fetch user")}return await e.json()}async function nn(e,t={}){performance.now(),t.headers={...t.headers,Authorization:`Bearer ${Mr}`},t.credentials="include";let n=await fetch(e,t);if(n.status===401||n.status===403)try{await Ea(),t.headers.Authorization=`Bearer ${Mr}`,t.credentials="include",n=await fetch(e,t)}catch(r){throw await Od(),new Error("Session expired. Please log in again. Error:",r)}return n}async function Ea(){const e=await fetch(gt.REFRESH,{method:"POST",credentials:"include"});if(!e.ok){const n=await e.text();throw console.error("Refresh failed:",n),new Error(n||"Refresh failed")}Mr=(await e.json()).accessToken}async function Od(){await fetch(gt.SIGNOUT,{method:"POST",credentials:"include"}),Mr=null}async function qp(e){const t=await fetch(gt.SEND_VERIFICATION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})});if(console.log("Send verification response:",await t.text()),!t.ok){const n=await t.text();throw console.error("Send verification error:",n),new Error(n||"Failed to send verification email")}}async function Fp(e,t){const n=await fetch(gt.VERIFY_EMAIL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,code:t})});if(!n.ok){const r=await n.text();throw console.error("Verify email error:",r),new Error(r||"Email verification failed")}}async function il(e){console.log("Creating project with name:",e);try{let t=performance.now();const n=await nn(`${gt.PROJECTS}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});let r=performance.now();if(console.log(`createProject API call took ${r-t} ms`),!n.ok){const i=await n.json();throw new Error(i.detail||"Failed to create project")}let s=await n.json();return console.log("Project created successfully:",s),s}catch(t){throw console.error("Error creating project:",t),t}}async function Vp(e,t){try{const n=await nn(`${gt.PROJECTS}/${e}/members/add-by-email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(!n.ok){const r=await n.json();throw new Error(r.detail||"Failed to add user to project")}return await n.json()}catch(n){throw console.error("Error adding user to project by email:",n),n}}async function Nd(e){try{const t=await nn(`${gt.PROJECTS}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const n=await t.json();throw new Error(n.detail||"Failed to delete project")}return!0}catch(t){throw console.error("Error deleting project:",t),t}}const Ik=Object.freeze(Object.defineProperty({__proto__:null,addUserToProjectByEmail:Vp,createProject:il,deleteProject:Nd},Symbol.toStringTag,{value:"Module"}));async function Up(e,t){try{const n=await nn(`${gt.REVIEWS}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,project_id:t})});if(!n.ok){const r=await n.json();throw new Error(r.detail||"Failed to create review")}return await n.json()}catch(n){throw console.error("Error creating review:",n),n}}async function Ip(e){try{const t=await nn(`${gt.REVIEWS}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const n=await t.json();throw new Error(n.detail||"Failed to delete review")}return!0}catch(t){throw console.error("Error deleting review:",t),t}}async function Hp(e,t=null){try{const n={review_id:e,reviewer_id:t,type:"amstar"};t&&(n.reviewer_id=t);const r=await nn(`${gt.CHECKLISTS}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok){const s=await r.json();throw new Error(s.detail||"Failed to create checklist")}return await r.json()}catch(n){throw console.error("Error creating checklist:",n),n}}async function Bp(e){try{const t=await nn(`${gt.CHECKLISTS}/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const n=await t.json();throw new Error(n.detail||"Failed to delete checklist")}return!0}catch(t){throw console.error("Error deleting checklist:",t),t}}async function Dd(e,t,n,r=!1){try{const s=await nn(`${gt.CHECKLISTS}/${e}/answers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question_key:t,answers:n,critical:r})});if(!s.ok){const i=await s.json();throw new Error(i.detail||"Failed to save answer")}return await s.json()}catch(s){throw console.error("Error saving checklist answer:",s),s}}const bt=[],Xo={CREATE_PROJECT:"CREATE_PROJECT",UPDATE_PROJECT:"UPDATE_PROJECT",DELETE_PROJECT:"DELETE_PROJECT"};function zp(e,t,n,r=null){console.log("Enqueuing operation:",e,t,n,r);const s={id:n,type:e,data:t,status:"pending",snapshot:r};return bt.push(s),Aa(),s}async function Aa(){if(bt.length===0)return;const e=bt[0];console.log("Processing operation:",bt.length,e);try{let t;switch(e.type){case Xo.CREATE_PROJECT:t=await il(e.data),console.log("Created project on server:",t),e.id&&(console.log(`Replacing tempId ${e.id} with server id ${t.id}`),Wp(e.id,t.id,"project"));break;case Xo.UPDATE_PROJECT:break;case Xo.DELETE_PROJECT:break}e.status="completed",bt.shift(),bt.length>0&&Aa()}catch(t){e.status="failed",e.error=t.message,console.error("Operation failed:",t),Ot.loadStoreSnapshot(e.snapshot),console.log("Applied snapshot:",e.snapshot),bt.shift(),Jp(e.id),bt.length>0&&Aa()}}function Wp(e,t,n){const r=Ot.tinyStore;switch(Yp(e,t,n),n){case"project":{const s=r.getRow("projects",e);s&&(r.delRow("projects",e),r.setRow("projects",t,s)),Object.entries(r.getTable("project_members")||{}).filter(([a,l])=>l.project_id===e).forEach(([a,l])=>{r.delRow("project_members",a);const c=a.replace(e,t);r.setRow("project_members",c,{...l,project_id:t})}),Object.entries(r.getTable("reviews")||{}).filter(([a,l])=>l.project_id===e).forEach(([a,l])=>{r.setRow("reviews",a,{...l,project_id:t})});break}case"review":{const s=r.getRow("reviews",e);s&&(r.delRow("reviews",e),r.setRow("reviews",t,s)),Object.entries(r.getTable("review_assignments")||{}).filter(([a,l])=>l.review_id===e).forEach(([a,l])=>{r.delRow("review_assignments",a);const c=a.replace(e,t);r.setRow("review_assignments",c,{...l,review_id:t})}),Object.entries(r.getTable("checklists")||{}).filter(([a,l])=>l.review_id===e).forEach(([a,l])=>{r.setRow("checklists",a,{...l,review_id:t})});break}case"checklist":{const s=r.getRow("checklists",e);s&&(r.delRow("checklists",e),r.setRow("checklists",t,s)),Object.entries(r.getTable("checklist_answers")||{}).filter(([o,a])=>a.checklist_id===e).forEach(([o,a])=>{r.setRow("checklist_answers",o,{...a,checklist_id:t})});break}}}function Yp(e,t,n){console.log(`Updating queue IDs from ${e} to ${t} for entity type ${n}`);for(const r of bt)if(r!==bt[0])switch(r.id===e&&(r.id=t),n){case"project":{r.data.project_id===e&&(r.data.project_id=t),r.rollbackData?.project_id===e&&(r.rollbackData.project_id=t);break}case"review":{r.data.review_id===e&&(r.data.review_id=t),r.rollbackData?.review_id===e&&(r.rollbackData.review_id=t);break}case"checklist":{r.data.checklist_id===e&&(r.data.checklist_id=t),r.rollbackData?.checklist_id===e&&(r.rollbackData.checklist_id=t);break}}}function Jp(e){bt.forEach((n,r)=>{Object.values(n.data).some(i=>i===e)&&(console.log("Removing dependent operation:",n),n.status="removed")});const t=bt.filter(n=>n.status!=="removed");bt.length=0,bt.push(...t)}const ue=fp(),Hc={users:{id:{type:"string"},email:{type:"string"},name:{type:"string"}},projects:{id:{type:"string"},name:{type:"string"},updated_at:{type:"string"},owner_id:{type:"number"}},project_members:{id:{type:"string"},project_id:{type:"string"},user_id:{type:"string"},role:{type:"string"}},reviews:{id:{type:"string"},project_id:{type:"string"},name:{type:"string"},created_at:{type:"string"}},review_assignments:{id:{type:"string"},review_id:{type:"string"},user_id:{type:"string"}},checklists:{id:{type:"string"},review_id:{type:"string"},reviewer_id:{type:"string"},type:{type:"string"},completed_at:{type:"string"},updated_at:{type:"string"}},checklist_answers:{id:{type:"string"},checklist_id:{type:"string"},question_key:{type:"string"},answers:{type:"string"},critical:{type:"boolean"},updated_at:{type:"string"}}};async function Qp(){const t=await(await navigator.storage.getDirectory()).getFileHandle("tinybase.json",{create:!0});ue.setSchema(Hc);const n=Lp(ue,t),[r,s]=Q([]),[i,o]=Q([]),[a,l]=Q([]),[c,u]=Q([]),[d,f]=Q([]),[m,w]=Q([]),[v,x]=Q([]),[E,_]=ld({currentProject:null,currentReview:null,currentChecklist:null,dataLoading:!0});function A(){const R=ue.addTableListener("projects",()=>{const de=Object.entries(ue.getTable("projects")||{}).map(([J,fe])=>({...fe,id:J}));s(de)}),P=ue.addTableListener("users",()=>{const de=Object.entries(ue.getTable("users")||{}).map(([J,fe])=>({...fe,id:J}));o(de)}),W=ue.addTableListener("reviews",()=>{const de=Object.entries(ue.getTable("reviews")||{}).map(([J,fe])=>({...fe,id:J}));l(de)}),se=ue.addTableListener("checklists",()=>{const de=Object.entries(ue.getTable("checklists")||{}).map(([J,fe])=>({...fe,id:J}));u(de)}),G=ue.addTableListener("checklist_answers",()=>{const de=Object.entries(ue.getTable("checklist_answers")||{}).map(([J,fe])=>{if(typeof fe.answers=="string")try{return{...fe,id:J,answers:JSON.parse(fe.answers)}}catch{return console.warn("Failed to parse answers JSON:",fe.answers),{...fe,id:J}}return{...fe,id:J}});f(de)}),pe=ue.addTableListener("project_members",()=>{const de=Object.entries(ue.getTable("project_members")||{}).map(([J,fe])=>({...fe,id:J}));w(de)}),le=ue.addTableListener("review_assignments",()=>{const de=Object.entries(ue.getTable("review_assignments")||{}).map(([J,fe])=>({...fe,id:J}));x(de)});return()=>{ue.removeTableListener(R),ue.removeTableListener(P),ue.removeTableListener(W),ue.removeTableListener(se),ue.removeTableListener(G),ue.removeTableListener(pe),ue.removeTableListener(le)}}A(),Mi(()=>{const R=Object.entries(ue.getTable("projects")||{}).map(([de,J])=>({...J,id:de}));s(R);const P=Object.entries(ue.getTable("users")||{}).map(([de,J])=>({...J,id:de}));o(P);const W=Object.entries(ue.getTable("reviews")||{}).map(([de,J])=>({...J,id:de}));l(W);const se=Object.entries(ue.getTable("checklists")||{}).map(([de,J])=>({...J,id:de}));u(se);const G=Object.entries(ue.getTable("checklist_answers")||{}).map(([de,J])=>{if(typeof J.answers=="string")try{return{...J,id:de,answers:JSON.parse(J.answers)}}catch{return{...J,id:de}}return{...J,id:de}});f(G);const pe=Object.entries(ue.getTable("project_members")||{}).map(([de,J])=>({...J,id:de}));w(pe);const le=Object.entries(ue.getTable("review_assignments")||{}).map(([de,J])=>({...J,id:de}));x(le),_("dataLoading",!1)});const j=async R=>{if(!R.id)throw new Error("Project must have an ID");let P={id:R.id,name:R.name,owner_id:1234,updated_at:new Date().toISOString()};zp("CREATE_PROJECT",R.name,R.id,ae()),ue.setRow("projects",R.id,P),console.log("Saved project:",P,ue.getTable("projects"))},U=async R=>(ue.delRow("projects",R),m().filter(se=>se.project_id===R).forEach(se=>{ue.delRow("project_members",se.id)}),a().filter(se=>se.project_id===R).forEach(se=>{v().filter(le=>le.review_id===se.id).forEach(le=>{ue.delRow("review_assignments",le.id)}),c().filter(le=>le.review_id===se.id).forEach(le=>{d().filter(J=>J.checklist_id===le.id).forEach(J=>{ue.delRow("checklist_answers",J.id)}),ue.delRow("checklists",le.id)}),ue.delRow("reviews",se.id)}),E.currentProject?.id===R&&_({currentProject:null,currentReview:null,currentChecklist:null}),!0),q=R=>{const P=r().find(W=>W.id===R)||null;return _("currentProject",P),_({currentReview:null,currentChecklist:null}),P},T=R=>{const P=a().find(W=>W.id===R)||null;return _("currentReview",P),_("currentChecklist",null),P},g=R=>{const P=c().find(W=>W.id===R)||null;return _("currentChecklist",P),P},p=async R=>{if(!R.id)throw new Error("Review must have an ID");if(!R.project_id)throw new Error("Review must have a project_id");return ue.setRow("reviews",R.id,R),R},b=async R=>a().find(G=>G.id===R)?(v().filter(G=>G.review_id===R).forEach(G=>{ue.delRow("review_assignments",G.id)}),c().filter(G=>G.review_id===R).forEach(G=>{d().filter(le=>le.checklist_id===G.id).forEach(le=>{ue.delRow("checklist_answers",le.id)}),ue.delRow("checklists",G.id)}),ue.delRow("reviews",R),E.currentReview?.id===R&&_({currentReview:null,currentChecklist:null}),!0):!1,C=async R=>{if(!R.id)throw new Error("Checklist must have an ID");if(!R.review_id)throw new Error("Checklist must have a review_id");return ue.setRow("checklists",R.id,R),R},M=async R=>(d().filter(W=>W.checklist_id===R).forEach(W=>{ue.delRow("checklist_answers",W.id)}),ue.delRow("checklists",R),E.currentChecklist?.id===R&&_("currentChecklist",null),!0),N=async R=>{if(!R.id)throw new Error("Answer must have an ID");if(!R.checklist_id)throw new Error("Answer must have a checklist_id");const P={...R};return typeof P.answers!="string"&&(Array.isArray(P.answers)||typeof P.answers=="object")&&(P.answers=JSON.stringify(P.answers)),ue.setRow("checklist_answers",R.id,P),R},O=async R=>(ue.delRow("checklist_answers",R),!0),X=async(R,P,W="member")=>{const se=`${R}::${P}`,G={project_id:R,user_id:P,role:W};return ue.setRow("project_members",se,G),G},ne=async(R,P)=>{const W=`${R}::${P}`;return ue.delRow("project_members",W),!0},K=async(R,P)=>{const W=`${R}::${P}`,se={review_id:R,user_id:P};return ue.setRow("review_assignments",W,se),se},H=async(R,P)=>{const W=`${R}::${P}`;return ue.delRow("review_assignments",W),!0},L=R=>a().filter(P=>P.project_id===R),ee=R=>c().filter(P=>P.review_id===R),z=R=>d().filter(P=>P.checklist_id===R),B=R=>m().filter(P=>P.project_id===R),F=R=>v().filter(P=>P.review_id===R),oe=R=>{const P=m().filter(W=>W.user_id===R).map(W=>W.project_id);return r().filter(W=>P.includes(W.id))},ce=R=>{const P=c().find(W=>W.id===R);return!P||!P.reviewer_id?null:i().find(W=>W.id===P.reviewer_id)||null},we=R=>{const P=c().find(W=>W.id===R);return P&&a().find(W=>W.id===P.review_id)||null},ke=R=>{const P=i().find(W=>W.id===R);return P?P.name:"Unknown User"},ae=()=>({projects:ue.getTable("projects")||{},project_members:ue.getTable("project_members")||{},reviews:ue.getTable("reviews")||{},review_assignments:ue.getTable("review_assignments")||{},checklists:ue.getTable("checklists")||{},checklist_answers:ue.getTable("checklist_answers")||{}});return{projects:r,users:i,reviews:a,checklists:c,checklistAnswers:d,projectMembers:m,reviewAssignments:v,state:E,setState:_,isLoaded:()=>!E.dataLoading,addProject:j,deleteProject:U,setCurrentProject:q,addReview:p,deleteReview:b,setCurrentReview:T,addChecklist:C,deleteChecklist:M,setCurrentChecklist:g,saveChecklistAnswer:N,deleteChecklistAnswer:O,addProjectMember:X,deleteProjectMember:ne,addReviewAssignment:K,deleteReviewAssignment:H,getReviewsForProject:L,getChecklistsForReview:ee,getAnswersForChecklist:z,getReviewForChecklist:we,getProjectMembers:B,getReviewAssignments:F,getProjectsForUser:oe,getReviewerForChecklist:ce,getUserName:ke,tinyStore:ue,persister:n,getStoreSnapshot:ae,loadStoreSnapshot:R=>{Mi(()=>{Object.keys(Hc).forEach(P=>{ue.delTable(P)}),Object.entries(R).forEach(([P,W])=>{Object.entries(W).forEach(([se,G])=>{ue.setRow(P,se,G)})})})}}}const Ot=await Qp();var Kp=I('<div class="bg-white rounded-lg shadow-md p-8 text-sm"><div class=flex><h3 class="font-semibold text-gray-900"></h3></div><div class="font-semibold text-gray-900 h-4 mt-2 mb-1"></div><div class="font-semibold text-gray-900 h-4 mt-2">'),Gp=I('<div class="bg-white rounded-lg shadow-md p-8 text-sm"><div class=flex><h3 class="font-semibold text-gray-900"></h3></div><div class="font-semibold text-gray-900 h-4 mt-2"></div><div class="font-semibold text-gray-900 h-4 mt-4">'),Xp=I('<div class="bg-white rounded-lg shadow-md p-7"><div class=flex><h3 class="font-semibold text-sm text-gray-900 mb-1">'),Zp=I("<div class=ml-auto><button>"),em=I('<div class="flex flex-col gap-4 sm:flex-row sm:gap-6">'),tm=I('<div><div class="font-semibold text-gray-800 text-xs break-words whitespace-normal min-w-0 w-full min-h-[2rem] flex items-center">'),nm=I('<div class="flex flex-col gap-2 mt-1">'),rm=I('<label class="flex items-center space-x-2 text-xs"><input type=radio class="w-3.5 h-3.5 text-blue-600 border-gray-300 focus:ring-blue-500 cursor-pointer"><span class="text-gray-700 break-words">'),sm=I('<div class="flex flex-col gap-2">'),im=I('<label class="flex items-center space-x-2 text-xs"><input type=checkbox class="w-3 h-3 shrink-0 text-blue-600 border-gray-300 focus:ring-blue-500"><span class="text-gray-700 break-words">'),om=I("<div class=space-y-6>"),am=I('<div class="min-h-screen bg-linear-to-br from-blue-50 to-indigo-100"><div class="container mx-auto px-4 py-6 max-w-5xl"><div class="bg-white rounded-lg shadow-lg p-6 mb-8"><h1 class="text-2xl font-bold text-gray-900 mb-4">AMSTAR 2 Checklist</h1><div class="grid md:grid-cols-3 gap-4 text-xs"><div><label for=reviewName class="block font-medium text-gray-700 mb-2">Review Title</label><input type=text id=reviewName class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"placeholder="Enter review title"></div><div><label for=reviewerName class="block font-medium text-gray-700 mb-2">Reviewer Name</label><input type=text id=reviewerName class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"placeholder="Enter your name"></div><div><label for=reviewDate class="block font-medium text-gray-700 mb-2">Review Date</label><input type=date id=reviewDate class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs">'),lm=I("<div>Loading...");function cm(e){const t=()=>e.checklistState().q1,n=ht.q1;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].every(Boolean);o[2][0]=l,o[2][1]=!l}s===2&&(i===0&&o[2][0]&&(o[2][1]=!1),i===1&&o[2][1]&&(o[2][0]=!1));const a={...e.checklistState().q1,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function um(e){const t=()=>e.checklistState().q2,n=ht.q2;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q2,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function dm(e){const t=()=>e.checklistState().q3,n=ht.q3;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q3,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function fm(e){const t=()=>e.checklistState().q4,n=ht.q4;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q4,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function hm(e){const t=()=>e.checklistState().q5,n=ht.q5;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q5,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function gm(e){const t=()=>e.checklistState().q6,n=ht.q6;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q6,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function pm(e){const t=()=>e.checklistState().q7,n=ht.q7;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q7,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function mm(e){const t=()=>e.checklistState().q8,n=ht.q8;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0||s===1){const l=o[0].every(Boolean),c=l&&o[1].every(Boolean);o[2][0]=c,o[2][1]=!c&&l,o[2][2]=!c&&!l}s===2&&(o[2]=o[2].map((l,c)=>c===i?!t().answers[2][i]:!1));const a={...e.checklistState().q8,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function wm(e){const t=()=>e.checklistState().q9a,n=()=>e.checklistState().q9b,r=ht.q9;function s(a,l){const c=t().answers.map(d=>[...d]);if(c[a][l]=!t().answers[a][l],a===0||a===1){const d=c[0].every(Boolean),f=d&&c[1].every(Boolean);c[2][0]=f,c[2][1]=!f&&d,c[2][2]=!f&&!d,c[2][3]=!1}a===2&&(c[2]=c[2].map((d,f)=>f===l?!t().answers[2][l]:!1));const u={...e.checklistState().q9a,answers:c};e.onUpdatea(u)}function i(a,l){const c=n().answers.map(d=>[...d]);if(c[a][l]=!n().answers[a][l],a===0||a===1){const d=c[0].every(Boolean),f=d&&c[1].every(Boolean);c[2][0]=f,c[2][1]=!f&&d,c[2][2]=!f&&!d,c[2][3]=!1}a===2&&(c[2]=c[2].map((d,f)=>f===l?!n().answers[2][l]:!1));const u={...e.checklistState().q9b,answers:c};console.log("Updating q9b to",u),e.onUpdateb(u)}function o(a){const l=a.critical,c={...t(),critical:l},u={...n(),critical:l};e.onUpdatea(c),setTimeout(()=>{e.onUpdateb(u)},10)}return(()=>{var a=Kp(),l=a.firstChild,c=l.firstChild,u=l.nextSibling,d=u.nextSibling;return y(c,()=>r.text),y(l,k(ol,{state:t,onUpdate:o}),null),y(u,()=>r.subtitle),y(a,k(Cs,{state:t,question:{text:"q9a"},get columns(){return r.columns},handleChange:s}),d),y(d,()=>r.subtitle2),y(a,k(Cs,{state:n,question:{text:"q9b"},get columns(){return r.columns2},handleChange:i}),null),a})()}function vm(e){const t=()=>e.checklistState().q10,n=ht.q10;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q10,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function ym(e){const t=()=>e.checklistState().q11a,n=()=>e.checklistState().q11b,r=ht.q11;function s(a,l){const c=t().answers.map(d=>[...d]);if(c[a][l]=!t().answers[a][l],a===0){const d=c[0].every(Boolean);c[1][0]=d,c[1][1]=!d,c[1][2]=!1}a===1&&(c[1]=c[1].map((d,f)=>f===l?!t().answers[1][l]:!1));const u={...e.checklistState().q11a,answers:c};e.onUpdatea(u)}function i(a,l){const c=n().answers.map(d=>[...d]);if(c[a][l]=!n().answers[a][l],a===0){const d=c[0].every(Boolean);c[1][0]=d,c[1][1]=!d,c[1][2]=!1}a===1&&(c[1]=c[1].map((d,f)=>f===l?!n().answers[1][l]:!1));const u={...e.checklistState().q11b,answers:c};e.onUpdateb(u)}function o(a){const l=a.critical,c={...t(),critical:l},u={...n(),critical:l};e.onUpdatea(c),setTimeout(()=>{e.onUpdateb(u)},10)}return(()=>{var a=Gp(),l=a.firstChild,c=l.firstChild,u=l.nextSibling,d=u.nextSibling;return y(c,()=>r.text),y(l,k(ol,{state:t,onUpdate:o}),null),y(u,()=>r.subtitle),y(a,k(Cs,{state:t,question:{text:"q11a"},get columns(){return r.columns},handleChange:s,width:"w-48"}),d),y(d,()=>r.subtitle2),y(a,k(Cs,{state:n,question:{text:"q11b"},get columns(){return r.columns2},handleChange:i,width:"w-48"}),null),a})()}function bm(e){const t=()=>e.checklistState().q12,n=ht.q12;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l,o[1][2]=!1}s===1&&(o[1]=o[1].map((l,c)=>c===i?!t().answers[1][i]:!1));const a={...e.checklistState().q12,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e,{width:"w-48"}))}function xm(e){const t=()=>e.checklistState().q13,n=ht.q13;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q13,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function _m(e){const t=()=>e.checklistState().q14,n=ht.q14;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q14,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function km(e){const t=()=>e.checklistState().q15,n=ht.q15;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l,o[1][2]=!1}s===1&&(o[1]=o[1].map((l,c)=>c===i?!t().answers[1][i]:!1));const a={...e.checklistState().q15,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e,{width:"w-48"}))}function $m(e){const t=()=>e.checklistState().q16,n=ht.q16;function r(s,i){const o=t().answers.map(l=>[...l]);if(o[s][i]=!t().answers[s][i],s===0){const l=o[0].some(Boolean);o[1][0]=l,o[1][1]=!l}s===1&&(i===0&&o[1][0]&&(o[1][1]=!1),i===1&&o[1][1]&&(o[1][0]=!1));const a={...e.checklistState().q16,answers:o};e.onUpdate(a)}return k($t,Ae({state:t,question:n,handleChange:r},e))}function $t(e){return(()=>{var t=Xp(),n=t.firstChild,r=n.firstChild;return y(r,()=>e.question.text),y(n,k(ol,{get state(){return e.state},get onUpdate(){return e.onUpdate}}),null),y(t,k(Cs,Ae({get columns(){return e.question.columns}},e)),null),t})()}function ol(e){function t(n){const r={...e.state(),critical:n};e.onUpdate(r)}return(()=>{var n=Zp(),r=n.firstChild;return r.$$click=()=>t(!e.state().critical),y(r,()=>e.state().critical?"Critical":"Not Critical"),ge(s=>{var i=`ml-2 px-3 h-6 rounded-full text-xs font-medium transition-colors text-nowrap
        ${e.state().critical?"bg-red-100 text-red-700 border border-red-300 hover:bg-red-200":"bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200"}`,o=e.state().critical;return i!==s.e&&ft(r,s.e=i),o!==s.t&&kt(r,"aria-pressed",s.t=o),s},{e:void 0,t:void 0}),n})()}function Cs(e){return(()=>{var t=em();return y(t,k(Ee,{get each(){return e.columns},children:(n,r)=>(()=>{var s=tm(),i=s.firstChild;return y(i,()=>n.label),y(s,(()=>{var o=et(()=>r()===e.columns.length-1);return()=>o()?(()=>{var a=nm();return y(a,k(Ee,{get each(){return n.options},children:(l,c)=>(()=>{var u=rm(),d=u.firstChild,f=d.nextSibling;return d.addEventListener("change",()=>e.handleChange(r(),c())),y(f,l),ge(()=>kt(d,"name",`col-${r()}-${e.question?.text??""}`)),ge(()=>d.checked=e.state().answers[r()][c()]),u})()})),a})():(()=>{var a=sm();return y(a,k(Ee,{get each(){return n.options},children:(l,c)=>(()=>{var u=im(),d=u.firstChild,f=d.nextSibling;return d.addEventListener("change",()=>e.handleChange(r(),c())),y(f,l),ge(()=>d.checked=e.state().answers[r()][c()]),u})()})),a})()})(),null),ge(()=>ft(s,r()===e.columns.length-1?`${e.width??"w-32"} flex flex-col min-w-0`:"flex-1 flex flex-col min-w-0")),s})()})),t})()}function Bc(){const[e,t]=Q(""),[n,r]=Q(""),[s,i]=Q(""),{getAnswersForChecklist:o,getReviewerForChecklist:a,getReviewForChecklist:l}=Ot,{dataLoading:c}=Ir(),[u,d]=Q(null),f=vo(),m=tn();Ie(async()=>{if(f.checklistId==="new"){const v=$s({name:"New 2 Checklist",id:await ki(),createdAt:Date.now(),reviewerName:""});d(v),f.projectId&&f.reviewId&&m(`/projects/${f.projectId}/reviews/${f.reviewId}/checklists/${v.id}`,{replace:!0})}else if(f.checklistId!==void 0){const v=o(f.checklistId),x=l(f.checklistId);if(!x)return;const E=$s({name:x.name,id:f.checklistId,reviewerName:a(f.checklistId)?.name,createdAt:x.created_at});v.forEach(_=>{E[_.question_key]&&(E[_.question_key].answers=_.answers,E[_.question_key].critical=_.critical)}),d(E)}else c()||(console.warn("AMSTAR2Checklist: No current checklist found for",f.checklistId),m("/dashboard"))}),Ie(()=>{u()&&(t(u().name||""),r(u().reviewerName||""),i(u().createdAt||""))});const w=v=>{const x=u(),E={...x,...v};Object.keys(v).forEach(async _=>{if(/^q\d+[a-z]*$/i.test(_)&&E[_])try{await Dd(E.id,_,E[_].answers,E[_].critical)}catch(A){console.error("Failed to save answer for",_,A),d(j=>({...j,[_]:x[_]}));return}}),d(E)};return(()=>{var v=am(),x=v.firstChild,E=x.firstChild,_=E.firstChild,A=_.nextSibling,j=A.firstChild,U=j.firstChild,q=U.nextSibling,T=j.nextSibling,g=T.firstChild,p=g.nextSibling,b=T.nextSibling,C=b.firstChild,M=C.nextSibling;return q.addEventListener("change",N=>{if(t(N.target.value),w({name:N.target.value}),console.log("Review name changed to",N.target.value),f.projectSlug&&f.reviewSlug&&f.checklistSlug&&u()){const O=f.checklistSlug.lastIndexOf("-"),X=O!==-1?f.checklistSlug.slice(O+1):f.checklistSlug,ne=vs(N.target.value)+"-"+X;m(`/projects/${f.projectSlug}/reviews/${f.reviewSlug}/checklists/${ne}`,{replace:!0})}}),p.addEventListener("change",N=>{r(N.target.value),w({reviewerName:N.target.value})}),M.addEventListener("change",N=>{i(N.target.value),w({reviewDate:N.target.value})}),y(x,k(_e,{get when(){return et(()=>!c())()&&u()},get fallback(){return lm()},get children(){var N=om();return y(N,k(cm,{onUpdate:O=>w({q1:O}),checklistState:u}),null),y(N,k(um,{onUpdate:O=>w({q2:O}),checklistState:u}),null),y(N,k(dm,{onUpdate:O=>w({q3:O}),checklistState:u}),null),y(N,k(fm,{onUpdate:O=>w({q4:O}),checklistState:u}),null),y(N,k(hm,{onUpdate:O=>w({q5:O}),checklistState:u}),null),y(N,k(gm,{onUpdate:O=>w({q6:O}),checklistState:u}),null),y(N,k(pm,{onUpdate:O=>w({q7:O}),checklistState:u}),null),y(N,k(mm,{onUpdate:O=>w({q8:O}),checklistState:u}),null),y(N,k(wm,{onUpdatea:O=>w({q9a:O}),onUpdateb:O=>w({q9b:O}),checklistState:u}),null),y(N,k(vm,{onUpdate:O=>w({q10:O}),checklistState:u}),null),y(N,k(ym,{onUpdatea:O=>w({q11a:O}),onUpdateb:O=>w({q11b:O}),checklistState:u}),null),y(N,k(bm,{onUpdate:O=>w({q12:O}),checklistState:u}),null),y(N,k(xm,{onUpdate:O=>w({q13:O}),checklistState:u}),null),y(N,k(_m,{onUpdate:O=>w({q14:O}),checklistState:u}),null),y(N,k(km,{onUpdate:O=>w({q15:O}),checklistState:u}),null),y(N,k($m,{onUpdate:O=>w({q16:O}),checklistState:u}),null),N}}),null),ge(()=>q.value=e()),ge(()=>p.value=n()),ge(()=>M.value=s()),v})()}tt(["click"]);var Sm=I('<div class="absolute w-full z-50"><ul class="max-h-[240px] overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg divide-y divide-gray-100">'),Cm=I('<div class="absolute w-full z-50"><div class="bg-white border border-gray-200 rounded-lg shadow-lg p-6 flex flex-col items-center justify-center text-gray-500"><svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600"xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Searching...'),Em=I('<div class="absolute w-full z-50"><div class="bg-white border border-gray-200 rounded-lg shadow-lg p-6 flex flex-col items-center justify-center text-gray-500"><svg class="h-12 w-12 text-gray-300 mb-2"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=1 d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><p class=text-sm>No users found'),Am=I('<div class="absolute w-full z-50"><div class="bg-white border border-gray-200 rounded-lg shadow-lg p-4 text-center"><p class="text-sm text-gray-500">Type at least 2 characters to search'),Rm=I('<div class="rounded-lg bg-red-50 border border-red-200 p-4 flex items-start"><svg class="h-5 w-5 text-red-400 mt-0.5 mr-3 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"clip-rule=evenodd></path></svg><p class="text-sm text-red-800">'),Tm=I('<div class="rounded-lg bg-green-50 border border-green-200 p-4 flex items-start"><svg class="h-5 w-5 text-green-400 mt-0.5 mr-3 flex-shrink-0"fill=currentColor viewBox="0 0 20 20"><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg><p class="text-sm text-green-800">'),Pm=I('<div class="fixed inset-0 z-50 w-full flex items-center justify-center bg-black/40 overflow-auto py-8"tabindex=-1 aria-label="Close dialog on backdrop click or Escape"><div class="max-w-2xl w-full mx-auto p-6 md:p-8 bg-white rounded-xl shadow-lg border border-gray-100 m-4"tabindex=0 aria-modal=true role=dialog><div class="flex justify-between items-start mb-6"><div><h3 class="text-2xl font-bold text-gray-900 mb-2">Add Team Members</h3><p class="text-sm text-gray-600">Search for users or add them directly by email</p></div><button class="text-gray-400 hover:text-gray-600 focus:outline-none"aria-label="Close dialog"><svg class="h-6 w-6"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M6 18L18 6M6 6l12 12"></path></svg></button></div><div class=mb-8><div class=relative><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><svg class="h-5 w-5 text-gray-400"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><input type=text placeholder="Search users by name or email"class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"autocomplete=off></div><div class="relative mt-3"></div></div><div class="relative mb-8"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-4 bg-white text-gray-500 font-medium">Or add by email</span></div></div><div class=space-y-4><div><label for=email class="block text-sm font-medium text-gray-700 mb-2">Email Address</label><input id=email type=email placeholder=colleague@example.com class="block w-full px-4 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"></div><button class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 shadow-md hover:shadow-lg">Add to Project</button><div class="h-[20px] mt-4"></div><div class="flex justify-end mt-8 pt-4 border-t border-gray-200"><button class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg mr-3 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Cancel</button><button class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Done'),jm=I('<li tabindex=0 role=button class="px-4 py-3 hover:bg-blue-50 cursor-pointer transition-colors duration-150 flex items-center justify-between group"><div class="flex items-center min-w-0"><div class="flex-shrink-0 h-10 w-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm"></div><div class="ml-3 min-w-0 flex-1"><p class="text-sm font-medium text-gray-900 truncate"></p><p class="text-sm text-gray-500 truncate"></p></div></div><svg class="h-5 w-5 text-gray-400 group-hover:text-blue-600 transition-colors"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5l7 7-7 7">');function Lm(e){const{searchUsers:t,addUserToProjectByEmail:n}=Ir(),[r,s]=Q(""),[i,o]=Q([]),[a,l]=Q(!1),[c,u]=Q(""),[d,f]=Q(""),[m,w]=Q("");let v;Ie(()=>{const _=r();if(!_||_.length<2){o([]);return}clearTimeout(v),_.length>=2&&(l(!0),u(""),v=setTimeout(async()=>{try{const A=await t(_);await new Promise(j=>setTimeout(j,100)),o(A)}catch(A){console.error("Search error:",A),u("Failed to search users"),o([])}finally{l(!1)}},100))});const x=async _=>{w(_.email),s(""),o([])},E=async _=>{if(_.preventDefault(),!m()){u("Please enter an email address");return}u(""),f("");try{const A=await n(e.projectId,m());f(`Added ${A.user.name} (${A.user.email}) to the project`),w("")}catch(A){u(A.message||"Failed to add user to project")}};return k(_e,{get when(){return e.open},get children(){return k(Qu,{get children(){var _=Pm(),A=_.firstChild,j=A.firstChild,U=j.firstChild,q=U.nextSibling,T=j.nextSibling,g=T.firstChild,p=g.firstChild,b=p.nextSibling,C=g.nextSibling,M=T.nextSibling,N=M.nextSibling,O=N.firstChild,X=O.firstChild,ne=X.nextSibling,K=O.nextSibling,H=K.nextSibling,L=H.nextSibling,ee=L.firstChild,z=ee.nextSibling;return _.$$keydown=B=>{B.key==="Escape"&&e.onClose?.()},_.$$click=B=>{B.target===B.currentTarget&&e.onClose?.()},A.$$keydown=()=>{},A.$$click=B=>B.stopPropagation(),q.$$click=()=>e.onClose?.(),b.$$input=B=>s(B.target.value),y(C,k(_e,{get when(){return i().length>0},get children(){var B=Sm(),F=B.firstChild;return y(F,k(Ee,{get each(){return i()},children:oe=>(()=>{var ce=jm(),we=ce.firstChild,ke=we.firstChild,ae=ke.nextSibling,re=ae.firstChild,R=re.nextSibling;return ce.$$keydown=P=>{(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),x(oe))},ce.$$click=()=>x(oe),y(ke,()=>oe.name?.charAt(0).toUpperCase()),y(re,()=>oe.name),y(R,()=>oe.email),ge(()=>kt(ce,"aria-label",`Select user ${oe.name}`)),ce})()})),B}}),null),y(C,k(_e,{get when(){return a()},get children(){return Cm()}}),null),y(C,k(_e,{get when(){return et(()=>!a()&&r().length>=2)()&&i().length===0},get children(){return Em()}}),null),y(C,k(_e,{get when(){return et(()=>r().length<2&&!a())()&&r().length>0},get children(){return Am()}}),null),ne.addEventListener("keypress",B=>B.key==="Enter"&&E(B)),ne.$$input=B=>w(B.target.value),K.$$click=E,y(H,k(_e,{get when(){return c()},get children(){var B=Rm(),F=B.firstChild,oe=F.nextSibling;return y(oe,c),B}}),null),y(H,k(_e,{get when(){return d()},get children(){var B=Tm(),F=B.firstChild,oe=F.nextSibling;return y(oe,d),B}}),null),ee.$$click=()=>e.onClose?.(),z.$$click=()=>e.onClose?.(),ge(()=>b.value=r()),ge(()=>ne.value=m()),_}})}})}tt(["click","keydown","input"]);var Mm=I('<div class="flex flex-wrap items-center justify-between mb-4 gap-2"><h2 class="text-xl font-bold"></h2><div class="flex gap-2"><button class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition flex items-center"><svg class="w-4 h-4 mr-1"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path></svg>Manage Members</button><button class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 transition">Delete Project');function Om(e){return(()=>{var t=Mm(),n=t.firstChild,r=n.nextSibling,s=r.firstChild,i=s.nextSibling;return y(n,()=>e.project.name),En(s,"click",e.onManageMembers,!0),i.$$click=()=>e.onDeleteProject(e.project.id),t})()}tt(["click"]);var Nm=I("<svg stroke-width=0>");function fr(e,t){const n=Ae(e.a,t),[r,s]=Wu(n,["src"]),[i,o]=Q(""),a=Fe(()=>t.title?`${e.c}<title>${t.title}</title>`:e.c);return Ie(()=>o(a())),vt(()=>{o("")}),(()=>{var l=Nm();return wt(l,Ae({get stroke(){return e.a?.stroke},get color(){return t.color||"currentColor"},get fill(){return t.color||"currentColor"},get style(){return{...t.style,overflow:"visible"}}},s,{get height(){return t.size||"1em"},get width(){return t.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return i()}}),!0,!0),y(l,()=>Ju),l})()}function Dm(e){return fr({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><path d="M1 1 23 23"/>'},e)}function qm(e){return fr({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><path d="M12 9A3 3 0 1 0 12 15 3 3 0 1 0 12 9z"/>'},e)}function Fm(e){return fr({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M3 12 21 12"/><path d="M3 6 21 6"/><path d="M3 18 21 18"/>'},e)}function Vm(e){return fr({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><path d="M12 3A4 4 0 1 0 12 11 4 4 0 1 0 12 3z"/>'},e)}function Um(e){return fr({a:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},c:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><path d="M9 3A4 4 0 1 0 9 11 4 4 0 1 0 9 3z"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/>'},e)}function Im(e){return fr({a:{viewBox:"0 0 1024 1024"},c:'<path d="M112 880c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V460H112v420zm768-696H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v176h800V216c0-17.7-14.3-32-32-32z"/>'},e)}function fs(e){return fr({a:{viewBox:"0 0 1024 1024"},c:'<path d="M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"/>'},e)}var Hm=I('<div class="mb-6 p-2 "><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"><div class="flex items-center text-sm text-gray-600">Created: <span class="font-medium ml-1"></span></div><div class="flex items-center"><span class="text-sm text-gray-600 mr-2">Members:</span><div class="flex flex-wrap gap-1">'),Bm=I('<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">'),zm=I('<span class="text-xs text-gray-400 italic">No members');function Wm(e){const{getUserName:t}=Ot;function n(r){const s=new Date(r),i=new Date;return s.getFullYear()===i.getFullYear()&&s.getMonth()===i.getMonth()&&s.getDate()===i.getDate()?s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s.toLocaleDateString()}return(()=>{var r=Hm(),s=r.firstChild,i=s.firstChild,o=i.firstChild,a=o.nextSibling,l=i.nextSibling,c=l.firstChild,u=c.nextSibling;return y(i,k(Im,{class:"w-4 h-4 mr-2 text-gray-400"}),o),y(a,()=>n(e.updatedAt)),y(l,k(Um,{class:"w-4 h-4 mr-2 text-gray-400"}),c),y(u,k(Ee,{get each(){return e.members()},children:d=>(()=>{var f=Bm();return y(f,()=>t(d.user_id)),f})()}),null),y(u,(()=>{var d=et(()=>!e.members()||e.members().length===0);return()=>d()&&zm()})(),null),r})()}var Ym=I('<div class="mb-6 p-4 bg-white rounded-lg shadow-sm"><h3 class="text-base font-semibold mb-3 flex items-center"><svg class="w-5 h-5 mr-2 text-green-500"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM14 11a1 1 0 011 1v1h1a1 1 0 110 2h-1v1a1 1 0 11-2 0v-1h-1a1 1 0 110-2h1v-1a1 1 0 011-1z"></path></svg>Add New Review</h3><div class="flex gap-2 items-center"><input type=text class="px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 w-64 text-sm"placeholder="Review (study/article) name"><button class="px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition text-sm flex items-center"><svg class="w-4 h-4 mr-1"fill=currentColor viewBox="0 0 20 20"xmlns=http://www.w3.org/2000/svg><path fillRule=evenodd d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"clipRule=evenodd></path></svg>Add Review');function Jm(e){const[t,n]=Q(""),r=async()=>{t().trim()&&(await e.onAddReview(t()),n(""))};return(()=>{var s=Ym(),i=s.firstChild,o=i.nextSibling,a=o.firstChild,l=a.nextSibling;return a.$$input=c=>n(c.target.value),l.$$click=r,ge(()=>l.disabled=!t().trim()),ge(()=>a.value=t()),s})()}tt(["input","click"]);var Qm=I('<div class="group bg-white border border-gray-200 rounded hover:shadow-sm hover:border-blue-300 transition-all duration-200"><div class="flex items-center justify-between"><button class="flex-1 text-left min-w-0 p-2 cursor-pointer"><div class="flex items-center justify-between"><div class="flex items-center text-xs text-gray-500">Reviewer: <span class=ml-3>Updated: </span></div><span class="ml-2 text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity text-xs">Open →</span></div></button><button class="mx-2 p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors opacity-0 group-hover:opacity-100"title="Delete checklist"><svg class="h-3 w-3"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),Km=I('<span class="italic text-gray-400">Unassigned');function Gm(e){const t=new Date(e),n=new Date;return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString()}function Xm(e){const{getReviewerForChecklist:t}=Ot,n=t(e.checklist.id);return(()=>{var r=Qm(),s=r.firstChild,i=s.firstChild,o=i.firstChild,a=o.firstChild,l=a.firstChild,c=l.nextSibling;c.firstChild;var u=i.nextSibling;return i.$$click=()=>e.onChecklistClick(n,e.checklist),y(a,k(Vm,{class:"w-4 h-4 mr-2 text-gray-500"}),l),y(a,()=>n?.name||Km(),c),y(c,()=>Gm(e.checklist.updated_at),null),u.$$click=d=>{d.stopPropagation(),e.onDeleteChecklist(e.checklist.id)},r})()}tt(["click"]);var Zm=I('<div><div class=space-y-1></div><div class="mt-3 p-2 rounded "><div class="flex gap-2"><button class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs font-medium">+ Add Checklist'),ew=I('<div class="text-center py-4 text-gray-500"><p class=text-xs>No checklists yet. Add one above to get started.');function tw(e){const t=async()=>{await e.onAddChecklist(e.reviewId)};return(()=>{var n=Zm(),r=n.firstChild,s=r.nextSibling,i=s.firstChild,o=i.firstChild;return y(r,k(Ee,{get each(){return e.checklists()||[]},children:a=>k(Xm,{checklist:a,get onChecklistClick(){return e.onChecklistClick},onDeleteChecklist:l=>e.onDeleteChecklist(l)})}),null),y(r,(()=>{var a=et(()=>!e.checklists()||e.checklists().length===0);return()=>a()&&ew()})(),null),o.$$click=t,n})()}tt(["click"]);var nw=I('<div class="bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200"><div class="px-4 py-2 border-b border-gray-100"><div class="flex items-center justify-between"><div class="flex-1 min-w-0"><h4 class="text-base font-semibold text-gray-900 truncate"></h4></div><button class="ml-3 p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors"title="Delete review"><svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div><div class=p-4>');function rw(e){const{getChecklistsForReview:t}=Ot;return(()=>{var n=nw(),r=n.firstChild,s=r.firstChild,i=s.firstChild,o=i.firstChild,a=i.nextSibling,l=r.nextSibling;return y(o,()=>e.review.name),a.$$click=()=>e.onDeleteReview(),y(l,k(tw,{checklists:()=>t(e.review.id),get reviewId(){return e.review.id},get onChecklistClick(){return e.onChecklistClick},get onDeleteChecklist(){return e.onDeleteChecklist},get onAddChecklist(){return e.onAddChecklist}})),n})()}tt(["click"]);var sw=I('<div class=mb-6><div class="flex items-center mb-3"><h3 class="text-lg font-semibold text-gray-900">Reviews</h3><div class=ml-auto><span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"> reviews</span></div></div><div class=space-y-3>'),iw=I('<div class="text-center py-8 bg-white rounded-lg border-2 border-dashed border-gray-300"><div class="text-gray-400 mb-3"><svg class="mx-auto h-10 w-10"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg></div><h4 class="text-base font-medium text-gray-900 mb-1">No reviews yet</h4><p class="text-sm text-gray-500">Add your first review to get started.');function ow(e){return(()=>{var t=sw(),n=t.firstChild,r=n.firstChild,s=r.nextSibling,i=s.firstChild,o=i.firstChild,a=n.nextSibling;return y(i,()=>e.reviews()?.length||0,o),y(a,k(Ee,{get each(){return e.reviews()||[]},children:l=>k(rw,{review:l,onDeleteReview:()=>e.onDeleteReview(l.id),get onChecklistClick(){return e.onChecklistClick},get onDeleteChecklist(){return e.onDeleteChecklist},get onAddChecklist(){return e.onAddChecklist}})}),null),y(a,(()=>{var l=et(()=>!e.reviews()||e.reviews().length===0);return()=>l()&&iw()})(),null),t})()}tt(["click"]);function Ci(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function aw(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qd(e){let t,n,r;e.length!==2?(t=Ci,n=(a,l)=>Ci(e(a),l),r=(a,l)=>e(a)-l):(t=e===Ci||e===aw?e:lw,n=e,r=e);function s(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function i(a,l,c=0,u=a.length){if(c<u){if(t(l,l)!==0)return u;do{const d=c+u>>>1;n(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){const d=s(a,l,c,u-1);return d>c&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:s,center:o,right:i}}function lw(){return 0}function cw(e){return e===null?NaN:+e}const uw=qd(Ci),dw=uw.right;qd(cw).center;class zc extends Map{constructor(t,n=gw){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(Wc(this,t))}has(t){return super.has(Wc(this,t))}set(t,n){return super.set(fw(this,t),n)}delete(t){return super.delete(hw(this,t))}}function Wc({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function fw({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function hw({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function gw(e){return e!==null&&typeof e=="object"?e.valueOf():e}const pw=Math.sqrt(50),mw=Math.sqrt(10),ww=Math.sqrt(2);function Ji(e,t,n){const r=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),o=i>=pw?10:i>=mw?5:i>=ww?2:1;let a,l,c;return s<0?(c=Math.pow(10,-s)/o,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Ji(e,t,n*2):[a,l,c]}function vw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[s,i,o]=r?Ji(t,e,n):Ji(e,t,n);if(!(i>=s))return[];const a=i-s+1,l=new Array(a);if(r)if(o<0)for(let c=0;c<a;++c)l[c]=(i-c)/-o;else for(let c=0;c<a;++c)l[c]=(i-c)*o;else if(o<0)for(let c=0;c<a;++c)l[c]=(s+c)/-o;else for(let c=0;c<a;++c)l[c]=(s+c)*o;return l}function Ra(e,t,n){return t=+t,e=+e,n=+n,Ji(e,t,n)[2]}function yw(e,t,n){t=+t,e=+e,n=+n;const r=t<e,s=r?Ra(t,e,n):Ra(e,t,n);return(r?-1:1)*(s<0?1/-s:s)}function Fd(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++r<s;)i[r]=e+r*n;return i}function bw(e){return e}var xw=3,Yc=1e-6;function _w(e){return"translate("+e+",0)"}function kw(e){return t=>+e(t)}function $w(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Sw(){return!this.__axis}function Cw(e,t){var n=[],r=null,s=null,i=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=1,u="y",d=_w;function f(m){var w=r??(t.ticks?t.ticks.apply(t,n):t.domain()),v=s??(t.tickFormat?t.tickFormat.apply(t,n):bw),x=Math.max(i,0)+a,E=t.range(),_=+E[0]+l,A=+E[E.length-1]+l,j=(t.bandwidth?$w:kw)(t.copy(),l),U=m.selection?m.selection():m,q=U.selectAll(".domain").data([null]),T=U.selectAll(".tick").data(w,t).order(),g=T.exit(),p=T.enter().append("g").attr("class","tick"),b=T.select("line"),C=T.select("text");q=q.merge(q.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(p),b=b.merge(p.append("line").attr("stroke","currentColor").attr(u+"2",c*i)),C=C.merge(p.append("text").attr("fill","currentColor").attr(u,c*x).attr("dy","0.71em")),m!==U&&(q=q.transition(m),T=T.transition(m),b=b.transition(m),C=C.transition(m),g=g.transition(m).attr("opacity",Yc).attr("transform",function(M){return isFinite(M=j(M))?d(M+l):this.getAttribute("transform")}),p.attr("opacity",Yc).attr("transform",function(M){var N=this.parentNode.__axis;return d((N&&isFinite(N=N(M))?N:j(M))+l)})),g.remove(),q.attr("d",o?"M"+_+","+c*o+"V"+l+"H"+A+"V"+c*o:"M"+_+","+l+"H"+A),T.attr("opacity",1).attr("transform",function(M){return d(j(M)+l)}),b.attr(u+"2",c*i),C.attr(u,c*x).text(v),U.filter(Sw).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),U.each(function(){this.__axis=j})}return f.scale=function(m){return arguments.length?(t=m,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),f):n.slice()},f.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),f):r&&r.slice()},f.tickFormat=function(m){return arguments.length?(s=m,f):s},f.tickSize=function(m){return arguments.length?(i=o=+m,f):i},f.tickSizeInner=function(m){return arguments.length?(i=+m,f):i},f.tickSizeOuter=function(m){return arguments.length?(o=+m,f):o},f.tickPadding=function(m){return arguments.length?(a=+m,f):a},f.offset=function(m){return arguments.length?(l=+m,f):l},f}function Ew(e){return Cw(xw,e)}var Aw={value:()=>{}};function Vd(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ei(n)}function Ei(e){this._=e}function Rw(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ei.prototype=Vd.prototype={constructor:Ei,on:function(e,t){var n=this._,r=Rw(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=Tw(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=Jc(n[s],e.name,t);else if(t==null)for(s in n)n[s]=Jc(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ei(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function Tw(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function Jc(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=Aw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Ta="http://www.w3.org/1999/xhtml";const Qc={svg:"http://www.w3.org/2000/svg",xhtml:Ta,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function So(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Qc.hasOwnProperty(t)?{space:Qc[t],local:e}:e}function Pw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ta&&t.documentElement.namespaceURI===Ta?t.createElement(e):t.createElementNS(n,e)}}function jw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ud(e){var t=So(e);return(t.local?jw:Pw)(t)}function Lw(){}function al(e){return e==null?Lw:function(){return this.querySelector(e)}}function Mw(e){typeof e!="function"&&(e=al(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=e.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Rt(r,this._parents)}function Ow(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Nw(){return[]}function Id(e){return e==null?Nw:function(){return this.querySelectorAll(e)}}function Dw(e){return function(){return Ow(e.apply(this,arguments))}}function qw(e){typeof e=="function"?e=Dw(e):e=Id(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),s.push(l));return new Rt(r,s)}function Hd(e){return function(){return this.matches(e)}}function Bd(e){return function(t){return t.matches(e)}}var Fw=Array.prototype.find;function Vw(e){return function(){return Fw.call(this.children,e)}}function Uw(){return this.firstElementChild}function Iw(e){return this.select(e==null?Uw:Vw(typeof e=="function"?e:Bd(e)))}var Hw=Array.prototype.filter;function Bw(){return Array.from(this.children)}function zw(e){return function(){return Hw.call(this.children,e)}}function Ww(e){return this.selectAll(e==null?Bw:zw(typeof e=="function"?e:Bd(e)))}function Yw(e){typeof e!="function"&&(e=Hd(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new Rt(r,this._parents)}function zd(e){return new Array(e.length)}function Jw(){return new Rt(this._enter||this._groups.map(zd),this._parents)}function Qi(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Qi.prototype={constructor:Qi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Qw(e){return function(){return e}}function Kw(e,t,n,r,s,i){for(var o=0,a,l=t.length,c=i.length;o<c;++o)(a=t[o])?(a.__data__=i[o],r[o]=a):n[o]=new Qi(e,i[o]);for(;o<l;++o)(a=t[o])&&(s[o]=a)}function Gw(e,t,n,r,s,i,o){var a,l,c=new Map,u=t.length,d=i.length,f=new Array(u),m;for(a=0;a<u;++a)(l=t[a])&&(f[a]=m=o.call(l,l.__data__,a,t)+"",c.has(m)?s[a]=l:c.set(m,l));for(a=0;a<d;++a)m=o.call(e,i[a],a,i)+"",(l=c.get(m))?(r[a]=l,l.__data__=i[a],c.delete(m)):n[a]=new Qi(e,i[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(f[a])===l&&(s[a]=l)}function Xw(e){return e.__data__}function Zw(e,t){if(!arguments.length)return Array.from(this,Xw);var n=t?Gw:Kw,r=this._parents,s=this._groups;typeof e!="function"&&(e=Qw(e));for(var i=s.length,o=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],d=s[c],f=d.length,m=ev(e.call(u,u&&u.__data__,c,r)),w=m.length,v=a[c]=new Array(w),x=o[c]=new Array(w),E=l[c]=new Array(f);n(u,d,v,x,E,m,t);for(var _=0,A=0,j,U;_<w;++_)if(j=v[_]){for(_>=A&&(A=_+1);!(U=x[A])&&++A<w;);j._next=U||null}}return o=new Rt(o,r),o._enter=a,o._exit=l,o}function ev(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tv(){return new Rt(this._exit||this._groups.map(zd),this._parents)}function nv(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function rv(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),a=new Array(s),l=0;l<o;++l)for(var c=n[l],u=r[l],d=c.length,f=a[l]=new Array(d),m,w=0;w<d;++w)(m=c[w]||u[w])&&(f[w]=m);for(;l<s;++l)a[l]=n[l];return new Rt(a,this._parents)}function sv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function iv(e){e||(e=ov);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],a=o.length,l=s[i]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new Rt(s,this._parents).order()}function ov(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function av(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function lv(){return Array.from(this)}function cv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function uv(){let e=0;for(const t of this)++e;return e}function dv(){return!this.node()}function fv(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,a;i<o;++i)(a=s[i])&&e.call(a,a.__data__,i,s);return this}function hv(e){return function(){this.removeAttribute(e)}}function gv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pv(e,t){return function(){this.setAttribute(e,t)}}function mv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function vv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yv(e,t){var n=So(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?gv:hv:typeof t=="function"?n.local?vv:wv:n.local?mv:pv)(n,t))}function Wd(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bv(e){return function(){this.style.removeProperty(e)}}function xv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function _v(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function kv(e,t,n){return arguments.length>1?this.each((t==null?bv:typeof t=="function"?_v:xv)(e,t,n??"")):Or(this.node(),e)}function Or(e,t){return e.style.getPropertyValue(t)||Wd(e).getComputedStyle(e,null).getPropertyValue(t)}function $v(e){return function(){delete this[e]}}function Sv(e,t){return function(){this[e]=t}}function Cv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Ev(e,t){return arguments.length>1?this.each((t==null?$v:typeof t=="function"?Cv:Sv)(e,t)):this.node()[e]}function Yd(e){return e.trim().split(/^|\s+/)}function ll(e){return e.classList||new Jd(e)}function Jd(e){this._node=e,this._names=Yd(e.getAttribute("class")||"")}Jd.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Qd(e,t){for(var n=ll(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function Kd(e,t){for(var n=ll(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function Av(e){return function(){Qd(this,e)}}function Rv(e){return function(){Kd(this,e)}}function Tv(e,t){return function(){(t.apply(this,arguments)?Qd:Kd)(this,e)}}function Pv(e,t){var n=Yd(e+"");if(arguments.length<2){for(var r=ll(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?Tv:t?Av:Rv)(n,t))}function jv(){this.textContent=""}function Lv(e){return function(){this.textContent=e}}function Mv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ov(e){return arguments.length?this.each(e==null?jv:(typeof e=="function"?Mv:Lv)(e)):this.node().textContent}function Nv(){this.innerHTML=""}function Dv(e){return function(){this.innerHTML=e}}function qv(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Fv(e){return arguments.length?this.each(e==null?Nv:(typeof e=="function"?qv:Dv)(e)):this.node().innerHTML}function Vv(){this.nextSibling&&this.parentNode.appendChild(this)}function Uv(){return this.each(Vv)}function Iv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Hv(){return this.each(Iv)}function Bv(e){var t=typeof e=="function"?e:Ud(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zv(){return null}function Wv(e,t){var n=typeof e=="function"?e:Ud(e),r=t==null?zv:typeof t=="function"?t:al(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Yv(){var e=this.parentNode;e&&e.removeChild(this)}function Jv(){return this.each(Yv)}function Qv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gv(e){return this.select(e?Kv:Qv)}function Xv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Zv(e){return function(t){e.call(this,t,this.__data__)}}function ey(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ty(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function ny(e,t,n){return function(){var r=this.__on,s,i=Zv(t);if(r){for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function ry(e,t,n){var r=ey(e+""),s,i=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(s=0,u=a[l];s<i;++s)if((o=r[s]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?ny:ty,s=0;s<i;++s)this.each(a(r[s],t,n));return this}function Gd(e,t,n){var r=Wd(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function sy(e,t){return function(){return Gd(this,e,t)}}function iy(e,t){return function(){return Gd(this,e,t.apply(this,arguments))}}function oy(e,t){return this.each((typeof t=="function"?iy:sy)(e,t))}function*ay(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var Xd=[null];function Rt(e,t){this._groups=e,this._parents=t}function Vs(){return new Rt([[document.documentElement]],Xd)}function ly(){return this}Rt.prototype=Vs.prototype={constructor:Rt,select:Mw,selectAll:qw,selectChild:Iw,selectChildren:Ww,filter:Yw,data:Zw,enter:Jw,exit:tv,join:nv,merge:rv,selection:ly,order:sv,sort:iv,call:av,nodes:lv,node:cv,size:uv,empty:dv,each:fv,attr:yv,style:kv,property:Ev,classed:Pv,text:Ov,html:Fv,raise:Uv,lower:Hv,append:Bv,insert:Wv,remove:Jv,clone:Gv,datum:Xv,on:ry,dispatch:oy,[Symbol.iterator]:ay};function Zd(e){return typeof e=="string"?new Rt([[document.querySelector(e)]],[document.documentElement]):new Rt([[e]],Xd)}function cl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ef(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Us(){}var Es=.7,Ki=1/Es,Rr="\\s*([+-]?\\d+)\\s*",As="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cy=/^#([0-9a-f]{3,8})$/,uy=new RegExp(`^rgb\\(${Rr},${Rr},${Rr}\\)$`),dy=new RegExp(`^rgb\\(${Xt},${Xt},${Xt}\\)$`),fy=new RegExp(`^rgba\\(${Rr},${Rr},${Rr},${As}\\)$`),hy=new RegExp(`^rgba\\(${Xt},${Xt},${Xt},${As}\\)$`),gy=new RegExp(`^hsl\\(${As},${Xt},${Xt}\\)$`),py=new RegExp(`^hsla\\(${As},${Xt},${Xt},${As}\\)$`),Kc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cl(Us,lr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gc,formatHex:Gc,formatHex8:my,formatHsl:wy,formatRgb:Xc,toString:Xc});function Gc(){return this.rgb().formatHex()}function my(){return this.rgb().formatHex8()}function wy(){return tf(this).formatHsl()}function Xc(){return this.rgb().formatRgb()}function lr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=cy.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Zc(t):n===3?new xt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?hi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?hi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=uy.exec(e))?new xt(t[1],t[2],t[3],1):(t=dy.exec(e))?new xt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fy.exec(e))?hi(t[1],t[2],t[3],t[4]):(t=hy.exec(e))?hi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gy.exec(e))?nu(t[1],t[2]/100,t[3]/100,1):(t=py.exec(e))?nu(t[1],t[2]/100,t[3]/100,t[4]):Kc.hasOwnProperty(e)?Zc(Kc[e]):e==="transparent"?new xt(NaN,NaN,NaN,0):null}function Zc(e){return new xt(e>>16&255,e>>8&255,e&255,1)}function hi(e,t,n,r){return r<=0&&(e=t=n=NaN),new xt(e,t,n,r)}function vy(e){return e instanceof Us||(e=lr(e)),e?(e=e.rgb(),new xt(e.r,e.g,e.b,e.opacity)):new xt}function Pa(e,t,n,r){return arguments.length===1?vy(e):new xt(e,t,n,r??1)}function xt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}cl(xt,Pa,ef(Us,{brighter(e){return e=e==null?Ki:Math.pow(Ki,e),new xt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Es:Math.pow(Es,e),new xt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xt(sr(this.r),sr(this.g),sr(this.b),Gi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eu,formatHex:eu,formatHex8:yy,formatRgb:tu,toString:tu}));function eu(){return`#${Xn(this.r)}${Xn(this.g)}${Xn(this.b)}`}function yy(){return`#${Xn(this.r)}${Xn(this.g)}${Xn(this.b)}${Xn((isNaN(this.opacity)?1:this.opacity)*255)}`}function tu(){const e=Gi(this.opacity);return`${e===1?"rgb(":"rgba("}${sr(this.r)}, ${sr(this.g)}, ${sr(this.b)}${e===1?")":`, ${e})`}`}function Gi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xn(e){return e=sr(e),(e<16?"0":"")+e.toString(16)}function nu(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vt(e,t,n,r)}function tf(e){if(e instanceof Vt)return new Vt(e.h,e.s,e.l,e.opacity);if(e instanceof Us||(e=lr(e)),!e)return new Vt;if(e instanceof Vt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(t===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new Vt(o,a,l,e.opacity)}function by(e,t,n,r){return arguments.length===1?tf(e):new Vt(e,t,n,r??1)}function Vt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}cl(Vt,by,ef(Us,{brighter(e){return e=e==null?Ki:Math.pow(Ki,e),new Vt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Es:Math.pow(Es,e),new Vt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new xt(Zo(e>=240?e-240:e+120,s,r),Zo(e,s,r),Zo(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Vt(ru(this.h),gi(this.s),gi(this.l),Gi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gi(this.opacity);return`${e===1?"hsl(":"hsla("}${ru(this.h)}, ${gi(this.s)*100}%, ${gi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ru(e){return e=(e||0)%360,e<0?e+360:e}function gi(e){return Math.max(0,Math.min(1,e||0))}function Zo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ul=e=>()=>e;function xy(e,t){return function(n){return e+n*t}}function _y(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ky(e){return(e=+e)==1?nf:function(t,n){return n-t?_y(t,n,e):ul(isNaN(t)?n:t)}}function nf(e,t){var n=t-e;return n?xy(e,n):ul(isNaN(e)?t:e)}const Xi=(function e(t){var n=ky(t);function r(s,i){var o=n((s=Pa(s)).r,(i=Pa(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),c=nf(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=e,r})(1);function $y(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=e[s]*(1-i)+t[s]*i;return r}}function Sy(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cy(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)s[o]=dl(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(a){for(o=0;o<r;++o)i[o]=s[o](a);return i}}function Ey(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ft(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ay(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=dl(e[s],t[s]):r[s]=t[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var ja=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ea=new RegExp(ja.source,"g");function Ry(e){return function(){return e}}function Ty(e){return function(t){return e(t)+""}}function rf(e,t){var n=ja.lastIndex=ea.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=ja.exec(e))&&(s=ea.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Ft(r,s)})),n=ea.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?Ty(l[0].x):Ry(t):(t=l.length,function(c){for(var u=0,d;u<t;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function dl(e,t){var n=typeof t,r;return t==null||n==="boolean"?ul(t):(n==="number"?Ft:n==="string"?(r=lr(t))?(t=r,Xi):rf:t instanceof lr?Xi:t instanceof Date?Ey:Sy(t)?$y:Array.isArray(t)?Cy:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ay:Ft)(e,t)}function Py(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var su=180/Math.PI,La={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sf(e,t,n,r,s,i){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*su,skewX:Math.atan(l)*su,scaleX:o,scaleY:a}}var pi;function jy(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?La:sf(t.a,t.b,t.c,t.d,t.e,t.f)}function Ly(e){return e==null||(pi||(pi=document.createElementNS("http://www.w3.org/2000/svg","g")),pi.setAttribute("transform",e),!(e=pi.transform.baseVal.consolidate()))?La:(e=e.matrix,sf(e.a,e.b,e.c,e.d,e.e,e.f))}function of(e,t,n,r){function s(c){return c.length?c.pop()+" ":""}function i(c,u,d,f,m,w){if(c!==d||u!==f){var v=m.push("translate(",null,t,null,n);w.push({i:v-4,x:Ft(c,d)},{i:v-2,x:Ft(u,f)})}else(d||f)&&m.push("translate("+d+t+f+n)}function o(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(s(d)+"rotate(",null,r)-2,x:Ft(c,u)})):u&&d.push(s(d)+"rotate("+u+r)}function a(c,u,d,f){c!==u?f.push({i:d.push(s(d)+"skewX(",null,r)-2,x:Ft(c,u)}):u&&d.push(s(d)+"skewX("+u+r)}function l(c,u,d,f,m,w){if(c!==d||u!==f){var v=m.push(s(m)+"scale(",null,",",null,")");w.push({i:v-4,x:Ft(c,d)},{i:v-2,x:Ft(u,f)})}else(d!==1||f!==1)&&m.push(s(m)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=e(c),u=e(u),i(c.translateX,c.translateY,u.translateX,u.translateY,d,f),o(c.rotate,u.rotate,d,f),a(c.skewX,u.skewX,d,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(m){for(var w=-1,v=f.length,x;++w<v;)d[(x=f[w]).i]=x.x(m);return d.join("")}}}var My=of(jy,"px, ","px)","deg)"),Oy=of(Ly,", ",")",")"),Nr=0,rs=0,Kr=0,af=1e3,Zi,ss,eo=0,cr=0,Co=0,Rs=typeof performance=="object"&&performance.now?performance:Date,lf=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fl(){return cr||(lf(Ny),cr=Rs.now()+Co)}function Ny(){cr=0}function to(){this._call=this._time=this._next=null}to.prototype=cf.prototype={constructor:to,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?fl():+n)+(t==null?0:+t),!this._next&&ss!==this&&(ss?ss._next=this:Zi=this,ss=this),this._call=e,this._time=n,Ma()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ma())}};function cf(e,t,n){var r=new to;return r.restart(e,t,n),r}function Dy(){fl(),++Nr;for(var e=Zi,t;e;)(t=cr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Nr}function iu(){cr=(eo=Rs.now())+Co,Nr=rs=0;try{Dy()}finally{Nr=0,Fy(),cr=0}}function qy(){var e=Rs.now(),t=e-eo;t>af&&(Co-=t,eo=e)}function Fy(){for(var e,t=Zi,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Zi=n);ss=e,Ma(r)}function Ma(e){if(!Nr){rs&&(rs=clearTimeout(rs));var t=e-cr;t>24?(e<1/0&&(rs=setTimeout(iu,e-Rs.now()-Co)),Kr&&(Kr=clearInterval(Kr))):(Kr||(eo=Rs.now(),Kr=setInterval(qy,af)),Nr=1,lf(iu))}}function ou(e,t,n){var r=new to;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var Vy=Vd("start","end","cancel","interrupt"),Uy=[],uf=0,au=1,Oa=2,Ai=3,lu=4,Na=5,Ri=6;function Eo(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Iy(e,n,{name:t,index:r,group:s,on:Vy,tween:Uy,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:uf})}function hl(e,t){var n=Wt(e,t);if(n.state>uf)throw new Error("too late; already scheduled");return n}function rn(e,t){var n=Wt(e,t);if(n.state>Ai)throw new Error("too late; already running");return n}function Wt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Iy(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=cf(i,0,n.time);function i(c){n.state=au,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,d,f,m;if(n.state!==au)return l();for(u in r)if(m=r[u],m.name===n.name){if(m.state===Ai)return ou(o);m.state===lu?(m.state=Ri,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[u]):+u<t&&(m.state=Ri,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[u])}if(ou(function(){n.state===Ai&&(n.state=lu,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Oa,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Oa){for(n.state=Ai,s=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(m=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++d]=m);s.length=d+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Na,1),d=-1,f=s.length;++d<f;)s[d].call(e,u);n.state===Na&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ri,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Hy(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>Oa&&r.state<Na,r.state=Ri,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function By(e){return this.each(function(){Hy(this,e)})}function zy(e,t){var n,r;return function(){var s=rn(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function Wy(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=rn(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:t,value:n},l=0,c=s.length;l<c;++l)if(s[l].name===t){s[l]=a;break}l===c&&s.push(a)}i.tween=s}}function Yy(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Wt(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?zy:Wy)(n,e,t))}function gl(e,t,n){var r=e._id;return e.each(function(){var s=rn(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Wt(s,r).value[t]}}function df(e,t){var n;return(typeof t=="number"?Ft:t instanceof lr?Xi:(n=lr(t))?(t=n,Xi):rf)(e,t)}function Jy(e){return function(){this.removeAttribute(e)}}function Qy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ky(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function Gy(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function Xy(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function Zy(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function e1(e,t){var n=So(e),r=n==="transform"?Oy:df;return this.attrTween(e,typeof t=="function"?(n.local?Zy:Xy)(n,r,gl(this,"attr."+e,t)):t==null?(n.local?Qy:Jy)(n):(n.local?Gy:Ky)(n,r,t))}function t1(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function n1(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function r1(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&n1(e,i)),n}return s._value=t,s}function s1(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&t1(e,i)),n}return s._value=t,s}function i1(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=So(e);return this.tween(n,(r.local?r1:s1)(r,t))}function o1(e,t){return function(){hl(this,e).delay=+t.apply(this,arguments)}}function a1(e,t){return t=+t,function(){hl(this,e).delay=t}}function l1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?o1:a1)(t,e)):Wt(this.node(),t).delay}function c1(e,t){return function(){rn(this,e).duration=+t.apply(this,arguments)}}function u1(e,t){return t=+t,function(){rn(this,e).duration=t}}function d1(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?c1:u1)(t,e)):Wt(this.node(),t).duration}function f1(e,t){if(typeof t!="function")throw new Error;return function(){rn(this,e).ease=t}}function h1(e){var t=this._id;return arguments.length?this.each(f1(t,e)):Wt(this.node(),t).ease}function g1(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;rn(this,e).ease=n}}function p1(e){if(typeof e!="function")throw new Error;return this.each(g1(this._id,e))}function m1(e){typeof e!="function"&&(e=Hd(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new gn(r,this._parents,this._name,this._id)}function w1(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),a=0;a<i;++a)for(var l=t[a],c=n[a],u=l.length,d=o[a]=new Array(u),f,m=0;m<u;++m)(f=l[m]||c[m])&&(d[m]=f);for(;a<r;++a)o[a]=t[a];return new gn(o,this._parents,this._name,this._id)}function v1(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function y1(e,t,n){var r,s,i=v1(t)?hl:rn;return function(){var o=i(this,e),a=o.on;a!==r&&(s=(r=a).copy()).on(t,n),o.on=s}}function b1(e,t){var n=this._id;return arguments.length<2?Wt(this.node(),n).on.on(e):this.each(y1(n,e,t))}function x1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _1(){return this.on("end.remove",x1(this._id))}function k1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=al(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a=r[o],l=a.length,c=i[o]=new Array(l),u,d,f=0;f<l;++f)(u=a[f])&&(d=e.call(u,u.__data__,f,a))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,Eo(c[f],t,n,f,c,Wt(u,n)));return new gn(i,this._parents,t,n)}function $1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Id(e));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var l=r[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var f=e.call(u,u.__data__,d,l),m,w=Wt(u,n),v=0,x=f.length;v<x;++v)(m=f[v])&&Eo(m,t,n,v,f,w);i.push(f),o.push(u)}return new gn(i,o,t,n)}var S1=Vs.prototype.constructor;function C1(){return new S1(this._groups,this._parents)}function E1(e,t){var n,r,s;return function(){var i=Or(this,e),o=(this.style.removeProperty(e),Or(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function ff(e){return function(){this.style.removeProperty(e)}}function A1(e,t,n){var r,s=n+"",i;return function(){var o=Or(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function R1(e,t,n){var r,s,i;return function(){var o=Or(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Or(this,e))),o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a))}}function T1(e,t){var n,r,s,i="style."+t,o="end."+i,a;return function(){var l=rn(this,e),c=l.on,u=l.value[i]==null?a||(a=ff(t)):void 0;(c!==n||s!==u)&&(r=(n=c).copy()).on(o,s=u),l.on=r}}function P1(e,t,n){var r=(e+="")=="transform"?My:df;return t==null?this.styleTween(e,E1(e,r)).on("end.style."+e,ff(e)):typeof t=="function"?this.styleTween(e,R1(e,r,gl(this,"style."+e,t))).each(T1(this._id,e)):this.styleTween(e,A1(e,r,t),n).on("end.style."+e,null)}function j1(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function L1(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&j1(e,o,n)),r}return i._value=t,i}function M1(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,L1(e,t,n??""))}function O1(e){return function(){this.textContent=e}}function N1(e){return function(){var t=e(this);this.textContent=t??""}}function D1(e){return this.tween("text",typeof e=="function"?N1(gl(this,"text",e)):O1(e==null?"":e+""))}function q1(e){return function(t){this.textContent=e.call(this,t)}}function F1(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&q1(s)),t}return r._value=e,r}function V1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,F1(e))}function U1(){for(var e=this._name,t=this._id,n=hf(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=Wt(l,t);Eo(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new gn(r,this._parents,e,n)}function I1(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--s===0&&i()}};n.each(function(){var c=rn(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),s===0&&i()})}var H1=0;function gn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function hf(){return++H1}var ln=Vs.prototype;gn.prototype={constructor:gn,select:k1,selectAll:$1,selectChild:ln.selectChild,selectChildren:ln.selectChildren,filter:m1,merge:w1,selection:C1,transition:U1,call:ln.call,nodes:ln.nodes,node:ln.node,size:ln.size,empty:ln.empty,each:ln.each,on:b1,attr:e1,attrTween:i1,style:P1,styleTween:M1,text:D1,textTween:V1,remove:_1,tween:Yy,delay:l1,duration:d1,ease:h1,easeVarying:p1,end:I1,[Symbol.iterator]:ln[Symbol.iterator]};function B1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var z1={time:null,delay:0,duration:250,ease:B1};function W1(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Y1(e){var t,n;e instanceof gn?(t=e._id,e=e._name):(t=hf(),(n=z1).time=fl(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Eo(l,e,t,c,o,n||W1(l,t));return new gn(r,this._parents,e,t)}Vs.prototype.interrupt=By;Vs.prototype.transition=Y1;function J1(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function no(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Dr(e){return e=no(Math.abs(e)),e?e[1]:NaN}function Q1(e,t){return function(n,r){for(var s=n.length,i=[],o=0,a=e[0],l=0;s>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),i.push(n.substring(s-=a,s+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return i.reverse().join(t)}}function K1(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var G1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ro(e){if(!(t=G1.exec(e)))throw new Error("invalid format: "+e);var t;return new pl({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ro.prototype=pl.prototype;function pl(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function X1(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var gf;function Z1(e,t){var n=no(e,t);if(!n)return e+"";var r=n[0],s=n[1],i=s-(gf=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+no(e,Math.max(0,t+i-1))[0]}function cu(e,t){var n=no(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const uu={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:J1,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>cu(e*100,t),r:cu,s:Z1,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function du(e){return e}var fu=Array.prototype.map,hu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function eb(e){var t=e.grouping===void 0||e.thousands===void 0?du:Q1(fu.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?du:K1(fu.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(d){d=ro(d);var f=d.fill,m=d.align,w=d.sign,v=d.symbol,x=d.zero,E=d.width,_=d.comma,A=d.precision,j=d.trim,U=d.type;U==="n"?(_=!0,U="g"):uu[U]||(A===void 0&&(A=12),j=!0,U="g"),(x||f==="0"&&m==="=")&&(x=!0,f="0",m="=");var q=v==="$"?n:v==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",T=v==="$"?r:/[%p]/.test(U)?o:"",g=uu[U],p=/[defgprs%]/.test(U);A=A===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function b(C){var M=q,N=T,O,X,ne;if(U==="c")N=g(C)+N,C="";else{C=+C;var K=C<0||1/C<0;if(C=isNaN(C)?l:g(Math.abs(C),A),j&&(C=X1(C)),K&&+C==0&&w!=="+"&&(K=!1),M=(K?w==="("?w:a:w==="-"||w==="("?"":w)+M,N=(U==="s"?hu[8+gf/3]:"")+N+(K&&w==="("?")":""),p){for(O=-1,X=C.length;++O<X;)if(ne=C.charCodeAt(O),48>ne||ne>57){N=(ne===46?s+C.slice(O+1):C.slice(O))+N,C=C.slice(0,O);break}}}_&&!x&&(C=t(C,1/0));var H=M.length+C.length+N.length,L=H<E?new Array(E-H+1).join(f):"";switch(_&&x&&(C=t(L+C,L.length?E-N.length:1/0),L=""),m){case"<":C=M+C+N+L;break;case"=":C=M+L+C+N;break;case"^":C=L.slice(0,H=L.length>>1)+M+C+N+L.slice(H);break;default:C=L+M+C+N;break}return i(C)}return b.toString=function(){return d+""},b}function u(d,f){var m=c((d=ro(d),d.type="f",d)),w=Math.max(-8,Math.min(8,Math.floor(Dr(f)/3)))*3,v=Math.pow(10,-w),x=hu[8+w/3];return function(E){return m(v*E)+x}}return{format:c,formatPrefix:u}}var mi,pf,mf;tb({thousands:",",grouping:[3],currency:["$",""]});function tb(e){return mi=eb(e),pf=mi.format,mf=mi.formatPrefix,mi}function nb(e){return Math.max(0,-Dr(Math.abs(e)))}function rb(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dr(t)/3)))*3-Dr(Math.abs(e)))}function sb(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Dr(t)-Dr(e))+1}function ml(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const gu=Symbol("implicit");function wf(){var e=new zc,t=[],n=[],r=gu;function s(i){let o=e.get(i);if(o===void 0){if(r!==gu)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new zc;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(n=Array.from(i),s):n.slice()},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return wf(t,n).unknown(r)},ml.apply(s,arguments),s}function vf(){var e=wf().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,i,o,a=!1,l=0,c=0,u=.5;delete e.unknown;function d(){var f=t().length,m=s<r,w=m?s:r,v=m?r:s;i=(v-w)/Math.max(1,f-l+c*2),a&&(i=Math.floor(i)),w+=(v-w-i*(f-l))*u,o=i*(1-l),a&&(w=Math.round(w),o=Math.round(o));var x=Fd(f).map(function(E){return w+i*E});return n(m?x.reverse():x)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,s]=f,r=+r,s=+s,d()):[r,s]},e.rangeRound=function(f){return[r,s]=f,r=+r,s=+s,a=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(a=!!f,d()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),d()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},e.paddingOuter=function(f){return arguments.length?(c=+f,d()):c},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),d()):u},e.copy=function(){return vf(t(),[r,s]).round(a).paddingInner(l).paddingOuter(c).align(u)},ml.apply(d(),arguments)}function ib(e){return function(){return e}}function ob(e){return+e}var pu=[0,1];function Sr(e){return e}function Da(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ib(isNaN(t)?NaN:.5)}function ab(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function lb(e,t,n){var r=e[0],s=e[1],i=t[0],o=t[1];return s<r?(r=Da(s,r),i=n(o,i)):(r=Da(r,s),i=n(i,o)),function(a){return i(r(a))}}function cb(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)s[o]=Da(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(a){var l=dw(e,a,1,r)-1;return i[l](s[l](a))}}function ub(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function db(){var e=pu,t=pu,n=dl,r,s,i,o=Sr,a,l,c;function u(){var f=Math.min(e.length,t.length);return o!==Sr&&(o=ab(e[0],e[f-1])),a=f>2?cb:lb,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?i:(l||(l=a(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(s((c||(c=a(t,e.map(r),Ft)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,ob),u()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=Py,u()},d.clamp=function(f){return arguments.length?(o=f?!0:Sr,u()):o!==Sr},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,m){return r=f,s=m,u()}}function fb(){return db()(Sr,Sr)}function hb(e,t,n,r){var s=yw(e,t,n),i;switch(r=ro(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=rb(s,o))&&(r.precision=i),mf(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=sb(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=nb(s))&&(r.precision=i-(r.type==="%")*2);break}}return pf(r)}function gb(e){var t=e.domain;return e.ticks=function(n){var r=t();return vw(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return hb(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,i=r.length-1,o=r[s],a=r[i],l,c,u=10;for(a<o&&(c=o,o=a,a=c,c=s,s=i,i=c);u-- >0;){if(c=Ra(o,a,n),c===l)return r[s]=o,r[i]=a,t(r);if(c>0)o=Math.floor(o/c)*c,a=Math.ceil(a/c)*c;else if(c<0)o=Math.ceil(o*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function yf(){var e=fb();return e.copy=function(){return ub(e,yf())},ml.apply(e,arguments),gb(e)}function is(e,t,n){this.k=e,this.x=t,this.y=n}is.prototype={constructor:is,scale:function(e){return e===1?this:new is(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new is(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};is.prototype;var pb=I('<div style="background:#ffffff;border-radius:8px;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);padding:16px;margin:16px 0"><svg>');function mb(e){let t=null;const[n,r]=Q({width:800,height:500});Ie(()=>{function _(){if(t&&t.parentElement){const A=t.parentElement.getBoundingClientRect();r({width:Math.max(A.width,600),height:Math.max(A.height,400)})}}_(),window.addEventListener("resize",_),vt(()=>window.removeEventListener("resize",_))});const s=()=>e.data??[],i=16,o=()=>e.width??n().width,a=()=>e.height??n().height,l=()=>e.title??"AMSTAR-2 Quality Assessment",c={top:60,right:170,bottom:60,left:120},u=()=>(o()-c.left-c.right)/i,d=()=>(a()-c.top-c.bottom)/s().length,f=()=>Math.min(u(),d()),m=()=>f()*i,w=()=>f()*s().length,v=()=>c.left+m()+c.right,x=()=>c.top+w()+c.bottom,E={yes:"#10b981","partial yes":"#facc15",no:"#ef4444","no ma":"#9ca3af"};return Ie(()=>{const _=Zd(t).attr("width",v()).attr("height",x()).style("background","#ffffff").style("font-family",'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif');_.selectAll("*").remove(),_.append("g").attr("class","footer").selectAll("text").data(Fd(1,i+1)).enter().append("text").attr("x",(p,b)=>c.left+b*f()+f()/2).attr("y",c.top+w()+20).attr("text-anchor","middle").attr("font-size",Math.max(10,f()*.4)).attr("font-weight","600").attr("fill","#374151").text(p=>`Q${p}`),_.append("g").attr("class","rows").selectAll("text").data(s()).enter().append("text").attr("x",c.left-15).attr("y",(p,b)=>c.top+b*f()+f()/2).attr("text-anchor","end").attr("font-size",Math.max(10,f()*.45)).attr("font-weight","500").attr("fill","#374151").attr("dominant-baseline","middle").text(p=>p.label);const U=_.append("g").attr("class","cells");s().forEach((p,b)=>{for(let C=0;C<i;C++){const M=p.questions[C]?.toLowerCase?.()??"",N=E[M]??"#e5e7eb";U.append("rect").attr("x",c.left+C*f()+2).attr("y",c.top+b*f()+2).attr("width",f()-4).attr("height",f()-4).attr("fill",N).attr("stroke","#ffffff").attr("stroke-width",1).attr("rx",Math.max(2,f()*.12)).style("filter","drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.1))")}});const q=[{key:"yes",label:"Yes"},{key:"partial yes",label:"Partial Yes"},{key:"no",label:"No"},{key:"no ma",label:"No MA"}],g=_.append("g").attr("class","legend").attr("transform",`translate(${v()-c.right+20}, ${c.top+20})`).selectAll(".legend-item").data(q).enter().append("g").attr("class","legend-item").attr("transform",(p,b)=>`translate(0, ${b*25})`);g.append("rect").attr("x",0).attr("y",-8).attr("width",16).attr("height",16).attr("rx",2).attr("fill",p=>E[p.key]).attr("stroke","#ffffff").attr("stroke-width",1),g.append("text").attr("x",24).attr("y",0).attr("dy","0.35em").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(p=>p.label),_.append("text").attr("x",v()/2).attr("y",40).attr("text-anchor","middle").attr("font-size","18px").attr("font-weight","600").attr("fill","#111827").text(l()),vt(()=>{_.selectAll("*").remove()})}),(()=>{var _=pb(),A=_.firstChild,j=t;return typeof j=="function"?bs(j,A):t=A,ge(U=>wo(A,`width: 100%; height: ${x()}px; max-width: 100%; display: block;`,U)),_})()}var wb=I('<div style="background:#ffffff;border-radius:8px;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);padding:16px;margin:16px 0"><svg>');function vb(e){let t=null,n=null;const r=()=>e.data??[],[s,i]=Q({width:900,height:600});Ha(()=>{const w=()=>{if(n){const v=n.getBoundingClientRect();i({width:Math.max(v.width,400),height:Math.max(v.height,400)})}};w(),window.addEventListener("resize",w),vt(()=>window.removeEventListener("resize",w))}),Ie(()=>{if(n){const w=n.getBoundingClientRect();i({width:Math.max(w.width,400),height:Math.max(w.height,400)})}});const o=()=>e.width??s().width,a=()=>e.height??s().width/1.5,l=()=>e.title??"Distribution of AMSTAR Ratings on Each Item Across Included Reviews",c={top:50,right:150,bottom:60,left:80},u=()=>o()-c.left-c.right,d=()=>a()-c.top-c.bottom,f=()=>Math.max(Math.round(o()/50),12)+1,m={yes:"#10b981","partial yes":"#facc15",no:"#ef4444","no ma":"#9ca3af"};return Ie(()=>{if(!r().length)return;const w=Zd(t).attr("width",o()).attr("height",a()).style("background","#ffffff").style("font-family",'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif');w.selectAll("*").remove();const v=[],x=Math.max(...r().map(p=>p.questions?.length||0)),E=r().length;for(let p=0;p<x;p++){const b={question:p+1,label:`Q${p+1}`,counts:{yes:0,"partial yes":0,no:0,"no ma":0}};r().forEach(C=>{const M=C.questions[p]?.toLowerCase?.()??"no ma";b.counts.hasOwnProperty(M)&&b.counts[M]++}),b.percentages={},Object.keys(b.counts).forEach(C=>{b.percentages[C]=b.counts[C]/E*100}),v.push(b)}const _=vf().domain(v.map(p=>p.label)).range([0,d()]).padding(.1),A=yf().domain([0,100]).range([0,u()]),j=w.append("g").attr("transform",`translate(${c.left}, ${c.top})`);w.append("text").attr("x",o()/2).attr("y",30).attr("text-anchor","middle").attr("font-size",f()+"px").attr("font-weight","600").attr("fill","#111827").text(l()),v.forEach(p=>{let b=0;const C=_.bandwidth(),M=_(p.label);["yes","partial yes","no ma","no"].forEach(N=>{const O=p.percentages[N],X=A(O);O>0&&(j.append("rect").attr("x",A(b)).attr("y",M).attr("width",X).attr("height",C).attr("fill",m[N]).attr("stroke","#ffffff").attr("stroke-width",1),O>=5&&j.append("text").attr("x",A(b)+X/2).attr("y",M+C/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").attr("font-weight","600").attr("fill",N==="partial yes"?"#000000":"#ffffff").text(`${O.toFixed(1)}`)),b+=O})}),j.selectAll(".y-label").data(v).enter().append("text").attr("class","y-label").attr("x",-10).attr("y",p=>_(p.label)+_.bandwidth()/2).attr("text-anchor","end").attr("dominant-baseline","middle").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(p=>p.label);const U=Ew(A).tickFormat(p=>`${p}`).ticks(5);j.append("g").attr("class","x-axis").attr("transform",`translate(0, ${d()})`).call(U).selectAll("text").attr("font-size","12px").attr("fill","#374151"),j.append("text").attr("x",u()/2).attr("y",d()+50).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","500").attr("fill","#374151").text(`Percentage of SRs (%), N=${E}`),w.append("text").attr("transform","rotate(-90)").attr("x",-a()/2).attr("y",20).attr("text-anchor","middle").attr("font-size","14px").attr("font-weight","500").attr("fill","#374151").text("Items of AMSTAR-2");const q=w.append("g").attr("class","legend").attr("transform",`translate(${o()-c.right+20}, ${c.top+20})`),T=[{key:"yes",label:"Yes"},{key:"partial yes",label:"Partial Yes"},{key:"no",label:"No"},{key:"no ma",label:"No MA"}],g=q.selectAll(".legend-item").data(T).enter().append("g").attr("class","legend-item").attr("transform",(p,b)=>`translate(0, ${b*25})`);g.append("rect").attr("x",0).attr("y",-8).attr("width",16).attr("height",16).attr("rx",2).attr("fill",p=>m[p.key]).attr("stroke","#ffffff").attr("stroke-width",1),g.append("text").attr("x",24).attr("y",0).attr("dy","0.35em").attr("font-size","13px").attr("font-weight","500").attr("fill","#374151").text(p=>p.label),vt(()=>{w.selectAll("*").remove()})}),(()=>{var w=wb(),v=w.firstChild,x=n;typeof x=="function"?bs(x,w):n=w;var E=t;return typeof E=="function"?bs(E,v):t=v,ge(_=>wo(v,`width: 100%; height: ${a()}px; max-width: 100%; display: block;`,_)),w})()}var yb=I('<div class="flex flex-col gap-6">');function bb(e){const{getReviewsForProject:t,getChecklistsForReview:n,getAnswersForChecklist:r,getReviewerForChecklist:s}=Ot,[i,o]=Q([]),a=["q1","q2","q3","q4","q5","q6","q7","q8","q9","q10","q11","q12","q13","q14","q15","q16"];return Ie(()=>{if(!e.project?.id){o([]);return}const l=t(e.project.id);if(!l||l.length===0){o([]);return}const c=l.flatMap(u=>n(u.id).map(f=>{const m=r(f.id),w=s(f.id),v=$s({name:u.name,id:f.id,reviewerName:w?.name,createdAt:f.updated_at});m.forEach(E=>{v[E.question_key]&&(v[E.question_key].answers=E.answers,v[E.question_key].critical=E.critical)});const x=$0(v);return{label:`${u.name} - ${w?.name||"Unassigned"}`,reviewer:w?.name||"Unassigned",reviewName:u.name,questions:a.map(E=>x[E])}}));o(c)}),(()=>{var l=yb();return y(l,k(mb,{get data(){return i()}}),null),y(l,k(vb,{get data(){return i()}}),null),l})()}var xb=I("<div class=p-6>"),_b=I("<div class=p-8>Project not found.");function kb(){const{projects:e,getReviewsForProject:t,getProjectMembers:n}=Ot,[r,s]=Q(null),i=vo(),o=tn(),[a,l]=Q(!1);Ie(()=>{const m=i.projectId;m?s(e().find(w=>w.id===m)||null):(console.warn("ProjectDashboard: No project found for",m),o("/dashboard"))});const c=async m=>{m.trim()!==""&&await Up(m,r().id)},u=async m=>{try{const w=await Hp(m),v=$s({name:"New Checklist",id:w.id,createdAt:Date.now(),reviewerName:""});await Promise.all(Object.keys(v).map(async x=>{if(/^q\d+[a-z]*$/i.test(x)&&v[x])try{await Dd(v.id,x,v[x].answers,v[x].critical)}catch(E){console.error("Failed to save answer for",x,E)}}))}catch(w){console.error("Error creating checklist:",w)}},d=(m,w)=>{o(`/projects/${r().id}/reviews/${m.id}/checklists/${w.id}`)},f=()=>{l(!a())};return k(_e,{get when(){return r()},get fallback(){return _b()},get children(){var m=xb();return y(m,k(Om,{get project(){return r()},onDeleteProject:Nd,onManageMembers:f}),null),y(m,k(Lm,{get open(){return a()},onClose:()=>l(!1),get projectId(){return r().id}}),null),y(m,k(Wm,{get updatedAt(){return r().updated_at},members:()=>n(r().id)}),null),y(m,k(ow,{reviews:()=>t(r().id),onDeleteReview:w=>Ip(w),onChecklistClick:d,onDeleteChecklist:w=>Bp(w),onAddChecklist:u}),null),y(m,k(Jm,{onAddReview:c}),null),y(m,k(bb,{get project(){return r()}}),null),m}})}function $b({id:e,name:t,createdAt:n=Date.now(),reviews:r=[]}={}){if(t===null)throw new Error("Project name cannot be null");return{id:e,name:t,createdAt:n,reviews:r}}function Sb({id:e,name:t,createdAt:n=Date.now(),checklists:r=[],pdfFileName:s=null}={}){if(!e)throw new Error("Review id is required");if(!t)throw new Error("Review name is required");return{id:e,name:t,createdAt:n,checklists:r,pdfFileName:s}}function Cb(e,t){return Object.keys(e).forEach(n=>{/^q\d+[a-z]*$/i.test(n)&&e[n]?.answers&&e[n].answers.forEach((r,s)=>{r.fill(!1),t%2===0?r[0]=!0:r[r.length-1]=!0})}),e}async function Eb(){const e=["Review 1","Review 2","Review 3"];let t=[];for(const[r,s]of e.entries()){const i=r%2===0?2:1;for(let o=0;o<i;o++){let a=$s({name:`Checklist ${o+1}`,id:await ki(),createdAt:Date.now()});a=Cb(a,r+o);const l=Sb({id:await ki(),name:s,createdAt:Date.now(),checklists:[a]});t.push(l)}}const n=$b({id:await ki(),name:"Example Project",createdAt:Date.now(),reviews:t});await Ur(n)}const[Ab,bf]=Q(navigator.onLine);window.addEventListener("online",()=>{console.info("Went online"),bf(!0)});window.addEventListener("offline",()=>{console.info("Went offline"),bf(!1)});function xf(){return Ab}function Rb(){const[e,t]=Q(!1),[n,r]=Q(null),[s,i]=Q(!0),o=xf();let a=o();async function l(){i(!0);try{await Ea();const A=await Go();r(A),t(!!A)}catch{r(null),t(!1)}finally{i(!1)}}o()?l():i(!1),Ie(()=>{o()&&!a&&!n()&&l(),a=o()});async function c(A,j,U){await Op(A,j,U),localStorage.setItem("pendingEmail",A)}async function u(){await qp(localStorage.getItem("pendingEmail"))}async function d(A){await Fp(localStorage.getItem("pendingEmail"),A),localStorage.removeItem("pendingEmail")}async function f(A,j){localStorage.setItem("pendingEmail",A),await Dp(A,j),localStorage.removeItem("pendingEmail"),t(!0),r(await Go())}async function m(){await Od(),t(!1),r(null)}async function w(){const A=await Go();return r(A),A}async function v(){await Ea()}async function x(A,j={}){return await nn(A,j)}function E(){return localStorage.getItem("pendingEmail")}function _(){return Np()}return{isLoggedIn:e,user:n,signup:c,signin:f,signout:m,getCurrentUser:w,refreshAccessToken:v,authFetch:x,authLoading:s,sendEmailVerification:u,verifyEmail:d,getPendingEmail:E,getAccessToken:_}}const Tb=nr(Rb);function On(){return Tb}var Pb=I('<div class="grid gap-4 md:grid-cols-2">'),jb=I('<div class="mx-auto p-6 min-h-screen"><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><div class="flex items-center justify-between mb-6"><div><h1 class="text-3xl font-bold text-gray-900">Projects</h1><p class="text-gray-600 mt-1">Manage your projects</p></div></div><div class="mb-8 p-4 bg-blue-50 rounded-lg border border-blue-200"><h3 class="text-lg font-semibold text-blue-900 mb-3">Create New Project</h3><div class="flex flex-col sm:flex-row gap-3"><input type=text class="flex-1 px-4 py-2 border border-blue-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"placeholder="Enter project name..."><button class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"><span class=mr-2>+</span>Create Project</button><button class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium">Load Example'),Lb=I('<div class="text-center py-12"><div class="text-gray-400 mb-4"><svg class="mx-auto h-12 w-12"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No projects yet</h3><p class=text-gray-500>Get started by creating your first project above.'),Mb=I('<p class="text-sm text-gray-600 mt-1 line-clamp-2">'),Ob=I('<div class="group bg-white border border-gray-200 rounded-lg p-5 hover:shadow-md hover:border-blue-300 transition-all duration-200 cursor-pointer"tabindex=0 role=button><div class="flex items-start justify-between"><div class="flex-1 min-w-0"><h3 class="text-lg font-semibold text-gray-900 truncate group-hover:text-blue-600 transition-colors"></h3></div><button class="ml-3 p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors opacity-0 group-hover:opacity-100"title="Delete project"><svg class="h-4 w-4"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div><div class="mt-4 flex items-center justify-between text-xs text-gray-500"><span class="flex items-center"><svg class="mr-1 h-3 w-3"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Updated </span><span class="text-blue-600 opacity-0 group-hover:opacity-100 transition-opacity">Open →');function Nb(){const{projects:e,getProjectsForUser:t,deleteProject:n}=Ot,{user:r}=On(),s=tn(),[i,o]=Q(""),[a,l]=Q([]);Ie(()=>{r()&&e().length>0&&l(t(r().id))});const c=f=>{s(`/projects/${f.id}`)},u=async()=>{if(i().trim()){try{await il(i())}catch(f){console.error("Error creating project:",f)}o("")}},d=async f=>{window.confirm("Are you sure you want to delete this project?")&&await n(f)};return(()=>{var f=jb(),m=f.firstChild,w=m.firstChild,v=w.nextSibling,x=v.firstChild,E=x.nextSibling,_=E.firstChild,A=_.nextSibling,j=A.nextSibling;return _.$$keydown=U=>{U.key==="Enter"&&i().trim()&&u()},_.$$input=U=>o(U.target.value),A.$$click=u,j.$$click=async()=>{const U=await Eb();console.log("Loaded example project:",U),window.location.reload()},y(m,k(_e,{get when(){return et(()=>!!r())()&&a().length!==0},get fallback(){return Lb()},get children(){var U=Pb();return y(U,k(Ee,{get each(){return t(r().id)},children:q=>(()=>{var T=Ob(),g=T.firstChild,p=g.firstChild,b=p.firstChild,C=p.nextSibling,M=g.nextSibling,N=M.firstChild,O=N.firstChild;return O.nextSibling,T.$$keydown=X=>{(X.key==="Enter"||X.key===" ")&&(X.preventDefault(),c(q))},T.$$click=()=>c(q),y(b,()=>q.name),y(p,k(_e,{get when(){return q.description},get children(){var X=Mb();return y(X,()=>q.description),X}}),null),C.$$click=X=>{X.stopPropagation(),d(q.id)},y(N,()=>new Date(q.updated_at).toLocaleDateString(),null),ge(()=>kt(T,"aria-label",`Open project ${q.name}`)),T})()})),U}}),null),ge(()=>A.disabled=!i().trim()),ge(()=>_.value=i()),f})()}tt(["input","keydown","click"]);var Db=I("<div>");function Qt(e){const[t,n]=Q(!1),[r,s]=Q(!1);let i=null,o=null;const a=()=>e.duration??300,l=()=>e.timingFunction??"ease-in-out",c=()=>e.when;return Ie(()=>{c()?(clearTimeout(o),s(!0),requestAnimationFrame(()=>{n(!0)})):(n(!1),clearTimeout(o),o=setTimeout(()=>{s(!1)},a()))}),vt(()=>{clearTimeout(o)}),k(_e,{get when(){return r()},get fallback(){return e.fallback},get children(){var u=Db(),d=i;return typeof d=="function"?bs(d,u):i=u,y(u,()=>e.children),ge(f=>{var m=t()?1:0,w=`opacity ${a()}ms ${l()}`,v=e.ariaLive||"polite",x=e.role||"alert",E=e.class||"";return m!==f.e&&us(u,"opacity",f.e=m),w!==f.t&&us(u,"transition",f.t=w),v!==f.a&&kt(u,"aria-live",f.a=v),x!==f.o&&kt(u,"role",f.o=x),E!==f.i&&ft(u,f.i=E),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),u}})}var Cr=(e,t=[])=>({parts:(...n)=>{if(qb(t))return Cr(e,n);throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:(...n)=>Cr(e,[...t,...n]),omit:(...n)=>Cr(e,t.filter(r=>!n.includes(r))),rename:n=>Cr(n,t),keys:()=>t,build:()=>[...new Set(t)].reduce((n,r)=>Object.assign(n,{[r]:{selector:[`&[data-scope="${vr(e)}"][data-part="${vr(r)}"]`,`& [data-scope="${vr(e)}"][data-part="${vr(r)}"]`].join(", "),attrs:{"data-scope":vr(e),"data-part":vr(r)}}}),{})}),vr=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),qb=e=>e.length===0,Ao=e=>typeof e=="object"&&e!==null,Ne=e=>e?"":void 0,_f=e=>e?"true":void 0,Fb=1,Vb=9,Ub=11,kf=e=>Ao(e)&&e.nodeType===Fb&&typeof e.nodeName=="string",$f=e=>Ao(e)&&e.nodeType===Vb,Ib=e=>Ao(e)&&e===e.window,Hb=e=>Ao(e)&&e.nodeType!==void 0,Bb=e=>Hb(e)&&e.nodeType===Ub&&"host"in e;function zb(e){if(!e)return!1;const t=e.getRootNode();return Sf(t)===e}function Wb(e){return $f(e)?e:Ib(e)?e.document:e?.ownerDocument??document}function wl(e){return Bb(e)?wl(e.host):$f(e)?e.defaultView??window:kf(e)?e.ownerDocument?.defaultView??window:window}function Sf(e){let t=e.activeElement;for(;t?.shadowRoot;){const n=t.shadowRoot.activeElement;if(!n||n===t)break;t=n}return t}function Yb(e){const{selectionStart:t,selectionEnd:n,value:r}=e.currentTarget,s=e.data;return r.slice(0,t)+(s??"")+r.slice(n)}function Jb(e){return Cf(e).isComposing||e.keyCode===229}var Qb=e=>e.button===0,Kb=e=>e.ctrlKey||e.altKey||e.metaKey,Gb={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},mu={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function Xb(e,t={}){const{dir:n="ltr",orientation:r="horizontal"}=t;let s=e.key;return s=Gb[s]??s,n==="rtl"&&r==="horizontal"&&s in mu&&(s=mu[s]),s}function Cf(e){return e.nativeEvent??e}function Zb(e,t){const{type:n="HTMLInputElement",property:r="value"}=t,s=wl(e)[n].prototype;return Object.getOwnPropertyDescriptor(s,r)??{}}function ex(e){if(e.localName==="input")return"HTMLInputElement";if(e.localName==="textarea")return"HTMLTextAreaElement";if(e.localName==="select")return"HTMLSelectElement"}function tx(e,t,n="value"){if(!e)return;const r=ex(e);r&&Zb(e,{type:r,property:n}).set?.call(e,t),e.setAttribute(n,t)}function nx(e,t){const{value:n,bubbles:r=!0}=t;if(!e)return;const s=wl(e);e instanceof s.HTMLInputElement&&(tx(e,`${n}`),e.dispatchEvent(new s.Event("input",{bubbles:r})))}function wi(e){let t;const n=globalThis.requestAnimationFrame(()=>{t=e()});return()=>{globalThis.cancelAnimationFrame(n),t?.()}}function rx(e,t){return Array.from(e?.querySelectorAll(t)??[])}var sx={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"};function ix(e){return e==null?[]:Array.isArray(e)?e:[e]}var wu=e=>e?.constructor.name==="Array",ox=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Ro(e[n],t[n]))return!1;return!0},Ro=(e,t)=>{if(Object.is(e,t))return!0;if(e==null&&t!=null||e!=null&&t==null)return!1;if(typeof e?.isEqual=="function"&&typeof t?.isEqual=="function")return e.isEqual(t);if(typeof e=="function"&&typeof t=="function")return e.toString()===t.toString();if(wu(e)&&wu(t))return ox(Array.from(e),Array.from(t));if(typeof e!="object"||typeof t!="object")return!1;const n=Object.keys(t??Object.create(null)),r=n.length;for(let s=0;s<r;s++)if(!Reflect.has(e,n[s]))return!1;for(let s=0;s<r;s++){const i=n[s];if(!Ro(e[i],t[i]))return!1}return!0},ax=e=>Array.isArray(e),Ef=e=>e!=null&&typeof e=="object",lx=e=>Ef(e)&&!ax(e),cx=e=>typeof e=="number"&&!Number.isNaN(e),vl=e=>typeof e=="string",Cn=e=>typeof e=="function",ux=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),dx=e=>Object.prototype.toString.call(e),Af=Function.prototype.toString,fx=Af.call(Object),hx=e=>{if(!Ef(e)||dx(e)!="[object Object]"||mx(e))return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const n=ux(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Af.call(n)==fx},gx=e=>typeof e=="object"&&e!==null&&"$$typeof"in e&&"props"in e,px=e=>typeof e=="object"&&e!==null&&"__v_isVNode"in e,mx=e=>gx(e)||px(e),wx=(()=>{let e=0;return()=>(e++,e.toString(36))})(),ta=(e,t,n)=>e[t]===n?e:[...e.slice(0,t),n,...e.slice(t+1)];function Rf(e){if(!hx(e)||e===void 0)return e;const t=Reflect.ownKeys(e).filter(r=>typeof r=="string"),n={};for(const r of t){const s=e[r];s!==void 0&&(n[r]=Rf(s))}return n}function vu(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function vx(...e){e.length===1?e[0]:e[1],e.length===2&&e[0]}function yx(e,t){if(e==null)throw new Error(t())}function bx(){return{and:(...e)=>function(n){return e.every(r=>n.guard(r))},or:(...e)=>function(n){return e.some(r=>n.guard(r))},not:e=>function(n){return!n.guard(e)}}}function xx(){return{guards:bx(),createMachine:e=>e,choose:e=>function({choose:n}){return n(e)?.actions}}}var xr=(e=>(e.NotStarted="Not Started",e.Started="Started",e.Stopped="Stopped",e))(xr||{}),na="__init__";function _x(e){const t=()=>e.getRootNode?.()??document,n=()=>Wb(t());return{...e,getRootNode:t,getDoc:n,getWin:()=>n().defaultView??window,getActiveElement:()=>Sf(t()),isActiveElement:zb,getById:o=>t().getElementById(o)}}function kx(e){return new Proxy({},{get(t,n){return n==="style"?r=>e({style:r}).style:e}})}var Tf=()=>e=>Array.from(new Set(e)),$x=Cr("password-input").parts("root","input","label","control","indicator","visibilityTrigger"),yr=$x.build(),Ti=e=>e.ids?.input??`p-input-${e.id}-input`,qa=e=>e.getById(Ti(e));function Sx(e,t){const{scope:n,prop:r,context:s}=e,i=s.get("visible"),o=!!r("disabled"),a=!!r("invalid"),l=!!r("readOnly"),c=!!r("required"),u=!(l||o),d=r("translations");return{visible:i,disabled:o,invalid:a,focus(){qa(n)?.focus()},setVisible(f){e.send({type:"VISIBILITY.SET",value:f})},toggleVisible(){e.send({type:"VISIBILITY.SET",value:!i})},getRootProps(){return t.element({...yr.root.attrs,dir:r("dir"),"data-disabled":Ne(o),"data-invalid":Ne(a),"data-readonly":Ne(l)})},getLabelProps(){return t.label({...yr.label.attrs,htmlFor:Ti(n),"data-disabled":Ne(o),"data-invalid":Ne(a),"data-readonly":Ne(l),"data-required":Ne(c)})},getInputProps(){return t.input({...yr.input.attrs,id:Ti(n),autoCapitalize:"off",name:r("name"),required:r("required"),autoComplete:r("autoComplete"),spellCheck:!1,readOnly:l,disabled:o,type:i?"text":"password","data-state":i?"visible":"hidden","aria-invalid":_f(a),"data-disabled":Ne(o),"data-invalid":Ne(a),"data-readonly":Ne(l),...r("ignorePasswordManagers")?Cx:{}})},getVisibilityTriggerProps(){return t.button({...yr.visibilityTrigger.attrs,type:"button",tabIndex:-1,"aria-controls":Ti(n),"aria-expanded":i,"data-readonly":Ne(l),disabled:o,"data-disabled":Ne(o),"data-state":i?"visible":"hidden","aria-label":d?.visibilityTrigger?.(i),onPointerDown(f){Qb(f)&&u&&(f.preventDefault(),e.send({type:"TRIGGER.CLICK"}))}})},getIndicatorProps(){return t.element({...yr.indicator.attrs,"aria-hidden":!0,"data-state":i?"visible":"hidden","data-disabled":Ne(o),"data-invalid":Ne(a),"data-readonly":Ne(l)})},getControlProps(){return t.element({...yr.control.attrs,"data-disabled":Ne(o),"data-invalid":Ne(a),"data-readonly":Ne(l)})}}}var Cx={"data-1p-ignore":"","data-lpignore":"true","data-bwignore":"true","data-form-type":"other","data-protonpass-ignore":"true"},Ex={props({props:e}){return{id:wx(),defaultVisible:!1,autoComplete:"current-password",ignorePasswordManagers:!1,...e,translations:{visibilityTrigger(t){return t?"Hide password":"Show password"},...e.translations}}},context({prop:e,bindable:t}){return{visible:t(()=>({value:e("visible"),defaultValue:e("defaultVisible"),onChange(n){e("onVisibilityChange")?.({visible:n})}}))}},initialState(){return"idle"},effects:["trackFormEvents"],states:{idle:{on:{"VISIBILITY.SET":{actions:["setVisibility"]},"TRIGGER.CLICK":{actions:["toggleVisibility","focusInputEl"]}}}},implementations:{actions:{setVisibility({context:e,event:t}){e.set("visible",t.value)},toggleVisibility({context:e}){e.set("visible",t=>!t)},focusInputEl({scope:e}){qa(e)?.focus()}},effects:{trackFormEvents({scope:e,send:t}){const r=qa(e)?.form;if(!r)return;const s=e.getWin(),i=new s.AbortController;return r.addEventListener("reset",o=>{o.defaultPrevented||t({type:"VISIBILITY.SET",value:!1})},{signal:i.signal}),r.addEventListener("submit",()=>{t({type:"VISIBILITY.SET",value:!1})},{signal:i.signal}),()=>i.abort()}}}};Tf()(["defaultVisible","dir","id","onVisibilityChange","visible","ids","getRootNode","disabled","invalid","required","readOnly","translations","ignorePasswordManagers","autoComplete","name"]);function so(e){const t=e().value??e().defaultValue,n=e().isEqual??Object.is,[r,s]=Q(t),i=Fe(()=>e().value!=null),o={current:r()},a={current:void 0};Ie(()=>{const u=i()?e().value:r();a.current=u,o.current=u});const l=u=>{const d=a.current,f=Cn(u)?u(o.current):u;e().debug&&console.log(`[bindable > ${e().debug}] setValue`,{next:f,prev:d}),i()||s(f),n(f,d)||e().onChange?.(f,d)};function c(){const u=i()?e().value:r;return Cn(u)?u():u}return{initial:t,ref:o,get:c,set:l,invoke(u,d){e().onChange?.(u,d)},hash(u){return e().hash?.(u)??String(u)}}}so.cleanup=e=>{vt(()=>e())};so.ref=e=>{let t=e;return{get:()=>t,set:n=>{t=n}}};function Ax(e){const t={current:e};return{get(n){return t.current[n]},set(n,r){t.current[n]=r}}}function ra(e){return Cn(e)?e():e}var Rx=(e,t)=>{let n=[],r=!0;Ie(()=>{if(r){n=e.map(i=>ra(i)),r=!1;return}let s=!1;for(let i=0;i<e.length;i++)if(!Ro(n[i],ra(e[i]))){s=!0;break}s&&(n=e.map(i=>ra(i)),t())})};function Pf(e,t={}){const n=Fe(()=>{const{id:g,ids:p,getRootNode:b}=sa(t);return _x({id:g,ids:p,getRootNode:b})}),r=(...g)=>{e.debug&&console.log(...g)},s=Fe(()=>e.props?.({props:Rf(sa(t)),scope:n()})??sa(t)),i=Tx(s),o=e.context?.({prop:i,bindable:so,get scope(){return n()},flush:yu,getContext(){return a},getComputed(){return j},getRefs(){return w},getEvent(){return f()}}),a={get(g){return o?.[g].get()},set(g,p){o?.[g].set(p)},initial(g){return o?.[g].initial},hash(g){const p=o?.[g].get();return o?.[g].hash(p)}},l={current:new Map},c={current:null},u={current:null},d={current:{type:""}},f=()=>Ae(d.current,{current(){return d.current},previous(){return u.current}}),m=()=>Ae(U,{matches(...g){const p=U.get();return g.includes(p)},hasTag(g){const p=U.get();return!!e.states[p]?.tags?.includes(g)}}),w=Ax(e.refs?.({prop:i,context:a})??{}),v=()=>({state:m(),context:a,event:f(),prop:i,send:T,action:x,guard:E,track:Rx,refs:w,computed:j,flush:yu,get scope(){return n()},choose:A}),x=g=>{const p=Cn(g)?g(v()):g;if(!p)return;const b=p.map(C=>{const M=e.implementations?.actions?.[C];return M||vu(`[zag-js] No implementation found for action "${JSON.stringify(C)}"`),M});for(const C of b)C?.(v())},E=g=>Cn(g)?g(v()):e.implementations?.guards?.[g](v()),_=g=>{const p=Cn(g)?g(v()):g;if(!p)return;const b=p.map(M=>{const N=e.implementations?.effects?.[M];return N||vu(`[zag-js] No implementation found for effect "${JSON.stringify(M)}"`),N}),C=[];for(const M of b){const N=M?.(v());N&&C.push(N)}return()=>C.forEach(M=>M?.())},A=g=>ix(g).find(p=>{let b=!p.guard;return vl(p.guard)?b=!!E(p.guard):Cn(p.guard)&&(b=p.guard(v())),b}),j=g=>{yx(e.computed,()=>"[zag-js] No computed object found on machine");const p=e.computed[g];return p({context:a,event:d.current,prop:i,refs:w,scope:n(),computed:j})},U=so(()=>({defaultValue:e.initialState({prop:i}),onChange(g,p){p&&(l.current.get(p)?.(),l.current.delete(p)),p&&x(e.states[p]?.exit),x(c.current?.actions);const b=_(e.states[g]?.effects);if(b&&l.current.set(g,b),p===na){x(e.entry);const C=_(e.effects);C&&l.current.set(na,C)}x(e.states[g]?.entry)}}));let q=xr.NotStarted;Ha(()=>{const g=q===xr.Started;q=xr.Started,r(g?"rehydrating...":"initializing..."),U.invoke(U.initial,na)}),vt(()=>{r("unmounting..."),q=xr.Stopped,l.current.forEach(p=>p?.()),l.current=new Map,c.current=null,x(e.exit)});const T=g=>{queueMicrotask(()=>{if(q!==xr.Started)return;u.current=d.current,d.current=g;let p=_t(()=>U.get());const b=e.states[p].on?.[g.type]??e.on?.[g.type],C=A(b);if(!C)return;c.current=C;const M=C.target??p;r("transition",g.type,C.target||p,`(${C.actions})`);const N=M!==p;N?U.set(M):C.reenter&&!N?U.invoke(p,p):x(C.actions)})};return e.watch?.(v()),{state:m(),send:T,context:a,prop:i,get scope(){return n()},refs:w,computed:j,event:f(),getStatus:()=>q}}function yu(e){e()}function sa(e){return Cn(e)?e():e}function Tx(e){return function(n){return e()[n]}}var bu={onFocus:"onFocusIn",onBlur:"onFocusOut",onDoubleClick:"onDblClick",onChange:"onInput",defaultChecked:"checked",defaultValue:"value",htmlFor:"for",className:"class"},Px=e=>e.startsWith("--")?e:Dx(e);function jx(e){return e in bu?bu[e]:e}var jf=kx(e=>{const t={};for(const n in e){const r=e[n];if(!(n==="readOnly"&&r===!1)){if(n==="style"&&lx(r)){t.style=Lx(r);continue}if(n==="children"){vl(r)&&(t.textContent=r);continue}t[jx(n)]=r}}return t});function Lx(e){let t={};for(const n in e){const r=e[n];!vl(r)&&!cx(r)||(t[Px(n)]=r)}return t}var Mx=/[A-Z]/g,Ox=/^ms-/;function Nx(e){return"-"+e.toLowerCase()}var ia={};function Dx(e){if(ia.hasOwnProperty(e))return ia[e];var t=e.replace(Mx,Nx);return ia[e]=Ox.test(t)?"-"+t:t}var qx=I("<div><label>Password</label><div><input><button><span>");function io(e){const t=Pf(Ex,{id:Yu(),autoComplete:e.autoComplete||"new-password",value:e.password||"",required:e.required||!1}),n=Fe(()=>Sx(t,jf)),r=e.inputClass||"w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition big-placeholder",s=e.iconSize||20;return(()=>{var i=qx(),o=i.firstChild,a=o.nextSibling,l=a.firstChild,c=l.nextSibling,u=c.firstChild;return wt(i,Ae(()=>n().getRootProps(),{get class(){return e.class}}),!1,!0),wt(o,Ae(()=>n().getLabelProps(),{class:"block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"}),!1,!0),wt(a,Ae(()=>n().getControlProps(),{class:"relative"}),!1,!0),wt(l,Ae(()=>n().getInputProps(),{class:r,onInput:d=>e.onPasswordChange?.(d.target.value),placeholder:"••••••••"}),!1,!1),wt(c,Ae(()=>n().getVisibilityTriggerProps(),{class:"absolute right-3 sm:right-4 top-1/2 -translate-y-1/2 text-gray-400"}),!1,!0),wt(u,Ae(()=>n().getIndicatorProps()),!1,!0),y(u,k(_e,{get when(){return n().visible},get fallback(){return k(Dm,{size:s-2})},get children(){return k(qm,{size:s})}})),i})()}var Fx=I('<p class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm">'),Vx=I('<div class="flex items-center">Signing In...'),Ux=I('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-8 sm:py-12"><form aria-labelledby=signin-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 space-y-4 border border-gray-100"autocomplete=off><div class="mb-2 sm:mb-4 text-center"><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=signin-heading>Welcome Back</h2><p class="text-gray-500 text-xs sm:text-sm">Sign in to your account.</p></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=email-input>Email</label><input type=email autocomplete=email autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"required id=email-input placeholder=you@example.com></div><div></div><button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"></button><div class="text-center mt-1 sm:mt-2"><a href=/reset-password class="text-indigo-600 hover:underline text-xs sm:text-sm font-semibold">Forgot password?</a></div><div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Don&apos;t have an account? <a href=/signup class="text-indigo-600 hover:underline font-semibold">Sign Up');function Ix(){const[e,t]=Q(""),[n,r]=Q(""),[s,i]=Q(""),[o,a]=Q(!1),l=tn(),{signin:c}=On();async function u(d){if(d.preventDefault(),i(""),!e()||!n()){i("Please enter email and password");return}a(!0);try{await c(e(),n()),await new Promise(f=>setTimeout(f,200)),l("/dashboard",{replace:!0}),a(!1)}catch(f){let m;try{m=JSON.parse(f.message).detail}catch{try{m=f.message}catch{m=String(f.message)}}console.log("Error detail:",m),m&&typeof m=="string"&&(m.includes("Email not verified")||m.includes("email_verified_at is null"))?l("/verify-email",{replace:!0}):i("Incorrect email or password"),a(!1)}}return(()=>{var d=Ux(),f=d.firstChild,m=f.firstChild,w=m.nextSibling,v=w.firstChild,x=v.nextSibling,E=w.nextSibling,_=E.nextSibling,A=_.nextSibling,j=A.firstChild,U=A.nextSibling,q=U.firstChild,T=q.nextSibling;return f.addEventListener("submit",u),x.$$input=g=>t(g.target.value),y(E,k(io,{get password(){return n()},onPasswordChange:r,autoComplete:"current-password",required:!0}),null),y(E,k(Qt,{get when(){return!!s()},get children(){var g=Fx();return y(g,s),g}}),null),y(_,k(Qt,{get when(){return o()},fallback:"Sign In",get children(){var g=Vx(),p=g.firstChild;return y(g,k(fs,{class:"animate-spin mr-2",size:22}),p),g}})),j.$$click=g=>{g.preventDefault(),l("/reset-password")},T.$$click=g=>{g.preventDefault(),l("/signup")},ge(()=>_.disabled=o()),ge(()=>x.value=e()),d})()}tt(["input","click"]);var Hx=I('<div class="w-full mt-2"><div class="text-xs text-gray-700"id=password-requirements aria-live=polite><ul class="pace-y-0.5 sm:space-y-1">'),Bx=I('<li class="flex items-center gap-2"><span aria-hidden=true></span><span>'),zx=I('<svg class="w-3 h-3"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 16 16"><path stroke-linecap=round stroke-linejoin=round d="M4 8l3 3 5-5">'),Wx=I('<svg class="w-3 h-3"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 16 16"><path stroke-linecap=round stroke-linejoin=round d="M5 5l6 6M11 5l-6 6">');const os=[{label:"At least 8 characters",test:e=>e.length>=8,error:"at least 8 characters"},{label:"Uppercase letter (A-Z)",test:e=>/[A-Z]/.test(e),error:"an uppercase letter"},{label:"Lowercase letter (a-z)",test:e=>/[a-z]/.test(e),error:"a lowercase letter"},{label:"Number (0-9)",test:e=>/\d/.test(e),error:"a number"},{label:"Special character (e.g. !?<>@#$%)",test:e=>/[^A-Za-z0-9]/.test(e),error:"a special character"}];function Yx(e){if(e=e(),!e)return{met:[],unmet:os.map(s=>s.label)};const t=os.filter(s=>s.test(e)).map(s=>s.label),n=os.filter(s=>!s.test(e)).map(s=>s.label),r=os.filter(s=>!s.test(e)).map(s=>s.error);return{met:t,unmet:n,errors:r}}function Jx(e){const t=Fe(()=>Yx(()=>e.password));return Ie(()=>{e.onUnmet?.(t().errors)}),(()=>{var n=Hx(),r=n.firstChild,s=r.firstChild;return y(s,k(Ee,{each:os,children:i=>{const o=()=>t().met.includes(i.label);return(()=>{var a=Bx(),l=a.firstChild,c=l.nextSibling;return y(l,(()=>{var u=et(()=>!!o());return()=>u()?zx():Wx()})()),y(c,()=>i.label),ge(u=>{var d=`w-3.5 h-3.5 ml-1 rounded-full flex items-center justify-center ${o()?"bg-white text-green-500 border-green-500 border-[1.5px]":"border-red-500 border-[1.5px] text-red-500"}`,f=o()?"text-green-500":"text-red-500";return d!==u.e&&ft(l,u.e=d),f!==u.t&&ft(c,u.t=f),u},{e:void 0,t:void 0}),a})()}})),n})()}var Qx=I('<p class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm">Password must include '),Kx=I('<p class="pt-2 sm:pt-3 px-2 text-red-600 text-xs sm:text-sm">'),Gx=I('<div class="flex items-center">Signing Up...'),Xx=I('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-6 sm:py-12"><form aria-labelledby=signup-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-6 sm:p-12 space-y-4 border border-gray-100"autocomplete=off><div class="mb-2 text-center"><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=signup-heading>Get Started</h2><p class="text-gray-500 text-xs sm:text-sm">Create a new account.</p></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=name-input>Name</label><div class=relative><input type=text autocomplete=name autocapitalize=words spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"required id=name-input placeholder="What should we call you?"></div></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=email-input>Email</label><div class=relative><input type=email autocomplete=email autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"required id=email-input placeholder=you@example.com></div></div><div></div><div><label class="block text-xs sm:text-sm font-semibold text-gray-700 mb-1 sm:mb-2"for=confirm-password-input>Confirm Password</label><div class=relative><input type=password autocomplete=new-password autocapitalize=off spellcheck=false class="w-full pl-3 sm:pl-4 pr-3 sm:pr-4 py-2 text-xs sm:text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 transition big-placeholder"required id=confirm-password-input placeholder=••••••••></div></div><button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"></button><div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Already have an account? <a href=/signin class="text-indigo-600 hover:underline font-semibold">Sign In');function Zx(){const[e,t]=Q(""),[n,r]=Q(""),[s,i]=Q(""),[o,a]=Q(""),[l,c]=Q(""),[u,d]=Q(!1),[f,m]=Q([]),[w,v]=Q(!1),x=tn(),{signup:E}=On();async function _(A){if(A.preventDefault(),d(!0),c(""),!e()||!n()||!s()||!o()){c("Please fill out all fields");return}if(s()!==o()){c("Passwords do not match");return}if(!(f().length>0)){v(!0);try{await E(n(),s(),e()),await new Promise(j=>setTimeout(j,200)),x("/verify-email",{replace:!0}),v(!1)}catch(j){console.error("Signup error:",j),JSON.parse(j.message).detail.includes("Email not verified")?x("/verify-email",{replace:!0}):(v(!1),c("Sign up failed"))}}}return Ie(()=>{s()===o()&&c("")}),(()=>{var A=Xx(),j=A.firstChild,U=j.firstChild,q=U.nextSibling,T=q.firstChild,g=T.nextSibling,p=g.firstChild,b=q.nextSibling,C=b.firstChild,M=C.nextSibling,N=M.firstChild,O=b.nextSibling,X=O.nextSibling,ne=X.firstChild,K=ne.nextSibling,H=K.firstChild,L=X.nextSibling,ee=L.nextSibling,z=ee.firstChild,B=z.nextSibling;return j.addEventListener("submit",_),p.$$input=F=>t(F.target.value),N.$$input=F=>r(F.target.value),y(O,k(io,{get password(){return s()},onPasswordChange:i,autoComplete:"new-password",required:!0}),null),y(O,k(Qt,{get when(){return et(()=>!!u())()&&f().length>0},get children(){var F=Qx();return F.firstChild,y(F,()=>f()?.[0],null),F}}),null),y(O,k(Jx,{get password(){return s()},onUnmet:m}),null),H.$$input=F=>a(F.target.value),y(X,k(Qt,{get when(){return!!l()},get children(){var F=Kx();return y(F,l),F}}),null),y(L,k(Qt,{get when(){return w()},fallback:"Sign Up",get children(){var F=Gx(),oe=F.firstChild;return y(F,k(fs,{class:"animate-spin mr-2",size:22}),oe),F}})),B.$$click=F=>{F.preventDefault(),x("/signin")},ge(()=>L.disabled=w()),ge(()=>p.value=e()),ge(()=>N.value=n()),ge(()=>H.value=o()),A})()}tt(["input","click"]);var e_=Cr("pinInput").parts("root","label","input","control"),vi=e_.build(),hs=e=>e.ids?.root??`pin-input:${e.id}`,t_=(e,t)=>e.ids?.input?.(t)??`pin-input:${e.id}:${t}`,Fa=e=>e.ids?.hiddenInput??`pin-input:${e.id}:hidden`,n_=e=>e.ids?.label??`pin-input:${e.id}:label`,r_=e=>e.ids?.control??`pin-input:${e.id}:control`,s_=e=>e.getById(hs(e)),oo=e=>{const n=`input[data-ownedby=${CSS.escape(hs(e))}]`;return rx(s_(e),n)},Gr=(e,t)=>oo(e)[t],i_=e=>oo(e)[0],xu=e=>e.getById(Fa(e)),oa=(e,t)=>{e.value=t,e.setAttribute("value",t)},o_={numeric:/^[0-9]+$/,alphabetic:/^[A-Za-z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/i};function a_(e,t){return e?!!o_[e]?.test(t):!0}function l_(e,t,n){return n?new RegExp(n,"g").test(e):a_(t,e)}function c_(e,t){const{send:n,context:r,computed:s,prop:i,scope:o}=e,a=s("isValueComplete"),l=!!i("disabled"),c=!!i("readOnly"),u=!!i("invalid"),d=!!i("required"),f=i("translations"),m=r.get("focusedIndex");function w(){i_(o)?.focus()}return{focus:w,count:r.get("count"),items:Array.from({length:r.get("count")}).map((v,x)=>x),value:r.get("value"),valueAsString:s("valueAsString"),complete:a,setValue(v){Array.isArray(v)||vx("[pin-input/setValue] value must be an array"),n({type:"VALUE.SET",value:v})},clearValue(){n({type:"VALUE.CLEAR"})},setValueAtIndex(v,x){n({type:"VALUE.SET",value:x,index:v})},getRootProps(){return t.element({dir:i("dir"),...vi.root.attrs,id:hs(o),"data-invalid":Ne(u),"data-disabled":Ne(l),"data-complete":Ne(a),"data-readonly":Ne(c)})},getLabelProps(){return t.label({...vi.label.attrs,dir:i("dir"),htmlFor:Fa(o),id:n_(o),"data-invalid":Ne(u),"data-disabled":Ne(l),"data-complete":Ne(a),"data-required":Ne(d),"data-readonly":Ne(c),onClick(v){v.preventDefault(),w()}})},getHiddenInputProps(){return t.input({"aria-hidden":!0,type:"text",tabIndex:-1,id:Fa(o),readOnly:c,disabled:l,required:d,name:i("name"),form:i("form"),style:sx,maxLength:s("valueLength"),defaultValue:s("valueAsString")})},getControlProps(){return t.element({...vi.control.attrs,dir:i("dir"),id:r_(o)})},getInputProps(v){const{index:x}=v,E=i("type")==="numeric"?"tel":"text";return t.input({...vi.input.attrs,dir:i("dir"),disabled:l,"data-disabled":Ne(l),"data-complete":Ne(a),id:t_(o,x.toString()),"data-index":x,"data-ownedby":hs(o),"aria-label":f?.inputLabel?.(x,s("valueLength")),inputMode:i("otp")||i("type")==="numeric"?"numeric":"text","aria-invalid":_f(u),"data-invalid":Ne(u),type:i("mask")?"password":E,defaultValue:r.get("value")[x]||"",readOnly:c,autoCapitalize:"none",autoComplete:i("otp")?"one-time-code":"off",placeholder:m===x?"":i("placeholder"),onBeforeInput(_){try{const A=Yb(_);l_(A,i("type"),i("pattern"))||(n({type:"VALUE.INVALID",value:A}),_.preventDefault()),A.length>2&&_.currentTarget.setSelectionRange(0,1,"forward")}catch{}},onChange(_){const A=Cf(_),{value:j}=_.currentTarget;if(A.inputType==="insertFromPaste"||j.length>2){n({type:"INPUT.PASTE",value:j}),_.currentTarget.value=j[0],_.preventDefault();return}if(A.inputType==="deleteContentBackward"){n({type:"INPUT.BACKSPACE"});return}n({type:"INPUT.CHANGE",value:j,index:x})},onKeyDown(_){if(_.defaultPrevented||Jb(_)||Kb(_))return;const j={Backspace(){n({type:"INPUT.BACKSPACE"})},Delete(){n({type:"INPUT.DELETE"})},ArrowLeft(){n({type:"INPUT.ARROW_LEFT"})},ArrowRight(){n({type:"INPUT.ARROW_RIGHT"})},Enter(){n({type:"INPUT.ENTER"})}}[Xb(_,{dir:i("dir"),orientation:"horizontal"})];j&&(j(_),_.preventDefault())},onFocus(){n({type:"INPUT.FOCUS",index:x})},onBlur(_){const A=_.relatedTarget;kf(A)&&A.dataset.ownedby===hs(o)||n({type:"INPUT.BLUR",index:x})}})}}}var{choose:u_,createMachine:d_}=xx(),f_=d_({props({props:e}){return{placeholder:"○",otp:!1,type:"numeric",defaultValue:e.count?yi([],e.count):[],...e,translations:{inputLabel:(t,n)=>`pin code ${t+1} of ${n}`,...e.translations}}},initialState(){return"idle"},context({prop:e,bindable:t}){return{value:t(()=>({value:e("value"),defaultValue:e("defaultValue"),isEqual:Ro,onChange(n){e("onValueChange")?.({value:n,valueAsString:n.join("")})}})),focusedIndex:t(()=>({sync:!0,defaultValue:-1})),count:t(()=>({defaultValue:e("count")}))}},computed:{_value:({context:e})=>yi(e.get("value"),e.get("count")),valueLength:({computed:e})=>e("_value").length,filledValueLength:({computed:e})=>e("_value").filter(t=>t?.trim()!=="").length,isValueComplete:({computed:e})=>e("valueLength")===e("filledValueLength"),valueAsString:({computed:e})=>e("_value").join(""),focusedValue:({computed:e,context:t})=>e("_value")[t.get("focusedIndex")]||""},entry:u_([{guard:"autoFocus",actions:["setInputCount","setFocusIndexToFirst"]},{actions:["setInputCount"]}]),watch({action:e,track:t,context:n,computed:r}){t([()=>n.get("focusedIndex")],()=>{e(["focusInput","selectInputIfNeeded"])}),t([()=>n.get("value").join(",")],()=>{e(["syncInputElements","dispatchInputEvent"])}),t([()=>r("isValueComplete")],()=>{e(["invokeOnComplete","blurFocusedInputIfNeeded"])})},on:{"VALUE.SET":[{guard:"hasIndex",actions:["setValueAtIndex"]},{actions:["setValue"]}],"VALUE.CLEAR":{actions:["clearValue","setFocusIndexToFirst"]}},states:{idle:{on:{"INPUT.FOCUS":{target:"focused",actions:["setFocusedIndex"]}}},focused:{on:{"INPUT.CHANGE":{actions:["setFocusedValue","syncInputValue","setNextFocusedIndex"]},"INPUT.PASTE":{actions:["setPastedValue","setLastValueFocusIndex"]},"INPUT.FOCUS":{actions:["setFocusedIndex"]},"INPUT.BLUR":{target:"idle",actions:["clearFocusedIndex"]},"INPUT.DELETE":{guard:"hasValue",actions:["clearFocusedValue"]},"INPUT.ARROW_LEFT":{actions:["setPrevFocusedIndex"]},"INPUT.ARROW_RIGHT":{actions:["setNextFocusedIndex"]},"INPUT.BACKSPACE":[{guard:"hasValue",actions:["clearFocusedValue"]},{actions:["setPrevFocusedIndex","clearFocusedValue"]}],"INPUT.ENTER":{guard:"isValueComplete",actions:["requestFormSubmit"]},"VALUE.INVALID":{actions:["invokeOnInvalid"]}}}},implementations:{guards:{autoFocus:({prop:e})=>!!e("autoFocus"),hasValue:({context:e})=>e.get("value")[e.get("focusedIndex")]!=="",isValueComplete:({computed:e})=>e("isValueComplete"),hasIndex:({event:e})=>e.index!==void 0},actions:{dispatchInputEvent({computed:e,scope:t}){const n=xu(t);nx(n,{value:e("valueAsString")})},setInputCount({scope:e,context:t,prop:n}){if(n("count"))return;const r=oo(e);t.set("count",r.length)},focusInput({context:e,scope:t}){const n=e.get("focusedIndex");n!==-1&&Gr(t,n)?.focus({preventScroll:!0})},selectInputIfNeeded({context:e,prop:t,scope:n}){const r=e.get("focusedIndex");!t("selectOnFocus")||r===-1||wi(()=>{Gr(n,r)?.select()})},invokeOnComplete({computed:e,prop:t}){e("isValueComplete")&&t("onValueComplete")?.({value:e("_value"),valueAsString:e("valueAsString")})},invokeOnInvalid({context:e,event:t,prop:n}){n("onValueInvalid")?.({value:t.value,index:e.get("focusedIndex")})},clearFocusedIndex({context:e}){e.set("focusedIndex",-1)},setFocusedIndex({context:e,event:t}){e.set("focusedIndex",t.index)},setValue({context:e,event:t}){const n=yi(t.value,e.get("count"));e.set("value",n)},setFocusedValue({context:e,event:t,computed:n,flush:r}){const s=n("focusedValue"),i=e.get("focusedIndex"),o=_u(s,t.value);r(()=>{e.set("value",ta(n("_value"),i,o))})},revertInputValue({context:e,computed:t,scope:n}){const r=Gr(n,e.get("focusedIndex"));oa(r,t("focusedValue"))},syncInputValue({context:e,event:t,scope:n}){const r=e.get("value"),s=Gr(n,t.index);oa(s,r[t.index])},syncInputElements({context:e,scope:t}){const n=oo(t),r=e.get("value");n.forEach((s,i)=>{oa(s,r[i])})},setPastedValue({context:e,event:t,computed:n,flush:r}){wi(()=>{const s=n("valueAsString"),i=e.get("focusedIndex"),o=n("valueLength"),a=n("filledValueLength"),l=Math.min(i,a),c=l>0?s.substring(0,i):"",u=t.value.substring(0,o-l),d=yi(`${c}${u}`.split(""),o);r(()=>{e.set("value",d)})})},setValueAtIndex({context:e,event:t,computed:n}){const r=_u(n("focusedValue"),t.value);e.set("value",ta(n("_value"),t.index,r))},clearValue({context:e}){const t=Array.from({length:e.get("count")}).fill("");queueMicrotask(()=>{e.set("value",t)})},clearFocusedValue({context:e,computed:t}){const n=e.get("focusedIndex");n!==-1&&e.set("value",ta(t("_value"),n,""))},setFocusIndexToFirst({context:e}){e.set("focusedIndex",0)},setNextFocusedIndex({context:e,computed:t}){e.set("focusedIndex",Math.min(e.get("focusedIndex")+1,t("valueLength")-1))},setPrevFocusedIndex({context:e}){e.set("focusedIndex",Math.max(e.get("focusedIndex")-1,0))},setLastValueFocusIndex({context:e,computed:t}){wi(()=>{e.set("focusedIndex",Math.min(t("filledValueLength"),t("valueLength")-1))})},blurFocusedInputIfNeeded({context:e,prop:t,scope:n}){t("blurOnComplete")&&wi(()=>{Gr(n,e.get("focusedIndex"))?.blur()})},requestFormSubmit({computed:e,prop:t,scope:n}){if(!t("name")||!e("isValueComplete"))return;xu(n)?.form?.requestSubmit()}}}});function _u(e,t){let n=t;e[0]===t[0]?n=t[1]:e[0]===t[1]&&(n=t[0]);const r=n.split("");return n=r[r.length-1],n??""}function yi(e,t){return Array.from({length:t}).fill("").map((n,r)=>e[r]||n)}Tf()(["autoFocus","blurOnComplete","count","defaultValue","dir","disabled","form","getRootNode","id","ids","invalid","mask","name","onValueChange","onValueComplete","onValueInvalid","otp","pattern","placeholder","readOnly","required","selectOnFocus","translations","type","value"]);var h_=I('<div class="flex flex-col items-center"><div><input><input><input><input><input><input>');function g_(e){const t=Pf(f_,{id:Yu(),required:e.required||!0,autoComplete:e.autoComplete||"one-time-code",otp:e.otp||!0,onValueChange(s){e.onInput&&e.onInput(s.valueAsString)},onValueComplete(s){e.onComplete&&e.onComplete(s.valueAsString)}}),n=Fe(()=>c_(t,jf)),r=()=>"w-10 h-12 sm:w-14 sm:h-14 rounded-lg border-2 "+(e.isError?"border-red-500 focus:border-red-600 focus:ring-red-400":"border-gray-300 focus:border-blue-500 focus:ring-blue-400")+" bg-gray-50 text-center text-xl font-semibold outline-none";return(()=>{var s=h_(),i=s.firstChild,o=i.firstChild,a=o.nextSibling,l=a.nextSibling,c=l.nextSibling,u=c.nextSibling,d=u.nextSibling;return wt(i,Ae(()=>n().getRootProps(),{class:"flex justify-center gap-1 sm:gap-3 my-6"}),!1,!0),wt(o,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:0}),{get class(){return r()}}),!1,!1),wt(a,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:1}),{get class(){return r()}}),!1,!1),wt(l,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:2}),{get class(){return r()}}),!1,!1),wt(c,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:3}),{get class(){return r()}}),!1,!1),wt(u,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:4}),{get class(){return r()}}),!1,!1),wt(d,Ae({get required(){return e.required??!0}},()=>n().getInputProps({index:5}),{get class(){return r()}}),!1,!1),s})()}var p_=I('<div class=text-center><p class="text-gray-500 text-sm sm:text-base">Enter the verification code sent to your email.'),m_=I('<div class="flex items-center">Verifying...'),w_=I('<button type=submit class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center">'),ku=I('<div class="flex items-center">Sending...'),v_=I(`<div class="text-center text-xs sm:text-sm text-gray-500 mt-2 sm:mt-4">Didn't get a code? <button type=button class="text-indigo-600 hover:underline font-semibold bg-transparent border-none p-0 m-0 cursor-pointer inline-flex items-center">`),y_=I('<p class=" text-red-600 text-xs sm:text-sm">'),b_=I('<p class="pt-2 sm:pt-3 px-2 text-green-600 text-xs sm:text-sm">Email verified! Ready to sign in...'),x_=I('<div class="h-full bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-12"><form aria-labelledby=verifyemail-heading class="w-full max-w-md sm:max-w-xl bg-white rounded-xl sm:rounded-3xl shadow-2xl p-4 sm:p-12 space-y-2 border border-gray-100 relative"autocomplete=off><div class=text-center><h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2"id=verifyemail-heading>Verify Your Email'),__=I('<div class="mb-6 sm:mb-8 text-center"><p class="text-gray-500 text-xs sm:text-sm">Send a code to verify your email.'),k_=I('<button class="w-full py-2 sm:py-3 text-sm sm:text-base bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg sm:rounded-xl shadow transition disabled:opacity-50 flex items-center justify-center"type=button>');function $_(){const[e,t]=Q(""),[n,r]=Q(!1),[s,i]=Q(""),[o,a]=Q(!1),[l,c]=Q(!1),[u,d]=Q(!1),f=tn(),[m,w]=Ag(),{verifyEmail:v,sendEmailVerification:x,getPendingEmail:E}=On();Ha(()=>{E()||f("/signin",{replace:!0})});async function _(j,U){j?.preventDefault&&j.preventDefault(),i(""),a(!0);try{const q=U??e();await v(q),await new Promise(T=>setTimeout(T,200)),c(!0),f("/signin",{replace:!0}),a(!1)}catch(q){console.error("Verify email error:",q),a(!1),i("Invalid code. Please try again.")}}async function A({resend:j=!1}){i(""),j?d(!0):a(!0);try{await x(),await new Promise(U=>setTimeout(U,j?1e3:200)),a(!1),d(!1),w({codeSent:"true"}),r(!0)}catch(U){console.error("Send verification code error:",U),a(!1),d(!1),i("Error sending code. Please try again later.")}}return Ie(async()=>{if(m.codeSent==="true"&&(r(!0),m.code))try{await v(m.code),c(!0),f("/signin",{replace:!0}),a(!1)}catch(j){console.error("Verify email error with URL code:",j),a(!1),i("Invalid or expired link.")}}),Ie(()=>{e(),i("")}),(()=>{var j=x_(),U=j.firstChild;return U.firstChild,U.addEventListener("submit",_),y(U,k(_e,{get when(){return n()},get fallback(){return[__(),(()=>{var q=k_();return q.$$click=A,y(q,k(Qt,{get when(){return o()},fallback:"Send Code",get children(){var T=ku(),g=T.firstChild;return y(T,k(fs,{class:"animate-spin mr-2",size:22}),g),T}})),ge(()=>q.disabled=o()),q})()]},get children(){return[p_(),k(g_,{otp:!0,required:!0,autocomplete:!0,onInput:t,get isError(){return!!s()},onComplete:q=>_(void 0,q)}),(()=>{var q=w_();return y(q,k(Qt,{get when(){return o()},fallback:"Verify Email",get children(){var T=m_(),g=T.firstChild;return y(T,k(fs,{class:"animate-spin mr-2",size:22}),g),T}})),ge(()=>q.disabled=o()),q})(),(()=>{var q=v_(),T=q.firstChild,g=T.nextSibling;return g.$$click=()=>A({resend:!0}),y(g,k(_e,{get when(){return u()},fallback:"Resend",get children(){var p=ku();return p.firstChild,y(p,k(fs,{class:"animate-spin mr-1",size:16}),null),p}})),ge(p=>{var b=u(),C=u();return b!==p.e&&(g.disabled=p.e=b),C!==p.t&&kt(g,"aria-disabled",p.t=C),p},{e:void 0,t:void 0}),q})()]}}),null),y(U,k(Qt,{get when(){return!!s()},class:"absolute left-10 right-0 bottom-2 sm:bottom-6",get children(){var q=y_();return y(q,s),q}}),null),y(U,k(Qt,{get when(){return l()},class:"absolute left-10 right-0 bottom-2 sm:bottom-6",get children(){return b_()}}),null),j})()}tt(["click"]);var S_=I('<div class="h-full flex items-center justify-center p-4"><div class="w-full max-w-md bg-white rounded-xl p-6 sm:p-12 shadow-2xl space-y-4">'),C_=I('<h2 class="text-xl font-bold text-gray-900 mb-2">Reset Password'),E_=I('<input type=email placeholder="Enter your email"class="w-full p-2 border border-gray-300 rounded-lg">'),aa=I('<button class="w-full bg-indigo-600 text-white py-2 rounded-lg mt-2">'),A_=I('<h2 class="text-xl font-bold text-gray-900 mb-2">Enter Verification Code'),R_=I('<p class="text-gray-500 text-xs mb-2">(DEV: Use code <!> for testing)'),T_=I('<input type=text placeholder="Verification code"class="w-full p-2 border border-gray-300 rounded-lg">'),$u=I('<p class="text-red-600 text-xs mt-2">'),P_=I('<h2 class="text-xl font-bold text-gray-900 mb-2">Set New Password');function j_(){const[e,t]=Q(""),[n,r]=Q(""),[s,i]=Q(""),[o,a]=Q(""),[l,c]=Q(1),[u,d]=Q(""),[f,m]=Q(!1),w=tn(),{requestPasswordReset:v,verifyResetCode:x,resetPassword:E}=On(),[_,A]=Q("");async function j(){if(d(""),!e())return d("Enter your email");m(!0);try{await v(e());const T=Math.floor(1e5+Math.random()*9e5).toString();A(T),console.log("DEV: Generated code:",T),c(2)}catch{const g=Math.floor(1e5+Math.random()*9e5).toString();A(g),console.log("DEV: Generated code (fallback):",g),c(2)}m(!1)}async function U(){if(d(""),!n())return d("Enter verification code");m(!0);try{if(n()===_())c(3);else throw new Error("Invalid code")}catch{d("Invalid code")}m(!1)}async function q(){if(d(""),!s()||s()!==o())return d("Passwords do not match");m(!0);try{await new Promise(T=>setTimeout(T,200)),w("/signin")}catch{d("Failed to reset password")}m(!1)}return(()=>{var T=S_(),g=T.firstChild;return y(g,(()=>{var p=et(()=>l()===1);return()=>p()&&[C_(),(()=>{var b=E_();return b.$$input=C=>t(C.target.value),ge(()=>b.value=e()),b})(),(()=>{var b=aa();return b.$$click=j,y(b,()=>f()?"Sending...":"Send Verification Code"),ge(()=>b.disabled=f()),b})()]})(),null),y(g,(()=>{var p=et(()=>l()===2);return()=>p()&&[A_(),(()=>{var b=R_(),C=b.firstChild,M=C.nextSibling;return M.nextSibling,y(b,_,M),b})(),(()=>{var b=T_();return b.$$input=C=>r(C.target.value),ge(()=>b.value=n()),b})(),(()=>{var b=aa();return b.$$click=U,y(b,()=>f()?"Verifying...":"Verify Code"),ge(()=>b.disabled=f()),b})(),et(()=>et(()=>!!u())()&&(()=>{var b=$u();return y(b,u),b})())]})(),null),y(g,(()=>{var p=et(()=>l()===3);return()=>p()&&[P_(),k(io,{get password(){return s()},onPasswordChange:i,placeholder:"New password"}),k(io,{get password(){return o()},onPasswordChange:a,placeholder:"Confirm password"}),(()=>{var b=aa();return b.$$click=q,y(b,()=>f()?"Resetting...":"Reset Password"),ge(()=>b.disabled=f()),b})(),et(()=>et(()=>!!u())()&&(()=>{var b=$u();return y(b,u),b})())]})(),null),T})()}tt(["input","click"]);var L_=I('<div tabindex=0 role=button><span class=truncate></span><button class="flex items-center justify-center w-6 h-6 rounded hover:bg-gray-200 transition-colors"tabindex=0 type=button><svg fill=none stroke=currentColor stroke-width=2.2 viewBox="0 0 20 20"><polyline points="6 8 10 12 14 8"fill=none stroke-linecap=round stroke-linejoin=round>'),M_=I("<div class=overflow-y-scroll>");function O_(e){const[t,n]=Q({}),{projects:r,currentProject:s}=Ir(),i=()=>r().find(l=>l.id===e.projectId),o=()=>i()&&t()[i().id],a=l=>{l.stopPropagation(),n(c=>({...c,[i().id]:!c[i().id]}))};return[(()=>{var l=L_(),c=l.firstChild,u=c.nextSibling,d=u.firstChild;return l.$$keydown=f=>{(f.key==="Enter"||f.key===" ")&&(e.onSelect?.({project:i()}),f.preventDefault())},l.$$click=()=>e.onSelect?.({project:i()}),y(c,()=>i().name||i().id),u.$$click=a,ge(f=>{var m=`
    flex items-center justify-between cursor-pointer select-none rounded-md transition-colors
    px-2 py-1 font-medium text-xs text-gray-800 hover:bg-gray-100 ${s()?.id===i()?.id?"bg-gray-200":"bg-white"}
  `,w=o()?"Collapse project":"Expand project",v=`transition-transform duration-200 w-5 h-5 text-gray-500 ${o()?"rotate-90":""}`;return m!==f.e&&ft(l,f.e=m),w!==f.t&&kt(u,"aria-label",f.t=w),v!==f.a&&kt(d,"class",f.a=v),f},{e:void 0,t:void 0,a:void 0}),l})(),k(_e,{get when(){return(i().reviews||[]).some(l=>(l.checklists||[]).length>0)},get children(){var l=M_();return us(l,"transition","max-height 0.25s ease-in-out, opacity 0.25s ease-in-out"),y(l,k(Ee,{get each(){return i().reviews||[]},children:c=>k(Ee,{get each(){return c.checklists||[]},children:u=>e.children(u,c)})})),ge(c=>{var u=o()?"600px":"0",d=o()?1:0;return u!==c.e&&us(l,"max-height",c.e=u),d!==c.t&&us(l,"opacity",c.t=d),c},{e:void 0,t:void 0}),l}})]}tt(["click","keydown"]);var N_=I('<ul class="list-disc space-y-1 text-xs">'),D_=I('<div style=max-width:100vw><div><div class="flex-1 overflow-y-auto sidebar-scrollbar space-y-6"><div class="mb-2 px-2 pt-4"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Projects</h3></div><div class="p-2 pb-0 space-y-1 border-t border-gray-100"></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Checklists</h3></div><div class="border-t border-gray-100 pt-1 mx-2"></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Actions</h3></div><div class="border-t border-gray-100 pt-1 space-y-1 mx-2"><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>Export CSV</button><label class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-gray-700 hover:bg-gray-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-gray-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>Import CSV<input type=file accept=.csv,text/csv class=hidden></label><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-blue-700 hover:bg-blue-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-blue-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 10l4.553-2.276A2 2 0 0020 6.382V5a2 2 0 00-2-2H6a2 2 0 00-2 2v1.382a2 2 0 00.447 1.342L9 10m6 0v10m-6-10v10"></path></svg>Set PDF URL</button><label class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-blue-700 hover:bg-blue-50 flex items-center gap-2 text-xs cursor-pointer"><svg class="w-4 h-4 text-blue-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M15 10l4.553-2.276A2 2 0 0020 6.382V5a2 2 0 00-2-2H6a2 2 0 00-2 2v1.382a2 2 0 00.447 1.342L9 10m6 0v10m-6-10v10"></path></svg>Set PDF File<input type=file accept=application/pdf class=hidden></label></div><div class="mb-2 px-2"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider px-1">Settings</h3></div><div class="border-t border-gray-100 pt-1 space-y-1 mx-2"><button class="w-full px-2 py-1.5 rounded text-left transition-colors duration-150 text-red-600 hover:bg-red-50 flex items-center gap-2 text-xs"><svg class="w-4 h-4 text-red-500"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>Clear all data</button><div class=mt-10>'),q_=I('<div class="text-center py-2 px-2"><div class="w-8 h-8 bg-gray-100 rounded-lg mx-auto mb-2 flex items-center justify-center"><svg class="w-4 h-4 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-xs text-gray-500 font-medium">No projects yet'),F_=I('<div class="text-center py-2 px-2"><div class="w-8 h-8 bg-gray-100 rounded-lg mx-auto mb-2 flex items-center justify-center"><svg class="w-4 h-4 text-gray-400"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><p class="text-xs text-gray-500 font-medium">No checklists yet'),V_=I('<div style=flex:1><button class="flex-1 flex items-center gap-2 px-2 py-1.5 text-left focus:outline-none"tabindex=0><svg class="w-4 h-4 text-gray-600"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><div class="flex-1 min-w-0"><div class="flex gap-2 items-center"><div class="text-xs font-medium truncate"></div><span></span></div><div class="text-2xs text-gray-500 mt-0.5"></div></div></button><button aria-label="Delete checklist"tabindex=-1><svg class="w-4 h-4"fill=none stroke=currentColor stroke-width=2 viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),U_=I('<span class="inline-block w-2 h-2 rounded-full"style=background:currentColor>');function I_(e){const{projects:t,checklists:n,getChecklist:r}=Ir(),[s,i]=Q(null),o=tn(),a=vo();Ie(()=>{if(a.name&&a.index!==void 0){const u=decodeURIComponent(a.name),d=Number(a.index);i(r({name:u,index:d}))}});function l(){const u=window.prompt("Enter PDF URL:");u&&e.setPdfUrl(u)}function c(u){const d=u.target.files[0];if(d&&d.type==="application/pdf"){const f=URL.createObjectURL(d);e.setPdfUrl(f)}else alert("Please select a valid PDF file.")}return(()=>{var u=D_(),d=u.firstChild,f=d.firstChild,m=f.firstChild,w=m.nextSibling,v=w.nextSibling,x=v.nextSibling,E=x.nextSibling,_=E.nextSibling,A=_.firstChild,j=A.nextSibling,U=j.firstChild,q=U.nextSibling,T=q.nextSibling,g=j.nextSibling,p=g.nextSibling,b=p.firstChild,C=b.nextSibling,M=C.nextSibling,N=_.nextSibling,O=N.nextSibling,X=O.firstChild;return y(w,k(_e,{get when(){return t()?.length>0},get fallback(){return q_()},get children(){return k(Ee,{get each(){return t()},children:ne=>k(O_,{get projectId(){return ne.id},onSelect:()=>{o(`/projects/${vs(ne.name)}-${ne.id}`)},children:(K,H)=>k(Su,{project:ne,get isSelected(){return s()?.id===K.id},checklist:K,onDelete:()=>e.onDeleteChecklist(ne.id,H.id,K.id)})})})}})),y(x,k(_e,{get when(){return n()?.length>0},get fallback(){return F_()},get children(){var ne=N_();return y(ne,k(Ee,{get each(){return n()},children:K=>k(Su,{project:null,checklist:K,onDelete:()=>e.onDeleteChecklist(null,K.id)})})),ne}})),En(A,"click",e.onExportCSV,!0),En(T,"change",e.onImportCSV),g.$$click=l,M.addEventListener("change",c),En(X,"click",e.onDeleteAll,!0),ge(ne=>{var K=`
        transition-all duration-200 ease-in-out
        bg-white border-r border-gray-200 h-screen overflow-x-hidden
        ${e.open?"w-64":"w-0"}
        md:relative
        ${e.open?"":"md:w-0"}
        fixed top-0 left-0 z-30 md:static md:z-auto
        ${e.open?"translate-x-0":"-translate-x-full md:translate-x-0"}
      `,H=`
          flex flex-col h-full
          transition-opacity duration-100
          ${e.open?"duration-500 opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}
        `;return K!==ne.e&&ft(u,ne.e=K),H!==ne.t&&ft(d,ne.t=H),ne},{e:void 0,t:void 0}),u})()}function Su(e){const t=tn();function n(){const r=vs(e.checklist.name);if(!e.project){t(`/checklist/${r}-${e.checklist.id}`);return}const s=vs(e.project.name),i=(e.project.reviews||[]).find(a=>(a.checklists||[]).some(l=>l.id===e.checklist.id));if(!i){console.error("Review not found for checklist",e.checklist);return}const o=vs(i.name);t(`/projects/${s}-${e.project.id}/reviews/${o}-${i.id}/checklists/${r}-${e.checklist.id}`)}return(()=>{var r=V_(),s=r.firstChild,i=s.firstChild,o=i.nextSibling,a=o.firstChild,l=a.firstChild,c=l.nextSibling,u=a.nextSibling,d=s.nextSibling;return s.$$click=()=>n(),y(l,()=>e.checklist.name),y(c,k(_e,{get when(){return e.checklist},fallback:"Unknown",children:()=>{const f=Sc(e.checklist);return f.length+(e.checklist.name?.length||0)<30?f:U_()}})),y(u,()=>new Date(e.checklist.createdAt).toLocaleDateString()),d.$$click=f=>{f.stopPropagation(),e.onDelete(null,e.checklist.id)},ge(f=>{var m=`
            flex items-center group rounded transition-colors
            ${e.isSelected?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}
          `,w=`
                    text-3xs font-medium px-1.5 py-0.5 rounded
                    ${(()=>{const x=Sc(e.checklist);return x==="High"?"bg-green-100 text-green-800":x==="Moderate"?"bg-yellow-100 text-yellow-800":x==="Low"?"bg-orange-100 text-orange-800":x==="Critically Low"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"})()}
                  `,v=`p-1.5 mr-1 rounded transition-colors text-gray-400 hover:text-red-600 hover:bg-red-50
                  ${e.isSelected?"opacity-0 group-hover:opacity-100":""}
                `;return m!==f.e&&ft(r,f.e=m),w!==f.t&&ft(c,f.t=w),v!==f.a&&ft(d,f.a=v),f},{e:void 0,t:void 0,a:void 0}),r})()}tt(["click"]);var H_=I('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"><div class="bg-white rounded-xl shadow-2xl max-w-sm w-full p-6 mx-2 animate-fade-in"><div class=mb-4><h2 class="text-lg font-semibold text-gray-900"></h2></div><div class="flex justify-end gap-2 mt-6"><button class="px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors"autofocus>Cancel</button><button class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors">'),B_=I('<p class="mt-2 text-gray-600">');function Cu(e){return k(_e,{get when(){return e.open},get children(){return k(Qu,{get children(){var t=H_(),n=t.firstChild,r=n.firstChild,s=r.firstChild,i=r.nextSibling,o=i.firstChild,a=o.nextSibling;return y(s,()=>e.title||"Are you sure?"),y(r,(()=>{var l=et(()=>!!e.description);return()=>l()&&(()=>{var c=B_();return y(c,()=>e.description),c})()})(),null),En(o,"click",e.onCancel,!0),En(a,"click",e.onConfirm,!0),y(a,()=>e.confirmText||"Delete"),t}})}})}tt(["click"]);var z_=I('<div><div class="w-full h-full overflow-auto"></div><div role=separator tabindex=0 style=touch-action:none>');function W_(e){const t=e.direction||"horizontal",n=t==="horizontal"?"right":"bottom",r=e.position||n,s=e.min??200,i=e.max??800,o=e.initial??400,[a,l]=Q(o);let c=!1,u=0,d=0,f=null;const m=E=>{c=!0,f=E.pointerId,u=t==="horizontal"?E.clientX:E.clientY,d=a(),document.body.style.userSelect="none",E.target.setPointerCapture(f),window.addEventListener("pointermove",w),window.addEventListener("pointerup",v)},w=E=>{if(!c)return;let _=t==="horizontal"?E.clientX-u:E.clientY-u;(r==="left"||r==="top")&&(_=-_);let A=d+_;A=Math.max(s,Math.min(i,A)),l(A)},v=E=>{if(c=!1,document.body.style.userSelect="",E.target.releasePointerCapture&&f!==null)try{E.target.releasePointerCapture(f)}catch{}window.removeEventListener("pointermove",w),window.removeEventListener("pointerup",v),f=null};let x="";return t==="horizontal"?x=r==="right"?"top-0 right-0 h-full w-2 cursor-col-resize":"top-0 left-0 h-full w-2 cursor-col-resize":x=r==="bottom"?"left-0 bottom-0 w-full h-2 cursor-row-resize":"left-0 top-0 w-full h-2 cursor-row-resize",(()=>{var E=z_(),_=E.firstChild,A=_.nextSibling;return ft(E,`relative ${t==="horizontal"?"h-full":"w-full"}`),y(_,()=>e.children),A.$$pointerdown=m,ft(A,`absolute ${x} bg-gray-200 hover:bg-gray-300 transition-colors z-10`),kt(A,"aria-orientation",t),ge(j=>wo(E,t==="horizontal"?`width: ${a()}px; min-width:0;`:`height: ${a()}px; min-height:0;`,j)),E})()}tt(["pointerdown"]);var Y_=I('<button class="ml-[-6px] bg-white/80 text-blue-700 p-1.5 rounded-full shadow hover:bg-white transition-all duration-200 border border-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-400"aria-label="Toggle sidebar open or closed">'),Eu=I("<span class=font-medium>Hello, "),Au=I('<button class="hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium">Sign Out'),J_=I('<nav class="flex items-center justify-between bg-gradient-to-r from-blue-700 to-blue-500 text-white px-4 py-2 shadow-lg"><div class="flex items-center space-x-3"></div><div class="flex space-x-4 items-center text-2xs sm:text-xs">'),Q_=I('<svg fill=none stroke=currentColor class="w-4 h-4"viewBox="0 0 20 20"><path d="M3.5 3C3.77614 3 4 3.22386 4 3.5V16.5L3.99023 16.6006C3.94371 16.8286 3.74171 17 3.5 17C3.25829 17 3.05629 16.8286 3.00977 16.6006L3 16.5V3.5C3 3.22386 3.22386 3 3.5 3ZM11.2471 5.06836C11.4476 4.95058 11.7104 4.98547 11.8721 5.16504C12.0338 5.34471 12.0407 5.60979 11.9023 5.79688L11.835 5.87207L7.80371 9.5H16.5C16.7761 9.5 17 9.72386 17 10C17 10.2761 16.7761 10.5 16.5 10.5H7.80371L11.835 14.1279C12.0402 14.3127 12.0568 14.6297 11.8721 14.835C11.6873 15.0402 11.3703 15.0568 11.165 14.8721L6.16504 10.3721L6.09473 10.2939C6.03333 10.2093 6 10.1063 6 10C6 9.85828 6.05972 9.72275 6.16504 9.62793L11.165 5.12793L11.2471 5.06836Z">');function Ru(e){return e.endsWith("/")?e.slice(0,-1):e}function K_(e){const{user:t,signout:n,authLoading:r}=On(),s=Xa(),i=()=>Ru(s.pathname)===Ru(ch),o=localStorage.getItem("userName"),a=!!o;return Ie(()=>{t()?localStorage.setItem("userName",t().name):localStorage.removeItem("userName")}),(()=>{var l=J_(),c=l.firstChild,u=c.nextSibling;return y(c,k(_e,{get when(){return!i()},get children(){var d=Y_();return En(d,"click",e.toggleSidebar,!0),y(d,k(_e,{get when(){return!e.open},get fallback(){return Q_()},get children(){return k(Fm,{})}})),d}}),null),y(c,k(kr,{href:"/",class:"font-extrabold text-base sm:text-lg tracking-tight drop-shadow",children:"CoRATES"}),null),y(u,k(kr,{href:"/dashboard",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Dashboard"}),null),y(u,k(_e,{get when(){return t()},get fallback(){return et(()=>!!(a&&r()))()?[(()=>{var d=Eu();return d.firstChild,y(d,o,null),d})(),Au()]:[k(kr,{href:"/signin",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Sign In"}),k(kr,{href:"/signup",class:"hover:bg-blue-600 px-2 py-1.5 rounded transition font-medium",children:"Sign Up"})]},get children(){return[(()=>{var d=Eu();return d.firstChild,y(d,()=>t().name,null),d})(),(()=>{var d=Au();return d.$$click=async()=>{await n()},d})()]}}),null),l})()}tt(["click"]);async function G_(e,t){const n=e.getReader();let r;for(;!(r=await n.read()).done;)t(r.value)}function X_(e){let t,n,r,s=!1;return function(o){t===void 0?(t=o,n=0,r=-1):t=e2(t,o);const a=t.length;let l=0;for(;n<a;){s&&(t[n]===10&&(l=++n),s=!1);let c=-1;for(;n<a&&c===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-l);break;case 13:s=!0;case 10:c=n;break}if(c===-1)break;e(t.subarray(l,c),r),l=n,r=-1}l===a?t=void 0:l!==0&&(t=t.subarray(l),n-=l)}}function Z_(e,t,n){let r=Tu();const s=new TextDecoder;return function(o,a){if(o.length===0)n?.(r),r=Tu();else if(a>0){const l=s.decode(o.subarray(0,a)),c=a+(o[a+1]===32?2:1),u=s.decode(o.subarray(c));switch(l){case"data":r.data=r.data?r.data+`
`+u:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":const d=parseInt(u,10);isNaN(d)||t(r.retry=d);break}}}}function e2(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Tu(){return{data:"",event:"",id:"",retry:void 0}}var t2=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Va="text/event-stream",n2=1e3,Pu="last-event-id";function r2(e,t){var{signal:n,headers:r,onopen:s,onmessage:i,onclose:o,onerror:a,openWhenHidden:l,fetch:c}=t,u=t2(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((d,f)=>{const m=Object.assign({},r);m.accept||(m.accept=Va);let w;function v(){w.abort(),document.hidden||U()}l||document.addEventListener("visibilitychange",v);let x=n2,E=0;function _(){document.removeEventListener("visibilitychange",v),window.clearTimeout(E),w.abort()}n?.addEventListener("abort",()=>{_(),d()});const A=c??window.fetch,j=s??s2;async function U(){var q;w=new AbortController;try{const T=await A(e,Object.assign(Object.assign({},u),{headers:m,signal:w.signal}));await j(T),await G_(T.body,X_(Z_(g=>{g?m[Pu]=g:delete m[Pu]},g=>{x=g},i))),o?.(),_(),d()}catch(T){if(!w.signal.aborted)try{const g=(q=a?.(T))!==null&&q!==void 0?q:x;window.clearTimeout(E),E=window.setTimeout(U,g)}catch(g){_(),f(g)}}}U()})}function s2(e){const t=e.headers.get("content-type");if(!t?.startsWith(Va))throw new Error(`Expected content-type to be ${Va}, Actual: ${t}`)}var i2=Object.defineProperty,o2=Object.defineProperties,a2=Object.getOwnPropertyDescriptors,ao=Object.getOwnPropertySymbols,Lf=Object.prototype.hasOwnProperty,Mf=Object.prototype.propertyIsEnumerable,Of=e=>{throw TypeError(e)},ju=(e,t,n)=>t in e?i2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mt=(e,t)=>{for(var n in t||(t={}))Lf.call(t,n)&&ju(e,n,t[n]);if(ao)for(var n of ao(t))Mf.call(t,n)&&ju(e,n,t[n]);return e},yl=(e,t)=>o2(e,a2(t)),l2=(e,t)=>{var n={};for(var r in e)Lf.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ao)for(var r of ao(e))t.indexOf(r)<0&&Mf.call(e,r)&&(n[r]=e[r]);return n},bl=(e,t,n)=>t.has(e)||Of("Cannot "+n),V=(e,t,n)=>(bl(e,t,"read from private field"),n?n.call(e):t.get(e)),ye=(e,t,n)=>t.has(e)?Of("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ie=(e,t,n,r)=>(bl(e,t,"write to private field"),t.set(e,n),n),me=(e,t,n)=>(bl(e,t,"access private method"),n),Lu=(e,t,n,r)=>({set _(s){ie(e,t,s)},get _(){return V(e,t,r)}}),Le=(e,t,n)=>new Promise((r,s)=>{var i=l=>{try{a(n.next(l))}catch(c){s(c)}},o=l=>{try{a(n.throw(l))}catch(c){s(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(i,o);a((n=n.apply(e,t)).next())}),ur=class Nf extends Error{constructor(t,n,r,s,i,o){super(o||`HTTP Error ${t} at ${i}: ${n??JSON.stringify(r)}`),this.url=i,this.name="FetchError",this.status=t,this.text=n,this.json=r,this.headers=s}static fromResponse(t,n){return Le(this,null,function*(){const r=t.status,s=Object.fromEntries([...t.headers.entries()]);let i,o;const a=t.headers.get("content-type");return t.bodyUsed||(a&&a.includes("application/json")?o=yield t.json():i=yield t.text()),new Nf(r,i,o,s,n)})}},lo=class extends Error{constructor(){super("Fetch with backoff aborted"),this.name="FetchBackoffAbortError"}},c2=class extends Error{constructor(){super("Invalid shape options: missing required url parameter"),this.name="MissingShapeUrlError"}},u2=class extends Error{constructor(){super("Invalid signal option. It must be an instance of AbortSignal."),this.name="InvalidSignalError"}},d2=class extends Error{constructor(){super("shapeHandle is required if this isn't an initial fetch (i.e. offset > -1)"),this.name="MissingShapeHandleError"}},f2=class extends Error{constructor(e){super(`Cannot use reserved Electric parameter names in custom params: ${e.join(", ")}`),this.name="ReservedParamError"}},h2=class extends Error{constructor(e){super(`Column "${e??"unknown"}" does not allow NULL values`),this.name="ParserNullValueError"}},g2=class extends Error{constructor(e,t){let n=`The response for the shape request to ${e} didn't include the following required headers:
`;t.forEach(r=>{n+=`- ${r}
`}),n+=`
This is often due to a proxy not setting CORS correctly so that all Electric headers can be read by the client.`,n+=`
For more information visit the troubleshooting guide: /docs/guides/troubleshooting/missing-headers`,super(n)}},bi=e=>Number(e),p2=e=>e==="true"||e==="t",m2=e=>BigInt(e),Mu=e=>JSON.parse(e),w2=e=>e,v2={int2:bi,int4:bi,int8:m2,bool:p2,float4:bi,float8:bi,json:Mu,jsonb:Mu};function y2(e,t){let n=0,r=null,s="",i=!1,o=0,a;function l(u,d,f){let m=u.slice(d,f);return m=m==="NULL"?null:m,t?t(m):m}function c(u){const d=[];for(;n<u.length;n++){if(r=u[n],i)r==="\\"?s+=u[++n]:r==='"'?(d.push(t?t(s):s),s="",i=u[n+1]==='"',o=n+2):s+=r;else if(r==='"')i=!0;else if(r==="{")o=++n,d.push(c(u));else if(r==="}"){i=!1,o<n&&d.push(l(u,o,n)),o=n+1;break}else r===","&&a!=="}"&&a!=='"'&&(d.push(l(u,o,n)),o=n+1);a=r}return o<n&&d.push(d.push(l(u,o,n+1))),d}return c(e)[0]}var b2=class{constructor(e,t){this.parser=Mt(Mt({},v2),e),this.transformer=t}parse(e,t){return JSON.parse(e,(n,r)=>{if((n==="value"||n==="old_value")&&typeof r=="object"&&r!==null){const s=r;Object.keys(s).forEach(i=>{s[i]=this.parseRow(i,s[i],t)}),this.transformer&&(r=this.transformer(r))}return r})}parseRow(e,t,n){var r;const s=n[e];if(!s)return t;const i=s,{type:o,dims:a}=i,l=l2(i,["type","dims"]),c=(r=this.parser[o])!=null?r:w2,u=Ou(c,s,e);return a&&a>0?Ou((f,m)=>y2(f,u),s,e)(t):u(t,l)}};function Ou(e,t,n){var r;const s=!((r=t.not_null)!=null&&r);return i=>{if(i===null){if(!s)throw new h2(n??"unknown");return null}return e(i,t)}}function xl(e){return"key"in e}function Df(e){return!xl(e)}function qf(e){return Df(e)&&e.headers.control==="up-to-date"}function x2(e){const t=e.headers.global_last_seen_lsn;if(t)return`${t}_0`}function _2(e,t){const n=BigInt(e),r=BigInt(t.xmin),s=BigInt(t.xmax),i=t.xip_list.map(BigInt);return n<r||n<s&&!i.includes(n)}var k2="electric-cursor",_l="electric-handle",Ff="electric-offset",$2="electric-schema",S2="electric-up-to-date",C2="columns",kl="cursor",Vf="expired_handle",To="handle",ir="live",Po="offset",E2="table",A2="where",R2="replica",T2="params",P2="experimental_live_sse",Uf="force-disconnect-and-refresh",If="pause-stream",Hf="log",$l="subset__where",Sl="subset__limit",Cl="subset__offset",El="subset__order_by",Al="subset__params",j2=[ir,To,Po,kl,Vf,Hf,$l,Sl,Cl,El,Al],L2=[429],Bf={initialDelay:100,maxDelay:1e4,multiplier:1.3};function M2(e,t=Bf){const{initialDelay:n,maxDelay:r,multiplier:s,debug:i=!1,onFailedAttempt:o}=t;return(...a)=>Le(this,null,function*(){var l;const c=a[0],u=a[1];let d=n,f=0;for(;;)try{const m=yield e(...a);if(m.ok)return m;throw yield ur.fromResponse(m,c.toString())}catch(m){if(o?.(),(l=u?.signal)!=null&&l.aborted)throw new lo;if(m instanceof ur&&!L2.includes(m.status)&&m.status>=400&&m.status<500)throw m;yield new Promise(w=>setTimeout(w,d)),d=Math.min(d*s,r),i&&(f++,console.log(`Retry attempt #${f} after ${d}ms`))}})}var O2=[201,204,205];function N2(e){return(...t)=>Le(this,null,function*(){const n=t[0],r=yield e(...t);try{if(r.status<200||O2.includes(r.status))return r;const s=yield r.text();return new Response(s,r)}catch(s){throw new ur(r.status,void 0,void 0,Object.fromEntries([...r.headers.entries()]),n.toString(),s instanceof Error?s.message:typeof s=="string"?s:"failed to read body")}})}var D2={maxChunksToPrefetch:2};function q2(e,t=D2){const{maxChunksToPrefetch:n}=t;let r;return(...i)=>Le(this,null,function*(){const o=i[0].toString(),a=r?.consume(...i);if(a)return a;r?.abort();const l=yield e(...i),c=Rl(o,l);return c&&(r=new H2({fetchClient:e,maxPrefetchedRequests:n,url:c,requestInit:i[1]})),l})}var F2=["electric-offset","electric-handle"],V2=["electric-cursor"],U2=["electric-schema"];function I2(e){return(...t)=>Le(this,null,function*(){const n=yield e(...t);if(n.ok){const r=n.headers,s=[],i=u=>s.push(...u.filter(d=>!r.has(d))),a=t[0].toString(),l=new URL(a);if([$l,Al,Sl,Cl,El].some(u=>l.searchParams.has(u)))return n;if(i(F2),l.searchParams.get(ir)==="true"&&i(V2),(!l.searchParams.has(ir)||l.searchParams.get(ir)==="false")&&i(U2),s.length>0)throw new g2(a,s)}return n})}var co,uo,kn,_r,$n,gs,fo,H2=class{constructor(e){ye(this,gs),ye(this,co),ye(this,uo),ye(this,kn,new Map),ye(this,_r),ye(this,$n);var t;ie(this,co,(t=e.fetchClient)!=null?t:(...n)=>fetch(...n)),ie(this,uo,e.maxPrefetchedRequests),ie(this,_r,e.url.toString()),ie(this,$n,V(this,_r)),me(this,gs,fo).call(this,e.url,e.requestInit)}abort(){V(this,kn).forEach(([e,t])=>t.abort())}consume(...e){var t;const n=e[0].toString(),r=(t=V(this,kn).get(n))==null?void 0:t[0];if(!(!r||n!==V(this,_r)))return V(this,kn).delete(n),r.then(s=>{const i=Rl(n,s);ie(this,_r,i),V(this,$n)&&!V(this,kn).has(V(this,$n))&&me(this,gs,fo).call(this,V(this,$n),e[1])}).catch(()=>{}),r}};co=new WeakMap;uo=new WeakMap;kn=new WeakMap;_r=new WeakMap;$n=new WeakMap;gs=new WeakSet;fo=function(...e){var t,n;const r=e[0].toString();if(V(this,kn).size>=V(this,uo))return;const s=new AbortController;try{const{signal:i,cleanup:o}=B2(s,(t=e[1])==null?void 0:t.signal),a=V(this,co).call(this,r,yl(Mt({},(n=e[1])!=null?n:{}),{signal:i}));V(this,kn).set(r,[a,s]),a.then(l=>{if(!l.ok||s.signal.aborted)return;const c=Rl(r,l);if(!c||c===r){ie(this,$n,void 0);return}return ie(this,$n,c),me(this,gs,fo).call(this,c,e[1])}).catch(()=>{}).finally(o)}catch{}};function Rl(e,t){const n=t.headers.get(_l),r=t.headers.get(Ff),s=t.headers.has(S2);if(!n||!r||s)return;const i=new URL(e);if(!i.searchParams.has(ir))return i.searchParams.set(To,n),i.searchParams.set(Po,r),i.searchParams.sort(),i.toString()}function B2(e,t){let n=z2;if(t)if(t.aborted)e.abort();else{const r=()=>e.abort();t.addEventListener("abort",r,{once:!0,signal:e.signal}),n=()=>t.removeEventListener("abort",r)}return{signal:e.signal,cleanup:n}}function z2(){}var W2=class{constructor(){this.data={},this.max=250,this.storageKey="electric_expired_shapes",this.load()}getExpiredHandle(e){const t=this.data[e];return t?(t.lastUsed=Date.now(),this.save(),t.expiredHandle):null}markExpired(e,t){this.data[e]={expiredHandle:t,lastUsed:Date.now()};const n=Object.keys(this.data);if(n.length>this.max){const r=n.reduce((s,i)=>this.data[i].lastUsed<this.data[s].lastUsed?i:s);delete this.data[r]}this.save()}save(){if(!(typeof localStorage>"u"))try{localStorage.setItem(this.storageKey,JSON.stringify(this.data))}catch{}}load(){if(!(typeof localStorage>"u"))try{const e=localStorage.getItem(this.storageKey);e&&(this.data=JSON.parse(e))}catch{this.data={}}}clear(){this.data={},this.save()}},zf=new W2,Y2=class{constructor(){this.activeSnapshots=new Map,this.xmaxSnapshots=new Map,this.snapshotsByDatabaseLsn=new Map}addSnapshot(e,t){var n,r,s,i;this.activeSnapshots.set(e.snapshot_mark,{xmin:BigInt(e.xmin),xmax:BigInt(e.xmax),xip_list:e.xip_list.map(BigInt),keys:t});const o=(r=(n=this.xmaxSnapshots.get(BigInt(e.xmax)))==null?void 0:n.add(e.snapshot_mark))!=null?r:new Set([e.snapshot_mark]);this.xmaxSnapshots.set(BigInt(e.xmax),o);const a=(i=(s=this.snapshotsByDatabaseLsn.get(BigInt(e.database_lsn)))==null?void 0:s.add(e.snapshot_mark))!=null?i:new Set([e.snapshot_mark]);this.snapshotsByDatabaseLsn.set(BigInt(e.database_lsn),a)}removeSnapshot(e){this.activeSnapshots.delete(e)}shouldRejectMessage(e){const t=e.headers.txids||[];if(t.length===0)return!1;const n=Math.max(...t);for(const[r,s]of this.xmaxSnapshots.entries())if(n>=r)for(const i of s)this.removeSnapshot(i);return[...this.activeSnapshots.values()].some(r=>r.keys.has(e.key)&&_2(n,r))}lastSeenUpdate(e){for(const[t,n]of this.snapshotsByDatabaseLsn.entries())if(t<=e)for(const r of n)this.removeSnapshot(r)}},J2=new Set([kl,To,ir,Po]);function Wf(e){return Le(this,null,function*(){return typeof e=="function"?e():e})}function Q2(e){return Le(this,null,function*(){const t=Object.entries(e),n=yield Promise.all(t.map(r=>Le(this,[r],function*([s,i]){if(i===void 0)return[s,void 0];const o=yield Wf(i);return[s,Array.isArray(o)?o.join(","):o]})));return Object.fromEntries(n.filter(([r,s])=>s!==void 0))})}function K2(e){return Le(this,null,function*(){if(!e)return{};const t=Object.entries(e),n=yield Promise.all(t.map(r=>Le(this,[r],function*([s,i]){return[s,yield Wf(i)]})));return Object.fromEntries(n)})}function Yf(e){const t=new URL(e.origin+e.pathname);for(const[n,r]of e.searchParams)j2.includes(n)||t.searchParams.set(n,r);return t.searchParams.sort(),t.toString()}var ho,Ts,ps,qr,Zn,dn,Ut,An,Fr,er,Kt,Vr,Rn,Ht,Wn,Pn,Ps,Zt,Tr,bn,js,Ls,ms,go,Yn,xn,Ms,Re,Os,as,Tl,Jf,Pl,jo,Qf,Kf,Gf,jl,Ll,Xf,Zf,Ml,eh,th,Ol,nh,rh=class{constructor(e){ye(this,Re),ye(this,ho,null),ye(this,Ts),ye(this,ps),ye(this,qr),ye(this,Zn,new Map),ye(this,dn,!1),ye(this,Ut,"active"),ye(this,An),ye(this,Fr),ye(this,er),ye(this,Kt,!1),ye(this,Vr,!0),ye(this,Rn,!1),ye(this,Ht),ye(this,Wn),ye(this,Pn),ye(this,Ps),ye(this,Zt),ye(this,Tr,!1),ye(this,bn),ye(this,js),ye(this,Ls),ye(this,ms,Promise.resolve([])),ye(this,go,new Y2),ye(this,Yn,0),ye(this,xn),ye(this,Ms);var t,n,r,s;this.options=Mt({subscribe:!0},e),G2(this.options),ie(this,An,(t=this.options.offset)!=null?t:"-1"),ie(this,Fr,""),ie(this,Ht,this.options.handle),ie(this,qr,new b2(e.parser,e.transformer)),ie(this,Ps,this.options.onError),ie(this,Wn,(n=this.options.log)!=null?n:"full");const i=(r=e.fetchClient)!=null?r:(...l)=>fetch(...l),o=yl(Mt({},(s=e.backoffOptions)!=null?s:Bf),{onFailedAttempt:()=>{var l,c;ie(this,Rn,!1),(c=(l=e.backoffOptions)==null?void 0:l.onFailedAttempt)==null||c.call(l)}}),a=M2(i,o);ie(this,ps,I2(q2(a))),ie(this,Ts,N2(V(this,ps))),me(this,Re,th).call(this)}get shapeHandle(){return V(this,Ht)}get error(){return V(this,ho)}get isUpToDate(){return V(this,Kt)}get lastOffset(){return V(this,An)}get mode(){return V(this,Wn)}subscribe(e,t=()=>{}){const n=Math.random();return V(this,Zn).set(n,[e,t]),V(this,dn)||me(this,Re,Os).call(this),()=>{V(this,Zn).delete(n)}}unsubscribeAll(){V(this,Zn).clear()}lastSyncedAt(){return V(this,er)}lastSynced(){return V(this,er)===void 0?1/0:Date.now()-V(this,er)}isConnected(){return V(this,Rn)}isLoading(){return!V(this,Kt)}hasStarted(){return V(this,dn)}isPaused(){return V(this,Ut)==="paused"}forceDisconnectAndRefresh(){return Le(this,null,function*(){var e,t;ie(this,Tr,!0),V(this,Kt)&&!((e=V(this,Zt))!=null&&e.signal.aborted)&&((t=V(this,Zt))==null||t.abort(Uf)),yield me(this,Re,Xf).call(this),ie(this,Tr,!1)})}requestSnapshot(e){return Le(this,null,function*(){if(V(this,Wn)==="full")throw new Error(`Snapshot requests are not supported in ${V(this,Wn)} mode, as the consumer is guaranteed to observe all data`);V(this,dn)||(yield me(this,Re,Os).call(this)),yield me(this,Re,Zf).call(this),Lu(this,Yn)._++;try{V(this,Yn)===1&&me(this,Re,jl).call(this);const{fetchUrl:t,requestHeaders:n}=yield me(this,Re,Tl).call(this,this.options.url,!0,e),{metadata:r,data:s}=yield me(this,Re,nh).call(this,t,n),i=s.concat([{headers:Mt({control:"snapshot-end"},r)}]);return V(this,go).addSnapshot(r,new Set(s.map(o=>o.key))),me(this,Re,jo).call(this,i,!1),{metadata:r,data:s}}finally{Lu(this,Yn)._--,V(this,Yn)===0&&me(this,Re,Ll).call(this)}})}};ho=new WeakMap;Ts=new WeakMap;ps=new WeakMap;qr=new WeakMap;Zn=new WeakMap;dn=new WeakMap;Ut=new WeakMap;An=new WeakMap;Fr=new WeakMap;er=new WeakMap;Kt=new WeakMap;Vr=new WeakMap;Rn=new WeakMap;Ht=new WeakMap;Wn=new WeakMap;Pn=new WeakMap;Ps=new WeakMap;Zt=new WeakMap;Tr=new WeakMap;bn=new WeakMap;js=new WeakMap;Ls=new WeakMap;ms=new WeakMap;go=new WeakMap;Yn=new WeakMap;xn=new WeakMap;Ms=new WeakMap;Re=new WeakSet;Os=function(){return Le(this,null,function*(){var e;ie(this,dn,!0);try{yield me(this,Re,as).call(this)}catch(t){if(ie(this,ho,t),V(this,Ps)){const n=yield V(this,Ps).call(this,t);typeof n=="object"&&(me(this,Re,Ol).call(this),"params"in n&&(this.options.params=n.params),"headers"in n&&(this.options.headers=n.headers),ie(this,dn,!1),me(this,Re,Os).call(this));return}throw t}finally{ie(this,Rn,!1),(e=V(this,Ls))==null||e.call(this)}})};as=function(){return Le(this,null,function*(){var e,t;if(V(this,Ut)==="pause-requested"){ie(this,Ut,"paused");return}if(!this.options.subscribe&&((e=this.options.signal)!=null&&e.aborted||V(this,Kt)))return;const n=V(this,Ut)==="paused";ie(this,Ut,"active");const{url:r,signal:s}=this.options,{fetchUrl:i,requestHeaders:o}=yield me(this,Re,Tl).call(this,r,n),a=yield me(this,Re,Jf).call(this,s),l=V(this,Zt);try{yield me(this,Re,Qf).call(this,{fetchUrl:i,requestAbortController:l,headers:o,resumingFromPause:n})}catch(c){if((c instanceof ur||c instanceof lo)&&l.signal.aborted&&l.signal.reason===Uf)return me(this,Re,as).call(this);if(c instanceof lo){l.signal.aborted&&l.signal.reason===If&&ie(this,Ut,"paused");return}if(!(c instanceof ur))throw c;if(c.status==409){if(V(this,Ht)){const d=Yf(i);zf.markExpired(d,V(this,Ht))}const u=c.headers[_l]||`${V(this,Ht)}-next`;return me(this,Re,Ol).call(this,u),yield me(this,Re,Ml).call(this,c.json),me(this,Re,as).call(this)}else throw me(this,Re,eh).call(this,c),c}finally{a&&s&&s.removeEventListener("abort",a),ie(this,Zt,void 0)}return(t=V(this,js))==null||t.call(this),me(this,Re,as).call(this)})};Tl=function(e,t,n){return Le(this,null,function*(){const[r,s]=yield Promise.all([K2(this.options.headers),this.options.params?Q2(X2(this.options.params)):void 0]);s&&sh(s);const i=new URL(e);if(s){s.table&&qt(i,E2,s.table),s.where&&qt(i,A2,s.where),s.columns&&qt(i,C2,s.columns),s.replica&&qt(i,R2,s.replica),s.params&&qt(i,T2,s.params);const l=Mt({},s);delete l.table,delete l.where,delete l.columns,delete l.replica,delete l.params;for(const[c,u]of Object.entries(l))qt(i,c,u)}n&&(n.where&&qt(i,$l,n.where),n.params&&qt(i,Al,n.params),n.limit&&qt(i,Sl,n.limit),n.offset&&qt(i,Cl,n.offset),n.orderBy&&qt(i,El,n.orderBy)),i.searchParams.set(Po,V(this,An)),i.searchParams.set(Hf,V(this,Wn)),V(this,Kt)&&(!V(this,Tr)&&!t&&i.searchParams.set(ir,"true"),i.searchParams.set(kl,V(this,Fr))),V(this,Ht)&&i.searchParams.set(To,V(this,Ht));const o=Yf(i),a=zf.getExpiredHandle(o);return a&&i.searchParams.set(Vf,a),i.searchParams.sort(),{fetchUrl:i,requestHeaders:r}})};Jf=function(e){return Le(this,null,function*(){var t;if(ie(this,Zt,new AbortController),e){const n=()=>{var r;(r=V(this,Zt))==null||r.abort(e.reason)};return e.addEventListener("abort",n,{once:!0}),e.aborted&&((t=V(this,Zt))==null||t.abort(e.reason)),n}})};Pl=function(e){return Le(this,null,function*(){var t;const{headers:n,status:r}=e,s=n.get(_l);s&&ie(this,Ht,s);const i=n.get(Ff);i&&ie(this,An,i);const o=n.get(k2);o&&ie(this,Fr,o);const a=()=>{const l=n.get($2);return l?JSON.parse(l):{}};ie(this,Pn,(t=V(this,Pn))!=null?t:a()),r===204&&ie(this,er,Date.now())})};jo=function(e,t=!1){return Le(this,null,function*(){var n;if(e.length>0){ie(this,Vr,!0);const r=e[e.length-1];if(qf(r)){if(t){const i=x2(r);i&&ie(this,An,i)}ie(this,er,Date.now()),ie(this,Kt,!0),ie(this,Vr,!1),(n=V(this,Ms))==null||n.call(this)}const s=e.filter(i=>xl(i)?!V(this,go).shouldRejectMessage(i):!0);yield me(this,Re,Ml).call(this,s)}})};Qf=function(e){return Le(this,null,function*(){return V(this,Kt)&&this.options.experimentalLiveSse&&!V(this,Tr)&&!e.resumingFromPause?(e.fetchUrl.searchParams.set(P2,"true"),me(this,Re,Gf).call(this,e)):me(this,Re,Kf).call(this,e)})};Kf=function(e){return Le(this,null,function*(){const{fetchUrl:t,requestAbortController:n,headers:r}=e,s=yield V(this,Ts).call(this,t.toString(),{signal:n.signal,headers:r});ie(this,Rn,!0),yield me(this,Re,Pl).call(this,s);const i=V(this,Pn),a=(yield s.text())||"[]",l=V(this,qr).parse(a,i);yield me(this,Re,jo).call(this,l)})};Gf=function(e){return Le(this,null,function*(){const{fetchUrl:t,requestAbortController:n,headers:r}=e,s=V(this,ps);try{let i=[];yield r2(t.toString(),{headers:r,fetch:s,onopen:o=>Le(this,null,function*(){ie(this,Rn,!0),yield me(this,Re,Pl).call(this,o)}),onmessage:o=>{if(o.data){const a=V(this,Pn),l=V(this,qr).parse(o.data,a);i.push(l),qf(l)&&(me(this,Re,jo).call(this,i,!0),i=[])}},onerror:o=>{throw o},signal:n.signal})}catch(i){throw n.signal.aborted?new lo:i}})};jl=function(){var e;V(this,dn)&&V(this,Ut)==="active"&&(ie(this,Ut,"pause-requested"),(e=V(this,Zt))==null||e.abort(If))};Ll=function(){V(this,dn)&&V(this,Ut)==="paused"&&me(this,Re,Os).call(this)};Xf=function(){return Le(this,null,function*(){return V(this,bn)?V(this,bn):(ie(this,bn,new Promise((e,t)=>{ie(this,js,e),ie(this,Ls,t)})),V(this,bn).finally(()=>{ie(this,bn,void 0),ie(this,js,void 0),ie(this,Ls,void 0)}),V(this,bn))})};Zf=function(){return Le(this,null,function*(){if(V(this,Vr))return V(this,xn)?V(this,xn):(ie(this,xn,new Promise(e=>{ie(this,Ms,e)})),V(this,xn).finally(()=>{ie(this,xn,void 0),ie(this,Ms,void 0)}),V(this,xn))})};Ml=function(e){return Le(this,null,function*(){return ie(this,ms,V(this,ms).then(()=>Promise.all(Array.from(V(this,Zn).values()).map(t=>Le(this,[t],function*([n,r]){try{yield n(e)}catch(s){queueMicrotask(()=>{throw s})}}))))),V(this,ms)})};eh=function(e){V(this,Zn).forEach(([t,n])=>{n?.(e)})};th=function(){if(typeof document=="object"&&typeof document.hidden=="boolean"&&typeof document.addEventListener=="function"){const e=()=>{document.hidden?me(this,Re,jl).call(this):me(this,Re,Ll).call(this)};document.addEventListener("visibilitychange",e)}};Ol=function(e){ie(this,An,"-1"),ie(this,Fr,""),ie(this,Ht,e),ie(this,Kt,!1),ie(this,Vr,!0),ie(this,Rn,!1),ie(this,Pn,void 0),ie(this,Yn,0)};nh=function(e,t){return Le(this,null,function*(){const n=yield V(this,Ts).call(this,e.toString(),{headers:t});if(!n.ok)throw new ur(n.status,void 0,void 0,Object.fromEntries([...n.headers.entries()]),e.toString());const{metadata:r,data:s}=yield n.json(),i=V(this,qr).parse(JSON.stringify(s),V(this,Pn));return{metadata:r,data:i}})};rh.Replica={FULL:"full",DEFAULT:"default"};function sh(e){if(!e)return;const t=Object.keys(e).filter(n=>J2.has(n));if(t.length>0)throw new f2(t)}function G2(e){if(!e.url)throw new c2;if(e.signal&&!(e.signal instanceof AbortSignal))throw new u2;if(e.offset!==void 0&&e.offset!=="-1"&&e.offset!=="now"&&!e.handle)throw new d2;sh(e.params)}function qt(e,t,n){if(!(n===void 0||n==null))if(typeof n=="string")e.searchParams.set(t,n);else if(typeof n=="object")for(const[r,s]of Object.entries(n))e.searchParams.set(`${t}[${r}]`,s);else e.searchParams.set(t,n.toString())}function X2(e){return Array.isArray(e.params)?yl(Mt({},e),{params:Object.fromEntries(e.params.map((t,n)=>[n+1,t]))}):e}var Pt,Jn,Qn,po,ws,Ns,tr,Lt,ih,oh,Nl,Pi,ah,Dl,Z2=class{constructor(e){ye(this,Lt),ye(this,Pt,new Map),ye(this,Jn,new Map),ye(this,Qn,new Set),ye(this,po,new Set),ye(this,ws,!1),ye(this,Ns,"syncing"),ye(this,tr,!1),this.stream=e,this.stream.subscribe(me(this,Lt,ih).bind(this),me(this,Lt,ah).bind(this))}get isUpToDate(){return V(this,Ns)==="up-to-date"}get lastOffset(){return this.stream.lastOffset}get handle(){return this.stream.shapeHandle}get rows(){return this.value.then(e=>Array.from(e.values()))}get currentRows(){return Array.from(this.currentValue.values())}get value(){return new Promise((e,t)=>{if(this.stream.isUpToDate)e(this.currentValue);else{const n=this.subscribe(({value:r})=>{n(),V(this,tr)&&t(V(this,tr)),e(r)})}})}get currentValue(){return V(this,Pt)}get error(){return V(this,tr)}lastSyncedAt(){return this.stream.lastSyncedAt()}lastSynced(){return this.stream.lastSynced()}isLoading(){return this.stream.isLoading()}isConnected(){return this.stream.isConnected()}get mode(){return this.stream.mode}requestSnapshot(e){return Le(this,null,function*(){const t=JSON.stringify(e);V(this,po).add(t),yield me(this,Lt,Nl).call(this),yield this.stream.requestSnapshot(e)})}subscribe(e){const t=Math.random();return V(this,Jn).set(t,e),()=>{V(this,Jn).delete(t)}}unsubscribeAll(){V(this,Jn).clear()}get numSubscribers(){return V(this,Jn).size}};Pt=new WeakMap;Jn=new WeakMap;Qn=new WeakMap;po=new WeakMap;ws=new WeakMap;Ns=new WeakMap;tr=new WeakMap;Lt=new WeakSet;ih=function(e){let t=!1;e.forEach(n=>{if(xl(n))if(t=me(this,Lt,Pi).call(this,"syncing"),this.mode==="full")switch(n.headers.operation){case"insert":V(this,Pt).set(n.key,n.value);break;case"update":V(this,Pt).set(n.key,Mt(Mt({},V(this,Pt).get(n.key)),n.value));break;case"delete":V(this,Pt).delete(n.key);break}else switch(n.headers.operation){case"insert":V(this,Qn).add(n.key),V(this,Pt).set(n.key,n.value);break;case"update":V(this,Qn).has(n.key)&&V(this,Pt).set(n.key,Mt(Mt({},V(this,Pt).get(n.key)),n.value));break;case"delete":V(this,Qn).has(n.key)&&(V(this,Pt).delete(n.key),V(this,Qn).delete(n.key));break}if(Df(n))switch(n.headers.control){case"up-to-date":t=me(this,Lt,Pi).call(this,"up-to-date"),V(this,ws)&&(ie(this,ws,!1),me(this,Lt,oh).call(this));break;case"must-refetch":V(this,Pt).clear(),V(this,Qn).clear(),ie(this,tr,!1),t=me(this,Lt,Pi).call(this,"syncing"),ie(this,ws,!0);break}}),t&&me(this,Lt,Dl).call(this)};oh=function(){return Le(this,null,function*(){yield me(this,Lt,Nl).call(this),yield Promise.all(Array.from(V(this,po)).map(e=>Le(this,null,function*(){try{const t=JSON.parse(e);yield this.stream.requestSnapshot(t)}catch{}})))})};Nl=function(){return Le(this,null,function*(){this.stream.isUpToDate||(yield new Promise(e=>{const t=()=>{this.stream.isUpToDate&&(clearInterval(n),r(),e())},n=setInterval(t,10),r=this.stream.subscribe(()=>t(),()=>t());t()}))})};Pi=function(e){const t=V(this,Ns)!==e;return ie(this,Ns,e),t&&e==="up-to-date"};ah=function(e){e instanceof ur&&(ie(this,tr,e),me(this,Lt,Dl).call(this))};Dl=function(){V(this,Jn).forEach(e=>{e({value:this.currentValue,rows:this.currentRows})})};var ls=new Map,cs=new Map;function Ua(e){return typeof e=="function"?Function.prototype.toString.call(e):typeof e!="object"||e===null?e:Array.isArray(e)?e.map(Ua):Object.keys(e).sort().reduce((t,n)=>(t[n]=Ua(e[n]),t),{})}function lh(e){return JSON.stringify(Ua(e))}function ek(e){const t=lh(e);if(ls.has(t)){const r=ls.get(t);if(!r.options.signal?.aborted)return r;ls.delete(t),cs.delete(r)}const n=new rh(e);return ls.set(t,n),n}function tk(e){if(cs.has(e)){if(!e.options.signal?.aborted)return cs.get(e);ls.delete(lh(e.options)),cs.delete(e)}const t=new Z2(e);return cs.set(e,t),t}function Nu(e){return{data:e.currentRows,isLoading:e.isLoading(),lastSyncedAt:e.lastSyncedAt(),isError:e.error!==!1,shape:e,stream:e.stream,error:e.error}}function nk(e,t){return!e||e.isLoading!==t.isLoading||e.lastSyncedAt!==t.lastSyncedAt||e.isError!==t.isError||e.error!==t.error||e.shape.lastOffset!==t.shape.lastOffset||e.shape.handle!==t.shape.handle}function rk(e){return e}function sk({selector:e=rk,...t}){const n=ek(t),r=tk(n),[s,i]=Q([]),[o,a]=Q(!0),[l,c]=Q(!1),[u,d]=Q(null),[f,m]=Q(void 0),w=Nu(r);i(w.data),a(w.isLoading),c(w.isError),d(w.error),m(w.lastSyncedAt);let v=w;const x=r.subscribe(()=>{const A=Nu(r);nk(v,A)&&(i(A.data),a(A.isLoading),c(A.isError),d(A.error),m(A.lastSyncedAt),v=A)});return vt(()=>x()),e({data:s,isLoading:o,isError:l,error:u,lastSyncedAt:f,shape:r,stream:n,get:()=>({data:s(),isLoading:o(),isError:l(),error:u(),lastSyncedAt:f(),shape:r,stream:n})})}var ik=I('<div class="fixed bottom-4 right-4 z-50">'),ok=I('<div class="bg-red-100 text-red-800 px-4 py-2 rounded-md shadow">Sync failed. Please try again.'),ak=I('<div class="bg-blue-100 text-blue-800 px-4 py-2 rounded-md shadow">Syncing data...');function lk(){const[e,t]=Q(!1),[n,r]=Q(null),[s,i]=Q(new AbortController),[o,a]=Q({}),{user:l,getAccessToken:c}=On();Ie(()=>{if(l()){c();const x=["users","projects","reviews","checklists","project_members","review_assignments","checklist_answers"].reduce((E,_)=>(E[_]=sk({url:`${gt.ELECTRIC_SHAPE}`,params:{table:_},signal:s().signal}),E),{});a(x)}}),Ie(()=>{const v=o();Object.values(v).forEach(x=>{x&&typeof x.data=="function"&&x.data()}),w()});async function u(){const v=Ot.tinyStore,x=o(),E=[{name:"projects",data:x.projects?.data()??[]},{name:"users",data:x.users?.data()??[]},{name:"reviews",data:x.reviews?.data()??[]},{name:"checklists",data:x.checklists?.data()??[]},{name:"checklist_answers",data:x.checklist_answers?.data()??[]},{name:"project_members",data:x.project_members?.data()??[]},{name:"review_assignments",data:x.review_assignments?.data()??[]}];for(const{name:_,data:A}of E)if(Array.isArray(A)){v.delTable(_);for(const j of A)if(_==="checklist_answers"&&Array.isArray(j.answers))v.setRow(_,j.id,{...j,answers:JSON.stringify(j.answers)});else if(_==="project_members"){const U=`${j.project_id}::${j.user_id}`;v.setRow(_,U,j)}else if(_==="review_assignments"){const U=`${j.review_id}::${j.user_id}`;v.setRow(_,U,j)}else v.setRow(_,j.id,j)}Ot.persister.save()}let d=null,f=null;function m(v,x){let E;return function(...A){const j=()=>{clearTimeout(E),v(...A)};clearTimeout(E),E=setTimeout(j,x)}}const w=m(async()=>{try{t(!0),await u(),r(null)}catch(v){console.error("Sync error:",v),r(v.message)}finally{t(!1)}},1e3);return Ie(()=>{l()&&w()}),vt(async()=>{s().abort()}),(()=>{var v=ik();return y(v,(()=>{var x=et(()=>!!n());return()=>x()&&ok()})(),null),y(v,(()=>{var x=et(()=>!!e());return()=>x()&&ak()})(),null),v})()}var ck=I('<div class="flex-1 min-h-0 overflow-y-auto">'),uk=I('<div class="h-full border-l border-gray-200 bg-white flex flex-col"><iframe class="w-full h-full"title="PDF Viewer"style=min-width:300px>'),dk=I('<div class="flex flex-col h-screen overflow-y-hidden"><div class="flex flex-1 min-h-0">'),fk=I('<div class="flex-1 flex items-center justify-center">Loading...');function hk(e){const[t,n]=Q(!1),[r,s]=Q(!1),[i,o]=Q(!1),[a,l]=Q(null),[c,u]=Q(null),{user:d}=On(),{dataLoading:f,deleteChecklist:m,setCurrentChecklist:w,getChecklist:v}=Ir(),x=async()=>{try{w(null),alert("All checklists deleted!")}catch(q){console.error("Error removing all checklists:",q),alert("Error deleting checklists!")}finally{s(!1)}},E=()=>{let q="this checklist";const T=a();let g=v(T.checklistId);return g&&(q=g.name||g.title||"Untitled Checklist"),`Are you sure you want to delete ${q}? This action cannot be undone.`},_=()=>s(!1),A=(q,T)=>{console.log("Request to delete checklist id:",T,"from project:",q),l({projectId:q,checklistId:T}),o(!0)},j=async()=>{const q=a();if(!(!q||!q.checklistId))try{console.log("Deleting checklist id:",q.checklistId,"from project:",q.projectId),await m(q.projectId,q.checklistId)}catch(T){console.error("Error deleting checklist:",T),alert("Error deleting checklist!")}finally{o(!1),l(null)}},U=()=>{o(!1),l(null)};return(()=>{var q=dk(),T=q.firstChild;return y(q,k(K_,{toggleSidebar:()=>n(g=>!g),get open(){return t()}}),T),y(T,k(I_,{get open(){return t()},onClose:()=>n(!1),setPdfUrl:u,onDeleteChecklist:A}),null),y(T,k(_e,{get when(){return d()},get children(){return k(lk,{})}}),null),y(T,k(Qt,{class:"flex flex-1",get when(){return!f()},get fallback(){return fk()},get children(){var g=ck();return y(g,()=>e.children),g}}),null),y(T,k(_e,{get when(){return c()},get children(){return k(W_,{direction:"horizontal",min:250,max:1600,initial:500,position:"left",get children(){var g=uk(),p=g.firstChild;return ge(()=>kt(p,"src",c())),g}})}}),null),y(q,k(Cu,{get open(){return i()},title:"Delete checklist?",get description(){return E()},confirmText:"Delete",onCancel:U,onConfirm:j}),null),y(q,k(Cu,{get open(){return r()},title:"Delete all checklists?",description:"Are you sure you want to delete all saved checklists? This action cannot be undone.",confirmText:"Delete all",onCancel:_,onConfirm:x}),null),q})()}var gk=I("<h1>404 - Not Found");function pk(){return gk()}var mk=I("<h1>You are offline, you must be online to access this page.");function wk(){return mk()}var vk=I('<div class="max-w-5xl mx-auto p-6"><h2 class="text-xl font-bold mb-4">Merge AMSTAR2 Checklists</h2><div class="grid grid-cols-3 gap-4 font-mono text-xs"><div class="font-bold text-center">Checklist A</div><div class="font-bold text-center">Checklist B</div><div class="font-bold text-center">Merged Result</div></div><button class="mt-6 px-4 py-2 bg-blue-600 text-white rounded">Save Merged Checklist'),Du=I('<button class="mt-1 text-blue-600 underline">Use this'),yk=I('<div class=contents><div><pre></pre></div><div><pre></pre></div><div class="p-2 border bg-green-50"><pre>');function bk(){const e=vo(),{getChecklist:t}=Ir();console.log("Route params:",decodeURIComponent(e.nameA),e.indexA,decodeURIComponent(e.nameB),e.indexB);const n=t(decodeURIComponent(e.nameA),e.indexA),r=t(decodeURIComponent(e.nameB),e.indexB);console.log("Merging checklists:",n,r);const[s,i]=Q({...n}),o=["q1","q2","q3","q4","q5","q6","q7","q8","q9a","q9b","q10","q11a","q11b","q12","q13","q14","q15","q16"];function a(u){const d=n[u]?.answers,f=r[u]?.answers;return JSON.stringify(d)!==JSON.stringify(f)}function l(u,d){i(f=>({...f,[d]:u==="A"?{...n[d]}:{...r[d]}}))}function c(){alert("not implemented")}return(()=>{var u=vk(),d=u.firstChild,f=d.nextSibling,m=f.firstChild,w=m.nextSibling;w.nextSibling;var v=f.nextSibling;return y(f,k(Ee,{each:o,children:x=>(()=>{var E=yk(),_=E.firstChild,A=_.firstChild,j=_.nextSibling,U=j.firstChild,q=j.nextSibling,T=q.firstChild;return y(A,()=>JSON.stringify(n[x]?.answers,null,1)),y(_,k(_e,{get when(){return a(x)},get children(){var g=Du();return g.$$click=()=>l("A",x),g}}),null),y(U,()=>JSON.stringify(r[x]?.answers,null,1)),y(j,k(_e,{get when(){return a(x)},get children(){var g=Du();return g.$$click=()=>l("B",x),g}}),null),y(T,()=>JSON.stringify(s()[x]?.answers,null,1)),ge(g=>{var p=`p-2 border ${a(x)?"bg-yellow-100":""}`,b=`p-2 border ${a(x)?"bg-yellow-100":""}`;return p!==g.e&&ft(_,g.e=p),b!==g.t&&ft(j,g.t=b),g},{e:void 0,t:void 0}),E})()}),null),v.$$click=c,u})()}tt(["click"]);var Vn=I('<tr class="bg-gray-50 text-xs">'),xk=I('<div class="grid grid-cols-1 gap-2"><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Projects (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Users (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Reviews (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Checklists (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Answers (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Project Members (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody></tbody></table></div></div><div class="bg-white p-2 rounded shadow"><div class="flex justify-between items-center mb-1"><h2 class=font-bold>Review Assignments (<!>)</h2></div><div class="overflow-auto max-h-32"><table class=w-full><thead></thead><tbody>'),_k=I('<div class="p-3 bg-gray-50 text-xs"><h1 class="text-lg font-bold mb-2">TinyBase Store Data'),kk=I('<div class="p-2 bg-blue-100 rounded">Loading...'),Un=I('<th class="p-1 text-left">'),In=I('<tr class="hover:bg-gray-50 border-t border-gray-100">'),Hn=I('<td class="p-1 font-mono max-w-[100px] truncate">');function $k(){const{projects:e,users:t,reviews:n,checklists:r,checklistAnswers:s,projectMembers:i,reviewAssignments:o,state:a,isLoaded:l}=Ot;return(()=>{var c=_k();return c.firstChild,y(c,k(_e,{get when(){return l()},get fallback(){return kk()},get children(){var u=xk(),d=u.firstChild,f=d.firstChild,m=f.firstChild,w=m.firstChild,v=w.nextSibling;v.nextSibling;var x=f.nextSibling,E=x.firstChild,_=E.firstChild,A=_.nextSibling,j=d.nextSibling,U=j.firstChild,q=U.firstChild,T=q.firstChild,g=T.nextSibling;g.nextSibling;var p=U.nextSibling,b=p.firstChild,C=b.firstChild,M=C.nextSibling,N=j.nextSibling,O=N.firstChild,X=O.firstChild,ne=X.firstChild,K=ne.nextSibling;K.nextSibling;var H=O.nextSibling,L=H.firstChild,ee=L.firstChild,z=ee.nextSibling,B=N.nextSibling,F=B.firstChild,oe=F.firstChild,ce=oe.firstChild,we=ce.nextSibling;we.nextSibling;var ke=F.nextSibling,ae=ke.firstChild,re=ae.firstChild,R=re.nextSibling,P=B.nextSibling,W=P.firstChild,se=W.firstChild,G=se.firstChild,pe=G.nextSibling;pe.nextSibling;var le=W.nextSibling,de=le.firstChild,J=de.firstChild,fe=J.nextSibling,rt=P.nextSibling,lt=rt.firstChild,Xe=lt.firstChild,it=Xe.firstChild,We=it.nextSibling;We.nextSibling;var nt=lt.nextSibling,He=nt.firstChild,Ye=He.firstChild,pt=Ye.nextSibling,pn=rt.nextSibling,mn=pn.firstChild,Tt=mn.firstChild,yt=Tt.firstChild,Nt=yt.nextSibling;Nt.nextSibling;var sn=mn.nextSibling,Nn=sn.firstChild,hr=Nn.firstChild,Is=hr.nextSibling;return y(m,()=>e().length,v),y(_,k(_e,{get when(){return e().length>0},get children(){var $e=Vn();return y($e,k(Ee,{get each(){return Object.keys(e()[0])},children:Se=>(()=>{var Te=Un();return y(Te,Se),Te})()})),$e}})),y(A,k(Ee,{get each(){return e()},children:$e=>(()=>{var Se=In();return y(Se,k(Ee,{get each(){return Object.entries($e)},children:([Te,ve])=>(()=>{var Be=Hn();return y(Be,()=>typeof ve=="object"&&ve!==null?JSON.stringify(ve).substring(0,20)+(JSON.stringify(ve).length>20?"...":""):String(ve)),Be})()})),Se})()})),y(q,()=>t().length,g),y(C,k(_e,{get when(){return t().length>0},get children(){var $e=Vn();return y($e,k(Ee,{get each(){return Object.keys(t()[0])},children:Se=>(()=>{var Te=Un();return y(Te,Se),Te})()})),$e}})),y(M,k(Ee,{get each(){return t()},children:$e=>(()=>{var Se=In();return y(Se,k(Ee,{get each(){return Object.entries($e)},children:([Te,ve])=>(()=>{var Be=Hn();return y(Be,()=>typeof ve=="object"&&ve!==null?JSON.stringify(ve).substring(0,20)+(JSON.stringify(ve).length>20?"...":""):String(ve)),Be})()})),Se})()})),y(X,()=>n().length,K),y(ee,k(_e,{get when(){return n().length>0},get children(){var $e=Vn();return y($e,k(Ee,{get each(){return Object.keys(n()[0])},children:Se=>(()=>{var Te=Un();return y(Te,Se),Te})()})),$e}})),y(z,k(Ee,{get each(){return n()},children:$e=>(()=>{var Se=In();return y(Se,k(Ee,{get each(){return Object.entries($e)},children:([Te,ve])=>(()=>{var Be=Hn();return y(Be,()=>typeof ve=="object"&&ve!==null?JSON.stringify(ve).substring(0,20)+(JSON.stringify(ve).length>20?"...":""):String(ve)),Be})()})),Se})()})),y(oe,()=>r().length,we),y(re,k(_e,{get when(){return r().length>0},get children(){var $e=Vn();return y($e,k(Ee,{get each(){return Object.keys(r()[0])},children:Se=>(()=>{var Te=Un();return y(Te,Se),Te})()})),$e}})),y(R,k(Ee,{get each(){return r()},children:$e=>(()=>{var Se=In();return y(Se,k(Ee,{get each(){return Object.entries($e)},children:([Te,ve])=>(()=>{var Be=Hn();return y(Be,()=>typeof ve=="object"&&ve!==null?JSON.stringify(ve).substring(0,20)+(JSON.stringify(ve).length>20?"...":""):String(ve)),Be})()})),Se})()})),y(se,()=>s().length,pe),y(J,k(_e,{get when(){return s().length>0},get children(){var $e=Vn();return y($e,k(Ee,{get each(){return Object.keys(s()[0])},children:Se=>(()=>{var Te=Un();return y(Te,Se),Te})()})),$e}})),y(fe,k(Ee,{get each(){return s()},children:$e=>(()=>{var Se=In();return y(Se,k(Ee,{get each(){return Object.entries($e)},children:([Te,ve])=>(()=>{var Be=Hn();return y(Be,()=>typeof ve=="object"&&ve!==null?JSON.stringify(ve).substring(0,20)+(JSON.stringify(ve).length>20?"...":""):String(ve)),Be})()})),Se})()})),y(Xe,()=>i().length,We),y(Ye,k(_e,{get when(){return i().length>0},get children(){var $e=Vn();return y($e,k(Ee,{get each(){return Object.keys(i()[0])},children:Se=>(()=>{var Te=Un();return y(Te,Se),Te})()})),$e}})),y(pt,k(Ee,{get each(){return i()},children:$e=>(()=>{var Se=In();return y(Se,k(Ee,{get each(){return Object.entries($e)},children:([Te,ve])=>(()=>{var Be=Hn();return y(Be,()=>typeof ve=="object"&&ve!==null?JSON.stringify(ve).substring(0,20)+(JSON.stringify(ve).length>20?"...":""):String(ve)),Be})()})),Se})()})),y(Tt,()=>o().length,Nt),y(hr,k(_e,{get when(){return o().length>0},get children(){var $e=Vn();return y($e,k(Ee,{get each(){return Object.keys(o()[0])},children:Se=>(()=>{var Te=Un();return y(Te,Se),Te})()})),$e}})),y(Is,k(Ee,{get each(){return o()},children:$e=>(()=>{var Se=In();return y(Se,k(Ee,{get each(){return Object.entries($e)},children:([Te,ve])=>(()=>{var Be=Hn();return y(Be,()=>typeof ve=="object"&&ve!==null?JSON.stringify(ve).substring(0,20)+(JSON.stringify(ve).length>20?"...":""):String(ve)),Be})()})),Se})()})),u}}),null),c})()}const ch="/amstar2-checklist-scoring-app";function vs(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function Sk(){return k(Bg,{base:ch,get children(){return k(Ct,{path:"/",component:hk,get children(){return[k(Ct,{path:"/",component:Zg}),k(Ct,{path:"/dashboard",component:Nb}),k(Ct,{path:"/dataviewer",component:$k}),k(Ct,{path:"/projects/:projectId",component:kb}),k(Ct,{path:"/projects/:projectId/reviews/:reviewId/checklists/:checklistId",component:Bc}),k(Ct,{path:"/checklist/:checklistId",component:Bc}),k(Ct,{path:"/merge/:checklistIdA/:checklistIdB",component:bk}),k(Ct,{path:"/signin",component:()=>k(xi,{get children(){return k(Ix,{})}})}),k(Ct,{path:"/signup",component:()=>k(xi,{get children(){return k(Zx,{})}})}),k(Ct,{path:"/verify-email",component:()=>k(xi,{get children(){return k($_,{})}})}),k(Ct,{path:"/reset-password",component:()=>k(xi,{get children(){return k(j_,{})}})}),k(Ct,{path:"*",component:pk})]}})}})}function xi(e){const t=xf();return k(_e,{get when(){return t()},get fallback(){return k(wk,{})},get children(){return e.children}})}function Ck(){return k(Sk,{})}og(()=>k(Ck,{}),document.getElementById("root"));export{gt as A,kc as _,nn as a,Ik as p,xf as u};
